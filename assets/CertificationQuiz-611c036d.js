import{a as o,j as n,F as y}from"./jsx-runtime-095bf462.js";import{r as l,R as E}from"./index-8db94870.js";import{u as Q,m as z,n as w,M as H}from"./SynapseClient-2be0d786.js";import"./getEndpoint-ac94413e.js";import"./OrientationBanner-d057b0e6.js";import{d as p}from"./ToastMessage-cdf61efe.js";import{M as B}from"./SynapseTableCell-dd4aaae9.js";import{T as m}from"./Typography-c5b8eeae.js";import{L}from"./Link-9ad54ce1.js";import{B as x}from"./Button-d3d5b3a8.js";import{H as v}from"./IconSvg-0d658098.js";const C=()=>{const{accessToken:i}=Q(),T=z(),[t,_]=l.useState(),[d,u]=l.useState([]),[r,h]=l.useState(),f=E.useRef(null),I="https://help.synapse.org/docs/Getting-Started.2055471150.html",g=async()=>{try{_(await w.getCertifyQuiz(i))}catch(e){T(e)}};l.useEffect(()=>{g()},[i]);const R=(e,a)=>{const c=[...d.filter(s=>s.questionIndex!==e),{questionIndex:e,answerIndex:[a],concreteType:H}];u(c)},S=()=>{var e;(e=f.current)==null||e.reset(),u([]),h(void 0),g()},k=async()=>{try{if(t&&t.questions.length===d.length){const e={quizId:t.id,questionResponses:d},a=await w.postCertifiedUserTestResponse(i,e);h(a),window.scrollTo(0,0)}else p("Please answer all of the questions and try again.","warning")}catch(e){p(e.reason,"danger")}},b=e=>e?{content:n(y,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(e,"_blank"),color:"primary"}:void 0;return o("div",{className:"bootstrap-4-backport CertificationQuiz",children:[r&&n("div",{children:o(y,{children:[!r.passed&&n("div",{className:"failBanner",children:"Quiz Failed"}),o(m,{variant:"hintText",children:["Score: ",r.score," / ",t==null?void 0:t.questions.length]}),r.passed?p(`You passed the Synapse Certification Quiz on ${r.passedOn}`,"success"):o(m,{variant:"body1",children:["Please review the items shown in red below, and"," ",n(L,{href:"#",onClick:e=>{e.preventDefault(),S()},children:"try again"}),"."]})]})}),o("div",{className:"CertificationQuiz__container",children:[o(x,{onClick:()=>window.open(I,"_blank"),className:"help-button",color:"secondary",variant:"contained",children:[n(v,{className:"HelpButton",style:{marginRight:"4px"}}),"Help"]}),t?n("div",{dangerouslySetInnerHTML:{__html:t.header}}):"",n("form",{ref:f,onSubmit:e=>e.preventDefault(),children:n("ol",{children:t==null?void 0:t.questions.map(e=>{var a,c;return o("li",{role:e.exclusive?"radiogroup":void 0,children:[n("div",{dangerouslySetInnerHTML:{__html:e.prompt},className:r&&((c=(a=r.corrections)==null?void 0:a.find(s=>s.question.questionIndex===e.questionIndex))!=null&&c.isCorrect?"":"incorrectQuestion")}),e.answers.map(s=>o("div",{children:[n("input",{id:`${e.questionIndex}-${s.answerIndex}`,name:`${e.questionIndex}`,type:e.exclusive?"radio":"checkbox",value:s.answerIndex,onClick:N=>R(e.questionIndex,Number(N.currentTarget.value)),disabled:!!r}),n("label",{style:{fontWeight:400},htmlFor:`${e.questionIndex}-${s.answerIndex}`,children:s.prompt})]},`${e.questionIndex}-${s.answerIndex}`)),n(B,{contentProps:{markdown:e.helpText},placement:"right",actionButton:b(e.docLink),showCloseButton:!0,children:o(m,{variant:"hintText",color:"primary",children:[n(v,{className:"HelpButton",style:{marginRight:"4px"}}),"Need help answering this question?"]})})]},e.questionIndex)})})}),!r&&n(x,{className:"help-button",color:"primary",variant:"contained",size:"large",onClick:()=>{k()},children:"Submit"})]})]})};try{C.displayName="CertificationQuiz",C.__docgenInfo={description:"",displayName:"CertificationQuiz",props:{}}}catch{}export{C};
//# sourceMappingURL=CertificationQuiz-611c036d.js.map
