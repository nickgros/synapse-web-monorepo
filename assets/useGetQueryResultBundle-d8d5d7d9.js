import{r as d}from"./index-8db94870.js";import{u as y,am as i,S as c}from"./SynapseClient-c43c6534.js";import{u as R}from"./useInfiniteQuery-f8eb063d.js";import{w as p,m as Q}from"./SynapseConstants-1ebc8be6.js";import{m as T}from"./merge-8600c060.js";const f={staleTime:1e3*60*30};function A(e,r){const{accessToken:n,keyFactory:t}=y();return i(t.getEntityTableQueryResultQueryKey(e,!1),()=>c.getQueryTableResults(e,n),{...f,...r})}function k(e,r,n){const{accessToken:t,keyFactory:u}=y();return i(u.getEntityTableQueryResultWithAsyncStatusQueryKey(e,!1),()=>c.getQueryTableAsyncJobResults(e,t,n),{...f,...r})}function S(e,r,n){const t=e.partMask&Q,u={...e,partMask:t},s=t>0?r==null?void 0:r.enabled:!1;return k(u,{...r,enabled:s},n)}function E(e,r,n){const t=e.partMask&~Q,u={...e,query:{...e.query,offset:void 0,limit:void 0,sort:void 0},partMask:t},s=t>0?r==null?void 0:r.enabled:!1;return k(u,{...r,enabled:s},n)}function B(e,r,n){const t=S(e,r,n),u=E(e,r,n);return d.useMemo(()=>t.status==="error"?t:u.status==="error"?u:t.status==="loading"?t:u.status==="loading"?u:t.status==="idle"?T({},t,u):T({},u,t),[t,u])}function G(e,r,n){const{accessToken:t,keyFactory:u}=y();return R(u.getEntityTableQueryResultQueryKey(e,!0),s=>{const a=s.pageParam?parseInt(s.pageParam):0;return c.getQueryTableAsyncJobResults({...e,query:{...e.query,offset:a},partMask:a!==0?e.partMask&Q:e.partMask},t,n)},{...f,...r,select:s=>{const a=s==null?void 0:s.pages[0];if(a.responseBody)for(let o=0;o<s.pages.length;o++){const l=s.pages[o];l.responseBody!=null&&(s.pages[o].responseBody={...a.responseBody,queryResult:l.responseBody.queryResult})}return s},getPreviousPageParam:s=>{if(s.jobState!=="COMPLETE")return;const a=s.requestBody;if(a.query.offset==null||a.query.offset===0)return;const o=a.query.limit??p;return Math.max(a.query.offset-o,0)},getNextPageParam:(s,a)=>{var m,b;if(s.jobState!=="COMPLETE")return;const o=s.requestBody,l=o.query.limit??p,g=(m=a[0].responseBody)==null?void 0:m.queryCount;if(!(g!=null&&(o.query.offset??0)+l>=g))return((b=s.responseBody.queryResult)==null?void 0:b.queryResults.rows.length)===l?(o.query.offset??0)+l:void 0}})}function w(e,r){const{accessToken:n,keyFactory:t}=y();return i(t.getFullTableQueryResultQueryKey(e),()=>c.getFullQueryTableResults(e,n),{...f,...r})}export{A as a,G as b,w as c,B as u};
//# sourceMappingURL=useGetQueryResultBundle-d8d5d7d9.js.map
