{"version":3,"file":"SynapseContext-d313cbec.js","sources":["../../../../node_modules/.pnpm/cookie@0.4.2/node_modules/cookie/index.js","../../src/lib/utils/APIConstants.ts","../../src/lib/utils/functions/TypeUtils.ts","../../src/lib/utils/synapseTypes/Entity/FileEntity.ts","../../src/lib/utils/synapseTypes/Table/Dataset.ts","../../src/lib/utils/synapseTypes/Table/EntityView.ts","../../src/lib/utils/synapseTypes/Table/SubmissionView.ts","../../src/lib/utils/synapseTypes/Table/TableEntity.ts","../../src/lib/utils/synapseTypes/Table/View.ts","../../src/lib/utils/synapseTypes/Table/MaterializedView.ts","../../src/lib/utils/synapseTypes/Table/Table.ts","../../src/lib/utils/synapseTypes/Entity/Entity.ts","../../src/lib/utils/synapseTypes/Entity/Link.ts","../../src/lib/utils/synapseTypes/EntityType.ts","../../src/lib/utils/synapseTypes/FileHandleAssociation.ts","../../src/lib/utils/synapseTypes/ObjectType.ts","../../src/lib/utils/synapseTypes/UserGroupHeader.ts","../../../../node_modules/.pnpm/react-error-boundary@3.1.4_react@18.2.0/node_modules/react-error-boundary/dist/react-error-boundary.esm.js","../../src/lib/utils/SynapseClientError.ts","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/core/subscribable.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/core/utils.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/core/focusManager.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/core/onlineManager.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/core/retryer.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/core/notifyManager.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/core/logger.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/core/queryObserver.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/reactBatchedUpdates.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/setBatchUpdatesFn.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/logger.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/setLogger.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/QueryClientProvider.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/QueryErrorResetBoundary.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/utils.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/useBaseQuery.js","../../../../node_modules/.pnpm/react-query@3.39.1_react-dom@18.2.0_react@18.2.0/node_modules/react-query/es/react/useQuery.js","../../../../node_modules/.pnpm/spark-md5@3.0.2/node_modules/spark-md5/spark-md5.js","../../../../node_modules/.pnpm/universal-cookie@4.0.4/node_modules/universal-cookie/es6/utils.js","../../../../node_modules/.pnpm/universal-cookie@4.0.4/node_modules/universal-cookie/es6/Cookies.js","../../src/lib/utils/functions/ObjectUtils.ts","../../src/lib/utils/synapseTypes/DiscussionBundle.ts","../../src/lib/utils/functions/calculateFriendlyFileSize.ts","../../src/lib/utils/synapseTypes/ErrorResponse.ts","../../src/lib/utils/SynapseClient.ts","../../../../node_modules/.pnpm/@mui+material@5.11.16_@emotion+react@11.10.6_@emotion+styled@11.10.6_@types+react@18.0.27_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Collapse/collapseClasses.js","../../../../node_modules/.pnpm/@mui+material@5.11.16_@emotion+react@11.10.6_@emotion+styled@11.10.6_@types+react@18.0.27_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Collapse/Collapse.js","../../src/lib/assets/GoogleIcon24.tsx","../../src/lib/containers/auth/AuthenticationMethodSelection.tsx","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isObject.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isFunction.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_coreJsData.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isMasked.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_toSource.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsNative.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getValue.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getNative.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_WeakMap.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isLength.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isArrayLike.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isPrototype.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsArguments.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isArguments.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/stubFalse.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isBuffer.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsTypedArray.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseUnary.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_nodeUtil.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isTypedArray.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_overArg.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_nativeKeys.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseKeys.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Map.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_DataView.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Promise.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Set.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getTag.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isEmpty.js","../../src/lib/utils/synapseTypes/docker/DockerRepository.ts","../../src/lib/utils/functions/EntityTypeUtils.ts","../../src/lib/utils/functions/ArrayUtils.ts","../../src/lib/utils/hooks/SynapseAPI/KeyFactory.ts","../../src/lib/utils/hooks/SynapseAPI/user/useUserBundle.ts","../../src/lib/containers/JiraIssueCollector.tsx","../../src/lib/containers/SignInButton.tsx","../../src/lib/containers/error/ErrorBanner.tsx","../../src/lib/utils/SynapseContext.tsx"],"sourcesContent":["/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n\n/**\n * Module variables.\n * @private\n */\n\nvar decode = decodeURIComponent;\nvar encode = encodeURIComponent;\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {}\n  var opt = options || {};\n  var pairs = str.split(';')\n  var dec = opt.decode || decode;\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i];\n    var index = pair.indexOf('=')\n\n    // skip things that don't look like key=value\n    if (index < 0) {\n      continue;\n    }\n\n    var key = pair.substring(0, index).trim()\n\n    // only assign once\n    if (undefined == obj[key]) {\n      var val = pair.substring(index + 1, pair.length).trim()\n\n      // quoted values\n      if (val[0] === '\"') {\n        val = val.slice(1, -1)\n      }\n\n      obj[key] = tryDecode(val, dec);\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid')\n    }\n\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + opt.expires.toUTCString();\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string'\n      ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n","/**\n * Separating API endpoints into their own constants file\n */\n\nimport { getEndpoint, BackendDestinationEnum } from './functions/getEndpoint'\n\nexport const BACKEND_ENDPOINT = `${getEndpoint(\n  BackendDestinationEnum.REPO_ENDPOINT,\n)}`\n\nexport const REPO = `/repo/v1`\nexport const AUTH = `/auth/v1`\nexport const FILE = `/file/v1`\n\nconst ASYNC_START = '/async/start'\nconst ASYNC_GET = '/async/get'\n\nexport const ENTITY = `${REPO}/entity`\nexport const ENTITY_ID = (id: string | number) => `${REPO}/entity/${id}`\n/**\n * Some services allow (but do not require) you to specify the version in the path.\n */\nexport const ENTITY_ID_VERSION = (\n  id: string | number,\n  version?: string | number,\n) => `${REPO}/entity/${id}${version ? `/version/${version}` : ''}`\nexport const ENTITY_ID_VERSIONS = (id: string | number) =>\n  `${REPO}/entity/${id}/version`\nexport const ENTITY_BUNDLE_V2 = (\n  id: string | number,\n  version?: string | number,\n) => `${ENTITY_ID_VERSION(id, version)}/bundle2`\nexport const ENTITY_ACCESS = (id: string | number) =>\n  `${REPO}/entity/${id}/access`\n\nexport const ENTITY_PATH = (id: string | number) => `${ENTITY_ID(id)}/path`\nexport const ENTITY_HEADER_BY_ID = (id: string | number) =>\n  `${ENTITY_ID(id)}/type`\nexport const ENTITY_HEADERS = `${REPO}/entity/header`\n\nexport const ENTITY_JSON = (id: string | number) => `${REPO}/entity/${id}/json`\n\nexport const ENTITY_SCHEMA = (id: string | number) =>\n  `${REPO}/entity/${id}/schema`\nexport const ENTITY_SCHEMA_BINDING = (id: string | number) =>\n  `${ENTITY_SCHEMA(id)}/binding`\nexport const ENTITY_SCHEMA_VALIDATION = (id: string | number) =>\n  `${ENTITY_SCHEMA(id)}/validation`\n\nexport const ENTITY_ACCESS_REQUIREMENTS = (entityId: string | number) =>\n  `${ENTITY_ID(entityId)}/accessRequirement`\n\nexport const TABLE_QUERY_ASYNC_START = (id: string | number) =>\n  `${ENTITY_ID(id)}/table/query/async/start`\n\nexport const TABLE_QUERY_ASYNC_GET = (\n  entityId: string | number,\n  asyncJobToken: string,\n) => `${ENTITY_ID(entityId)}/table/query/async/get/${asyncJobToken}`\n\nexport const ASYNCHRONOUS_JOB_TOKEN = (asyncJobToken: string) =>\n  `${REPO}/asynchronous/job/${asyncJobToken}`\n\nexport const USER_PROFILE_ENDPOINT = `${REPO}/userProfile`\n\nexport const SCHEMA = `${REPO}/schema`\nexport const REGISTERED_SCHEMA = `${REPO}/schema/type/registered`\nexport const REGISTERED_SCHEMA_ID = (schema$id: string | number) =>\n  `${REPO}/schema/type/registered/${schema$id}`\nexport const SCHEMA_VALIDATION_START = `${SCHEMA}/type/validation${ASYNC_START}`\nexport const SCHEMA_VALIDATION_GET = (asyncJobId: string | number) =>\n  `${SCHEMA}/type/validation${ASYNC_GET}/${asyncJobId}`\n\nexport const USER = `${REPO}/user`\nexport const USER_BUNDLE = `${USER}/bundle`\nexport const USER_ID = (id: string | number) => `${USER}/${id}`\nexport const USER_ID_BUNDLE = (id: string | number) => `${USER_ID(id)}/bundle`\n\nexport const USER_PROFILE = `${REPO}/userProfile`\nexport const USER_PROFILE_ID = (id: string | number) => `${USER_PROFILE}/${id}`\n\nexport const NOTIFICATION_EMAIL = `${REPO}/notificationEmail`\nexport const ALIAS_AVAILABLE = `${REPO}/principal/available`\nexport const REGISTER_ACCOUNT_STEP_1 = (portalEndpoint: string) =>\n  `${REPO}/account/emailValidation?portalEndpoint=${portalEndpoint}`\nexport const REGISTER_ACCOUNT_STEP_2 = `${REPO}/account2`\nexport const SIGN_TERMS_OF_USE = `${AUTH}/termsOfUse2`\nexport const VERIFICATION_SUBMISSION = `${REPO}/verificationSubmission`\n\nexport const ACCESS_REQUIREMENT_SEARCH = `${REPO}/accessRequirement/search`\nexport const ACCESS_REQUEST_SUBMISSION_SEARCH = `${REPO}/dataAccessSubmission/search`\n\nexport const ACCESS_REQUIREMENT_BY_ID = (id: string | number) =>\n  `${REPO}/accessRequirement/${id}`\n\nexport const ACCESS_REQUIREMENT_ACL = (id: string | number) =>\n  ACCESS_REQUIREMENT_BY_ID(id) + '/acl'\n\nexport const ACCESS_REQUIREMENT_STATUS = (id: string | number) =>\n  ACCESS_REQUIREMENT_BY_ID(id) + '/status'\n\nexport const ACCESS_REQUIREMENT_WIKI_PAGE_KEY = (id: string | number) =>\n  // Note that this is `access_requirement` not `accessRequirement`!\n  `${REPO}/access_requirement/${id}/wikikey`\n\nexport const ACCESS_REQUIREMENT_WIKI_PAGE = (\n  accessRequirementId: string | number,\n  wikiId: string | number,\n) =>\n  // Note that this is `access_requirement` not `accessRequirement`!\n  `${REPO}/access_requirement/${accessRequirementId}/wiki/${wikiId}`\n\nexport const FAVORITES = `${REPO}/favorite`\n\nexport const USER_GROUP_HEADERS = `${REPO}/userGroupHeaders`\nexport const USER_GROUP_HEADERS_BATCH = `${REPO}/userGroupHeaders/batch`\n\nexport const DATA_ACCESS_SUBMISSION_BY_ID = (id: string | number) =>\n  `${REPO}/dataAccessSubmission/${id}`\n\nexport const PROFILE_IMAGE_PREVIEW = (userId: string) =>\n  `${REPO}/userProfile/${userId}/image/preview`\n\nexport const APPROVED_SUBMISSION_INFO = (\n  accessRequirementId: string | number,\n) => ACCESS_REQUIREMENT_BY_ID(accessRequirementId) + `/approvedSubmissionInfo`\n\nexport const EVALUATION = `${REPO}/evaluation`\nexport const EVALUATION_BY_ID = (id: string | number) => EVALUATION + `/${id}`\nexport const EVALUATIONS_BY_ID = (ids: string[] | number[]) =>\n  EVALUATION + `/?evaluationIds=${ids.join(',')}&limit=${ids.length}`\n\nexport const ACTIVITY_FOR_ENTITY = (entityId: string, versionNumber?: string) =>\n  versionNumber\n    ? `${REPO}/entity/${entityId}/version/${versionNumber}/generatedBy`\n    : `${REPO}/entity/${entityId}/generatedBy`\n\nexport const TRASHCAN = `${REPO}/trashcan`\nexport const TRASHCAN_VIEW = `${TRASHCAN}/view`\nexport const TRASHCAN_RESTORE = (id: string) => `${TRASHCAN}/restore/${id}`\nexport const TRASHCAN_PURGE = (id: string) => `${TRASHCAN}/purge/${id}`\n\nexport const TEAM = (teamId: string | number) => `${REPO}/team/${teamId}`\nexport const TEAM_ID_MEMBER_ID = (\n  teamId: string | number,\n  memberId: string | number,\n) => TEAM(teamId) + `/member/${memberId}`\nexport const TEAM_MEMBERS = (teamId: string | number) =>\n  `${REPO}/teamMembers/${teamId}`\n\nconst notificationUnsubscribeEndpoint = 'https://www.synapse.org/#!SignedToken:'\nconst teamEndpoint = 'https://www.synapse.org/#!Team:'\n\nexport const TEAM_MEMBER = `${REPO}/teamMember/?teamEndpoint=${teamEndpoint}&notificationUnsubscribeEndpoint=${notificationUnsubscribeEndpoint}`\nexport const TEAM_ID_MEMBER_ID_WITH_NOTIFICATION = (\n  teamId: string | number,\n  memberId: string | number,\n) =>\n  TEAM_ID_MEMBER_ID(teamId, memberId) +\n  `?teamEndpoint=${teamEndpoint}&notificationUnsubscribeEndpoint=${notificationUnsubscribeEndpoint}`\nexport const MEMBERSHIP_INVITATION = (id: string) =>\n  `${REPO}/membershipInvitation/${id}`\nexport const INVITEE_VERIFICATION_SIGNED_TOKEN = (id: string) =>\n  `${REPO}/membershipInvitation/${id}/inviteeVerificationSignedToken`\nexport const BIND_INVITATION_TO_AUTHENTICATED_USER = (id: string) =>\n  `${REPO}/membershipInvitation/${id}/inviteeId`\n\nexport const FORUM = `${REPO}/forum`\nexport const FORUM_THREAD = (id: string) => `${FORUM}/${id}/threads`\n\nexport const THREAD = `${REPO}/thread`\nexport const THREAD_ID = (id: string) => `${THREAD}/${id}`\nexport const THREAD_REPLIES = (id: string) => `${THREAD_ID(id)}/replies`\n\nexport const DOI = `${REPO}/doi`\nexport const DOI_ASSOCIATION = `${DOI}/association`\n\nexport const ACCESS_APPROVAL = `${REPO}/accessApproval`\nexport const ACCESS_APPROVAL_BY_ID = (id: string | number) =>\n  `${ACCESS_APPROVAL}/${id}`\n\nexport const DATA_ACCESS_REQUEST = `${REPO}/dataAccessRequest`\nexport const DATA_ACCESS_REQUEST_SUBMISSION = (id: string | number) =>\n  `${DATA_ACCESS_REQUEST}/${id}/submission`\nexport const ACCESS_REQUIREMENT_DATA_ACCESS_REQUEST_FOR_UPDATE = (\n  accessRequirementId: string | number,\n) =>\n  `${ACCESS_REQUIREMENT_BY_ID(accessRequirementId)}/dataAccessRequestForUpdate`\n\nexport const RESEARCH_PROJECT = `${REPO}/researchProject`\nexport const ACCESS_REQUIREMENT_RESEARCH_PROJECT_FOR_UPDATE = (\n  accessRequirementId: string | number,\n) => `${ACCESS_REQUIREMENT_BY_ID(accessRequirementId)}/researchProjectForUpdate`\n\nexport const FILE_HANDLE = `${FILE}/fileHandle`\nexport const FILE_HANDLE_BATCH = `${FILE_HANDLE}/batch`\n\nexport const PROJECTS = `${REPO}/projects`\n","/**\n * TypeScript doesn't support nominal typing, but we can utilize the concreteType field in Synapse objects to identify the class of an object. This function\n * will return a function that can be used as a type guard using the concreteType field.\n *\n * Generic `TTypeChecked` is the type that you are trying to verify/assert.\n * Generic `ObjectType` is optional and can be used to require a specific interface or type before calling this method. Defaults to `unknown`.\n *\n * @param expectedConcreteType\n * @returns a function that checks if a given object is an instance of `TTypeChecked` using the expected concrete type value.\n */\nexport function isTypeViaConcreteTypeFactory<\n  TTypeChecked extends ObjectType, // The type that you are trying to verify/assert\n  ObjectType extends { concreteType: string } = { concreteType: string },\n>(...expectedConcreteTypes: TTypeChecked['concreteType'][]) {\n  return (object: ObjectType): object is TTypeChecked =>\n    !!(\n      object &&\n      typeof object === 'object' &&\n      'concreteType' in object &&\n      expectedConcreteTypes.includes(object['concreteType'])\n    )\n}\n","import { VersionableEntity } from './Entity'\nimport { isTypeViaConcreteTypeFactory } from '../../functions/TypeUtils'\n\nexport const FILE_ENTITY_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.FileEntity'\nexport type FILE_ENTITY_CONCRETE_TYPE = typeof FILE_ENTITY_CONCRETE_TYPE_VALUE\n\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/FileEntity.html\nexport interface FileEntity extends VersionableEntity {\n  concreteType: FILE_ENTITY_CONCRETE_TYPE\n  dataFileHandleId: string // \tID of the file associated with this entity.\n  fileNameOverride?: string // \tAn optional replacement for the name of the uploaded file. This is distinct from the entity name. If omitted the file will retain its original name.\n}\n\nexport const isFileEntity = isTypeViaConcreteTypeFactory<FileEntity>(\n  FILE_ENTITY_CONCRETE_TYPE_VALUE,\n)\n","import { View } from './View'\n\n// http://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/EntityRef.html\nexport interface EntityRef {\n  entityId: string\n  versionNumber: number\n}\n\n/**\n * https://docs.synapse.org/rest/org/sagebionetworks/repo/model/table/EntityRefCollectionView.html\n */\nexport interface EntityRefCollectionView extends View {\n  items?: EntityRef[] // items is undefined on new collections\n}\n\nexport const DATASET_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.Dataset'\nexport type DATASET_CONCRETE_TYPE = typeof DATASET_CONCRETE_TYPE_VALUE\nexport interface Dataset extends EntityRefCollectionView {\n  concreteType: DATASET_CONCRETE_TYPE\n}\n\nexport const DATASET_COLLECTION_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.DatasetCollection'\nexport type DATASET_COLLECTION_CONCRETE_TYPE =\n  typeof DATASET_COLLECTION_CONCRETE_TYPE_VALUE\nexport interface DatasetCollection extends EntityRefCollectionView {\n  concreteType: DATASET_COLLECTION_CONCRETE_TYPE\n}\n","import { View } from './View'\n\nexport const ENTITY_VIEW_TYPE_MASK_FILE = 0x01\nexport const ENTITY_VIEW_TYPE_MASK_PROJECT = 0x02\nexport const ENTITY_VIEW_TYPE_MASK_TABLE = 0x04\nexport const ENTITY_VIEW_TYPE_MASK_FOLDER = 0x08\nexport const ENTITY_VIEW_TYPE_MASK_VIEW = 0x10\nexport const ENTITY_VIEW_TYPE_MASK_DOCKER = 0x20\nexport const ENTITY_VIEW_TYPE_MASK_SUBMISSIONVIEW = 0x40\nexport const ENTITY_VIEW_TYPE_MASK_DATASET = 0x80\n\nexport const ENTITY_VIEW_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.EntityView'\nexport type ENTITY_VIEW_CONCRETE_TYPE = typeof ENTITY_VIEW_CONCRETE_TYPE_VALUE\n\nexport interface EntityView extends View {\n  concreteType: ENTITY_VIEW_CONCRETE_TYPE\n  /** The list of container ids that define the scope of this view. */\n  scopeIds: string[]\n  /** Bit mask representing the types to include in the view. The following are the possible types (type=): File=0x01, Project=0x02, Table=0x04, Folder=0x08, View=0x10, Docker=0x20. */\n  viewTypeMask: number\n}\n","import { View } from './View'\n\nexport const SUBMISSION_VIEW_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.SubmissionView'\nexport type SUBMISSION_VIEW_CONCRETE_TYPE =\n  typeof SUBMISSION_VIEW_CONCRETE_TYPE_VALUE\n\n/**\n * A view of evaluation submissions whose scope is defined by the evaluation ids the submissions are part of. The user must have READ_PRIVATE_SUBMISSION access on each of the evaluations in the scope.\n *\n * https://docs.synapse.org/rest/org/sagebionetworks/repo/model/table/SubmissionView.html\n */\nexport interface SubmissionView extends View {\n  concreteType: SUBMISSION_VIEW_CONCRETE_TYPE\n  /** The list of container ids that define the scope of this view. */\n  scopeIds: string[]\n}\n","import { Table } from './Table'\n\nexport const TABLE_ENTITY_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.TableEntity'\nexport type TABLE_ENTITY_CONCRETE_TYPE = typeof TABLE_ENTITY_CONCRETE_TYPE_VALUE\n\n// https://docs.synapse.org/rest/org/sagebionetworks/repo/model/table/TableEntity.html\nexport interface TableEntity extends Table {\n  concreteType: TABLE_ENTITY_CONCRETE_TYPE\n}\n","import {\n  DATASET_CONCRETE_TYPE_VALUE,\n  DATASET_COLLECTION_CONCRETE_TYPE_VALUE,\n  ENTITY_VIEW_CONCRETE_TYPE_VALUE,\n  SUBMISSION_VIEW_CONCRETE_TYPE_VALUE,\n} from '.'\nimport { Table } from './Table'\n\nexport const VIEW_CONCRETE_TYPE_VALUES = [\n  ENTITY_VIEW_CONCRETE_TYPE_VALUE,\n  SUBMISSION_VIEW_CONCRETE_TYPE_VALUE,\n  DATASET_CONCRETE_TYPE_VALUE,\n  DATASET_COLLECTION_CONCRETE_TYPE_VALUE,\n] as const\n\nexport type VIEW_CONCRETE_TYPE = typeof VIEW_CONCRETE_TYPE_VALUES[number]\n\n// https://docs.synapse.org/rest/org/sagebionetworks/repo/model/table/View.html\n\n// The View interface only exists in\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface View extends Table {\n  concreteType: VIEW_CONCRETE_TYPE\n}\n","import { Table } from './Table'\n\nexport const MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.MaterializedView'\nexport type MATERIALIZED_VIEW_CONCRETE_TYPE =\n  typeof MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE\n\nexport interface MaterializedView extends Table {\n  concreteType: MATERIALIZED_VIEW_CONCRETE_TYPE\n  definingSQL: string\n}\n","import { VIEW_CONCRETE_TYPE_VALUES } from '.'\nimport { VersionableEntity } from '../Entity/Entity'\nimport { MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE } from './MaterializedView'\nimport { TABLE_ENTITY_CONCRETE_TYPE_VALUE } from './TableEntity'\n\nexport const TABLE_CONCRETE_TYPE_VALUES = [\n  TABLE_ENTITY_CONCRETE_TYPE_VALUE,\n  ...VIEW_CONCRETE_TYPE_VALUES,\n  MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE,\n] as const\n\nexport type TABLE_CONCRETE_TYPE = typeof TABLE_CONCRETE_TYPE_VALUES[number]\n\n// https://docs.synapse.org/rest/org/sagebionetworks/repo/model/table/Table.html\nexport interface Table extends VersionableEntity {\n  columnIds: string[]\n  concreteType: TABLE_CONCRETE_TYPE\n  isSearchEnabled: boolean\n}\n","import { FILE_ENTITY_CONCRETE_TYPE_VALUE } from './FileEntity'\nimport { LINK_CONCRETE_TYPE } from './Link'\nimport { TABLE_CONCRETE_TYPE_VALUES } from '../Table/Table'\nimport { DOCKER_REPOSITORY_CONCRETE_TYPE } from '../docker/DockerRepository'\n\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/Entity.html\n\nexport interface Entity {\n  /** The name of this entity? */\n  name: string\n  /** The description of this entity. */\n  description?: string\n  /** The unique immutable ID for this entity. A new ID will be generated for new Entities. Once issued, this ID is guaranteed to never change or be re-issued */\n  readonly id?: string\n  /** Synapse employs an Optimistic Concurrency Control (OCC) scheme to handle concurrent updates. Since the E-Tag changes every time an entity is updated it is used to detect when a client's current representation of an entity is out-of-date. */\n  readonly etag?: string\n  /** The date this entity was created. */\n  readonly createdOn?: string\n  /** The date this entity was last modified. */\n  readonly modifiedOn?: string\n  /** The ID of the user that created this entity. */\n  readonly createdBy?: string\n  /** The ID of the user that last modified this entity. */\n  readonly modifiedBy?: string\n  /** The ID of the Entity that is the parent of this Entity. */\n  parentId?: string\n  /** Indicates which implementation of Entity this object represents. */\n  readonly concreteType: ENTITY_CONCRETE_TYPE\n}\n\nexport const FOLDER_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.Folder'\nexport type FOLDER_CONCRETE_TYPE = typeof FOLDER_CONCRETE_TYPE_VALUE\n\nexport const PROJECT_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.Project'\nexport type PROJECT_CONCRETE_TYPE = typeof PROJECT_CONCRETE_TYPE_VALUE\n\n// This is not a real object in Synapse, merely a collection of potential string values to represent the \"concreteType\" field on Entities\nexport type ENTITY_CONCRETE_TYPE =\n  | LINK_CONCRETE_TYPE\n  | DOCKER_REPOSITORY_CONCRETE_TYPE\n  | VERSIONABLE_ENTITY_CONCRETE_TYPE\n  | FOLDER_CONCRETE_TYPE\n  | PROJECT_CONCRETE_TYPE\n\nexport interface Versionable {\n  /* The version number issued to this version on the object */\n  versionNumber?: number\n}\n\nexport const VERSIONABLE_ENTITY_CONCRETE_TYPE_VALUES = [\n  FILE_ENTITY_CONCRETE_TYPE_VALUE,\n  ...TABLE_CONCRETE_TYPE_VALUES,\n] as const\n\nexport type VERSIONABLE_ENTITY_CONCRETE_TYPE =\n  typeof VERSIONABLE_ENTITY_CONCRETE_TYPE_VALUES[number]\n\nexport interface VersionableEntity extends Entity, Versionable {\n  /* The version label for this entity */\n  versionLabel?: string\n  /* The version comment for this entity */\n  versionComment?: string\n  /* If this is the latest version of the object */\n  isLatestVersion?: boolean\n  concreteType: VERSIONABLE_ENTITY_CONCRETE_TYPE\n}\n\n// Possible value types in an entity JSON object.\nexport type EntityJsonValue =\n  | string\n  | number\n  | boolean\n  | string[]\n  | number[]\n  | boolean[]\n  | undefined\n\n// Entity data returned as in https://docs.synapse.org/rest/GET/entity/id/json.html\n// Not comprehensive, but we don't need it to be, since we currently only use JSON for annotations.\nexport interface EntityJson extends Record<string, EntityJsonValue> {\n  name: string\n  id: string\n  etag: string\n  createdOn: string\n  modifiedOn: string\n  createdBy: string\n  modifiedBy: string\n  parentId: string\n  concreteType: ENTITY_CONCRETE_TYPE\n  versionNumber?: number\n  versionLabel?: string\n  isLatestVersion?: boolean\n  dataFileHandleId?: string\n}\n","import { Reference } from '..'\nimport { isTypeViaConcreteTypeFactory } from '../../functions/TypeUtils'\nimport { Entity } from './Entity'\n\nexport const LINK_CONCRETE_TYPE_VALUE = 'org.sagebionetworks.repo.model.Link'\nexport type LINK_CONCRETE_TYPE = typeof LINK_CONCRETE_TYPE_VALUE\n\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/FileEntity.html\nexport interface Link extends Entity {\n  concreteType: LINK_CONCRETE_TYPE\n  /** JSON schema for Reference POJO */\n  linksTo: Reference\n  /** The synapse Entity's class name that this link points to. */\n  linksToClassName: string\n}\n\nexport const isLink = isTypeViaConcreteTypeFactory<Link>(\n  LINK_CONCRETE_TYPE_VALUE,\n)\n","// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/EntityType.html\nexport enum EntityType {\n  PROJECT = 'project',\n  FOLDER = 'folder',\n  FILE = 'file',\n  TABLE = 'table',\n  LINK = 'link',\n  ENTITY_VIEW = 'entityview',\n  DOCKER_REPO = 'dockerrepo',\n  SUBMISSION_VIEW = 'submissionview',\n  DATASET = 'dataset',\n  DATASET_COLLECTION = 'datasetcollection',\n  MATERIALIZED_VIEW = 'materializedview',\n}\n","// http://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/file/FileHandleAssociateType.html\nexport enum FileHandleAssociateType {\n  FileEntity = 'FileEntity',\n  TableEntity = 'TableEntity',\n  WikiAttachment = 'WikiAttachment',\n  WikiMarkdown = 'WikiMarkdown',\n  UserProfileAttachment = 'UserProfileAttachment',\n  MessageAttachment = 'MessageAttachment',\n  TeamAttachment = 'TeamAttachment',\n  SubmissionAttachment = 'SubmissionAttachment',\n  VerificationSubmission = 'VerificationSubmission',\n  AccessRequirementAttachment = 'AccessRequirementAttachment',\n  DataAccessRequestAttachment = 'DataAccessRequestAttachment',\n  DataAccessSubmissionAttachment = 'DataAccessSubmissionAttachment',\n}\n\nexport type FileHandleAssociation = {\n  fileHandleId: string //\tThe ID of the FileHandle.\n  associateObjectId: string //\tThe ID of the object associated with the file\n  associateObjectType: FileHandleAssociateType //\tEnumeration of all possible objects types that can be associated with a file.\n}\n","// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/ObjectType.html\n\nexport enum ObjectType {\n  ENTITY = 'ENTITY',\n  ENTITY_CONTAINER = 'ENTITY_CONTAINER',\n  PRINCIPAL = 'PRINCIPAL',\n  ACTIVITY = 'ACTIVITY',\n  EVALUATION = 'EVALUATION',\n  SUBMISSION = 'SUBMISSION',\n  EVALUATION_SUBMISSIONS = 'EVALUATION_SUBMISSIONS',\n  FILE = 'FILE',\n  MESSAGE = 'MESSAGE',\n  WIKI = 'WIKI',\n  FAVORITE = 'FAVORITE',\n  ACCESS_REQUIREMENT = 'ACCESS_REQUIREMENT',\n  ACCESS_APPROVAL = 'ACCESS_APPROVAL',\n  TEAM = 'TEAM',\n  TABLE = 'TABLE',\n  ACCESS_CONTROL_LIST = 'ACCESS_CONTROL_LIST',\n  PROJECT_SETTING = 'PROJECT_SETTING',\n  VERIFICATION_SUBMISSION = 'VERIFICATION_SUBMISSION',\n  CERTIFIED_USER_PASSING_RECORD = 'CERTIFIED_USER_PASSING_RECORD',\n  FORUM = 'FORUM',\n  THREAD = 'THREAD',\n  REPLY = 'REPLY',\n  FORM_GROUP = 'FORM_GROUP',\n  FORM_DATA = 'FORM_DATA',\n  ENTITY_VIEW = 'ENTITY_VIEW',\n  USER_PROFILE = 'USER_PROFILE',\n  DATA_ACCESS_REQUEST = 'DATA_ACCESS_REQUEST',\n  DATA_ACCESS_SUBMISSION = 'DATA_ACCESS_SUBMISSION',\n  DATA_ACCESS_SUBMISSION_STATUS = 'DATA_ACCESS_SUBMISSION_STATUS',\n  MEMBERSHIP_INVITATION = 'MEMBERSHIP_INVITATION',\n}\n","export type UserGroupHeader = {\n  ownerId: string //\tA foreign key to the ID of the 'principal' object for the user.\n  firstName?: string //\tFirst Name\n  lastName?: string //\tLast Name\n  userName: string //\tA name chosen by the user that uniquely identifies them.\n  email?: string //\tUser's current email address\n  displayName?: string //\tThis is deprecated and will always be null\n  isIndividual: boolean //\tTrue if this is a user, false if it is a group\n}\n\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/principal/UserGroupHeaderResponse.html\nexport type UserGroupHeaderResponse = {\n  list: UserGroupHeader[] // The list of UserGroupHeaders.\n}\n\n// http://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/principal/TypeFilter.html\nexport enum TYPE_FILTER {\n  USERS_ONLY = 'USERS_ONLY',\n  TEAMS_ONLY = 'TEAMS_ONLY',\n  ALL = 'ALL',\n}\n","import _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport * as React from 'react';\n\nvar changedArray = function changedArray(a, b) {\n  if (a === void 0) {\n    a = [];\n  }\n\n  if (b === void 0) {\n    b = [];\n  }\n\n  return a.length !== b.length || a.some(function (item, index) {\n    return !Object.is(item, b[index]);\n  });\n};\n\nvar initialState = {\n  error: null\n};\n\nvar ErrorBoundary = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary() {\n    var _this;\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(_args)) || this;\n    _this.state = initialState;\n\n    _this.resetErrorBoundary = function () {\n      var _this$props;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      _this.props.onReset == null ? void 0 : (_this$props = _this.props).onReset.apply(_this$props, args);\n\n      _this.reset();\n    };\n\n    return _this;\n  }\n\n  ErrorBoundary.getDerivedStateFromError = function getDerivedStateFromError(error) {\n    return {\n      error: error\n    };\n  };\n\n  var _proto = ErrorBoundary.prototype;\n\n  _proto.reset = function reset() {\n    this.setState(initialState);\n  };\n\n  _proto.componentDidCatch = function componentDidCatch(error, info) {\n    var _this$props$onError, _this$props2;\n\n    (_this$props$onError = (_this$props2 = this.props).onError) == null ? void 0 : _this$props$onError.call(_this$props2, error, info);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var error = this.state.error;\n    var resetKeys = this.props.resetKeys; // There's an edge case where if the thing that triggered the error\n    // happens to *also* be in the resetKeys array, we'd end up resetting\n    // the error boundary immediately. This would likely trigger a second\n    // error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call\n    // of cDU after the error is set\n\n    if (error !== null && prevState.error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      var _this$props$onResetKe, _this$props3;\n\n      (_this$props$onResetKe = (_this$props3 = this.props).onResetKeysChange) == null ? void 0 : _this$props$onResetKe.call(_this$props3, prevProps.resetKeys, resetKeys);\n      this.reset();\n    }\n  };\n\n  _proto.render = function render() {\n    var error = this.state.error;\n    var _this$props4 = this.props,\n        fallbackRender = _this$props4.fallbackRender,\n        FallbackComponent = _this$props4.FallbackComponent,\n        fallback = _this$props4.fallback;\n\n    if (error !== null) {\n      var _props = {\n        error: error,\n        resetErrorBoundary: this.resetErrorBoundary\n      };\n\n      if ( /*#__PURE__*/React.isValidElement(fallback)) {\n        return fallback;\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(_props);\n      } else if (FallbackComponent) {\n        return /*#__PURE__*/React.createElement(FallbackComponent, _props);\n      } else {\n        throw new Error('react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop');\n      }\n    }\n\n    return this.props.children;\n  };\n\n  return ErrorBoundary;\n}(React.Component);\n\nfunction withErrorBoundary(Component, errorBoundaryProps) {\n  var Wrapped = function Wrapped(props) {\n    return /*#__PURE__*/React.createElement(ErrorBoundary, errorBoundaryProps, /*#__PURE__*/React.createElement(Component, props));\n  }; // Format for display in DevTools\n\n\n  var name = Component.displayName || Component.name || 'Unknown';\n  Wrapped.displayName = \"withErrorBoundary(\" + name + \")\";\n  return Wrapped;\n}\n\nfunction useErrorHandler(givenError) {\n  var _React$useState = React.useState(null),\n      error = _React$useState[0],\n      setError = _React$useState[1];\n\n  if (givenError != null) throw givenError;\n  if (error != null) throw error;\n  return setError;\n}\n/*\neslint\n  @typescript-eslint/sort-type-union-intersection-members: \"off\",\n  @typescript-eslint/no-throw-literal: \"off\",\n  @typescript-eslint/prefer-nullish-coalescing: \"off\"\n*/\n\nexport { ErrorBoundary, useErrorHandler, withErrorBoundary };\n","/**\n * Error message returned by the Synapse backend joined with the\n * HTTP status code.\n */\nimport {\n  ErrorResponse,\n  TwoFactorAuthErrorResponse,\n} from './synapseTypes/ErrorResponse'\nimport { SynapseError } from './SynapseClient'\n\nexport class SynapseClientError extends Error {\n  public status: number\n  public reason: string\n  public errorResponse?:\n    | SynapseError\n    | ErrorResponse\n    | TwoFactorAuthErrorResponse\n  public url: string\n\n  constructor(\n    status: number,\n    reason: string,\n    url: string,\n    errorResponse?: SynapseError | ErrorResponse | TwoFactorAuthErrorResponse,\n  ) {\n    super(reason)\n    this.status = status\n    this.reason = reason\n    this.url = url\n    this.errorResponse = errorResponse\n    // See https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#support-for-newtarget\n    Object.setPrototypeOf(this, new.target.prototype)\n  }\n}\n","export var Subscribable = /*#__PURE__*/function () {\n  function Subscribable() {\n    this.listeners = [];\n  }\n\n  var _proto = Subscribable.prototype;\n\n  _proto.subscribe = function subscribe(listener) {\n    var _this = this;\n\n    var callback = listener || function () {\n      return undefined;\n    };\n\n    this.listeners.push(callback);\n    this.onSubscribe();\n    return function () {\n      _this.listeners = _this.listeners.filter(function (x) {\n        return x !== callback;\n      });\n\n      _this.onUnsubscribe();\n    };\n  };\n\n  _proto.hasListeners = function hasListeners() {\n    return this.listeners.length > 0;\n  };\n\n  _proto.onSubscribe = function onSubscribe() {// Do nothing\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {// Do nothing\n  };\n\n  return Subscribable;\n}();","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// TYPES\n// UTILS\nexport var isServer = typeof window === 'undefined';\nexport function noop() {\n  return undefined;\n}\nexport function functionalUpdate(updater, input) {\n  return typeof updater === 'function' ? updater(input) : updater;\n}\nexport function isValidTimeout(value) {\n  return typeof value === 'number' && value >= 0 && value !== Infinity;\n}\nexport function ensureQueryKeyArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\nexport function difference(array1, array2) {\n  return array1.filter(function (x) {\n    return array2.indexOf(x) === -1;\n  });\n}\nexport function replaceAt(array, index, value) {\n  var copy = array.slice(0);\n  copy[index] = value;\n  return copy;\n}\nexport function timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nexport function parseQueryArgs(arg1, arg2, arg3) {\n  if (!isQueryKey(arg1)) {\n    return arg1;\n  }\n\n  if (typeof arg2 === 'function') {\n    return _extends({}, arg3, {\n      queryKey: arg1,\n      queryFn: arg2\n    });\n  }\n\n  return _extends({}, arg2, {\n    queryKey: arg1\n  });\n}\nexport function parseMutationArgs(arg1, arg2, arg3) {\n  if (isQueryKey(arg1)) {\n    if (typeof arg2 === 'function') {\n      return _extends({}, arg3, {\n        mutationKey: arg1,\n        mutationFn: arg2\n      });\n    }\n\n    return _extends({}, arg2, {\n      mutationKey: arg1\n    });\n  }\n\n  if (typeof arg1 === 'function') {\n    return _extends({}, arg2, {\n      mutationFn: arg1\n    });\n  }\n\n  return _extends({}, arg1);\n}\nexport function parseFilterArgs(arg1, arg2, arg3) {\n  return isQueryKey(arg1) ? [_extends({}, arg2, {\n    queryKey: arg1\n  }), arg3] : [arg1 || {}, arg2];\n}\nexport function parseMutationFilterArgs(arg1, arg2) {\n  return isQueryKey(arg1) ? _extends({}, arg2, {\n    mutationKey: arg1\n  }) : arg1;\n}\nexport function mapQueryStatusFilter(active, inactive) {\n  if (active === true && inactive === true || active == null && inactive == null) {\n    return 'all';\n  } else if (active === false && inactive === false) {\n    return 'none';\n  } else {\n    // At this point, active|inactive can only be true|false or false|true\n    // so, when only one value is provided, the missing one has to be the negated value\n    var isActive = active != null ? active : !inactive;\n    return isActive ? 'active' : 'inactive';\n  }\n}\nexport function matchQuery(filters, query) {\n  var active = filters.active,\n      exact = filters.exact,\n      fetching = filters.fetching,\n      inactive = filters.inactive,\n      predicate = filters.predicate,\n      queryKey = filters.queryKey,\n      stale = filters.stale;\n\n  if (isQueryKey(queryKey)) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n\n  var queryStatusFilter = mapQueryStatusFilter(active, inactive);\n\n  if (queryStatusFilter === 'none') {\n    return false;\n  } else if (queryStatusFilter !== 'all') {\n    var isActive = query.isActive();\n\n    if (queryStatusFilter === 'active' && !isActive) {\n      return false;\n    }\n\n    if (queryStatusFilter === 'inactive' && isActive) {\n      return false;\n    }\n  }\n\n  if (typeof stale === 'boolean' && query.isStale() !== stale) {\n    return false;\n  }\n\n  if (typeof fetching === 'boolean' && query.isFetching() !== fetching) {\n    return false;\n  }\n\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n\n  return true;\n}\nexport function matchMutation(filters, mutation) {\n  var exact = filters.exact,\n      fetching = filters.fetching,\n      predicate = filters.predicate,\n      mutationKey = filters.mutationKey;\n\n  if (isQueryKey(mutationKey)) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n\n    if (exact) {\n      if (hashQueryKey(mutation.options.mutationKey) !== hashQueryKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n\n  if (typeof fetching === 'boolean' && mutation.state.status === 'loading' !== fetching) {\n    return false;\n  }\n\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n\n  return true;\n}\nexport function hashQueryKeyByOptions(queryKey, options) {\n  var hashFn = (options == null ? void 0 : options.queryKeyHashFn) || hashQueryKey;\n  return hashFn(queryKey);\n}\n/**\n * Default query keys hash function.\n */\n\nexport function hashQueryKey(queryKey) {\n  var asArray = ensureQueryKeyArray(queryKey);\n  return stableValueHash(asArray);\n}\n/**\n * Hashes the value into a stable hash.\n */\n\nexport function stableValueHash(value) {\n  return JSON.stringify(value, function (_, val) {\n    return isPlainObject(val) ? Object.keys(val).sort().reduce(function (result, key) {\n      result[key] = val[key];\n      return result;\n    }, {}) : val;\n  });\n}\n/**\n * Checks if key `b` partially matches with key `a`.\n */\n\nexport function partialMatchKey(a, b) {\n  return partialDeepEqual(ensureQueryKeyArray(a), ensureQueryKeyArray(b));\n}\n/**\n * Checks if `b` partially matches with `a`.\n */\n\nexport function partialDeepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (typeof a !== typeof b) {\n    return false;\n  }\n\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    return !Object.keys(b).some(function (key) {\n      return !partialDeepEqual(a[key], b[key]);\n    });\n  }\n\n  return false;\n}\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\n\nexport function replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n\n  var array = Array.isArray(a) && Array.isArray(b);\n\n  if (array || isPlainObject(a) && isPlainObject(b)) {\n    var aSize = array ? a.length : Object.keys(a).length;\n    var bItems = array ? b : Object.keys(b);\n    var bSize = bItems.length;\n    var copy = array ? [] : {};\n    var equalItems = 0;\n\n    for (var i = 0; i < bSize; i++) {\n      var key = array ? i : bItems[i];\n      copy[key] = replaceEqualDeep(a[key], b[key]);\n\n      if (copy[key] === a[key]) {\n        equalItems++;\n      }\n    }\n\n    return aSize === bSize && equalItems === aSize ? a : copy;\n  }\n\n  return b;\n}\n/**\n * Shallow compare objects. Only works with objects that always have the same properties.\n */\n\nexport function shallowEqualObjects(a, b) {\n  if (a && !b || b && !a) {\n    return false;\n  }\n\n  for (var key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n\n  return true;\n} // Copied from: https://github.com/jonschlinkert/is-plain-object\n\nexport function isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  } // If has modified constructor\n\n\n  var ctor = o.constructor;\n\n  if (typeof ctor === 'undefined') {\n    return true;\n  } // If has modified prototype\n\n\n  var prot = ctor.prototype;\n\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  } // If constructor does not have an Object-specific method\n\n\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false;\n  } // Most likely a plain Object\n\n\n  return true;\n}\n\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nexport function isQueryKey(value) {\n  return typeof value === 'string' || Array.isArray(value);\n}\nexport function isError(value) {\n  return value instanceof Error;\n}\nexport function sleep(timeout) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, timeout);\n  });\n}\n/**\n * Schedules a microtask.\n * This can be useful to schedule state updates after rendering.\n */\n\nexport function scheduleMicrotask(callback) {\n  Promise.resolve().then(callback).catch(function (error) {\n    return setTimeout(function () {\n      throw error;\n    });\n  });\n}\nexport function getAbortController() {\n  if (typeof AbortController === 'function') {\n    return new AbortController();\n  }\n}","import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { Subscribable } from './subscribable';\nimport { isServer } from './utils';\nexport var FocusManager = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(FocusManager, _Subscribable);\n\n  function FocusManager() {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n\n    _this.setup = function (onFocus) {\n      var _window;\n\n      if (!isServer && ((_window = window) == null ? void 0 : _window.addEventListener)) {\n        var listener = function listener() {\n          return onFocus();\n        }; // Listen to visibillitychange and focus\n\n\n        window.addEventListener('visibilitychange', listener, false);\n        window.addEventListener('focus', listener, false);\n        return function () {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('visibilitychange', listener);\n          window.removeEventListener('focus', listener);\n        };\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = FocusManager.prototype;\n\n  _proto.onSubscribe = function onSubscribe() {\n    if (!this.cleanup) {\n      this.setEventListener(this.setup);\n    }\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.hasListeners()) {\n      var _this$cleanup;\n\n      (_this$cleanup = this.cleanup) == null ? void 0 : _this$cleanup.call(this);\n      this.cleanup = undefined;\n    }\n  };\n\n  _proto.setEventListener = function setEventListener(setup) {\n    var _this$cleanup2,\n        _this2 = this;\n\n    this.setup = setup;\n    (_this$cleanup2 = this.cleanup) == null ? void 0 : _this$cleanup2.call(this);\n    this.cleanup = setup(function (focused) {\n      if (typeof focused === 'boolean') {\n        _this2.setFocused(focused);\n      } else {\n        _this2.onFocus();\n      }\n    });\n  };\n\n  _proto.setFocused = function setFocused(focused) {\n    this.focused = focused;\n\n    if (focused) {\n      this.onFocus();\n    }\n  };\n\n  _proto.onFocus = function onFocus() {\n    this.listeners.forEach(function (listener) {\n      listener();\n    });\n  };\n\n  _proto.isFocused = function isFocused() {\n    if (typeof this.focused === 'boolean') {\n      return this.focused;\n    } // document global can be unavailable in react native\n\n\n    if (typeof document === 'undefined') {\n      return true;\n    }\n\n    return [undefined, 'visible', 'prerender'].includes(document.visibilityState);\n  };\n\n  return FocusManager;\n}(Subscribable);\nexport var focusManager = new FocusManager();","import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { Subscribable } from './subscribable';\nimport { isServer } from './utils';\nexport var OnlineManager = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(OnlineManager, _Subscribable);\n\n  function OnlineManager() {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n\n    _this.setup = function (onOnline) {\n      var _window;\n\n      if (!isServer && ((_window = window) == null ? void 0 : _window.addEventListener)) {\n        var listener = function listener() {\n          return onOnline();\n        }; // Listen to online\n\n\n        window.addEventListener('online', listener, false);\n        window.addEventListener('offline', listener, false);\n        return function () {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('online', listener);\n          window.removeEventListener('offline', listener);\n        };\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = OnlineManager.prototype;\n\n  _proto.onSubscribe = function onSubscribe() {\n    if (!this.cleanup) {\n      this.setEventListener(this.setup);\n    }\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.hasListeners()) {\n      var _this$cleanup;\n\n      (_this$cleanup = this.cleanup) == null ? void 0 : _this$cleanup.call(this);\n      this.cleanup = undefined;\n    }\n  };\n\n  _proto.setEventListener = function setEventListener(setup) {\n    var _this$cleanup2,\n        _this2 = this;\n\n    this.setup = setup;\n    (_this$cleanup2 = this.cleanup) == null ? void 0 : _this$cleanup2.call(this);\n    this.cleanup = setup(function (online) {\n      if (typeof online === 'boolean') {\n        _this2.setOnline(online);\n      } else {\n        _this2.onOnline();\n      }\n    });\n  };\n\n  _proto.setOnline = function setOnline(online) {\n    this.online = online;\n\n    if (online) {\n      this.onOnline();\n    }\n  };\n\n  _proto.onOnline = function onOnline() {\n    this.listeners.forEach(function (listener) {\n      listener();\n    });\n  };\n\n  _proto.isOnline = function isOnline() {\n    if (typeof this.online === 'boolean') {\n      return this.online;\n    }\n\n    if (typeof navigator === 'undefined' || typeof navigator.onLine === 'undefined') {\n      return true;\n    }\n\n    return navigator.onLine;\n  };\n\n  return OnlineManager;\n}(Subscribable);\nexport var onlineManager = new OnlineManager();","import { focusManager } from './focusManager';\nimport { onlineManager } from './onlineManager';\nimport { sleep } from './utils';\n\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1000 * Math.pow(2, failureCount), 30000);\n}\n\nexport function isCancelable(value) {\n  return typeof (value == null ? void 0 : value.cancel) === 'function';\n}\nexport var CancelledError = function CancelledError(options) {\n  this.revert = options == null ? void 0 : options.revert;\n  this.silent = options == null ? void 0 : options.silent;\n};\nexport function isCancelledError(value) {\n  return value instanceof CancelledError;\n} // CLASS\n\nexport var Retryer = function Retryer(config) {\n  var _this = this;\n\n  var cancelRetry = false;\n  var cancelFn;\n  var continueFn;\n  var promiseResolve;\n  var promiseReject;\n  this.abort = config.abort;\n\n  this.cancel = function (cancelOptions) {\n    return cancelFn == null ? void 0 : cancelFn(cancelOptions);\n  };\n\n  this.cancelRetry = function () {\n    cancelRetry = true;\n  };\n\n  this.continueRetry = function () {\n    cancelRetry = false;\n  };\n\n  this.continue = function () {\n    return continueFn == null ? void 0 : continueFn();\n  };\n\n  this.failureCount = 0;\n  this.isPaused = false;\n  this.isResolved = false;\n  this.isTransportCancelable = false;\n  this.promise = new Promise(function (outerResolve, outerReject) {\n    promiseResolve = outerResolve;\n    promiseReject = outerReject;\n  });\n\n  var resolve = function resolve(value) {\n    if (!_this.isResolved) {\n      _this.isResolved = true;\n      config.onSuccess == null ? void 0 : config.onSuccess(value);\n      continueFn == null ? void 0 : continueFn();\n      promiseResolve(value);\n    }\n  };\n\n  var reject = function reject(value) {\n    if (!_this.isResolved) {\n      _this.isResolved = true;\n      config.onError == null ? void 0 : config.onError(value);\n      continueFn == null ? void 0 : continueFn();\n      promiseReject(value);\n    }\n  };\n\n  var pause = function pause() {\n    return new Promise(function (continueResolve) {\n      continueFn = continueResolve;\n      _this.isPaused = true;\n      config.onPause == null ? void 0 : config.onPause();\n    }).then(function () {\n      continueFn = undefined;\n      _this.isPaused = false;\n      config.onContinue == null ? void 0 : config.onContinue();\n    });\n  }; // Create loop function\n\n\n  var run = function run() {\n    // Do nothing if already resolved\n    if (_this.isResolved) {\n      return;\n    }\n\n    var promiseOrValue; // Execute query\n\n    try {\n      promiseOrValue = config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    } // Create callback to cancel this fetch\n\n\n    cancelFn = function cancelFn(cancelOptions) {\n      if (!_this.isResolved) {\n        reject(new CancelledError(cancelOptions));\n        _this.abort == null ? void 0 : _this.abort(); // Cancel transport if supported\n\n        if (isCancelable(promiseOrValue)) {\n          try {\n            promiseOrValue.cancel();\n          } catch (_unused) {}\n        }\n      }\n    }; // Check if the transport layer support cancellation\n\n\n    _this.isTransportCancelable = isCancelable(promiseOrValue);\n    Promise.resolve(promiseOrValue).then(resolve).catch(function (error) {\n      var _config$retry, _config$retryDelay;\n\n      // Stop if the fetch is already resolved\n      if (_this.isResolved) {\n        return;\n      } // Do we need to retry the request?\n\n\n      var retry = (_config$retry = config.retry) != null ? _config$retry : 3;\n      var retryDelay = (_config$retryDelay = config.retryDelay) != null ? _config$retryDelay : defaultRetryDelay;\n      var delay = typeof retryDelay === 'function' ? retryDelay(_this.failureCount, error) : retryDelay;\n      var shouldRetry = retry === true || typeof retry === 'number' && _this.failureCount < retry || typeof retry === 'function' && retry(_this.failureCount, error);\n\n      if (cancelRetry || !shouldRetry) {\n        // We are done if the query does not need to be retried\n        reject(error);\n        return;\n      }\n\n      _this.failureCount++; // Notify on fail\n\n      config.onFail == null ? void 0 : config.onFail(_this.failureCount, error); // Delay\n\n      sleep(delay) // Pause if the document is not visible or when the device is offline\n      .then(function () {\n        if (!focusManager.isFocused() || !onlineManager.isOnline()) {\n          return pause();\n        }\n      }).then(function () {\n        if (cancelRetry) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  }; // Start loop\n\n\n  run();\n};","import { scheduleMicrotask } from './utils'; // TYPES\n\n// CLASS\nexport var NotifyManager = /*#__PURE__*/function () {\n  function NotifyManager() {\n    this.queue = [];\n    this.transactions = 0;\n\n    this.notifyFn = function (callback) {\n      callback();\n    };\n\n    this.batchNotifyFn = function (callback) {\n      callback();\n    };\n  }\n\n  var _proto = NotifyManager.prototype;\n\n  _proto.batch = function batch(callback) {\n    var result;\n    this.transactions++;\n\n    try {\n      result = callback();\n    } finally {\n      this.transactions--;\n\n      if (!this.transactions) {\n        this.flush();\n      }\n    }\n\n    return result;\n  };\n\n  _proto.schedule = function schedule(callback) {\n    var _this = this;\n\n    if (this.transactions) {\n      this.queue.push(callback);\n    } else {\n      scheduleMicrotask(function () {\n        _this.notifyFn(callback);\n      });\n    }\n  }\n  /**\n   * All calls to the wrapped function will be batched.\n   */\n  ;\n\n  _proto.batchCalls = function batchCalls(callback) {\n    var _this2 = this;\n\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this2.schedule(function () {\n        callback.apply(void 0, args);\n      });\n    };\n  };\n\n  _proto.flush = function flush() {\n    var _this3 = this;\n\n    var queue = this.queue;\n    this.queue = [];\n\n    if (queue.length) {\n      scheduleMicrotask(function () {\n        _this3.batchNotifyFn(function () {\n          queue.forEach(function (callback) {\n            _this3.notifyFn(callback);\n          });\n        });\n      });\n    }\n  }\n  /**\n   * Use this method to set a custom notify function.\n   * This can be used to for example wrap notifications with `React.act` while running tests.\n   */\n  ;\n\n  _proto.setNotifyFunction = function setNotifyFunction(fn) {\n    this.notifyFn = fn;\n  }\n  /**\n   * Use this method to set a custom function to batch notifications together into a single tick.\n   * By default React Query will use the batch function provided by ReactDOM or React Native.\n   */\n  ;\n\n  _proto.setBatchNotifyFunction = function setBatchNotifyFunction(fn) {\n    this.batchNotifyFn = fn;\n  };\n\n  return NotifyManager;\n}(); // SINGLETON\n\nexport var notifyManager = new NotifyManager();","// TYPES\n// FUNCTIONS\nvar logger = console;\nexport function getLogger() {\n  return logger;\n}\nexport function setLogger(newLogger) {\n  logger = newLogger;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { isServer, isValidTimeout, noop, replaceEqualDeep, shallowEqualObjects, timeUntilStale } from './utils';\nimport { notifyManager } from './notifyManager';\nimport { focusManager } from './focusManager';\nimport { Subscribable } from './subscribable';\nimport { getLogger } from './logger';\nimport { isCancelledError } from './retryer';\nexport var QueryObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueryObserver, _Subscribable);\n\n  function QueryObserver(client, options) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n    _this.options = options;\n    _this.trackedProps = [];\n    _this.selectError = null;\n\n    _this.bindMethods();\n\n    _this.setOptions(options);\n\n    return _this;\n  }\n\n  var _proto = QueryObserver.prototype;\n\n  _proto.bindMethods = function bindMethods() {\n    this.remove = this.remove.bind(this);\n    this.refetch = this.refetch.bind(this);\n  };\n\n  _proto.onSubscribe = function onSubscribe() {\n    if (this.listeners.length === 1) {\n      this.currentQuery.addObserver(this);\n\n      if (shouldFetchOnMount(this.currentQuery, this.options)) {\n        this.executeFetch();\n      }\n\n      this.updateTimers();\n    }\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      this.destroy();\n    }\n  };\n\n  _proto.shouldFetchOnReconnect = function shouldFetchOnReconnect() {\n    return shouldFetchOn(this.currentQuery, this.options, this.options.refetchOnReconnect);\n  };\n\n  _proto.shouldFetchOnWindowFocus = function shouldFetchOnWindowFocus() {\n    return shouldFetchOn(this.currentQuery, this.options, this.options.refetchOnWindowFocus);\n  };\n\n  _proto.destroy = function destroy() {\n    this.listeners = [];\n    this.clearTimers();\n    this.currentQuery.removeObserver(this);\n  };\n\n  _proto.setOptions = function setOptions(options, notifyOptions) {\n    var prevOptions = this.options;\n    var prevQuery = this.currentQuery;\n    this.options = this.client.defaultQueryObserverOptions(options);\n\n    if (typeof this.options.enabled !== 'undefined' && typeof this.options.enabled !== 'boolean') {\n      throw new Error('Expected enabled to be a boolean');\n    } // Keep previous query key if the user does not supply one\n\n\n    if (!this.options.queryKey) {\n      this.options.queryKey = prevOptions.queryKey;\n    }\n\n    this.updateQuery();\n    var mounted = this.hasListeners(); // Fetch if there are subscribers\n\n    if (mounted && shouldFetchOptionally(this.currentQuery, prevQuery, this.options, prevOptions)) {\n      this.executeFetch();\n    } // Update result\n\n\n    this.updateResult(notifyOptions); // Update stale interval if needed\n\n    if (mounted && (this.currentQuery !== prevQuery || this.options.enabled !== prevOptions.enabled || this.options.staleTime !== prevOptions.staleTime)) {\n      this.updateStaleTimeout();\n    }\n\n    var nextRefetchInterval = this.computeRefetchInterval(); // Update refetch interval if needed\n\n    if (mounted && (this.currentQuery !== prevQuery || this.options.enabled !== prevOptions.enabled || nextRefetchInterval !== this.currentRefetchInterval)) {\n      this.updateRefetchInterval(nextRefetchInterval);\n    }\n  };\n\n  _proto.getOptimisticResult = function getOptimisticResult(options) {\n    var defaultedOptions = this.client.defaultQueryObserverOptions(options);\n    var query = this.client.getQueryCache().build(this.client, defaultedOptions);\n    return this.createResult(query, defaultedOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.currentResult;\n  };\n\n  _proto.trackResult = function trackResult(result, defaultedOptions) {\n    var _this2 = this;\n\n    var trackedResult = {};\n\n    var trackProp = function trackProp(key) {\n      if (!_this2.trackedProps.includes(key)) {\n        _this2.trackedProps.push(key);\n      }\n    };\n\n    Object.keys(result).forEach(function (key) {\n      Object.defineProperty(trackedResult, key, {\n        configurable: false,\n        enumerable: true,\n        get: function get() {\n          trackProp(key);\n          return result[key];\n        }\n      });\n    });\n\n    if (defaultedOptions.useErrorBoundary || defaultedOptions.suspense) {\n      trackProp('error');\n    }\n\n    return trackedResult;\n  };\n\n  _proto.getNextResult = function getNextResult(options) {\n    var _this3 = this;\n\n    return new Promise(function (resolve, reject) {\n      var unsubscribe = _this3.subscribe(function (result) {\n        if (!result.isFetching) {\n          unsubscribe();\n\n          if (result.isError && (options == null ? void 0 : options.throwOnError)) {\n            reject(result.error);\n          } else {\n            resolve(result);\n          }\n        }\n      });\n    });\n  };\n\n  _proto.getCurrentQuery = function getCurrentQuery() {\n    return this.currentQuery;\n  };\n\n  _proto.remove = function remove() {\n    this.client.getQueryCache().remove(this.currentQuery);\n  };\n\n  _proto.refetch = function refetch(options) {\n    return this.fetch(_extends({}, options, {\n      meta: {\n        refetchPage: options == null ? void 0 : options.refetchPage\n      }\n    }));\n  };\n\n  _proto.fetchOptimistic = function fetchOptimistic(options) {\n    var _this4 = this;\n\n    var defaultedOptions = this.client.defaultQueryObserverOptions(options);\n    var query = this.client.getQueryCache().build(this.client, defaultedOptions);\n    return query.fetch().then(function () {\n      return _this4.createResult(query, defaultedOptions);\n    });\n  };\n\n  _proto.fetch = function fetch(fetchOptions) {\n    var _this5 = this;\n\n    return this.executeFetch(fetchOptions).then(function () {\n      _this5.updateResult();\n\n      return _this5.currentResult;\n    });\n  };\n\n  _proto.executeFetch = function executeFetch(fetchOptions) {\n    // Make sure we reference the latest query as the current one might have been removed\n    this.updateQuery(); // Fetch\n\n    var promise = this.currentQuery.fetch(this.options, fetchOptions);\n\n    if (!(fetchOptions == null ? void 0 : fetchOptions.throwOnError)) {\n      promise = promise.catch(noop);\n    }\n\n    return promise;\n  };\n\n  _proto.updateStaleTimeout = function updateStaleTimeout() {\n    var _this6 = this;\n\n    this.clearStaleTimeout();\n\n    if (isServer || this.currentResult.isStale || !isValidTimeout(this.options.staleTime)) {\n      return;\n    }\n\n    var time = timeUntilStale(this.currentResult.dataUpdatedAt, this.options.staleTime); // The timeout is sometimes triggered 1 ms before the stale time expiration.\n    // To mitigate this issue we always add 1 ms to the timeout.\n\n    var timeout = time + 1;\n    this.staleTimeoutId = setTimeout(function () {\n      if (!_this6.currentResult.isStale) {\n        _this6.updateResult();\n      }\n    }, timeout);\n  };\n\n  _proto.computeRefetchInterval = function computeRefetchInterval() {\n    var _this$options$refetch;\n\n    return typeof this.options.refetchInterval === 'function' ? this.options.refetchInterval(this.currentResult.data, this.currentQuery) : (_this$options$refetch = this.options.refetchInterval) != null ? _this$options$refetch : false;\n  };\n\n  _proto.updateRefetchInterval = function updateRefetchInterval(nextInterval) {\n    var _this7 = this;\n\n    this.clearRefetchInterval();\n    this.currentRefetchInterval = nextInterval;\n\n    if (isServer || this.options.enabled === false || !isValidTimeout(this.currentRefetchInterval) || this.currentRefetchInterval === 0) {\n      return;\n    }\n\n    this.refetchIntervalId = setInterval(function () {\n      if (_this7.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        _this7.executeFetch();\n      }\n    }, this.currentRefetchInterval);\n  };\n\n  _proto.updateTimers = function updateTimers() {\n    this.updateStaleTimeout();\n    this.updateRefetchInterval(this.computeRefetchInterval());\n  };\n\n  _proto.clearTimers = function clearTimers() {\n    this.clearStaleTimeout();\n    this.clearRefetchInterval();\n  };\n\n  _proto.clearStaleTimeout = function clearStaleTimeout() {\n    clearTimeout(this.staleTimeoutId);\n    this.staleTimeoutId = undefined;\n  };\n\n  _proto.clearRefetchInterval = function clearRefetchInterval() {\n    clearInterval(this.refetchIntervalId);\n    this.refetchIntervalId = undefined;\n  };\n\n  _proto.createResult = function createResult(query, options) {\n    var prevQuery = this.currentQuery;\n    var prevOptions = this.options;\n    var prevResult = this.currentResult;\n    var prevResultState = this.currentResultState;\n    var prevResultOptions = this.currentResultOptions;\n    var queryChange = query !== prevQuery;\n    var queryInitialState = queryChange ? query.state : this.currentQueryInitialState;\n    var prevQueryResult = queryChange ? this.currentResult : this.previousQueryResult;\n    var state = query.state;\n    var dataUpdatedAt = state.dataUpdatedAt,\n        error = state.error,\n        errorUpdatedAt = state.errorUpdatedAt,\n        isFetching = state.isFetching,\n        status = state.status;\n    var isPreviousData = false;\n    var isPlaceholderData = false;\n    var data; // Optimistically set result in fetching state if needed\n\n    if (options.optimisticResults) {\n      var mounted = this.hasListeners();\n      var fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      var fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n\n      if (fetchOnMount || fetchOptionally) {\n        isFetching = true;\n\n        if (!dataUpdatedAt) {\n          status = 'loading';\n        }\n      }\n    } // Keep previous data if needed\n\n\n    if (options.keepPreviousData && !state.dataUpdateCount && (prevQueryResult == null ? void 0 : prevQueryResult.isSuccess) && status !== 'error') {\n      data = prevQueryResult.data;\n      dataUpdatedAt = prevQueryResult.dataUpdatedAt;\n      status = prevQueryResult.status;\n      isPreviousData = true;\n    } // Select data if needed\n    else if (options.select && typeof state.data !== 'undefined') {\n        // Memoize select result\n        if (prevResult && state.data === (prevResultState == null ? void 0 : prevResultState.data) && options.select === this.selectFn) {\n          data = this.selectResult;\n        } else {\n          try {\n            this.selectFn = options.select;\n            data = options.select(state.data);\n\n            if (options.structuralSharing !== false) {\n              data = replaceEqualDeep(prevResult == null ? void 0 : prevResult.data, data);\n            }\n\n            this.selectResult = data;\n            this.selectError = null;\n          } catch (selectError) {\n            getLogger().error(selectError);\n            this.selectError = selectError;\n          }\n        }\n      } // Use query data\n      else {\n          data = state.data;\n        } // Show placeholder data if needed\n\n\n    if (typeof options.placeholderData !== 'undefined' && typeof data === 'undefined' && (status === 'loading' || status === 'idle')) {\n      var placeholderData; // Memoize placeholder data\n\n      if ((prevResult == null ? void 0 : prevResult.isPlaceholderData) && options.placeholderData === (prevResultOptions == null ? void 0 : prevResultOptions.placeholderData)) {\n        placeholderData = prevResult.data;\n      } else {\n        placeholderData = typeof options.placeholderData === 'function' ? options.placeholderData() : options.placeholderData;\n\n        if (options.select && typeof placeholderData !== 'undefined') {\n          try {\n            placeholderData = options.select(placeholderData);\n\n            if (options.structuralSharing !== false) {\n              placeholderData = replaceEqualDeep(prevResult == null ? void 0 : prevResult.data, placeholderData);\n            }\n\n            this.selectError = null;\n          } catch (selectError) {\n            getLogger().error(selectError);\n            this.selectError = selectError;\n          }\n        }\n      }\n\n      if (typeof placeholderData !== 'undefined') {\n        status = 'success';\n        data = placeholderData;\n        isPlaceholderData = true;\n      }\n    }\n\n    if (this.selectError) {\n      error = this.selectError;\n      data = this.selectResult;\n      errorUpdatedAt = Date.now();\n      status = 'error';\n    }\n\n    var result = {\n      status: status,\n      isLoading: status === 'loading',\n      isSuccess: status === 'success',\n      isError: status === 'error',\n      isIdle: status === 'idle',\n      data: data,\n      dataUpdatedAt: dataUpdatedAt,\n      error: error,\n      errorUpdatedAt: errorUpdatedAt,\n      failureCount: state.fetchFailureCount,\n      errorUpdateCount: state.errorUpdateCount,\n      isFetched: state.dataUpdateCount > 0 || state.errorUpdateCount > 0,\n      isFetchedAfterMount: state.dataUpdateCount > queryInitialState.dataUpdateCount || state.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching: isFetching,\n      isRefetching: isFetching && status !== 'loading',\n      isLoadingError: status === 'error' && state.dataUpdatedAt === 0,\n      isPlaceholderData: isPlaceholderData,\n      isPreviousData: isPreviousData,\n      isRefetchError: status === 'error' && state.dataUpdatedAt !== 0,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      remove: this.remove\n    };\n    return result;\n  };\n\n  _proto.shouldNotifyListeners = function shouldNotifyListeners(result, prevResult) {\n    if (!prevResult) {\n      return true;\n    }\n\n    var _this$options = this.options,\n        notifyOnChangeProps = _this$options.notifyOnChangeProps,\n        notifyOnChangePropsExclusions = _this$options.notifyOnChangePropsExclusions;\n\n    if (!notifyOnChangeProps && !notifyOnChangePropsExclusions) {\n      return true;\n    }\n\n    if (notifyOnChangeProps === 'tracked' && !this.trackedProps.length) {\n      return true;\n    }\n\n    var includedProps = notifyOnChangeProps === 'tracked' ? this.trackedProps : notifyOnChangeProps;\n    return Object.keys(result).some(function (key) {\n      var typedKey = key;\n      var changed = result[typedKey] !== prevResult[typedKey];\n      var isIncluded = includedProps == null ? void 0 : includedProps.some(function (x) {\n        return x === key;\n      });\n      var isExcluded = notifyOnChangePropsExclusions == null ? void 0 : notifyOnChangePropsExclusions.some(function (x) {\n        return x === key;\n      });\n      return changed && !isExcluded && (!includedProps || isIncluded);\n    });\n  };\n\n  _proto.updateResult = function updateResult(notifyOptions) {\n    var prevResult = this.currentResult;\n    this.currentResult = this.createResult(this.currentQuery, this.options);\n    this.currentResultState = this.currentQuery.state;\n    this.currentResultOptions = this.options; // Only notify if something has changed\n\n    if (shallowEqualObjects(this.currentResult, prevResult)) {\n      return;\n    } // Determine which callbacks to trigger\n\n\n    var defaultNotifyOptions = {\n      cache: true\n    };\n\n    if ((notifyOptions == null ? void 0 : notifyOptions.listeners) !== false && this.shouldNotifyListeners(this.currentResult, prevResult)) {\n      defaultNotifyOptions.listeners = true;\n    }\n\n    this.notify(_extends({}, defaultNotifyOptions, notifyOptions));\n  };\n\n  _proto.updateQuery = function updateQuery() {\n    var query = this.client.getQueryCache().build(this.client, this.options);\n\n    if (query === this.currentQuery) {\n      return;\n    }\n\n    var prevQuery = this.currentQuery;\n    this.currentQuery = query;\n    this.currentQueryInitialState = query.state;\n    this.previousQueryResult = this.currentResult;\n\n    if (this.hasListeners()) {\n      prevQuery == null ? void 0 : prevQuery.removeObserver(this);\n      query.addObserver(this);\n    }\n  };\n\n  _proto.onQueryUpdate = function onQueryUpdate(action) {\n    var notifyOptions = {};\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true;\n    } else if (action.type === 'error' && !isCancelledError(action.error)) {\n      notifyOptions.onError = true;\n    }\n\n    this.updateResult(notifyOptions);\n\n    if (this.hasListeners()) {\n      this.updateTimers();\n    }\n  };\n\n  _proto.notify = function notify(notifyOptions) {\n    var _this8 = this;\n\n    notifyManager.batch(function () {\n      // First trigger the configuration callbacks\n      if (notifyOptions.onSuccess) {\n        _this8.options.onSuccess == null ? void 0 : _this8.options.onSuccess(_this8.currentResult.data);\n        _this8.options.onSettled == null ? void 0 : _this8.options.onSettled(_this8.currentResult.data, null);\n      } else if (notifyOptions.onError) {\n        _this8.options.onError == null ? void 0 : _this8.options.onError(_this8.currentResult.error);\n        _this8.options.onSettled == null ? void 0 : _this8.options.onSettled(undefined, _this8.currentResult.error);\n      } // Then trigger the listeners\n\n\n      if (notifyOptions.listeners) {\n        _this8.listeners.forEach(function (listener) {\n          listener(_this8.currentResult);\n        });\n      } // Then the cache listeners\n\n\n      if (notifyOptions.cache) {\n        _this8.client.getQueryCache().notify({\n          query: _this8.currentQuery,\n          type: 'observerResultsUpdated'\n        });\n      }\n    });\n  };\n\n  return QueryObserver;\n}(Subscribable);\n\nfunction shouldLoadOnMount(query, options) {\n  return options.enabled !== false && !query.state.dataUpdatedAt && !(query.state.status === 'error' && options.retryOnMount === false);\n}\n\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.dataUpdatedAt > 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\n\nfunction shouldFetchOn(query, options, field) {\n  if (options.enabled !== false) {\n    var value = typeof field === 'function' ? field(query) : field;\n    return value === 'always' || value !== false && isStale(query, options);\n  }\n\n  return false;\n}\n\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return options.enabled !== false && (query !== prevQuery || prevOptions.enabled === false) && (!options.suspense || query.state.status !== 'error') && isStale(query, options);\n}\n\nfunction isStale(query, options) {\n  return query.isStaleByTime(options.staleTime);\n}","import ReactDOM from 'react-dom';\nexport var unstable_batchedUpdates = ReactDOM.unstable_batchedUpdates;","import { notifyManager } from '../core';\nimport { unstable_batchedUpdates } from './reactBatchedUpdates';\nnotifyManager.setBatchNotifyFunction(unstable_batchedUpdates);","export var logger = console;","import { setLogger } from '../core';\nimport { logger } from './logger';\nsetLogger(logger);","import React from 'react';\nvar defaultContext = /*#__PURE__*/React.createContext(undefined);\nvar QueryClientSharingContext = /*#__PURE__*/React.createContext(false); // if contextSharing is on, we share the first and at least one\n// instance of the context across the window\n// to ensure that if React Query is used across\n// different bundles or microfrontends they will\n// all use the same **instance** of context, regardless\n// of module scoping.\n\nfunction getQueryClientContext(contextSharing) {\n  if (contextSharing && typeof window !== 'undefined') {\n    if (!window.ReactQueryClientContext) {\n      window.ReactQueryClientContext = defaultContext;\n    }\n\n    return window.ReactQueryClientContext;\n  }\n\n  return defaultContext;\n}\n\nexport var useQueryClient = function useQueryClient() {\n  var queryClient = React.useContext(getQueryClientContext(React.useContext(QueryClientSharingContext)));\n\n  if (!queryClient) {\n    throw new Error('No QueryClient set, use QueryClientProvider to set one');\n  }\n\n  return queryClient;\n};\nexport var QueryClientProvider = function QueryClientProvider(_ref) {\n  var client = _ref.client,\n      _ref$contextSharing = _ref.contextSharing,\n      contextSharing = _ref$contextSharing === void 0 ? false : _ref$contextSharing,\n      children = _ref.children;\n  React.useEffect(function () {\n    client.mount();\n    return function () {\n      client.unmount();\n    };\n  }, [client]);\n  var Context = getQueryClientContext(contextSharing);\n  return /*#__PURE__*/React.createElement(QueryClientSharingContext.Provider, {\n    value: contextSharing\n  }, /*#__PURE__*/React.createElement(Context.Provider, {\n    value: client\n  }, children));\n};","import React from 'react'; // CONTEXT\n\nfunction createValue() {\n  var _isReset = false;\n  return {\n    clearReset: function clearReset() {\n      _isReset = false;\n    },\n    reset: function reset() {\n      _isReset = true;\n    },\n    isReset: function isReset() {\n      return _isReset;\n    }\n  };\n}\n\nvar QueryErrorResetBoundaryContext = /*#__PURE__*/React.createContext(createValue()); // HOOK\n\nexport var useQueryErrorResetBoundary = function useQueryErrorResetBoundary() {\n  return React.useContext(QueryErrorResetBoundaryContext);\n}; // COMPONENT\n\nexport var QueryErrorResetBoundary = function QueryErrorResetBoundary(_ref) {\n  var children = _ref.children;\n  var value = React.useMemo(function () {\n    return createValue();\n  }, []);\n  return /*#__PURE__*/React.createElement(QueryErrorResetBoundaryContext.Provider, {\n    value: value\n  }, typeof children === 'function' ? children(value) : children);\n};","export function shouldThrowError(suspense, _useErrorBoundary, params) {\n  // Allow useErrorBoundary function to override throwing behavior on a per-error basis\n  if (typeof _useErrorBoundary === 'function') {\n    return _useErrorBoundary.apply(void 0, params);\n  } // Allow useErrorBoundary to override suspense's throwing behavior\n\n\n  if (typeof _useErrorBoundary === 'boolean') return _useErrorBoundary; // If suspense is enabled default to throwing errors\n\n  return !!suspense;\n}","import React from 'react';\nimport { notifyManager } from '../core/notifyManager';\nimport { useQueryErrorResetBoundary } from './QueryErrorResetBoundary';\nimport { useQueryClient } from './QueryClientProvider';\nimport { shouldThrowError } from './utils';\nexport function useBaseQuery(options, Observer) {\n  var mountedRef = React.useRef(false);\n\n  var _React$useState = React.useState(0),\n      forceUpdate = _React$useState[1];\n\n  var queryClient = useQueryClient();\n  var errorResetBoundary = useQueryErrorResetBoundary();\n  var defaultedOptions = queryClient.defaultQueryObserverOptions(options); // Make sure results are optimistically set in fetching state before subscribing or updating options\n\n  defaultedOptions.optimisticResults = true; // Include callbacks in batch renders\n\n  if (defaultedOptions.onError) {\n    defaultedOptions.onError = notifyManager.batchCalls(defaultedOptions.onError);\n  }\n\n  if (defaultedOptions.onSuccess) {\n    defaultedOptions.onSuccess = notifyManager.batchCalls(defaultedOptions.onSuccess);\n  }\n\n  if (defaultedOptions.onSettled) {\n    defaultedOptions.onSettled = notifyManager.batchCalls(defaultedOptions.onSettled);\n  }\n\n  if (defaultedOptions.suspense) {\n    // Always set stale time when using suspense to prevent\n    // fetching again when directly mounting after suspending\n    if (typeof defaultedOptions.staleTime !== 'number') {\n      defaultedOptions.staleTime = 1000;\n    } // Set cache time to 1 if the option has been set to 0\n    // when using suspense to prevent infinite loop of fetches\n\n\n    if (defaultedOptions.cacheTime === 0) {\n      defaultedOptions.cacheTime = 1;\n    }\n  }\n\n  if (defaultedOptions.suspense || defaultedOptions.useErrorBoundary) {\n    // Prevent retrying failed query if the error boundary has not been reset yet\n    if (!errorResetBoundary.isReset()) {\n      defaultedOptions.retryOnMount = false;\n    }\n  }\n\n  var _React$useState2 = React.useState(function () {\n    return new Observer(queryClient, defaultedOptions);\n  }),\n      observer = _React$useState2[0];\n\n  var result = observer.getOptimisticResult(defaultedOptions);\n  React.useEffect(function () {\n    mountedRef.current = true;\n    errorResetBoundary.clearReset();\n    var unsubscribe = observer.subscribe(notifyManager.batchCalls(function () {\n      if (mountedRef.current) {\n        forceUpdate(function (x) {\n          return x + 1;\n        });\n      }\n    })); // Update result to make sure we did not miss any query updates\n    // between creating the observer and subscribing to it.\n\n    observer.updateResult();\n    return function () {\n      mountedRef.current = false;\n      unsubscribe();\n    };\n  }, [errorResetBoundary, observer]);\n  React.useEffect(function () {\n    // Do not notify on updates because of changes in the options because\n    // these changes should already be reflected in the optimistic result.\n    observer.setOptions(defaultedOptions, {\n      listeners: false\n    });\n  }, [defaultedOptions, observer]); // Handle suspense\n\n  if (defaultedOptions.suspense && result.isLoading) {\n    throw observer.fetchOptimistic(defaultedOptions).then(function (_ref) {\n      var data = _ref.data;\n      defaultedOptions.onSuccess == null ? void 0 : defaultedOptions.onSuccess(data);\n      defaultedOptions.onSettled == null ? void 0 : defaultedOptions.onSettled(data, null);\n    }).catch(function (error) {\n      errorResetBoundary.clearReset();\n      defaultedOptions.onError == null ? void 0 : defaultedOptions.onError(error);\n      defaultedOptions.onSettled == null ? void 0 : defaultedOptions.onSettled(undefined, error);\n    });\n  } // Handle error boundary\n\n\n  if (result.isError && !errorResetBoundary.isReset() && !result.isFetching && shouldThrowError(defaultedOptions.suspense, defaultedOptions.useErrorBoundary, [result.error, observer.getCurrentQuery()])) {\n    throw result.error;\n  } // Handle result property usage tracking\n\n\n  if (defaultedOptions.notifyOnChangeProps === 'tracked') {\n    result = observer.trackResult(result, defaultedOptions);\n  }\n\n  return result;\n}","import { QueryObserver } from '../core';\nimport { parseQueryArgs } from '../core/utils';\nimport { useBaseQuery } from './useBaseQuery'; // HOOK\n\nexport function useQuery(arg1, arg2, arg3) {\n  var parsedOptions = parseQueryArgs(arg1, arg2, arg3);\n  return useBaseQuery(parsedOptions, QueryObserver);\n}","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash.slice()\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} [raw] True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} [raw]     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     [raw] True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","import * as cookie from 'cookie';\r\nexport function hasDocumentCookie() {\r\n    // Can we get/set cookies on document.cookie?\r\n    return typeof document === 'object' && typeof document.cookie === 'string';\r\n}\r\nexport function cleanCookies() {\r\n    document.cookie.split(';').forEach(function (c) {\r\n        document.cookie = c\r\n            .replace(/^ +/, '')\r\n            .replace(/=.*/, '=;expires=' + new Date().toUTCString() + ';path=/');\r\n    });\r\n}\r\nexport function parseCookies(cookies, options) {\r\n    if (typeof cookies === 'string') {\r\n        return cookie.parse(cookies, options);\r\n    }\r\n    else if (typeof cookies === 'object' && cookies !== null) {\r\n        return cookies;\r\n    }\r\n    else {\r\n        return {};\r\n    }\r\n}\r\nexport function isParsingCookie(value, doNotParse) {\r\n    if (typeof doNotParse === 'undefined') {\r\n        // We guess if the cookie start with { or [, it has been serialized\r\n        doNotParse =\r\n            !value || (value[0] !== '{' && value[0] !== '[' && value[0] !== '\"');\r\n    }\r\n    return !doNotParse;\r\n}\r\nexport function readCookie(value, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var cleanValue = cleanupCookieValue(value);\r\n    if (isParsingCookie(cleanValue, options.doNotParse)) {\r\n        try {\r\n            return JSON.parse(cleanValue);\r\n        }\r\n        catch (e) {\r\n            // At least we tried\r\n        }\r\n    }\r\n    // Ignore clean value if we failed the deserialization\r\n    // It is not relevant anymore to trim those values\r\n    return value;\r\n}\r\nfunction cleanupCookieValue(value) {\r\n    // express prepend j: before serializing a cookie\r\n    if (value && value[0] === 'j' && value[1] === ':') {\r\n        return value.substr(2);\r\n    }\r\n    return value;\r\n}\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport * as cookie from 'cookie';\r\nimport { hasDocumentCookie, parseCookies, readCookie } from './utils';\r\nvar Cookies = /** @class */ (function () {\r\n    function Cookies(cookies, options) {\r\n        var _this = this;\r\n        this.changeListeners = [];\r\n        this.HAS_DOCUMENT_COOKIE = false;\r\n        this.cookies = parseCookies(cookies, options);\r\n        new Promise(function () {\r\n            _this.HAS_DOCUMENT_COOKIE = hasDocumentCookie();\r\n        }).catch(function () { });\r\n    }\r\n    Cookies.prototype._updateBrowserValues = function (parseOptions) {\r\n        if (!this.HAS_DOCUMENT_COOKIE) {\r\n            return;\r\n        }\r\n        this.cookies = cookie.parse(document.cookie, parseOptions);\r\n    };\r\n    Cookies.prototype._emitChange = function (params) {\r\n        for (var i = 0; i < this.changeListeners.length; ++i) {\r\n            this.changeListeners[i](params);\r\n        }\r\n    };\r\n    Cookies.prototype.get = function (name, options, parseOptions) {\r\n        if (options === void 0) { options = {}; }\r\n        this._updateBrowserValues(parseOptions);\r\n        return readCookie(this.cookies[name], options);\r\n    };\r\n    Cookies.prototype.getAll = function (options, parseOptions) {\r\n        if (options === void 0) { options = {}; }\r\n        this._updateBrowserValues(parseOptions);\r\n        var result = {};\r\n        for (var name_1 in this.cookies) {\r\n            result[name_1] = readCookie(this.cookies[name_1], options);\r\n        }\r\n        return result;\r\n    };\r\n    Cookies.prototype.set = function (name, value, options) {\r\n        var _a;\r\n        if (typeof value === 'object') {\r\n            value = JSON.stringify(value);\r\n        }\r\n        this.cookies = __assign(__assign({}, this.cookies), (_a = {}, _a[name] = value, _a));\r\n        if (this.HAS_DOCUMENT_COOKIE) {\r\n            document.cookie = cookie.serialize(name, value, options);\r\n        }\r\n        this._emitChange({ name: name, value: value, options: options });\r\n    };\r\n    Cookies.prototype.remove = function (name, options) {\r\n        var finalOptions = (options = __assign(__assign({}, options), { expires: new Date(1970, 1, 1, 0, 0, 1), maxAge: 0 }));\r\n        this.cookies = __assign({}, this.cookies);\r\n        delete this.cookies[name];\r\n        if (this.HAS_DOCUMENT_COOKIE) {\r\n            document.cookie = cookie.serialize(name, '', finalOptions);\r\n        }\r\n        this._emitChange({ name: name, value: undefined, options: options });\r\n    };\r\n    Cookies.prototype.addChangeListener = function (callback) {\r\n        this.changeListeners.push(callback);\r\n    };\r\n    Cookies.prototype.removeChangeListener = function (callback) {\r\n        var idx = this.changeListeners.indexOf(callback);\r\n        if (idx >= 0) {\r\n            this.changeListeners.splice(idx, 1);\r\n        }\r\n    };\r\n    return Cookies;\r\n}());\r\nexport default Cookies;\r\n","/**\n * Removes fields with value 'undefined' from an object (not recursive).\n *\n * Use the `inPlace` parameter to modify the object (using `delete`), rather than creating a new object.\n *\n * See https://stackoverflow.com/questions/25421233\n */\nexport function removeUndefined(obj: Record<string, unknown>, inPlace = false) {\n  if (inPlace) {\n    Object.keys(obj).forEach(key =>\n      obj[key] === undefined ? delete obj[key] : {},\n    )\n    return obj\n  } else {\n    return Object.keys(obj).reduce((acc, key) => {\n      const _acc = acc\n      if (obj[key] !== undefined) _acc[key] = obj[key]\n      return _acc\n    }, {})\n  }\n}\n","// http://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/discussion/DiscussionReplyBundle.html\nexport type DiscussionReplyBundle = {\n  id: string\n  threadId: string\n  forumId: string\n  projectId: string\n  createdOn: string\n  createdBy: string\n  modifiedOn: string\n  etag: string\n  messageKey: string\n  isEdited: boolean\n  isDeleted: boolean\n}\n\nexport type DiscussionThreadBundle = {\n  id: string\n  forumId: string\n  projectId: string\n  title: string\n  createdOn: string\n  createdBy: string\n  modifiedOn: string\n  etag: string\n  messageKey: string\n  numberOfViews: number\n  numberOfReplies: number\n  lastActivity: string\n  activeAuthors: string[]\n  isEdited: boolean\n  isDeleted: boolean\n  isPinned: boolean\n}\n\nexport enum DiscussionThreadOrder {\n  NUMBER_OF_REPLIES = 'NUMBER_OF_REPLIES',\n  NUMBER_OF_VIEWS = 'NUMBER_OF_VIEWS',\n  PINNED_AND_LAST_ACTIVITY = 'PINNED_AND_LAST_ACTIVITY',\n  THREAD_TITLE = 'THREAD_TITLE',\n}\n\nexport enum DiscussionReplyOrder {\n  CREATED_ON = 'CREATED_ON',\n}\n\nexport enum DiscussionFilter {\n  NO_FILTER = 'NO_FILTER',\n  DELETED_ONLY = 'DELETED_ONLY',\n  EXCLUDE_DELETED = 'EXCLUDE_DELETED',\n}\n\nexport type CreateDiscussionReply = {\n  threadId: string\n  messageMarkdown: string\n}\n\nexport type UpdateDiscussionReply = {\n  replyId: string\n  messageMarkdown: string\n}\n\nexport type CreateDiscussionThread = {\n  forumId: string\n  title: string\n  messageMarkdown: string\n}\n\nexport type UpdateThreadMessageRequest = {\n  messageMarkdown: string\n  threadId: string\n}\n\nexport type UpdateThreadTitleRequest = {\n  title: string\n  threadId: string\n}\n","const sufixes: string[] = [\n  'Bytes',\n  'KB',\n  'MB',\n  'GB',\n  'TB',\n  'PB',\n  'EB',\n  'ZB',\n  'YB',\n]\n\nexport function calculateFriendlyFileSize(bytes: number) {\n  if (!bytes) {\n    return ''\n  }\n  // https://stackoverflow.com/questions/10420352/converting-file-size-in-bytes-to-human-readable-string\n  const i = Math.floor(Math.log(bytes) / Math.log(1024))\n  // tslint:disable-next-line\n  return (\n    (!bytes && '0 Bytes') ||\n    (bytes / Math.pow(1024, i)).toFixed(2) + ' ' + sufixes[i]\n  )\n}\n","export enum ErrorResponseCode {\n  /* The user's password must be reset via email. */\n  PASSWORD_RESET_VIA_EMAIL_REQUIRED = 'PASSWORD_RESET_VIA_EMAIL_REQUIRED',\n  /* The user has not passed the certification process. */\n  USER_CERTIFICATION_REQUIRED = 'USER_CERTIFICATION_REQUIRED',\n  /* At least one of the columns listed in a FacetColumnRequest is not facet-able according to the table's schema. */\n  INVALID_TABLE_QUERY_FACET_COLUMN_REQUEST = 'INVALID_TABLE_QUERY_FACET_COLUMN_REQUEST',\n  /* The OAuth Client is not verified. */\n  OAUTH_CLIENT_NOT_VERIFIED = 'OAUTH_CLIENT_NOT_VERIFIED',\n  /* Two-factor authentication is required. */\n  TWO_FA_REQUIRED = 'TWO_FA_REQUIRED',\n}\n\n/**\n * https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/ErrorResponse.html\n */\nexport type ErrorResponse = {\n  concreteType: 'org.sagebionetworks.repo.model.ErrorResponse'\n  reason: string\n  errorCode?: ErrorResponseCode\n}\n\nexport type TwoFactorAuthErrorResponse = {\n  concreteType: 'org.sagebionetworks.repo.model.auth.TwoFactorAuthErrorResponse'\n  /* The id of the user that attempted to authenticate.*/\n  userId: number\n  /* Token included when two-factor authentication is required. If present the client will need to include this token as part of the TwoFactorAuthLoginRequest.*/\n  twoFaToken: string\n  /* The reason for the error*/\n  reason: string\n  /* A code to be used by clients to handle the error.*/\n  errorCode: ErrorResponseCode.TWO_FA_REQUIRED\n}\n","import { JSONSchema7 } from 'json-schema'\nimport SparkMD5 from 'spark-md5'\nimport UniversalCookies from 'universal-cookie'\nimport { SynapseConstants } from '.'\nimport {\n  ACCESS_APPROVAL,\n  ACCESS_APPROVAL_BY_ID,\n  ACCESS_REQUEST_SUBMISSION_SEARCH,\n  ACCESS_REQUIREMENT_ACL,\n  ACCESS_REQUIREMENT_BY_ID,\n  ACCESS_REQUIREMENT_DATA_ACCESS_REQUEST_FOR_UPDATE,\n  ACCESS_REQUIREMENT_RESEARCH_PROJECT_FOR_UPDATE,\n  ACCESS_REQUIREMENT_SEARCH,\n  ACCESS_REQUIREMENT_STATUS,\n  ACCESS_REQUIREMENT_WIKI_PAGE_KEY,\n  ACTIVITY_FOR_ENTITY,\n  ALIAS_AVAILABLE,\n  APPROVED_SUBMISSION_INFO,\n  ASYNCHRONOUS_JOB_TOKEN,\n  BIND_INVITATION_TO_AUTHENTICATED_USER,\n  DATA_ACCESS_REQUEST,\n  DATA_ACCESS_REQUEST_SUBMISSION,\n  DATA_ACCESS_SUBMISSION_BY_ID,\n  DOI_ASSOCIATION,\n  ENTITY,\n  ENTITY_ACCESS,\n  ENTITY_ACCESS_REQUIREMENTS,\n  ENTITY_BUNDLE_V2,\n  ENTITY_HEADER_BY_ID,\n  ENTITY_HEADERS,\n  ENTITY_ID,\n  ENTITY_JSON,\n  ENTITY_PATH,\n  ENTITY_SCHEMA_BINDING,\n  ENTITY_SCHEMA_VALIDATION,\n  EVALUATION,\n  EVALUATION_BY_ID,\n  EVALUATIONS_BY_ID,\n  FAVORITES,\n  FILE_HANDLE_BATCH,\n  FORUM,\n  FORUM_THREAD,\n  INVITEE_VERIFICATION_SIGNED_TOKEN,\n  MEMBERSHIP_INVITATION,\n  NOTIFICATION_EMAIL,\n  PROFILE_IMAGE_PREVIEW,\n  PROJECTS,\n  REGISTER_ACCOUNT_STEP_1,\n  REGISTER_ACCOUNT_STEP_2,\n  REGISTERED_SCHEMA_ID,\n  RESEARCH_PROJECT,\n  SCHEMA_VALIDATION_GET,\n  SCHEMA_VALIDATION_START,\n  SIGN_TERMS_OF_USE,\n  TABLE_QUERY_ASYNC_GET,\n  TABLE_QUERY_ASYNC_START,\n  TEAM_ID_MEMBER_ID,\n  TEAM_ID_MEMBER_ID_WITH_NOTIFICATION,\n  TEAM_MEMBER,\n  TEAM_MEMBERS,\n  THREAD,\n  THREAD_ID,\n  TRASHCAN_PURGE,\n  TRASHCAN_RESTORE,\n  TRASHCAN_VIEW,\n  USER_BUNDLE,\n  USER_GROUP_HEADERS,\n  USER_GROUP_HEADERS_BATCH,\n  USER_ID_BUNDLE,\n  USER_PROFILE,\n  USER_PROFILE_ID,\n  VERIFICATION_SUBMISSION,\n} from './APIConstants'\nimport { dispatchDownloadListChangeEvent } from './functions/dispatchDownloadListChangeEvent'\nimport { BackendDestinationEnum, getEndpoint } from './functions/getEndpoint'\nimport { removeUndefined } from './functions/ObjectUtils'\nimport {\n  DATETIME_UTC_COOKIE_KEY,\n  NETWORK_UNAVAILABLE_MESSAGE,\n} from './SynapseConstants'\nimport {\n  ACCESS_TYPE,\n  AccessApproval,\n  AccessCodeResponse,\n  AccessControlList,\n  AccessRequirement,\n  AccessRequirementStatus,\n  ACTSubmissionStatus,\n  AddPartResponse,\n  AsynchronousJobStatus,\n  AsyncJobId,\n  BatchFileRequest,\n  BatchFileResult,\n  BatchPresignedUploadUrlRequest,\n  BatchPresignedUploadUrlResponse,\n  BulkFileDownloadRequest,\n  BulkFileDownloadResponse,\n  DoiAssociation,\n  DownloadFromTableRequest,\n  DownloadFromTableResult,\n  DownloadList,\n  DownloadOrder,\n  Entity,\n  EntityBundle,\n  EntityBundleRequest,\n  EntityHeader,\n  EntityId,\n  EntityJson,\n  EntityLookupRequest,\n  EntityPath,\n  Evaluation,\n  EvaluationRound,\n  FileEntity,\n  FileHandle,\n  FileHandleAssociateType,\n  FileHandleAssociation,\n  FileHandleResults,\n  FileResult,\n  FileUploadComplete,\n  FormChangeRequest,\n  FormData,\n  FormGroup,\n  FormRejection,\n  ListRequest,\n  ListResponse,\n  LoginResponse,\n  MultipartUploadRequest,\n  MultipartUploadStatus,\n  NotificationEmail,\n  OAuthClientPublic,\n  OAuthConsentGrantedResponse,\n  ObjectType,\n  OIDCAuthorizationRequest,\n  OIDCAuthorizationRequestDescription,\n  PaginatedResults,\n  ProjectFilesStatisticsRequest,\n  ProjectFilesStatisticsResponse,\n  ProjectHeaderList,\n  QueryBundleRequest,\n  QueryResultBundle,\n  QueryTableResults,\n  ReferenceList,\n  Renewal,\n  Request,\n  RestrictionInformationRequest,\n  RestrictionInformationResponse,\n  Submission as EvaluationSubmission,\n  SynapseVersion,\n  TrashedEntity,\n  UserBundle,\n  UserGroupHeaderResponsePage,\n  UserProfile,\n  VerificationSubmission,\n  WikiPage,\n  WikiPageKey,\n} from './synapseTypes/'\nimport {\n  AccessApprovalSearchRequest,\n  AccessApprovalSearchResponse,\n  CreateSubmissionRequest,\n  EntityChildrenRequest,\n  EntityChildrenResponse,\n  ManagedACTAccessRequirementStatus,\n  TYPE_FILTER,\n  UserGroupHeaderResponse,\n} from './synapseTypes'\nimport {\n  AccessRequirementSearchRequest,\n  AccessRequirementSearchResponse,\n} from './synapseTypes/AccessRequirement/AccessRequirementSearch'\nimport { SubmissionStateChangeRequest } from './synapseTypes/AccessRequirement/SubmissionStateChangeRequest'\nimport { AccessTokenGenerationRequest } from './synapseTypes/AccessToken/AccessTokenGenerationRequest'\nimport { AccessTokenGenerationResponse } from './synapseTypes/AccessToken/AccessTokenGenerationResponse'\nimport { AccessTokenRecordList } from './synapseTypes/AccessToken/AccessTokenRecord'\nimport { AuthenticatedOn } from './synapseTypes/AuthenticatedOn'\nimport { ChallengePagedResults } from './synapseTypes/ChallengePagedResults'\nimport {\n  ChangePasswordWithCurrentPassword,\n  ChangePasswordWithToken,\n} from './synapseTypes/ChangePasswordRequests'\nimport {\n  CreateDiscussionReply,\n  CreateDiscussionThread,\n  DiscussionFilter,\n  DiscussionReplyBundle,\n  DiscussionReplyOrder,\n  DiscussionThreadBundle,\n  DiscussionThreadOrder,\n  UpdateDiscussionReply,\n  UpdateThreadMessageRequest,\n  UpdateThreadTitleRequest,\n} from './synapseTypes/DiscussionBundle'\nimport {\n  DiscussionSearchRequest,\n  DiscussionSearchResponse,\n} from './synapseTypes/DiscussionSearch'\nimport { AddBatchOfFilesToDownloadListRequest } from './synapseTypes/DownloadListV2/AddBatchOfFilesToDownloadListRequest'\nimport { AddBatchOfFilesToDownloadListResponse } from './synapseTypes/DownloadListV2/AddBatchOfFilesToDownloadListResponse'\nimport { AddToDownloadListRequest } from './synapseTypes/DownloadListV2/AddToDownloadListRequest'\nimport { AddToDownloadListResponse } from './synapseTypes/DownloadListV2/AddToDownloadListResponse'\nimport { DownloadListItem } from './synapseTypes/DownloadListV2/DownloadListItem'\nimport { DownloadListManifestRequest } from './synapseTypes/DownloadListV2/DownloadListManifestRequest'\nimport { DownloadListPackageRequest } from './synapseTypes/DownloadListV2/DownloadListPackageRequest'\nimport { DownloadListPackageResponse } from './synapseTypes/DownloadListV2/DownloadListPackageResponse'\nimport { DownloadListQueryRequest } from './synapseTypes/DownloadListV2/DownloadListQueryRequest'\nimport { DownloadListQueryResponse } from './synapseTypes/DownloadListV2/DownloadListQueryResponse'\nimport {\n  ActionRequiredRequest,\n  AvailableFilesRequest,\n  FilesStatisticsRequest,\n  QueryRequestDetails,\n} from './synapseTypes/DownloadListV2/QueryRequestDetails'\nimport {\n  ActionRequiredResponse,\n  AvailableFilesResponse,\n  FilesStatisticsResponse,\n  QueryResponseDetails,\n} from './synapseTypes/DownloadListV2/QueryResponseDetails'\nimport { RemoveBatchOfFilesFromDownloadListRequest } from './synapseTypes/DownloadListV2/RemoveBatchOfFilesFromDownloadListRequest'\nimport { RemoveBatchOfFilesFromDownloadListResponse } from './synapseTypes/DownloadListV2/RemoveBatchOfFilesFromDownloadListResponse'\nimport { EvaluationRoundListRequest } from './synapseTypes/Evaluation/EvaluationRoundListRequest'\nimport { EvaluationRoundListResponse } from './synapseTypes/Evaluation/EvaluationRoundListResponse'\nimport { UserEvaluationPermissions } from './synapseTypes/Evaluation/UserEvaluationPermissions'\nimport { GetProjectsParameters } from './synapseTypes/GetProjectsParams'\nimport { HasAccessResponse } from './synapseTypes/HasAccessResponse'\nimport { MessageURL } from './synapseTypes/MessageUrl'\nimport {\n  AccountSetupInfo,\n  AliasCheckRequest,\n  AliasCheckResponse,\n  EmailValidationSignedToken,\n  NewUser,\n  PrincipalAliasRequest,\n  PrincipalAliasResponse,\n} from './synapseTypes/Principal/PrincipalServices'\nimport { ResearchProject } from './synapseTypes/ResearchProject'\nimport { JsonSchemaObjectBinding } from './synapseTypes/Schema/JsonSchemaObjectBinding'\nimport { ValidationResults } from './synapseTypes/Schema/ValidationResults'\nimport { SearchQuery, SearchResults } from './synapseTypes/Search'\nimport { TableUpdateTransactionRequest } from './synapseTypes/Table/TableUpdate'\nimport {\n  SqlTransformResponse,\n  TransformSqlWithFacetsRequest,\n} from './synapseTypes/Table/TransformSqlWithFacetsRequest'\nimport { Team } from './synapseTypes/Team'\nimport { VersionInfo } from './synapseTypes/VersionInfo'\nimport {\n  SubmissionSearchRequest,\n  SubmissionSearchResponse,\n} from './synapseTypes/AccessSubmission'\nimport {\n  SubmissionInfoPage,\n  SubmissionInfoPageRequest,\n} from './synapseTypes/SubmissionInfo'\nimport { Submission as DataAccessSubmission } from './synapseTypes/AccessRequirement/Submission'\nimport { SynapseClientError } from './SynapseClientError'\nimport {\n  OAuthClient,\n  OAuthClientIdAndSecret,\n  OAuthClientList,\n  OAuthClientVerificationPrecheckResult,\n} from './synapseTypes/OAuthClient'\nimport { Activity } from './synapseTypes/Provenance/Provenance'\nimport {\n  FavoriteSortBy,\n  FavoriteSortDirection,\n} from './synapseTypes/FavoriteSortBy'\nimport {\n  PassingRecord,\n  Quiz,\n  QuizResponse,\n} from './synapseTypes/CertificationQuiz/Quiz'\nimport { GeoData } from '../containers/GoogleMap/GeoData'\nimport { TeamMember } from './synapseTypes/TeamMember'\nimport {\n  SubscriberPagedResults,\n  Subscription,\n  SubscriptionPagedResults,\n  SubscriptionRequest,\n  Topic,\n} from './synapseTypes/Subscription'\nimport { calculateFriendlyFileSize } from './functions/calculateFriendlyFileSize'\nimport { PaginatedIds } from './synapseTypes/PaginatedIds'\nimport { UploadDestination } from './synapseTypes/File/UploadDestination'\nimport { JoinTeamSignedToken } from './synapseTypes/JoinTeamSignedToken'\nimport { ResponseMessage } from './synapseTypes/ResponseMessage'\nimport { MembershipInvtnSignedToken } from './synapseTypes/SignedToken/MembershipInvtnSignedToken'\nimport { MembershipInvitation } from './synapseTypes/MembershipInvitation'\nimport { InviteeVerificationSignedToken } from './synapseTypes/SignedToken/InviteeVerificationSignedToken'\nimport {\n  ErrorResponseCode,\n  TwoFactorAuthErrorResponse,\n} from './synapseTypes/ErrorResponse'\nimport { TwoFactorAuthLoginRequest } from './synapseTypes/TwoFactorAuthLoginRequest'\nimport {\n  TotpSecret,\n  TotpSecretActivationRequest,\n  TwoFactorAuthStatus,\n} from './synapseTypes/TotpSecret'\nimport { TwoFactorAuthRecoveryCodes } from './synapseTypes/TwoFactorAuthRecoveryCodes'\n\nconst cookies = new UniversalCookies()\n\n// TODO: Create JSON response types for all return types\nexport const IS_OUTSIDE_SYNAPSE_ORG = !window.location.hostname\n  .toLowerCase()\n  .includes('.synapse.org')\n\nexport const ACCESS_TOKEN_COOKIE_KEY =\n  'org.sagebionetworks.security.user.login.token'\n\n// Max size file that we will allow the caller to read into memory (5MB)\nconst MAX_JS_FILE_DOWNLOAD_SIZE = 5242880\n// This corresponds to the Synapse-managed S3 storage location:\nexport const SYNAPSE_STORAGE_LOCATION_ID = 1\nexport const getRootURL = () => {\n  const portString = window.location.port ? `:${window.location.port}` : ''\n  return `${window.location.protocol}//${window.location.hostname}${portString}/`\n}\n\n/**\n * Waits t number of milliseconds\n *\n * @export\n * @param {number} t milliseconds\n * @returns after t milliseconds\n */\nexport function delay(t: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve.bind(null, {}), t)\n  })\n}\n\n/**\n * Error message returned by the Synapse Backend\n */\nexport type SynapseError = {\n  reason: string\n}\n\n/**\n * Invokes a function that makes a request to Synapse and returns null if the server responds with a 404.\n * @param fn a function that may throw a SynapseClientError when encountering an HTTP Error Code\n * @returns The result of the function call, or null if the result is a 404 \"Not Found\" error.\n */\nexport async function allowNotFoundError<T>(\n  fn: () => Promise<T>,\n): Promise<T | null> {\n  let response = null\n  try {\n    response = await fn()\n  } catch (e) {\n    if (e instanceof SynapseClientError && e.status === 404) {\n      // Permitted\n    } else {\n      throw e\n    }\n  }\n  return response\n}\n\n/**\n * If the asynchronous request returns a TwoFactorAuthErrorResponse, return that error instead of throwing it. Other\n * types of errors will still be thrown.\n * @param fn\n */\nexport async function returnIfTwoFactorAuthError<T>(\n  fn: () => Promise<T>,\n): Promise<T | TwoFactorAuthErrorResponse> {\n  let response = null\n  try {\n    response = await fn()\n  } catch (e) {\n    if (\n      e instanceof SynapseClientError &&\n      e.status === 401 &&\n      e.errorResponse &&\n      'errorCode' in e.errorResponse &&\n      e.errorResponse.errorCode === ErrorResponseCode.TWO_FA_REQUIRED &&\n      e.errorResponse.concreteType ===\n        'org.sagebionetworks.repo.model.auth.TwoFactorAuthErrorResponse'\n    ) {\n      return e.errorResponse\n    } else {\n      throw e\n    }\n  }\n  return response\n}\n\n/*\n  0 - no internet connection\n  429 - Too Many Requests\n  502 - Bad Gateway\n  503 - Service Unavailable\n  504 - Gateway Timeout\n*/\nconst RETRY_STATUS_CODES = [0, 429, 502, 503, 504]\nconst MAX_RETRY_STATUS_CODES = [502, 503]\nconst MAX_RETRY = 3\n/**\n * Fetches data, retrying if the HTTP status code indicates that it could be retried. Contains custom logic for\n * handling errors returned by the Synapse backend.\n * @throws SynapseClientError\n */\nconst fetchWithExponentialTimeout = async <TResponse>(\n  url: RequestInfo,\n  options: RequestInit,\n  delayMs = 1000,\n): Promise<TResponse> => {\n  let response\n  try {\n    response = await fetch(url, options)\n  } catch (err) {\n    throw new SynapseClientError(0, NETWORK_UNAVAILABLE_MESSAGE, url.toString())\n  }\n\n  let numOfTry = 1\n  while (response.status && RETRY_STATUS_CODES.includes(response.status)) {\n    await delay(delayMs)\n    // Exponential backoff if we re-fetch\n    delayMs = delayMs * 2\n    response = await fetch(url, options)\n    if (MAX_RETRY_STATUS_CODES.includes(response.status)) {\n      numOfTry++\n      if (numOfTry == MAX_RETRY) {\n        break\n      }\n    }\n  }\n\n  const contentType = response.headers.get('Content-Type')\n  const responseBody = await response.text()\n  let responseObject: TResponse | SynapseError | string = responseBody\n  try {\n    // try to parse it as json\n    if (contentType && contentType.includes('application/json')) {\n      responseObject = JSON.parse(responseBody) as TResponse | SynapseError\n    }\n  } catch (error) {\n    console.warn('Failed to parse response as JSON', responseBody)\n  }\n\n  if (response.ok) {\n    return responseObject as TResponse\n  } else if (\n    responseObject !== null &&\n    typeof responseObject === 'object' &&\n    'reason' in responseObject\n  ) {\n    throw new SynapseClientError(\n      response.status,\n      responseObject.reason,\n      url.toString(),\n      responseObject,\n    )\n  } else {\n    throw new SynapseClientError(\n      response.status,\n      JSON.stringify(responseObject),\n      url.toString(),\n    )\n  }\n}\n\nexport const doPost = <T>(\n  url: string,\n  requestJsonObject: unknown,\n  accessToken: string | undefined,\n  endpoint: BackendDestinationEnum,\n  additionalOptions: RequestInit = {},\n): Promise<T> => {\n  const options: RequestInit = {\n    body: JSON.stringify(requestJsonObject),\n    headers: {\n      Accept: '*/*',\n      'Access-Control-Request-Headers': 'authorization',\n      'Content-Type': 'application/json',\n    },\n    method: 'POST',\n    mode: 'cors',\n    ...additionalOptions,\n  }\n  if (accessToken) {\n    options.headers!['authorization'] = `Bearer ${accessToken}`\n  }\n  const usedEndpoint = getEndpoint(endpoint)\n  return fetchWithExponentialTimeout<T>(usedEndpoint + url, options)\n}\nexport const doGet = <T>(\n  url: string,\n  accessToken: string | undefined,\n  endpoint: BackendDestinationEnum,\n  additionalOptions: RequestInit = {},\n) => {\n  const options: RequestInit = {\n    headers: {\n      Accept: '*/*',\n      'Access-Control-Request-Headers': 'authorization',\n    },\n    method: 'GET',\n    mode: 'cors',\n    ...additionalOptions,\n  }\n  if (accessToken) {\n    options.headers!['authorization'] = `Bearer ${accessToken}`\n  }\n  const usedEndpoint = getEndpoint(endpoint)\n  return fetchWithExponentialTimeout<T>(usedEndpoint + url, options)\n}\n\nexport const doDelete = (\n  url: string,\n  accessToken: string | undefined,\n  endpoint: BackendDestinationEnum,\n  additionalOptions: RequestInit = {},\n) => {\n  const options: RequestInit = {\n    headers: {\n      Accept: '*/*',\n      'Access-Control-Request-Headers': 'authorization',\n    },\n    method: 'DELETE',\n    mode: 'cors',\n    ...additionalOptions,\n  }\n  if (accessToken) {\n    options.headers!['authorization'] = `Bearer ${accessToken}`\n  }\n  const usedEndpoint = getEndpoint(endpoint)\n  return fetchWithExponentialTimeout<void>(usedEndpoint + url, options)\n}\n\nexport const doPut = <T>(\n  url: string,\n  requestJsonObject: unknown,\n  accessToken: string | undefined,\n  endpoint: BackendDestinationEnum,\n  additionalOptions: RequestInit = {},\n): Promise<T> => {\n  const options: RequestInit = {\n    body: JSON.stringify(requestJsonObject),\n    headers: {\n      Accept: '*/*',\n      'Access-Control-Request-Headers': 'authorization',\n      'Content-Type': 'application/json',\n    },\n    method: 'PUT',\n    mode: 'cors',\n    ...additionalOptions,\n  }\n  if (accessToken) {\n    options.headers!['authorization'] = `Bearer ${accessToken}`\n  }\n  const usedEndpoint = getEndpoint(endpoint)\n  return fetchWithExponentialTimeout<T>(usedEndpoint + url, options)\n}\n\nexport const getVersion = (): Promise<SynapseVersion> => {\n  return doGet<SynapseVersion>(\n    '/repo/v1/version',\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/POST/entity/id/table/download/csv/async/start.html\n */\nexport const getDownloadFromTableRequest = async (\n  request: DownloadFromTableRequest,\n  accessToken: string | undefined = undefined,\n): Promise<DownloadFromTableResult> => {\n  const asyncJobId = await doPost<AsyncJobId>(\n    `/repo/v1/entity/${request.entityId}/table/download/csv/async/start`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  return getAsyncResultBodyFromJobId(\n    asyncJobId.token,\n    `/repo/v1/entity/${request.entityId}/table/download/csv/async/get/${asyncJobId.token}`,\n    accessToken,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/GET/fileHandle/handleId.html\n * Get a FileHandle using its ID.\n * Note: Only the user that created the FileHandle can access it directly.\n * @return FileHandle\n **/\nexport const getFileHandleById = (\n  handleId: string,\n  accessToken: string | undefined = undefined,\n): Promise<FileHandle> => {\n  return doGet<FileHandle>(\n    `/file/v1/fileHandle/${handleId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * http://rest-docs.synapse.org/rest/GET/file/id.html\n * Get the actual URL of the file from with an associated object .\n * @return a short lived presignedURL to be redirected with\n **/\nexport const getActualFileHandleByIdURL = (\n  handleId: string,\n  accessToken: string | undefined = undefined,\n  fileAssociateType: FileHandleAssociateType,\n  fileAssociateId: string,\n  redirect: boolean = true,\n): Promise<string> => {\n  // get the presigned URL for this file handle association.\n  return doGet<string>(\n    `/file/v1/file/${handleId}?fileAssociateType=${fileAssociateType}&fileAssociateId=${fileAssociateId}&redirect=${redirect}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/GET/fileHandle/handleId/url.html\n * Note: Only the user that created the FileHandle can use this method for download.\n * @return a short lived presignedURL to be redirected with\n **/\nexport const getFileHandleByIdURL = (\n  handleId: string,\n  accessToken: string | undefined = undefined,\n) => {\n  // get the presigned URL for this file handle\n  return doGet<string>(\n    `/file/v1/fileHandle/${handleId}/url?redirect=false`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get a completed asynchronous job. Will refetch every 500ms until COMPLETE or FAILED.\n * @param asyncJobId\n * @param responseBodyEndpoint\n * @param accessToken\n * @param setCurrentAsyncStatus - optional function that will receive the AsynchronousJobStatus object every time\n *   it's fetched, including while it is in the \"PROCESSING\" state.\n * @returns\n */\nexport const getAsyncResultFromJobId = async <TRequest, TResponse>(\n  asyncJobId: string,\n  responseBodyEndpoint: string,\n  accessToken?: string,\n  setCurrentAsyncStatus?: (\n    result: AsynchronousJobStatus<TRequest, TResponse>,\n  ) => void,\n): Promise<AsynchronousJobStatus<TRequest, TResponse>> => {\n  let response = await doGet<AsynchronousJobStatus<TRequest, TResponse>>(\n    ASYNCHRONOUS_JOB_TOKEN(asyncJobId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  setCurrentAsyncStatus?.(response)\n  while (response.jobState && response.jobState === 'PROCESSING') {\n    await delay(500)\n    response = await doGet<AsynchronousJobStatus<TRequest, TResponse>>(\n      ASYNCHRONOUS_JOB_TOKEN(asyncJobId),\n      accessToken,\n      BackendDestinationEnum.REPO_ENDPOINT,\n    )\n    setCurrentAsyncStatus?.(response)\n  }\n\n  if (response.jobState === 'FAILED') {\n    /**\n     * While we technically already have the failure reason in the response, the HTTP response doesn't give a helpful error code (e.g. 403)\n     * that we can use for an error banner. We can get the HTTP code if we fetch the response body directly.\n     */\n    const failureResponse = await doGet<TResponse>(\n      responseBodyEndpoint,\n      accessToken,\n      BackendDestinationEnum.REPO_ENDPOINT,\n    )\n    console.warn(\n      'SynapseClient.getAsyncResultFromJobId should have thrown an error, but instead retrieved the following response:',\n      failureResponse,\n    )\n  }\n  return response\n}\n\n/**\n * Get the response body for an asynchronous job, or throw an error if the job failed.\n * @param asyncJobId\n * @param responseBodyEndpoint\n * @param accessToken\n * @returns\n */\nexport const getAsyncResultBodyFromJobId = async <TResponse>(\n  asyncJobId: string,\n  responseBodyEndpoint: string,\n  accessToken?: string,\n): Promise<TResponse> => {\n  const response = await getAsyncResultFromJobId<unknown, TResponse>(\n    asyncJobId,\n    responseBodyEndpoint,\n    accessToken,\n  )\n\n  return response.responseBody!\n}\n\n/**\n * https://rest-docs.synapse.org/rest/POST/entity/id/table/query/nextPage/async/start.html\n * @param {*} queryBundleRequest\n * @param {*} accessToken\n */\nexport const getQueryTableAsyncJobResults = async (\n  queryBundleRequest: QueryBundleRequest,\n  accessToken?: string,\n  setCurrentAsyncStatus?: (\n    result: AsynchronousJobStatus<QueryBundleRequest, QueryResultBundle>,\n  ) => void,\n): Promise<AsynchronousJobStatus<QueryBundleRequest, QueryResultBundle>> => {\n  const asyncJobId = await doPost<AsyncJobId>(\n    TABLE_QUERY_ASYNC_START(queryBundleRequest.entityId),\n    queryBundleRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  return getAsyncResultFromJobId<QueryBundleRequest, QueryResultBundle>(\n    asyncJobId.token,\n    TABLE_QUERY_ASYNC_GET(queryBundleRequest.entityId, asyncJobId.token),\n    accessToken,\n    setCurrentAsyncStatus,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/POST/entity/id/table/query/nextPage/async/start.html\n * @param {*} queryBundleRequest\n * @param {*} accessToken\n * @param {*} signal\n */\nexport const getQueryTableResults = async (\n  queryBundleRequest: QueryBundleRequest,\n  accessToken?: string,\n  signal?: AbortSignal,\n): Promise<QueryResultBundle> => {\n  const asyncJobId = await doPost<AsyncJobId>(\n    `/repo/v1/entity/${queryBundleRequest.entityId}/table/query/async/start`,\n    queryBundleRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n    { signal },\n  )\n  return getAsyncResultBodyFromJobId(\n    asyncJobId.token,\n    `/repo/v1/entity/${queryBundleRequest.entityId}/table/query/async/get/${asyncJobId.token}`,\n    accessToken,\n  )\n}\n/**\n *  Run and return results from queryBundleRequest, queryBundle request must be of the\n *  form:\n *     {\n *        concreteType: String,\n *        query: {\n *           sql: String,\n *           partMask: Number\n *        }\n *     }\n * @param {*} queryBundleRequest\n * @param {*} [accessToken=undefined]\n * @returns Full dataset from synapse table query\n */\n\nexport const getFullQueryTableResults = async (\n  queryBundleRequest: QueryBundleRequest,\n  accessToken: string | undefined = undefined,\n  signal?: AbortSignal,\n): Promise<QueryResultBundle> => {\n  // get first page\n  let offset = 0\n  const { query, ...rest } = queryBundleRequest\n  const queryRequest: QueryBundleRequest = {\n    ...rest,\n    query: { ...query, offset: offset },\n    partMask:\n      queryBundleRequest.partMask |\n      SynapseConstants.BUNDLE_MASK_QUERY_MAX_ROWS_PER_PAGE,\n  }\n  const data = await getQueryTableResults(queryRequest, accessToken, signal)\n  // we are done if we return less than a max pagesize that the backend is willing to return.\n  let isDone = data.queryResult!.queryResults.rows.length < data.maxRowsPerPage!\n  offset += data.queryResult!.queryResults.rows.length\n  queryRequest.query.limit = data.maxRowsPerPage // set the limit to the actual max rows per page\n\n  while (!isDone) {\n    queryRequest.query.offset = offset\n    // update the maxPageSize to the largest possible value after the first page is complete.  This is a no-op after the second page.\n\n    const response = await getQueryTableResults(\n      queryRequest,\n      accessToken,\n      signal,\n    )\n    data.queryResult!.queryResults.rows.push(\n      ...response.queryResult!.queryResults.rows, // ... spread operator to push all elements on\n    )\n    isDone =\n      response.queryResult!.queryResults.rows.length < queryRequest.query.limit!\n    offset += response.queryResult!.queryResults.rows.length\n  }\n  return data\n}\n\n/**\n *  Log-in using the given username and password.  Will return a access token that must be used in\n *  authenticated requests.\n *  https://rest-docs.synapse.org/rest/POST/login2.html\n */\nexport async function login(\n  username: string,\n  password: string,\n  authenticationReceipt: string | null,\n  endpoint = BackendDestinationEnum.REPO_ENDPOINT,\n): Promise<LoginResponse | TwoFactorAuthErrorResponse> {\n  return returnIfTwoFactorAuthError(() =>\n    doPost(\n      '/auth/v1/login2',\n      { username, password, authenticationReceipt },\n      undefined,\n      endpoint,\n    ),\n  )\n}\n\n/**\n * Performs authentication using 2FA, the body of the request needs to include the twoFaToken received as part of the\n * error when authenticating and the totp code shown by the authenticator application.\n *\n * https://rest-docs.synapse.org/rest/POST/2fa/token.html\n */\nexport function loginWith2fa(\n  request: TwoFactorAuthLoginRequest,\n  endpoint: BackendDestinationEnum = BackendDestinationEnum.REPO_ENDPOINT,\n): Promise<LoginResponse> {\n  return doPost('/auth/v1/2fa/token', request, undefined, endpoint)\n}\n\n/**\n * Get redirect url\n * https://rest-docs.synapse.org/rest/POST/oauth2/authurl.html\n * @param {*} provider\n * @param {*} redirectUrl\n * @param {*} endpoint\n */\nexport const oAuthUrlRequest = (\n  provider: string,\n  redirectUrl: string,\n  state?: string,\n  endpoint = BackendDestinationEnum.REPO_ENDPOINT,\n) => {\n  return doPost<{ authorizationUrl: string }>(\n    '/auth/v1/oauth2/authurl',\n    { provider, redirectUrl, state },\n    undefined,\n    endpoint,\n  )\n}\n/**\n * Get access token from SSO\n * https://rest-docs.synapse.org/rest/POST/oauth2/session2.html\n * @param {*} provider\n * @param {*} authenticationCode\n * @param {*} redirectUrl\n * @param {*} endpoint\n */\nexport const oAuthSessionRequest = (\n  provider: string,\n  authenticationCode: string | number,\n  redirectUrl: string,\n  endpoint: BackendDestinationEnum = BackendDestinationEnum.REPO_ENDPOINT,\n): Promise<LoginResponse | TwoFactorAuthErrorResponse> => {\n  return returnIfTwoFactorAuthError(() =>\n    doPost(\n      '/auth/v1/oauth2/session2',\n      { provider, authenticationCode, redirectUrl },\n      undefined,\n      endpoint,\n    ),\n  )\n}\n\n/**\n * Fetch the current 2FA status for the user.\n * https://rest-docs.synapse.org/rest/GET/2fa.html\n */\nexport function getCurrentUserTwoFactorEnrollmentStatus(accessToken?: string) {\n  return doGet<TwoFactorAuthStatus>(\n    '/auth/v1/2fa',\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Disable 2FA for the user.\n * https://rest-docs.synapse.org/rest/DELETE/2fa.html\n */\nexport function disableTwoFactorAuthForCurrentUser(accessToken?: string) {\n  return doDelete(\n    '/auth/v1/2fa',\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/POST/2fa/enroll.html\n */\nexport function start2FAEnrollment(accessToken?: string) {\n  return doPost<TotpSecret>(\n    '/auth/v1/2fa/enroll',\n    null,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/POST/2fa.html\n */\nexport function complete2FAEnrollment(\n  request: TotpSecretActivationRequest,\n  accessToken?: string,\n) {\n  return doPost<TwoFactorAuthStatus>(\n    '/auth/v1/2fa',\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Generates a new set of single use recovery codes that are associated with the two factor authentication of the user.\n * The recovery codes are single use and can be used to login with 2FA in place of an TOTP. In order to use a recovery\n * code the body of the login request should specify as the otpType RECOVERY_CODE and the otpCode should match one of\n * the generated recovery codes.\n *\n * Note that invoking this endpoint will replace existing recovery codes.\n *\n * https://rest-docs.synapse.org/rest/POST/2fa/recoveryCodes.html\n */\nexport function createRecoveryCodes(accessToken?: string) {\n  return doPost<TwoFactorAuthRecoveryCodes>(\n    '/auth/v1/2fa/recoveryCodes',\n    null,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Create an entity (Project, Folder, File, Table, View)\n * https://rest-docs.synapse.org/rest/POST/entity.html\n */\nexport const createEntity = <T extends Entity>(\n  entity: T,\n  accessToken: string | undefined,\n) => {\n  return doPost<T>(\n    ENTITY,\n    entity,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n/**\n * Create a project with the given name.\n * https://rest-docs.synapse.org/rest/POST/entity.html\n */\nexport const createProject = (\n  name: string,\n  accessToken: string | undefined,\n): Promise<Entity> => {\n  return createEntity(\n    {\n      name,\n      concreteType: 'org.sagebionetworks.repo.model.Project',\n    },\n    accessToken,\n  )\n}\n\n/**\n * Return this user's UserProfile\n * https://rest-docs.synapse.org/rest/GET/userProfile.html\n */\nexport const getUserProfile = (accessToken: string | undefined) => {\n  return doGet<UserProfile>(\n    USER_PROFILE,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Return any user's UserProfile\n * https://rest-docs.synapse.org/rest/GET/userProfile.html\n */\nexport const getUserProfileById = (\n  accessToken: string | undefined,\n  ownerId: string,\n) => {\n  return doGet<UserProfile>(\n    USER_PROFILE_ID(ownerId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Return this user's profile bundle\n * https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/UserBundle.html\n */\nexport const getUserBundle = (\n  id: string,\n  mask: number,\n  accessToken: string | undefined,\n): Promise<UserBundle> => {\n  return doGet<UserBundle>(\n    `${USER_ID_BUNDLE(id)}?mask=${mask}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Return the ucurrent user's bundle\n * http://rest-docs.synapse.org/rest/GET/user/bundle.html\n */\nexport const getMyUserBundle = (\n  mask: number,\n  accessToken: string | undefined,\n): Promise<UserBundle> => {\n  return doGet<UserBundle>(\n    `${USER_BUNDLE}?mask=${mask}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Update your own profile\n * @param profile\n * @param accessToken\n * @returns\n */\nexport const updateMyUserProfile = (\n  profile: UserProfile,\n  accessToken: string | undefined = undefined,\n): Promise<UserProfile> => {\n  const url = '/repo/v1/userProfile'\n  return doPut<UserProfile>(\n    url,\n    profile,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get Users and Groups that match the given prefix.\n * http://rest-docs.synapse.org/rest/GET/userGroupHeaders.html\n */\nexport const getUserGroupHeaders = (\n  prefix: string = '',\n  typeFilter: TYPE_FILTER = TYPE_FILTER.ALL,\n  offset: number = 0,\n  limit: number = 20,\n): Promise<UserGroupHeaderResponsePage> => {\n  return doGet<UserGroupHeaderResponsePage>(\n    USER_GROUP_HEADERS +\n      `?prefix=${prefix}&typeFilter=${typeFilter}&offset=${offset}&limit=${limit}`,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get Users and Groups that match the given list of aliases.\n * https://repo-prod.prod.sagebase.org/repo/v1/userGroupHeaders/aliases\n */\nexport const postUserGroupHeadersWithAlias = (aliases: string[]) => {\n  return doPost<UserGroupHeaderResponse>(\n    `${USER_GROUP_HEADERS}/aliases`,\n    { list: aliases },\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Return batch of user group headers\n * https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/UserGroupHeaderResponsePage.html\n */\nexport const getGroupHeadersBatch = (\n  ids: string[],\n  accessToken?: string,\n): Promise<UserGroupHeaderResponsePage> => {\n  return doGet<UserGroupHeaderResponsePage>(\n    USER_GROUP_HEADERS_BATCH + `?ids=${ids.join(',')}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Return a batch of Evaluation queues\n * https://rest-docs.synapse.org/rest/GET/evaluation.html\n */\nexport const getEvaluations = (\n  evalIds: string[],\n  accessToken: string | undefined,\n): Promise<PaginatedResults<Evaluation>> => {\n  return doGet<PaginatedResults<Evaluation>>(\n    EVALUATIONS_BY_ID(evalIds),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport type UserProfileList = { list: UserProfile[] }\n/**\n * Return the User Profiles for the given list of user IDs\n * https://rest-docs.synapse.org/rest/POST/userProfile.html\n */\nexport const getUserProfiles = (\n  list: string[],\n  accessToken: string | undefined = undefined,\n): Promise<UserProfileList> => {\n  return doPost(\n    USER_PROFILE,\n    { list },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Return the children (Files/Folders) of the given entity (Project or Folder).\n * https://rest-docs.synapse.org/rest/POST/entity/children.html\n */\nexport const getEntityChildren = (\n  request: EntityChildrenRequest,\n  accessToken: string | undefined = undefined,\n  signal?: AbortSignal,\n) => {\n  return doPost<EntityChildrenResponse>(\n    '/repo/v1/entity/children',\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n    { signal },\n  )\n}\n/**\n * Retrieve an entityId for a given parent ID and entity name.\n * https://rest-docs.synapse.org/rest/POST/entity/child.html\n */\nexport const lookupChildEntity = (\n  request: EntityLookupRequest,\n  accessToken: string | undefined = undefined,\n) => {\n  return doPost<EntityId>(\n    '/repo/v1/entity/child',\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get a batch of pre-signed URLs and/or FileHandles for the given list of FileHandleAssociations.\n * https://rest-docs.synapse.org/rest/POST/fileHandle/batch.html\n */\nexport const getFiles = (\n  request: BatchFileRequest,\n  accessToken: string | undefined = undefined,\n): Promise<BatchFileResult> => {\n  return doPost(\n    FILE_HANDLE_BATCH,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get a batch of pre-signed URLs and/or FileHandles for the given list of FileHandleAssociations.\n * https://rest-docs.synapse.org/rest/POST/fileHandle/batch.html\n */\nexport const getBulkFiles = async (\n  bulkFileDownloadRequest: BulkFileDownloadRequest,\n  accessToken: string | undefined = undefined,\n): Promise<BulkFileDownloadResponse> => {\n  const asyncJobId = await doPost<AsyncJobId>(\n    '/file/v1/file/bulk/async/start',\n    bulkFileDownloadRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  return getAsyncResultBodyFromJobId(\n    asyncJobId.token,\n    `/file/v1/file/bulk/async/get/${asyncJobId.token}`,\n    accessToken,\n  )\n}\n/**\n * Bundled access to Entity and related data components.\n * An EntityBundle can be used to create, fetch, or update an Entity and associated\n * objects with a single web service request.\n * See SynapseClient.test.js for an example partsMask.\n * https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/Entity.html\n */\n\nexport const getEntity = <T extends Entity>(\n  accessToken: string | undefined = undefined,\n  entityId: string,\n  versionNumber?: string | number,\n) => {\n  if (entityId.indexOf('.') > -1) {\n    // PORTALS-1943: we were given an entity Id with a version!\n    const entityTokens = entityId.split('.')\n    entityId = entityTokens[0]\n    versionNumber = entityTokens[1]\n  }\n  const url = versionNumber\n    ? `/repo/v1/entity/${entityId}/version/${versionNumber}`\n    : `/repo/v1/entity/${entityId}`\n  return doGet<T>(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\nexport const getEntityHeadersByIds = (\n  entityIds: string[],\n  accessToken?: string,\n) => {\n  return getEntityHeaders(\n    entityIds.map(id => ({ targetId: id })),\n    accessToken,\n  )\n}\n\n/**\n * Get the EntityHeader for a list of references with a POST.\n * If any item in the batch fails (e.g., with a 404) it will be EXCLUDED in the result set.\n * https://rest-docs.synapse.org/rest/POST/entity/header.html\n */\nexport const getEntityHeaders = (\n  references: ReferenceList,\n  accessToken?: string,\n) => {\n  // if references contains entity IDs with dot notation, fix the reference object\n  const fixedReferences = references.map(reference => {\n    if (reference.targetId.indexOf('.') > -1) {\n      const entityTokens = reference.targetId.split('.')\n      return {\n        targetId: entityTokens[0],\n        version: entityTokens[1],\n      }\n    } else return reference\n  })\n\n  return doPost<PaginatedResults<EntityHeader>>(\n    ENTITY_HEADERS,\n    { references: fixedReferences },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get the EntityHeader for a single entity\n * https://rest-docs.synapse.org/rest/GET/entity/id/type.html\n */\nexport const getEntityHeader = (entityId: string, accessToken?: string) => {\n  return doGet<EntityHeader>(\n    ENTITY_HEADER_BY_ID(entityId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const updateEntity = <T extends Entity>(\n  entity: T,\n  accessToken: string | undefined = undefined,\n): Promise<T> => {\n  const url = `/repo/v1/entity/${entity.id}`\n  return doPut<T>(\n    url,\n    entity,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const deleteEntity = (\n  accessToken: string | undefined = undefined,\n  entityId: string | number,\n) => {\n  return doDelete(\n    ENTITY_ID(entityId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const getEntityBundleV2 = <T extends EntityBundleRequest>(\n  entityId: string | number,\n  requestObject: T,\n  version?: number,\n  accessToken?: string,\n): Promise<EntityBundle<T>> => {\n  return doPost<EntityBundle<T>>(\n    ENTITY_BUNDLE_V2(entityId, version),\n    requestObject,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get a corresponding string value of ObjectType:\n **/\nfunction getObjectTypeToString(key: ObjectType) {\n  return ObjectType[key]\n}\n\n/**\n * Get Wiki page contents, call is of the form:\n * https://rest-docs.synapse.org/rest/GET/entity/ownerId/wiki.html\n */\nexport const getEntityWiki = (\n  accessToken: string | undefined,\n  ownerId: string | undefined,\n  wikiId: string | undefined = '',\n  objectType: ObjectType = ObjectType.ENTITY,\n) => {\n  const objectTypeString = getObjectTypeToString(objectType)\n\n  const url = `/repo/v1/${objectTypeString?.toLocaleLowerCase()}/${ownerId}/wiki/${wikiId}`\n  return doGet<WikiPage>(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\n/**\n * Returns synapse user favorites list given their access token\n * https://rest-docs.synapse.org/rest/GET/favorite.html\n */\nexport function getUserFavorites(\n  accessToken: string | undefined,\n  offset: number = 0,\n  limit: number = 200,\n  sort: FavoriteSortBy = 'NAME',\n  sortDirection: FavoriteSortDirection = 'ASC',\n) {\n  const params = new URLSearchParams()\n  params.set('offset', offset.toString())\n  params.set('limit', limit.toString())\n  params.set('sort', sort)\n  params.set('sortDirection', sortDirection)\n\n  const url = `${FAVORITES}?${params.toString()}`\n  return doGet<PaginatedResults<EntityHeader>>(\n    url,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Add an Entity as a Favorite of the caller.\n * http://rest-docs.synapse.org/rest/POST/favorite/id.html\n */\nexport function addUserFavorite(\n  entityId: string,\n  accessToken: string | undefined,\n): Promise<EntityHeader> {\n  return doPost(\n    `${FAVORITES}/${entityId}`,\n    null,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Remove a favorite\n * http://rest-docs.synapse.org/rest/DELETE/favorite/id.html\n */\nexport const removeUserFavorite = (\n  entityId: string,\n  accessToken: string | undefined,\n): Promise<void> => {\n  return doDelete(\n    `${FAVORITES}/${entityId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get a list of challenges for which the given user is registered.\n * see http://rest-docs.synapse.org/rest/GET/challenge.html\n */\nexport const getUserChallenges = (\n  accessToken: string | undefined,\n  userId: string | number,\n  offset: string | number = 0,\n  limit: string | number = 200,\n): Promise<ChallengePagedResults> => {\n  const url = `/repo/v1/challenge?participantId=${userId}&offset=${offset}&limit=${limit}`\n  return doGet(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\n/**\n * Get the user's list of teams they are on\n *\n * @param {*} id ownerID of the synapse user see - https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/UserProfile.html\n */\nexport const getUserTeamList = (\n  accessToken: string | undefined,\n  userId: string | number,\n  offset: string | number = 0,\n  limit: string | number = 200,\n): Promise<PaginatedResults<Team>> => {\n  const url = `/repo/v1/user/${userId}/team?offset=${offset}&limit=${limit}`\n  return doGet(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\n/**\n * Get a list of members for a team\n *\n * @param {*} id ownerID of the synapse user see -https://rest-docs.synapse.org/rest/GET/teamMembers/id.html\n * @param {*} fragment (optional) a prefix of the user's first or last name or email address (optional)\n * @param {*} limit    (optional) the maximum number of members to return (default 10, max limit 50)\n * @param {*} offset   (optional) the starting index of the returned results (default 0)\n *\n */\nexport const getTeamMembers = (\n  accessToken: string | undefined,\n  teamId: string | number,\n  fragment: string = '',\n  limit: number = 10,\n  offset: number = 0,\n): Promise<PaginatedResults<TeamMember>> => {\n  const url = `${TEAM_MEMBERS(teamId)}?limit=${limit}&offset=${offset}${\n    fragment ? `&fragment=${fragment}` : ''\n  }`\n  return doGet(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\n/**\n * Add a member to the Team\n * https://rest-docs.synapse.org/rest/PUT/teamMember.html\n */\nexport const addTeamMemberWithToken = (\n  joinTeamSignedToken: JoinTeamSignedToken,\n): Promise<ResponseMessage> => {\n  return doPut<ResponseMessage>(\n    TEAM_MEMBER,\n    joinTeamSignedToken,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Add member to the Team\n * https://rest-docs.synapse.org/rest/PUT/team/id/member/principalId.html\n */\nexport const addTeamMemberAsAuthenticatedUserOrAdmin = (\n  teamId: string,\n  memberId: string,\n  accessToken: string,\n) => {\n  return doPut(\n    TEAM_ID_MEMBER_ID_WITH_NOTIFICATION(teamId, memberId),\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/POST/membershipInvitation/id.html\nexport const getMembershipInvitation = (\n  membershipInvitationSignedToken: MembershipInvtnSignedToken,\n): Promise<MembershipInvitation> => {\n  return doPost(\n    MEMBERSHIP_INVITATION(\n      membershipInvitationSignedToken.membershipInvitationId,\n    ),\n    membershipInvitationSignedToken,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/GET/membershipInvitation/id/inviteeVerificationSignedToken.html\nexport const getInviteeVerificationSignedToken = (\n  membershipInvitationId: string,\n  accessToken: string,\n): Promise<InviteeVerificationSignedToken> => {\n  return doGet(\n    INVITEE_VERIFICATION_SIGNED_TOKEN(membershipInvitationId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/PUT/membershipInvitation/id/inviteeId.html\nexport const bindInvitationToAuthenticatedUser = (\n  inviteeVerificationSignedToken: InviteeVerificationSignedToken,\n  membershipInvitationId: string,\n  accessToken: string,\n) => {\n  return doPut(\n    BIND_INVITATION_TO_AUTHENTICATED_USER(membershipInvitationId),\n    inviteeVerificationSignedToken,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Checks if a user is a member of a specific team.\n *\n * @returns a TeamMember if the user is a member of the team, or null if the user is not.\n */\nexport const getIsUserMemberOfTeam = (\n  teamId: string,\n  userId: string,\n  accessToken?: string,\n): Promise<TeamMember | null> => {\n  const url = TEAM_ID_MEMBER_ID(teamId, userId)\n  return allowNotFoundError(() =>\n    doGet<TeamMember>(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT),\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/GET/entity/ownerId/wikikey.html\n * Get the root WikiPageKey for an Entity.\n * Note: The caller must be granted the ACCESS_TYPE.READ permission on the owner.\n * @return WikiPageKey\n **/\nexport const getWikiPageKeyForEntity = (\n  accessToken: string | undefined,\n  ownerId: string | number,\n): Promise<WikiPageKey> => {\n  const url = `/repo/v1/entity/${ownerId}/wikikey`\n  return doGet<WikiPageKey>(\n    url,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/GET/access_requirement/ownerId/wikikey.html\n * Get the root WikiPageKey for an Access Requirement.\n * Note: The caller must be granted the ACCESS_TYPE.READ permission on the owner.\n * @return WikiPageKey\n **/\nexport const getWikiPageKeyForAccessRequirement = (\n  accessToken: string | undefined,\n  ownerId: string | number,\n): Promise<WikiPageKey> => {\n  const url = ACCESS_REQUIREMENT_WIKI_PAGE_KEY(ownerId)\n  return doGet<WikiPageKey>(\n    url,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const getWikiAttachmentsFromEntity = (\n  accessToken: string | undefined,\n  id: string | number,\n  wikiId: string | number,\n  objectType: ObjectType = ObjectType.ENTITY,\n): Promise<FileHandleResults> => {\n  const objectTypeString = getObjectTypeToString(objectType)\n  const url = `/repo/v1/${objectTypeString.toLocaleLowerCase()}/${id}/wiki2/${wikiId}/attachmenthandles`\n  return doGet(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\nexport const getWikiAttachmentsFromEvaluation = (\n  accessToken: string | undefined,\n  id: string | number,\n  wikiId: string | number,\n) => {\n  const url = `/repo/v1/evaluation/${id}/wiki/${wikiId}/attachmenthandles`\n  return doGet(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\nexport const getPresignedUrlForWikiAttachment = (\n  accessToken: string | undefined,\n  id: string | number,\n  wikiId: string | number,\n  fileName: string,\n  objectType: ObjectType = ObjectType.ENTITY,\n): Promise<string> => {\n  const objectTypeString = getObjectTypeToString(objectType)\n  const url = `/repo/v1/${objectTypeString.toLocaleLowerCase()}/${id}/wiki2/${wikiId}/attachment?fileName=${fileName}&redirect=false`\n  return doGet(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\nexport const isInSynapseExperimentalMode = (): boolean => {\n  // bang bang, you're a boolean!\n  return !!cookies.get(SynapseConstants.EXPERIMENTAL_MODE_COOKIE)\n}\n\n/**\n * Set the access token cookie.  Note that this will only succeed if your app is running on\n * a .synapse.org subdomain.\n *\n * @param {*} token Access token.  If undefined, then call should instruct the browser to delete the cookie.\n */\nexport const setAccessTokenCookie = async (\n  token: string | undefined,\n): Promise<void> => {\n  if (IS_OUTSIDE_SYNAPSE_ORG) {\n    if (!token) {\n      cookies.remove(ACCESS_TOKEN_COOKIE_KEY, { path: '/' })\n      // See - https://github.com/reactivestack/cookies/issues/189\n      await delay(100)\n    } else {\n      // sets cookie\n      cookies.set(ACCESS_TOKEN_COOKIE_KEY, token, {\n        // expires in 10 days (see SWC-6190)\n        maxAge: 60 * 60 * 24 * 10,\n        path: '/',\n      })\n    }\n  } else {\n    // will set cookie in the http header\n    return doPost(\n      'Portal/sessioncookie',\n      { sessionToken: token },\n      undefined,\n      BackendDestinationEnum.PORTAL_ENDPOINT,\n      { credentials: 'include' },\n    )\n  }\n}\n/**\n * Get the current access token from a cookie.  Note that this will only succeed if your app is running on\n * a .synapse.org subdomain.\n */\nexport const getAccessTokenFromCookie = async (): Promise<string> => {\n  if (IS_OUTSIDE_SYNAPSE_ORG) {\n    return Promise.resolve(cookies.get(ACCESS_TOKEN_COOKIE_KEY) as string)\n  }\n  return doGet<string>(\n    'Portal/sessioncookie?validate=true',\n    undefined,\n    BackendDestinationEnum.PORTAL_ENDPOINT,\n    { credentials: 'include' },\n  )\n}\n\nexport const getUseUtcTimeFromCookie = () => {\n  return cookies.get(DATETIME_UTC_COOKIE_KEY) === 'true'\n}\n\nexport const getPrincipalAliasRequest = (\n  accessToken: string | undefined,\n  request: PrincipalAliasRequest,\n): Promise<PrincipalAliasResponse> => {\n  const url = '/repo/v1/principal/alias'\n  return doPost(url, request, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\nexport const signOut = async () => {\n  await setAccessTokenCookie(undefined)\n}\n\n/**\n * Upload file.  Note that this currently only supports Synapse storage (Sage s3 bucket)\n * @param accessToken\n * @param file\n * @param endpoint\n */\nexport const uploadFile = (\n  accessToken: string | undefined,\n  filename: string,\n  file: Blob,\n) => {\n  return new Promise<FileUploadComplete>(\n    (fileUploadResolve, fileUploadReject) => {\n      const partSize: number = Math.max(5242880, file.size / 10000)\n      const request: MultipartUploadRequest = {\n        contentType: file.type,\n        fileName: filename,\n        fileSizeBytes: file.size,\n        partSizeBytes: partSize,\n        storageLocationId: SYNAPSE_STORAGE_LOCATION_ID,\n      }\n      calculateMd5(file).then((md5: string) => {\n        request.contentMD5Hex = md5\n        startMultipartUpload(\n          accessToken,\n          filename,\n          file,\n          request,\n          fileUploadResolve,\n          fileUploadReject,\n        )\n      })\n    },\n  )\n}\n\nconst calculateMd5 = (fileBlob: File | Blob): Promise<string> => {\n  // code taken from md5 example from library\n  return new Promise((resolve, reject) => {\n    const blobSlice = File.prototype.slice,\n      file = fileBlob,\n      chunkSize = 2097152, // Read in chunks of 2MB\n      chunks = Math.ceil(file.size / chunkSize),\n      spark = new SparkMD5.ArrayBuffer(),\n      fileReader = new FileReader()\n    let currentChunk = 0\n\n    fileReader.onload = function (e) {\n      console.log('read chunk nr', currentChunk + 1, 'of', chunks)\n      spark.append(fileReader.result as ArrayBuffer) // Append array buffer\n      currentChunk++\n\n      if (currentChunk < chunks) {\n        loadNext()\n      } else {\n        console.log('finished loading')\n        const md5: string = spark.end()\n        console.info('computed hash', md5) // Compute hash\n        resolve(md5)\n      }\n    }\n\n    fileReader.onerror = function () {\n      console.warn('oops, something went wrong.')\n      reject(fileReader.error)\n    }\n\n    const loadNext = () => {\n      const start = currentChunk * chunkSize,\n        end = start + chunkSize >= file.size ? file.size : start + chunkSize\n\n      fileReader.readAsArrayBuffer(blobSlice.call(file, start, end))\n    }\n    loadNext()\n  })\n}\n\nconst processFilePart = (\n  partNumber: number,\n  multipartUploadStatus: MultipartUploadStatus,\n  accessToken: string | undefined,\n  fileName: string,\n  file: Blob,\n  request: MultipartUploadRequest,\n  fileUploadResolve: (fileUpload: FileUploadComplete) => void,\n  fileUploadReject: (reason: any) => void,\n) => {\n  if (multipartUploadStatus.clientSidePartsState![partNumber - 1]) {\n    // no-op. this part has already been processed!\n    return\n  }\n\n  const uploadId = multipartUploadStatus.uploadId\n  const presignedUploadUrlRequest: BatchPresignedUploadUrlRequest = {\n    uploadId,\n    contentType: 'application/octet-stream', // each part is binary\n    partNumbers: [partNumber],\n  }\n  const presignedUrlUrl = `/file/v1/file/multipart/${uploadId}/presigned/url/batch`\n  doPost<BatchPresignedUploadUrlResponse>(\n    presignedUrlUrl,\n    presignedUploadUrlRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  ).then(async (presignedUrlResponse: BatchPresignedUploadUrlResponse) => {\n    const presignedUrl =\n      presignedUrlResponse.partPresignedUrls[0].uploadPresignedUrl\n    // calculate the byte range\n    const startByte = (partNumber - 1) * request.partSizeBytes\n    let endByte = partNumber * request.partSizeBytes - 1\n    if (endByte >= request.fileSizeBytes) {\n      endByte = request.fileSizeBytes - 1\n    }\n    const fileSlice = file.slice(\n      startByte,\n      endByte + 1,\n      presignedUploadUrlRequest.contentType,\n    )\n    await uploadFilePart(\n      presignedUrl,\n      fileSlice,\n      presignedUploadUrlRequest.contentType,\n    )\n    // uploaded the part.  calculate md5 of the part and add the part to the upload\n    calculateMd5(fileSlice).then((md5: string) => {\n      const addPartUrl = `/file/v1/file/multipart/${uploadId}/add/${partNumber}?partMD5Hex=${md5}`\n      doPut<AddPartResponse>(\n        addPartUrl,\n        undefined,\n        accessToken,\n        BackendDestinationEnum.REPO_ENDPOINT,\n      ).then((addPartResponse: AddPartResponse) => {\n        if (addPartResponse.addPartState === 'ADD_SUCCESS') {\n          // done with this part!\n          multipartUploadStatus.clientSidePartsState![partNumber - 1] = true\n          checkUploadComplete(\n            multipartUploadStatus,\n            fileName,\n            accessToken,\n            fileUploadResolve,\n            fileUploadReject,\n          )\n        } else {\n          // retry after a brief delay\n          delay(1000).then(() => {\n            processFilePart(\n              partNumber,\n              multipartUploadStatus,\n              accessToken,\n              fileName,\n              file,\n              request,\n              fileUploadResolve,\n              fileUploadReject,\n            )\n          })\n        }\n      })\n    })\n  })\n}\nexport const checkUploadComplete = (\n  status: MultipartUploadStatus,\n  fileHandleName: string,\n  accessToken: string | undefined,\n  fileUploadResolve: (fileUpload: FileUploadComplete) => void,\n  fileUploadReject: (reason: any) => void,\n) => {\n  // if all client-side parts are true (uploaded), then complete the upload and get the file handle!\n  if (\n    status.clientSidePartsState!.every(v => {\n      return v\n    })\n  ) {\n    const url = `/file/v1/file/multipart/${status.uploadId}/complete`\n    doPut<MultipartUploadStatus>(\n      url,\n      undefined,\n      accessToken,\n      BackendDestinationEnum.REPO_ENDPOINT,\n    )\n      .then((newStatus: MultipartUploadStatus) => {\n        // success!\n        fileUploadResolve({\n          fileHandleId: newStatus.resultFileHandleId,\n          fileName: fileHandleName,\n        })\n      })\n      .catch(error => {\n        fileUploadReject(error)\n      })\n  }\n}\nconst uploadFilePart = async (\n  presignedUrl: string,\n  file: Blob,\n  contentType: string,\n) => {\n  // TODO: could try using axios to get upload progress, then update the client-side part state (change to numbers from 0-1)\n  // This would give progress for the single file (across all parts).\n  // The parent would still need to figure out progress (for the total file set).\n  await fetch(presignedUrl, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': contentType,\n    },\n    body: file,\n  })\n}\nexport const startMultipartUpload = (\n  accessToken: string | undefined,\n  fileName: string,\n  file: Blob,\n  request: MultipartUploadRequest,\n  fileUploadResolve: (fileUpload: FileUploadComplete) => void,\n  fileUploadReject: (reason: any) => void,\n) => {\n  const url = '/file/v1/file/multipart'\n  doPost<MultipartUploadStatus>(\n    url,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n    .then((status: MultipartUploadStatus) => {\n      // started the upload\n      // keep track of the part state client-side\n      const clientSidePartsState: boolean[] = status.partsState\n        .split('')\n        .map(bit => bit === '1')\n      status.clientSidePartsState = clientSidePartsState\n      for (let i = 0; i < clientSidePartsState.length; i = i + 1) {\n        if (!clientSidePartsState[i]) {\n          // upload this part.  note that partNumber is always the index+1\n          processFilePart(\n            i + 1,\n            status,\n            accessToken,\n            fileName,\n            file,\n            request,\n            fileUploadResolve,\n            fileUploadReject,\n          )\n        }\n      }\n      // in case there is no upload work to do!\n      checkUploadComplete(\n        status,\n        fileName,\n        accessToken,\n        fileUploadResolve,\n        fileUploadReject,\n      )\n    })\n    .catch(error => {\n      fileUploadReject(error)\n    })\n}\n\nexport const getFileHandleContentFromID = (\n  fileHandleId: string,\n  accessToken: string,\n): Promise<string> => {\n  // get the presigned URL, download the data, and send that back (via resolve())\n  return new Promise((resolve, reject) => {\n    // get the file handle and url\n    const getFileHandleByIdPromise = getFileHandleById(\n      fileHandleId,\n      accessToken,\n    )\n    const getFileHandlePresignedUrlPromis = getFileHandleByIdURL(\n      fileHandleId,\n      accessToken,\n    )\n    Promise.all([getFileHandleByIdPromise, getFileHandlePresignedUrlPromis])\n      .then(values => {\n        const fileHandle: FileHandle = values[0]\n        const presignedUrl: string = values[1]\n        return getFileHandleContent(fileHandle, presignedUrl).then(\n          (content: string) => {\n            resolve(content)\n          },\n        )\n      })\n      .catch(err => {\n        reject(err)\n      })\n  })\n}\n\nexport const getFileHandleContent = (\n  fileHandle: FileHandle,\n  presignedUrl: string,\n  maxFileSizeBytes: number = MAX_JS_FILE_DOWNLOAD_SIZE,\n): Promise<string> => {\n  // get the presigned URL, download the data, and send that back (via resolve())\n  return new Promise((resolve, reject) => {\n    // sanity check!  must be less than 5MB (unless overridden)\n    if (fileHandle.contentSize < maxFileSizeBytes) {\n      fetch(presignedUrl, {\n        method: 'GET',\n        mode: 'cors',\n        cache: 'no-cache',\n        headers: {\n          'Content-Type': fileHandle.contentType,\n        },\n      }).then(response => {\n        // the response is always decoded using UTF-8\n        response.text().then(text => {\n          resolve(text)\n        })\n      })\n    } else {\n      reject(\n        `File size (${calculateFriendlyFileSize(\n          fileHandle.contentSize,\n        )}) exceeds the maximum size that can be downloaded (${calculateFriendlyFileSize(\n          maxFileSizeBytes,\n        )})`,\n      )\n    }\n  })\n}\n\n/**\n * Return the FileHandle of the file associated to the given FileEntity.\n * * @param fileEntity: FileEntity\n * @param accessToken\n * @param endpoint\n */\nexport const getFileResult = (\n  fileEntity: FileEntity,\n  accessToken?: string,\n  includeFileHandles?: boolean,\n  includePreSignedURLs?: boolean,\n  includePreviewPreSignedURLs?: boolean,\n): Promise<FileResult> => {\n  return new Promise((resolve, reject) => {\n    const fileHandleAssociationList: FileHandleAssociation[] = [\n      {\n        associateObjectId: fileEntity.id!,\n        associateObjectType: FileHandleAssociateType.FileEntity,\n        fileHandleId: fileEntity.dataFileHandleId,\n      },\n    ]\n    const request: BatchFileRequest = {\n      includeFileHandles: includeFileHandles || false,\n      includePreSignedURLs: includePreSignedURLs || false,\n      includePreviewPreSignedURLs: includePreviewPreSignedURLs || false,\n      requestedFiles: fileHandleAssociationList,\n    }\n    getFiles(request, accessToken)\n      .then((data: BatchFileResult) => {\n        if (\n          data.requestedFiles.length &&\n          data.requestedFiles[0].fileHandleId !== undefined\n        ) {\n          resolve(data.requestedFiles[0])\n        } else {\n          reject(data.requestedFiles[0].failureCode)\n        }\n      })\n      .catch(err => {\n        reject(err)\n      })\n  })\n}\n\n/**\n * Add a file to the user's download list.\n * Uses http://rest-docs.synapse.org/rest/POST/download/list/add.html\n * @param fileEntityId\n * @param versionNumber\n */\nexport const addFileToDownloadListV2 = (\n  fileEntityId: string,\n  versionNumber?: number,\n  accessToken?: string,\n): Promise<AddBatchOfFilesToDownloadListResponse> => {\n  const request: AddBatchOfFilesToDownloadListRequest = {\n    batchToAdd: [{ fileEntityId, versionNumber }],\n  }\n  return doPost(\n    '/repo/v1/download/list/add',\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * http://rest-docs.synapse.org/rest/POST/download/list/package/async/start.html\n */\nexport const createPackageFromDownloadListV2 = async (\n  zipFileName?: string,\n  accessToken?: string,\n): Promise<DownloadListPackageResponse> => {\n  const request: DownloadListPackageRequest = {\n    zipFileName,\n    includeManifest: true,\n    concreteType:\n      'org.sagebionetworks.repo.model.download.DownloadListPackageRequest',\n  }\n  const asyncJobId = await doPost<AsyncJobId>(\n    `/repo/v1/download/list/package/async/start`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  return getAsyncResultBodyFromJobId(\n    asyncJobId.token,\n    `/repo/v1/download/list/package/async/get/${asyncJobId.token}`,\n    accessToken,\n  )\n}\n\n/**\n * http://rest-docs.synapse.org/rest/POST/download/list/package/async/start.html\n */\nexport const createManifestFromDownloadListV2 = async (\n  accessToken: string | undefined = undefined,\n) => {\n  const request: DownloadListManifestRequest = {\n    csvTableDescriptor: {},\n    concreteType:\n      'org.sagebionetworks.repo.model.download.DownloadListManifestRequest',\n  }\n  const asyncJobId = await doPost<AsyncJobId>(\n    `/repo/v1/download/list/manifest/async/start`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  return getAsyncResultBodyFromJobId(\n    asyncJobId.token,\n    `/repo/v1/download/list/manifest/async/get/${asyncJobId.token}`,\n    accessToken,\n  )\n}\n\n/**\n * http://rest-docs.synapse.org/rest/POST/download/list/add/async/start.html\n * Start an asynchronous job to add files to a user's download list from either a view query or a folder. Use GET /download/list/add/async/get/{asyncToken} to get both the job status and job results.\n */\nexport const addFilesToDownloadListV2 = async (\n  request: AddToDownloadListRequest,\n  accessToken: string | undefined = undefined,\n): Promise<AddToDownloadListResponse> => {\n  const asyncJobId = await doPost<AsyncJobId>(\n    '/repo/v1/download/list/add/async/start',\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  return getAsyncResultBodyFromJobId(\n    asyncJobId.token,\n    `/repo/v1/download/list/add/async/get/${asyncJobId.token}`,\n    accessToken,\n  )\n}\n\n/**\n * Create an ACL\n * https://rest-docs.synapse.org/rest/POST/entity/id/acl.html\n */\nexport const createACL = (\n  entityId: string,\n  acl: AccessControlList,\n  accessToken: string | undefined,\n) => {\n  return doPost(\n    `/repo/v1/entity/${entityId}/acl`,\n    acl,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Submit an entity to an evaluation queue\n * https://rest-docs.synapse.org/rest/POST/evaluation/submission.html\n */\nexport const submitToEvaluation = (\n  submission: EvaluationSubmission,\n  etag: string,\n  accessToken: string | undefined,\n) => {\n  return doPost(\n    `/repo/v1/evaluation/submission?etag=${etag}`,\n    submission,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const getEvaluationPermissions = (\n  evalId: string,\n  accessToken: string | undefined,\n) => {\n  return doGet<UserEvaluationPermissions>(\n    `/repo/v1/evaluation/${evalId}/permissions`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get an evaluation queue\n * https://rest-docs.synapse.org/rest/GET/evaluation/evalId.html\n */\nexport const getEvaluation = (\n  evalId: string,\n  accessToken: string | undefined,\n): Promise<Evaluation> => {\n  if (!evalId) {\n    // we must explicitly handle this because /repo/v1/evaluation\n    // without an evalId is a valid API that returns a different API response\n    return Promise.reject(new Error('evalId is empty'))\n  }\n  return doGet<Evaluation>(\n    EVALUATION_BY_ID(evalId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Update an existing evaluation queue\n * https://rest-docs.synapse.org/rest/PUT/evaluation/evalId.html\n */\nexport const updateEvaluation = (\n  evaluation: Evaluation,\n  accessToken: string | undefined,\n): Promise<Evaluation> => {\n  if (!evaluation.id) {\n    // we must explicitly handle this because /repo/v1/evaluation\n    // without an evalId is a valid API that returns a different API response\n    return Promise.reject(new Error('evaluation does not have an ID'))\n  }\n  return doPut<Evaluation>(\n    EVALUATION_BY_ID(evaluation.id),\n    evaluation,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Create an evaluation queue\n * https://rest-docs.synapse.org/rest/POST/evaluation.html\n */\nexport const createEvaluation = (\n  evaluation: Evaluation,\n  accessToken: string | undefined,\n): Promise<Evaluation> => {\n  return doPost<Evaluation>(\n    EVALUATION,\n    evaluation,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Delete an existing evaluation queue\n * https://rest-docs.synapse.org/rest/PUT/evaluation/evalId.html\n */\nexport const deleteEvaluation = (\n  evalId: string,\n  accessToken: string | undefined,\n): Promise<void> => {\n  return doDelete(\n    `/repo/v1/evaluation/${evalId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get an evaluation round\n * https://rest-docs.synapse.org/rest/GET/evaluation/evalId/round/evalRoundId.html\n */\nexport const getEvaluationRound = (\n  evalId: string,\n  evalRoundId: string,\n  accessToken: string | undefined,\n): Promise<EvaluationRound> => {\n  return doGet(\n    `/repo/v1/evaluation/${evalId}/round/${evalRoundId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get all evaluation rounds\n * https://rest-docs.synapse.org/rest/GET/evaluation/evalId/round/list.html\n */\nexport const getEvaluationRoundsList = (\n  evalId: string,\n  evaluationRoundListRequest: EvaluationRoundListRequest | undefined,\n  accessToken: string | undefined,\n): Promise<EvaluationRoundListResponse> => {\n  return doPost(\n    `/repo/v1/evaluation/${evalId}/round/list`,\n    evaluationRoundListRequest ?? {},\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Create an evaluation round\n * https://rest-docs.synapse.org/rest/POST/evaluation/evalId/round/evalRoundId.html\n */\nexport const createEvaluationRound = (\n  evaluationRound: EvaluationRound,\n  accessToken: string | undefined,\n): Promise<EvaluationRound> => {\n  return doPost(\n    `/repo/v1/evaluation/${evaluationRound.evaluationId}/round`,\n    evaluationRound,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Update an evaluation round\n * https://rest-docs.synapse.org/rest/PUT/evaluation/evalId/round/evalRoundId.html\n */\nexport const updateEvaluationRound = (\n  evaluationRound: EvaluationRound,\n  accessToken: string | undefined,\n): Promise<EvaluationRound> => {\n  return doPut(\n    `/repo/v1/evaluation/${evaluationRound.evaluationId}/round/${evaluationRound.id}`,\n    evaluationRound,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Delete an evaluation round\n * https://rest-docs.synapse.org/rest/DELETE/evaluation/evalId/round/evalRoundId.html\n */\nexport const deleteEvaluationRound = (\n  evalId: string,\n  evalRoundId: string,\n  accessToken: string | undefined,\n) => {\n  return doDelete(\n    `/repo/v1/evaluation/${evalId}/round/${evalRoundId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Executes a user-defined query over the Submissions of a specific Evaluation.\n * https://rest-docs.synapse.org/rest/GET/evaluation/submission/query.html\n */\nexport const getEvaluationSubmissions = (\n  query: string,\n  accessToken: string | undefined,\n): Promise<QueryTableResults> => {\n  return doGet(\n    `/repo/v1/evaluation/submission/query?query=${encodeURI(query)}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get user-friendly OAuth2 request information (to present to the user so they can choose if they want to give consent).\n * http://rest-docs.synapse.org/rest/POST/oauth2/description.html\n */\nexport const getOAuth2RequestDescription = (\n  oidcAuthRequest: OIDCAuthorizationRequest,\n): Promise<OIDCAuthorizationRequestDescription> => {\n  return doPost(\n    '/auth/v1/oauth2/description',\n    oidcAuthRequest,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Check whether user has already granted consent for the given OAuth client, scope, and claims.\n * Consent persists for one year.\n */\nexport const hasUserAuthorizedOAuthClient = (\n  oidcAuthRequest: OIDCAuthorizationRequest,\n  accessToken: string,\n): Promise<OAuthConsentGrantedResponse> => {\n  return doPost(\n    '/auth/v1/oauth2/consentcheck',\n    oidcAuthRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get OAuth2 Client information (available to the public)\n */\nexport const getOAuth2Client = (\n  clientId: string,\n): Promise<OAuthClientPublic> => {\n  return doGet(\n    `/auth/v1/oauth2/client/${clientId}`,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n List the OAuth 2.0 clients created by the current user.\n */\nexport const getOAuth2 = (\n  accessToken: string,\n  nextPageToken?: string,\n): Promise<OAuthClientList> => {\n  return doGet(\n    `/auth/v1/oauth2/client${\n      nextPageToken ? '?nextPageToken=' + nextPageToken : ''\n    }`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\nCreate an OAuth 2.0 client.\nNote: The client name must be unique.\nNote: After creating the client one must also set the client secret and have their client verified\nhttps://rest-docs.synapse.org/rest/POST/oauth2/client.html\n */\nexport const createOAuthClient = (\n  request: OAuthClient,\n  accessToken: string,\n): Promise<OAuthClient> => {\n  return doPost(\n    '/auth/v1/oauth2/client',\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\nDelete OAuth 2.0 client\nhttps://rest-docs.synapse.org/rest/DELETE/oauth2/client/id.html\n */\nexport const deleteOAuthClient = (id: string, accessToken: string) => {\n  return doDelete(\n    `/auth/v1/oauth2/client/${id}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n Update the metadata for an existing OAuth 2.0 client.\n Note: Only the creator of a client can update it.\n Note: Changing the redirect URIs will revert the 'verified' status of the client, necessitating re-verification.\n https://repo-prod.prod.sagebase.org/auth/v1/oauth2/client/{id}\n */\nexport const updateOAuthClient = (\n  request: OAuthClient,\n  accessToken: string,\n): Promise<OAuthClient> => {\n  return doPut(\n    `/auth/v1/oauth2/client/${request.client_id}`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n \n Note: Only the creator of a client can update it.\n https://rest-docs.synapse.org/rest/PUT/oauth2/client/id/verificationPrecheck.html\n */\nexport const isOAuthClientReverificationRequired = (\n  request: OAuthClient,\n  accessToken: string,\n): Promise<OAuthClientVerificationPrecheckResult> => {\n  return doPut(\n    `/auth/v1/oauth2/client/${request.client_id}/verificationPrecheck`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/** \nGet a secret credential to use when requesting an access token.\nSynapse supports 'client_secret_basic' and 'client_secret_post'.\nNOTE: This request will invalidate any previously issued secrets.\nhttps://docs.synapse.org/rest/POST/oauth2/client/secret/id.html\n*/\nexport const createOAuthClientSecret = (\n  accessToken: string,\n  id: string,\n): Promise<OAuthClientIdAndSecret> => {\n  return doPost(\n    `/auth/v1/oauth2/client/secret/${id}`,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get OAuth2 Client information (available to the public)\n */\nexport const getAuthenticatedOn = async (\n  accessToken: string,\n): Promise<AuthenticatedOn> => {\n  return doGet(\n    `/auth/v1/authenticatedOn`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * User consents to the given OIDCAuthorizationRequest (after being presented with all information returned by getOAuth2RequestDescription())\n * @param oidcAuthRequest\n * @param accessToken\n * @param endpoint\n */\nexport const consentToOAuth2Request = (\n  oidcAuthRequest: OIDCAuthorizationRequest,\n  accessToken: string | undefined,\n): Promise<AccessCodeResponse> => {\n  return doPost(\n    '/auth/v1/oauth2/consent',\n    oidcAuthRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/***********************\n * FORM SERVICES\n * https://rest-docs.synapse.org/rest/#org.sagebionetworks.repo.web.controller.FormController\n *************************/\n/**\n * Create a FormGroup\n * https://rest-docs.synapse.org/rest/POST/form/group.html\n * @param name\n * @param accessToken\n * @param endpoint\n */\nexport const createFormGroup = (\n  name: string,\n  accessToken: string,\n): Promise<FormGroup> => {\n  return doPost(\n    `/repo/v1/form/group?name=${encodeURI(name)}`,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get FormGroup ACL\n * https://rest-docs.synapse.org/rest/GET/form/group/id/acl.html\n */\nexport const getFormACL = (\n  formGroupId: string,\n  accessToken: string | undefined,\n): Promise<AccessControlList> => {\n  return doGet(\n    `/repo/v1/form/group/${formGroupId}/acl`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Update FormGroup ACL\n * https://rest-docs.synapse.org/rest/PUT/form/group/id/acl.html\n */\nexport const updateFormACL = (\n  formGroupId: string,\n  newAcl: AccessControlList,\n  accessToken: string | undefined,\n): Promise<AccessControlList> => {\n  return doPut(\n    `/repo/v1/form/group/${formGroupId}/acl`,\n    newAcl,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Create a new FormData object\n * https://rest-docs.synapse.org/rest/POST/form/data.html\n * @param formGroupId\n * @param name\n * @param accessToken\n * @param endpoint\n */\nexport const createFormData = (\n  formGroupId: string,\n  name: string,\n  dataFileHandleId: string,\n  accessToken: string,\n): Promise<FormData> => {\n  const newFormData: FormChangeRequest = {\n    name,\n    fileHandleId: dataFileHandleId,\n  }\n  return doPost(\n    `/repo/v1/form/data?groupId=${formGroupId}`,\n    newFormData,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Update FormData object\n * https://rest-docs.synapse.org/rest/PUT/form/data.html\n */\nexport const updateFormData = (\n  formDataId: string,\n  name: string,\n  dataFileHandleId: string,\n  accessToken: string,\n): Promise<FormData> => {\n  const updatedFormData: FormChangeRequest = {\n    name,\n    fileHandleId: dataFileHandleId,\n  }\n  return doPut(\n    `/repo/v1/form/data/${formDataId}`,\n    updatedFormData,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Delete FormData object\n * https://rest-docs.synapse.org/rest/DELETE/form/data.html\n */\nexport const deleteFormData = (\n  formDataId: string,\n  accessToken: string | undefined,\n) => {\n  return doDelete(\n    `/repo/v1/form/data/${formDataId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Submit the identified FormData for review.\n * https://rest-docs.synapse.org/rest/POST/form/data/id/submit.html\n */\nexport const submitFormData = (\n  formDataId: string,\n  accessToken: string | undefined,\n): Promise<FormData> => {\n  return doPost(\n    `/repo/v1/form/data/${formDataId}/submit`,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * List FormData objects and their associated status that match the filters of the provided request that are\n * owned by the caller. Note: Only objects owned by the caller will be returned.\n * https://rest-docs.synapse.org/rest/POST/form/data/list.html\n */\nexport const listFormData = (\n  request: ListRequest,\n  accessToken: string | undefined,\n): Promise<ListResponse> => {\n  return doPost(\n    `/repo/v1/form/data/list`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * List FormData objects and their associated status that match the filters of the provided request for the entire\n * group. This is used by service accounts to process submissions.\n * https://rest-docs.synapse.org/rest/POST/form/data/list/reviewer.html\n */\nexport const listFormDataAsFormAdmin = (\n  request: ListRequest,\n  accessToken: string | undefined,\n): Promise<ListResponse> => {\n  return doPost(\n    `/repo/v1/form/data/list/reviewer`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Called by the form processing service to accept a submitted data.\n * https://rest-docs.synapse.org/rest/PUT/form/data/id/accept.html\n */\nexport const acceptFormData = (\n  formDataId: string,\n  accessToken: string | undefined,\n): Promise<FormData> => {\n  return doPut(\n    `/repo/v1/form/data/${formDataId}/accept`,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Called by the form processing service to reject a submitted data.\n * https://rest-docs.synapse.org/rest/PUT/form/data/id/reject.html\n */\nexport const rejectFormData = (\n  formDataId: string,\n  reason: string,\n  accessToken: string | undefined,\n): Promise<FormData> => {\n  const formRejection: FormRejection = {\n    reason,\n  }\n  return doPut(\n    `/repo/v1/form/data/${formDataId}/reject`,\n    formRejection,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get Statistics\n * https://rest-docs.synapse.org/rest/POST/statistics.html\n * Generic endpoint to retrieve statistics about objects. The user should have VIEW_STATISTICS access on the object referenced by the objectId in the request.\n */\nexport const getProjectStatistics = (\n  request: ProjectFilesStatisticsRequest,\n  accessToken: string | undefined,\n): Promise<ProjectFilesStatisticsResponse> => {\n  return doPost(\n    `/repo/v1/statistics`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// see https://rest-docs.synapse.org/rest/POST/restrictionInformation.html\nexport const getRestrictionInformation = (\n  request: RestrictionInformationRequest,\n  accessToken: string | undefined,\n): Promise<RestrictionInformationResponse> => {\n  return doPost(\n    `/repo/v1/restrictionInformation`,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n/**\n * Returns a paginated result of access requirements associated for an entity\n *\n * See https://rest-docs.synapse.org/rest/GET/entity/id/accessRequirement.html\n *\n * @param {(string | undefined)} accessToken token of user\n * @param {string} id id of entity\n * @param {number} [limit=50]\n * @param {number} [offset=0]\n * @returns {Promise<PaginatedResults<AccessRequirement>>}\n */\nexport const getAccessRequirement = (\n  accessToken: string | undefined,\n  id: string,\n  limit: number = 50,\n  offset: number = 0,\n): Promise<PaginatedResults<AccessRequirement>> => {\n  const url = `${ENTITY_ACCESS_REQUIREMENTS(\n    id,\n  )}?limit=${limit}&offset=${offset}`\n  return doGet<PaginatedResults<AccessRequirement>>(\n    url,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Returns the Access Requirement with the given AR_ID\n *\n * See http://rest-docs.synapse.org/rest/GET/accessRequirement/requirementId.html\n *\n * @param {(string | undefined)} accessToken token of user\n * @param {number} id id of the access requirement\n * @returns {Promise<AccessRequirement>}\n */\nexport const getAccessRequirementById = <T extends AccessRequirement>(\n  accessToken: string | undefined,\n  id: string | number,\n): Promise<T> => {\n  return doGet<T>(\n    ACCESS_REQUIREMENT_BY_ID(id),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Fetch the ACL for the access requirement with the given id.\n *\n * See https://rest-docs.synapse.org/rest/GET/accessRequirement/requirementId/acl.html\n * @returns the ACL for the specified AR, or null if the ACL does not exist\n */\nexport const getAccessRequirementAcl = (\n  accessToken: string | undefined,\n  id: string | number,\n): Promise<AccessControlList | null> => {\n  // It's possible for an AR to not have an ACL, so pre-emptively handle 404\n  return allowNotFoundError(() =>\n    doGet<AccessControlList>(\n      ACCESS_REQUIREMENT_ACL(id),\n      accessToken,\n      BackendDestinationEnum.REPO_ENDPOINT,\n    ),\n  )\n}\n\n/**\n * Search for access requirements\n *\n * See http://rest-docs.synapse.org/rest/POST/accessRequirement/search.html\n */\nexport const searchAccessRequirements = (\n  accessToken: string | undefined,\n  request: AccessRequirementSearchRequest,\n): Promise<AccessRequirementSearchResponse> => {\n  return doPost<AccessRequirementSearchResponse>(\n    ACCESS_REQUIREMENT_SEARCH,\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Retrieve an access requirement status for a given access requirement ID.\n *\n * @param {string} requirementId id of entity to lookup\n * @returns {AccessRequirementStatus}\n */\nexport function getAccessRequirementStatus<\n  T extends\n    | AccessRequirementStatus\n    | ManagedACTAccessRequirementStatus = AccessRequirementStatus,\n>(accessToken: string | undefined, requirementId: string | number): Promise<T> {\n  return doGet<T>(\n    ACCESS_REQUIREMENT_STATUS(requirementId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Returns all the access requirements associated to an entity {id}, calling the\n * paginated getAccessRequirement service until all results are returned.\n *\n * @param {(string | undefined)} accessToken token of user\n * @param {string} id id of entity to lookup\n * @returns {Promise<Array<AccessRequirement>>}\n */\nexport const getAllAccessRequirements = (\n  accessToken: string | undefined,\n  id: string,\n): Promise<Array<AccessRequirement>> => {\n  // format function to be callable by getAllOfPaginatedService\n  const fn = (limit: number, offset: number) => {\n    const url = `/repo/v1/entity/${id}/accessRequirement?limit=${limit}&offset=${offset}`\n    return doGet<PaginatedResults<AccessRequirement>>(\n      url,\n      accessToken,\n      BackendDestinationEnum.REPO_ENDPOINT,\n    )\n  }\n  return getAllOfPaginatedService(fn)\n}\n\n/**\n * Add a temporary access restriction that prevents access pending review by the Synapse Access and Compliance Team.\n * This service may be used only by an administrator of the specified entity.\n *\n * https://rest-docs.synapse.org/rest/POST/entity/id/lockAccessRequirement.html\n * @param entityId\n * @param accessToken\n */\nexport function createLockAccessRequirement(\n  entityId: string,\n  accessToken: string | undefined,\n): Promise<AccessRequirement> {\n  return doPost(\n    `/repo/v1/entity/${entityId}/lockAccessRequirement`,\n    null,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n *\n *\n * @param {(string | undefined)} accessToken user access token\n * @param {(number | undefined)} id the unique immutable ID\n * @returns {AccessApproval}\n */\nexport const getAccessApproval = async (\n  accessToken: string | undefined,\n  approvalId: number,\n): Promise<AccessApproval> => {\n  const url = `${ACCESS_APPROVAL_BY_ID(approvalId)}`\n  return doGet<AccessApproval>(\n    url,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n *\n *\n * @param {(string | undefined)} accessToken user access token\n * @param {AccessApproval} accessApproval access approval request object\n * @returns {AccessApproval}\n */\nexport const createAccessApproval = async (\n  accessToken: string | undefined,\n  accessApproval: AccessApproval,\n): Promise<AccessApproval> => {\n  return doPost<AccessApproval>(\n    ACCESS_APPROVAL,\n    accessApproval,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/GET/download/list.html\nexport const getDownloadList = (accessToken: string | undefined) => {\n  return doGet<DownloadList>(\n    '/file/v1/download/list',\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const getDownloadOrder = (\n  zipFileName: string | undefined,\n  accessToken: string | undefined,\n): Promise<DownloadOrder> => {\n  const baseURL = '/file/v1/download/order'\n  const url = zipFileName ? `${baseURL}?zipFileName=${zipFileName}` : baseURL\n  return doPost(\n    url,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport type FunctionReturningPaginatedResults<T> = (\n  limit: number,\n  offset: number,\n) => Promise<PaginatedResults<T>>\n/**\n * Utility function to get all the results of a paginated service\n *\n * @template T Type of paginated service\n * @param {FunctionReturningPaginatedResults<T>} fn Function that returns a paginated synapse object, accepts a limit and offset\n * @returns\n */\nexport const getAllOfPaginatedService = async <T>(\n  fn: FunctionReturningPaginatedResults<T>,\n) => {\n  const limit = 50\n  let offset = 0\n  let existsMoreData = true\n  const results: T[] = []\n\n  while (existsMoreData) {\n    try {\n      const data = await fn(limit, offset)\n      results.push(...data.results)\n      offset += data.results.length\n      if (data.results.length < limit) {\n        existsMoreData = false\n      }\n    } catch (e) {\n      throw Error(`Error on getting paginated results ${e}`)\n    }\n  }\n\n  return results\n}\n\n// https://rest-docs.synapse.org/rest/POST/download/list/remove.html\nexport const deleteDownloadListFiles = (\n  list: FileHandleAssociation[],\n  accessToken: string | undefined,\n): Promise<DownloadList> => {\n  return doPost<DownloadList>(\n    '/file/v1/download/list/remove',\n    { list },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  ).then(data => {\n    dispatchDownloadListChangeEvent(data)\n    return data\n  })\n}\n\n// https://rest-docs.synapse.org/rest/DELETE/download/list.html ?\nexport const deleteDownloadList = (accessToken: string | undefined) => {\n  return doDelete(\n    '/file/v1/download/list',\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  ).then(() => {\n    dispatchDownloadListChangeEvent(undefined)\n  })\n}\n\n/**\n * http://rest-docs.synapse.org/rest/POST/entity/id/table/transaction/async/start.html\n * @param {*} tableUpdateRequest\n * @param {*} accessToken\n * @param {*} endpoint\n * // technically returns a TableUpdateTransactionResponse, but I don't see any reason we need this\n */\nexport const updateTable = async (\n  tableUpdateRequest: TableUpdateTransactionRequest,\n  accessToken: string | undefined = undefined,\n): Promise<void> => {\n  const asyncJobId = await doPost<AsyncJobId>(\n    `/repo/v1/entity/${tableUpdateRequest.entityId}/table/transaction/async/start`,\n    tableUpdateRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  return getAsyncResultBodyFromJobId(\n    asyncJobId.token,\n    `/repo/v1/entity/${tableUpdateRequest.entityId}/table/transaction/async/get/${asyncJobId.token}`,\n    accessToken,\n  )\n}\n\nexport const getTransformSqlWithFacetsRequest = (\n  transformSqlWithFacetsRequest: TransformSqlWithFacetsRequest,\n) => {\n  return doPost<SqlTransformResponse>(\n    '/repo/v1/table/sql/transform',\n    transformSqlWithFacetsRequest,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const createPersonalAccessToken = (\n  accessTokenGenerationRequest: AccessTokenGenerationRequest,\n  accessToken: string | undefined,\n) => {\n  return doPost<AccessTokenGenerationResponse>(\n    '/auth/v1/personalAccessToken',\n    accessTokenGenerationRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const getPersonalAccessTokenRecords = (\n  accessToken: string | undefined,\n  nextPageToken: string | undefined,\n) => {\n  return doGet<AccessTokenRecordList>(\n    `/auth/v1/personalAccessToken${\n      nextPageToken ? '?nextPageToken=' + nextPageToken : ''\n    }`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const deletePersonalAccessToken = (\n  accessTokenId: string,\n  accessToken: string | undefined,\n) => {\n  return doDelete(\n    `/auth/v1/personalAccessToken/${accessTokenId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/GET/projects.html\nexport const getMyProjects = (\n  accessToken: string,\n  params: GetProjectsParameters = {},\n) => {\n  const urlParams = new URLSearchParams(\n    removeUndefined(params) as Record<string, string>,\n  )\n  return doGet<ProjectHeaderList>(\n    `${PROJECTS}?${urlParams.toString()}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/GET/projects/user/principalId.html\nexport const getUserProjects = (\n  userId: string,\n  params: GetProjectsParameters = {},\n  accessToken?: string,\n) => {\n  const urlParams = new URLSearchParams(\n    removeUndefined(params) as Record<string, string>,\n  )\n  return doGet<ProjectHeaderList>(\n    `/repo/v1/projects/user/${userId}?${urlParams.toString()}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/GET/entity/id/path.html\nexport const getEntityPath = (entityId: string, accessToken?: string) => {\n  return doGet<EntityPath>(\n    ENTITY_PATH(entityId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/GET/entity/id/version.html\nexport const getEntityVersions = (\n  entityId: string,\n  accessToken?: string,\n  offset: number = 0,\n  limit: number = 200,\n) => {\n  return doGet<PaginatedResults<VersionInfo>>(\n    `/repo/v1/entity/${entityId}/version?offset=${offset}&limit=${limit}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/POST/search.html\nexport const searchEntities = (query: SearchQuery, accessToken?: string) => {\n  return doPost<SearchResults>(\n    '/repo/v1/search',\n    query,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nconst getDownloadListJobResponse = async (\n  accessToken: string | undefined,\n  queryRequestDetails: QueryRequestDetails,\n): Promise<QueryResponseDetails> => {\n  const downloadListQueryRequest: DownloadListQueryRequest = {\n    concreteType:\n      'org.sagebionetworks.repo.model.download.DownloadListQueryRequest',\n    requestDetails: queryRequestDetails,\n  }\n  const asyncJobId = await doPost<AsyncJobId>(\n    '/repo/v1/download/list/query/async/start',\n    downloadListQueryRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  const response = await getAsyncResultBodyFromJobId<DownloadListQueryResponse>(\n    asyncJobId.token,\n    `/repo/v1/download/list/query/async/get/${asyncJobId.token}`,\n    accessToken,\n  )\n  return response.responseDetails\n}\n\n/**\n * Clear all files from the user's Download List v2.\n * http://rest-docs.synapse.org/rest/DELETE/download/list.html\n */\nexport const clearDownloadListV2 = (\n  accessToken: string | undefined,\n): Promise<void> => {\n  return doDelete(\n    '/repo/v1/download/list',\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get Download List v2 available files to download\n * http://rest-docs.synapse.org/rest/POST/download/list/query/async/start.html\n */\nexport const getAvailableFilesToDownload = (\n  request: AvailableFilesRequest,\n  accessToken: string | undefined = undefined,\n): Promise<AvailableFilesResponse> => {\n  return getDownloadListJobResponse(\n    accessToken,\n    request,\n  ) as Promise<AvailableFilesResponse>\n}\n\n/**\n * Get Download List v2 statistics\n * http://rest-docs.synapse.org/rest/POST/download/list/query/async/start.html\n */\nexport const getDownloadListStatistics = (\n  accessToken: string | undefined = undefined,\n): Promise<FilesStatisticsResponse> => {\n  const filesStatsRequest: FilesStatisticsRequest = {\n    concreteType:\n      'org.sagebionetworks.repo.model.download.FilesStatisticsRequest',\n  }\n  return getDownloadListJobResponse(\n    accessToken,\n    filesStatsRequest,\n  ) as Promise<FilesStatisticsResponse>\n}\n\n/**\n * Get Download List v2 actions required\n * http://rest-docs.synapse.org/rest/POST/download/list/query/async/start.html\n */\nexport const getDownloadListActionsRequired = (\n  request: ActionRequiredRequest,\n  accessToken: string | undefined = undefined,\n): Promise<ActionRequiredResponse> => {\n  return getDownloadListJobResponse(\n    accessToken,\n    request,\n  ) as Promise<ActionRequiredResponse>\n}\n\n/**\n * Remove item from Download List v2\n * http://rest-docs.synapse.org/rest/POST/download/list/remove.html\n */\nexport const removeItemFromDownloadListV2 = (\n  item: DownloadListItem,\n  accessToken: string | undefined = undefined,\n): Promise<RemoveBatchOfFilesFromDownloadListResponse> => {\n  const request: RemoveBatchOfFilesFromDownloadListRequest = {\n    batchToRemove: [item],\n  }\n  return doPost<RemoveBatchOfFilesFromDownloadListResponse>(\n    '/repo/v1/download/list/remove',\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/POST/researchProject.html\nexport const updateResearchProject = (\n  requestObj: ResearchProject,\n  accessToken: string,\n) => {\n  return doPost<ResearchProject>(\n    RESEARCH_PROJECT,\n    requestObj,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/GET/accessRequirement/requirementId/researchProjectForUpdate.html\nexport const getResearchProject = (\n  requirementId: string,\n  accessToken: string,\n) => {\n  return doGet<ResearchProject>(\n    ACCESS_REQUIREMENT_RESEARCH_PROJECT_FOR_UPDATE(requirementId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/GET/accessRequirement/requirementId/dataAccessRequestForUpdate.html\nexport const getDataAccessRequestForUpdate = (\n  requirementId: string,\n  accessToken: string,\n) => {\n  return doGet<Request | Renewal>(\n    ACCESS_REQUIREMENT_DATA_ACCESS_REQUEST_FOR_UPDATE(requirementId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/GET/accessRequirement/requirementId/dataAccessRequestForUpdate.html\nexport function updateDataAccessRequest(\n  requestObj: Request | Renewal,\n  accessToken: string,\n) {\n  return doPost<typeof requestObj>(\n    DATA_ACCESS_REQUEST,\n    requestObj,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/POST/dataAccessRequest/requestId/submission.html\nexport const submitDataAccessRequest = (\n  requestObj: CreateSubmissionRequest,\n  accessToken: string,\n) => {\n  return doPost<ACTSubmissionStatus>(\n    DATA_ACCESS_REQUEST_SUBMISSION(requestObj.requestId),\n    requestObj,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/PUT/dataAccessSubmission/submissionId/cancellation.html\n// Cancel a submission. Only the user who created this submission can cancel it.\nexport const cancelDataAccessRequest = (\n  submissionId: string,\n  accessToken: string,\n) => {\n  return doPut<ACTSubmissionStatus>(\n    `/repo/v1/dataAccessSubmission/${submissionId}/cancellation`,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/GET/dataAccessSubmission/submissionId.html\n// Fetch a submission by its id. If the user is a not part of the ACT they must be validated and assigned as reviewers of the AR submissions in order to fetch the submission.\nexport const getSubmissionById = (\n  submissionId: string | number,\n  accessToken?: string,\n) => {\n  return doGet<DataAccessSubmission>(\n    DATA_ACCESS_SUBMISSION_BY_ID(submissionId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Request to update a submission' state. Only ACT members and delegates with the REVIEW_SUBMISSION ACL\n * permission can perform this action.\n *\n * See https://docs.synapse.org/rest/PUT/dataAccessSubmission/submissionId.html\n * @param request\n * @param accessToken\n * @returns\n */\nexport const updateSubmissionStatus = (\n  request: SubmissionStateChangeRequest,\n  accessToken?: string,\n): Promise<DataAccessSubmission> => {\n  return doPut<DataAccessSubmission>(\n    DATA_ACCESS_SUBMISSION_BY_ID(request.submissionId),\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get the schema bound to an entity.\n * https://docs.synapse.org/rest/GET/entity/id/schema/binding.html\n * @param entityId\n * @param accessToken\n * @returns\n */\n//\nexport const getSchemaBinding = (entityId: string, accessToken?: string) => {\n  return allowNotFoundError(() =>\n    doGet<JsonSchemaObjectBinding>(\n      ENTITY_SCHEMA_BINDING(entityId),\n      accessToken,\n      BackendDestinationEnum.REPO_ENDPOINT,\n    ),\n  )\n}\n\n/**\n * Get the schema bound to an entity.\n * https://docs.synapse.org/rest/GET/entity/id/schema/binding.html\n * @param entityId\n * @param accessToken\n * @returns\n */\nexport const getSchemaValidationResults = (\n  entityId: string,\n  accessToken?: string,\n) => {\n  return doGet<ValidationResults>(\n    ENTITY_SCHEMA_VALIDATION(entityId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get a schema by its $id.\n * https://docs.synapse.org/rest/GET/entity/id/schema/binding.html\n * @returns\n */\nexport const getSchema = (schema$id: string) => {\n  return doGet<JSONSchema7>(\n    `${REGISTERED_SCHEMA_ID(schema$id)}`,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Retrieve a \"validation\" schema--all references are resolved and dereferenced.\n * @param schema$id\n * @returns\n */\nexport const getValidationSchema = async (\n  schema$id: string,\n  accessToken?: string,\n): Promise<{\n  concreteType: 'org.sagebionetworks.repo.model.schema.GetValidationSchemaResponse'\n  validationSchema: JSONSchema7\n}> => {\n  const asyncJobId = await doPost<AsyncJobId>(\n    SCHEMA_VALIDATION_START,\n    {\n      concreteType:\n        'org.sagebionetworks.repo.model.schema.GetValidationSchemaRequest',\n      $id: schema$id,\n    },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n  return getAsyncResultBodyFromJobId(\n    asyncJobId.token,\n    SCHEMA_VALIDATION_GET(asyncJobId.token),\n    accessToken,\n  )\n}\n\n/**\n * Determine if the caller has a particular access type on an entity\n * https://docs.synapse.org/rest/GET/entity/id/access.html\n * @param entityId\n * @param accessToken\n * @returns\n */\nexport const hasAccessToEntity = (\n  entityId: string,\n  accessType: ACCESS_TYPE,\n  accessToken?: string,\n) => {\n  return doGet<HasAccessResponse>(\n    `${ENTITY_ACCESS(entityId)}?accessType=${accessType}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get the entity and its annotations as a JSON object\n * https://docs.synapse.org/rest/GET/entity/id/json.html\n * @param entityId\n * @param accessToken\n * @returns\n */\nexport const getEntityJson = (entityId: string, accessToken?: string) => {\n  return doGet<EntityJson>(\n    ENTITY_JSON(entityId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Update an entity and its annotations using a JSON object\n * https://docs.synapse.org/rest/PUT/entity/id/json.html\n * @param entityId\n * @param accessToken\n * @returns\n */\nexport const updateEntityJson = (\n  entityId: string,\n  json: EntityJson,\n  accessToken?: string,\n) => {\n  return doPut<EntityJson>(\n    ENTITY_JSON(entityId),\n    json,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This service returns the email used for user notifications, i.e. when a Synapse message\n *  is sent and if the user has elected to receive messages by email, then this is the\n *  email address at which the user will receive the message.\n * https://docs.synapse.org/rest/GET/notificationEmail.html\n */\nexport const getNotificationEmail = (accessToken?: string) => {\n  return doGet<NotificationEmail>(\n    NOTIFICATION_EMAIL,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/POST/principal/available.html\nexport const isAliasAvailable = (\n  aliasCheckRequest: AliasCheckRequest,\n  accessToken?: string,\n): Promise<AliasCheckResponse> => {\n  return doPost<AliasCheckResponse>(\n    ALIAS_AVAILABLE,\n    aliasCheckRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/POST/account/emailValidation.html\nexport const registerAccountStep1 = (\n  newUser: NewUser,\n  portalEndpoint: string,\n): Promise<void> => {\n  return doPost<void>(\n    REGISTER_ACCOUNT_STEP_1(portalEndpoint),\n    newUser,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/POST/account2.html\nexport const registerAccountStep2 = (\n  accountSetupInfo: AccountSetupInfo,\n): Promise<LoginResponse> => {\n  return doPost(\n    REGISTER_ACCOUNT_STEP_2,\n    accountSetupInfo,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Step 2 of creating a new account via oauth signin\n *  http://rest-docs.synapse.org/rest/POST/oauth2/account2.html\n * @param {*} provider\n * @param {*} authenticationCode\n * @param {*} redirectUrl\n * @param {*} endpoint\n */\nexport const oAuthRegisterAccountStep2 = (\n  userName: string,\n  provider: string,\n  authenticationCode: string | number,\n  redirectUrl: string,\n  endpoint: BackendDestinationEnum = BackendDestinationEnum.REPO_ENDPOINT,\n): Promise<LoginResponse> => {\n  return doPost(\n    '/auth/v1/oauth2/account2',\n    {\n      provider,\n      authenticationCode,\n      redirectUrl,\n      userName,\n    },\n    undefined,\n    endpoint,\n  )\n}\n\n/**\n * Bind OAuth account to Synapse account as a new 'alias'.\n * https://rest-docs.synapse.org/rest/POST/oauth2/alias.html\n * @param {*} provider\n * @param {*} authenticationCode\n * @param {*} redirectUrl\n * @param {*} endpoint\n */\nexport const bindOAuthProviderToAccount = async (\n  provider: string,\n  authenticationCode: string | number,\n  redirectUrl: string,\n  endpoint: BackendDestinationEnum = BackendDestinationEnum.REPO_ENDPOINT,\n): Promise<LoginResponse> => {\n  // Special case.  web app may not have discovered the access token by this point in init.\n  // Look for the access token ourselves before binding.\n  const accessToken = await getAccessTokenFromCookie()\n  return doPost(\n    '/auth/v1/oauth2/alias',\n    { provider, authenticationCode, redirectUrl },\n    accessToken,\n    endpoint,\n  )\n}\n\n/**\n * Remove an alias associated with an account via the OAuth mechanism.\n * http://rest-docs.synapse.org/rest/DELETE/oauth2/alias.html\n * @param provider\n * @param accessToken\n * @param alias\n */\nexport const unbindOAuthProviderToAccount = async (\n  provider: string,\n  accessToken: string | undefined,\n  alias: string,\n) => {\n  const url = `/auth/v1/oauth2/alias?provider=${provider}&alias=${encodeURIComponent(\n    alias,\n  )}`\n  return doDelete(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\n//http://rest-docs.synapse.org/rest/POST/termsOfUse2.html\nexport const signSynapseTermsOfUse = (accessToken: string) => {\n  return doPost(\n    SIGN_TERMS_OF_USE,\n    { accessToken },\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n//https://rest-docs.synapse.org/rest/POST/verificationSubmission.html\nexport const createProfileVerificationSubmission = (\n  verificationSubmission: VerificationSubmission,\n  accessToken: string,\n) => {\n  return doPost(\n    VERIFICATION_SUBMISSION,\n    verificationSubmission,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/POST/user/changePassword.html\nexport const changePasswordWithCurrentPassword = (\n  newPassword: ChangePasswordWithCurrentPassword,\n  accessToken: string | undefined,\n) => {\n  return doPost<ChangePasswordWithCurrentPassword>(\n    '/auth/v1/user/changePassword',\n    newPassword,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// https://rest-docs.synapse.org/rest/POST/user/changePassword.html\nexport const changePasswordWithToken = (\n  newPassword: ChangePasswordWithToken,\n) => {\n  return doPost<ChangePasswordWithToken>(\n    '/auth/v1/user/changePassword',\n    newPassword,\n    undefined,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n// http://rest-docs.synapse.org/rest/POST/user/password/reset.html\nexport const resetPassword = (email: string) => {\n  const endpoint = window.location.href + '?passwordResetToken='\n  const url = `/auth/v1/user/password/reset?passwordResetEndpoint=${encodeURIComponent(\n    endpoint,\n  )}`\n  return doPost(url, { email }, undefined, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\n/**\n * https://rest-docs.synapse.org/rest/POST/account/id/emailValidation.html\n * @param email\n * @param userId\n * @param portalEndpoint\n * @param accessToken\n */\nexport const addEmailAddressStep1 = (\n  email: string,\n  userId: string,\n  portalEndpoint: string,\n  accessToken: string | undefined,\n) => {\n  return doPost(\n    `/repo/v1/account/${userId}/emailValidation?portalEndpoint=${portalEndpoint}`,\n    { email },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/POST/email.html\n * @param emailValidationSignedToken\n * @param accessToken\n */\nexport const addEmailAddressStep2 = (\n  emailValidationSignedToken: EmailValidationSignedToken,\n  accessToken: string | undefined,\n) => {\n  return doPost(\n    `/repo/v1/email`,\n    emailValidationSignedToken,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/DELETE/email.html\n * @param email\n * @param accessToken\n */\nexport const deleteEmail = (accessToken: string | undefined, email: string) => {\n  return doDelete(\n    `/repo/v1/email?email=${email}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * https://rest-docs.synapse.org/rest/PUT/notificationEmail.html\n * @param email\n * @param accessToken\n */\nexport const updateNotificationEmail = (\n  email: string,\n  accessToken: string | undefined,\n) => {\n  return doPut(\n    '/repo/v1/notificationEmail',\n    { email },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to get a reply and its statistic given its ID.\n * Target users: anyone who has READ permission to the project.\n * http://rest-docs.synapse.org/rest/GET/reply/replyId.html\n * @param replyId\n * @param accessToken\n */\nexport const getReply = (replyId: string, accessToken: string | undefined) => {\n  return doGet<DiscussionReplyBundle>(\n    `/repo/v1/reply/${replyId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to create a new reply to a thread.\n * Target users: anyone who has READ permission to the project.\n * https://rest-docs.synapse.org/rest/POST/reply.html\n * @param createDiscussionReply\n * @param accessToken\n * @returns\n */\nexport const postReply = (\n  createDiscussionReply: CreateDiscussionReply,\n  accessToken: string | undefined,\n) => {\n  return doPost<DiscussionReplyBundle>(\n    `/repo/v1/reply`,\n    createDiscussionReply,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to update the message of a reply.\n * Target users: only the author of the reply can update its message.\n * https://rest-docs.synapse.org/rest/PUT/reply/replyId/message.html\n * @param updateDiscussionReply\n * @param accessToken\n * @returns\n */\nexport const putReply = (\n  updateDiscussionReply: UpdateDiscussionReply,\n  accessToken: string | undefined,\n) => {\n  return doPut<DiscussionReplyBundle>(\n    `/repo/v1/reply/${updateDiscussionReply.replyId}/message`,\n    { messageMarkdown: updateDiscussionReply.messageMarkdown },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to mark a reply as deleted.\n * Target users: only forum's moderator can mark a reply as deleted.\n * https://rest-docs.synapse.org/rest/DELETE/reply/replyId.html\n * @param accessToken\n * @param replyId\n * @returns\n */\nexport const deleteReply = (\n  accessToken: string | undefined,\n  replyId: string,\n) => {\n  return doDelete(\n    `/repo/v1/reply/${replyId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to get N number of replies for a given thread ID.\n * Target users: anyone who has READ permission to the project.\n * https://rest-docs.synapse.org/rest/GET/thread/threadId/replies.html\n */\nexport const getReplies = (\n  accessToken: string | undefined,\n  threadId: string,\n  limit: number = 30,\n  offset: number = 0,\n  sort: DiscussionReplyOrder = DiscussionReplyOrder.CREATED_ON,\n  ascending: boolean = true,\n  filter: DiscussionFilter = DiscussionFilter.EXCLUDE_DELETED,\n) => {\n  const params = new URLSearchParams()\n  params.set('offset', offset.toString())\n  params.set('limit', limit.toString())\n  params.set('sort', sort)\n  params.set('ascending', ascending.toString())\n  params.set('filter', filter)\n\n  const url = `${THREAD}/${threadId}/replies?${params.toString()}`\n\n  return doGet<PaginatedResults<DiscussionReplyBundle>>(\n    url,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to get the message URL of a reply. The message\n * URL is the URL to download the file which contains the reply message.\n * Target users: anyone who has READ permission to the project.\n * http://rest-docs.synapse.org/rest/GET/reply/messageUrl.html\n * @param messageKey\n * @param accessToken\n */\n\nexport const getReplyMessageUrl = (\n  messageKey: string,\n  accessToken: string | undefined,\n) => {\n  return doGet<MessageURL>(\n    `/repo/v1/reply/messageUrl?messageKey=${messageKey}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to mark a thread as pinned.\n * Target users: only forum's moderator can mark a thread as pinned.\n * https://rest-docs.synapse.org/rest/PUT/thread/threadId/pin.html\n * @param accessToken\n * @param threadId\n * @returns\n */\nexport const pinThread = (\n  accessToken: string | undefined,\n  threadId: string,\n) => {\n  return doPut<void>(\n    `${THREAD_ID(threadId)}/pin`,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to unpin a thread.\n * Target users: only forum's moderator can unpin a thread.\n * https://rest-docs.synapse.org/rest/PUT/thread/threadId/unpin.html\n * @param accessToken\n * @param threadId\n * @returns\n */\nexport const unPinThread = (\n  accessToken: string | undefined,\n  threadId: string,\n) => {\n  return doPut<void>(\n    `${THREAD_ID(threadId)}/unpin`,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to get a thread and its statistic given its ID.\n * Target users: anyone who has READ permission to the project.\n * http://rest-docs.synapse.org/rest/GET/thread/threadId.html\n * @param threadId\n * @param accessToken\n */\nexport const getThread = (\n  threadId: string,\n  accessToken: string | undefined,\n) => {\n  return doGet<DiscussionThreadBundle>(\n    THREAD_ID(threadId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to get the message URL of a reply. The message\n * URL is the URL to download the file which contains the reply message.\n * Target users: anyone who has READ permission to the project.\n * http://rest-docs.synapse.org/rest/GET/thread/messageUrl.html\n * @param messageKey\n * @param accessToken\n */\n\nexport const getThreadMessageUrl = (\n  messageKey: string,\n  accessToken: string | undefined,\n) => {\n  return doGet<MessageURL>(\n    `${THREAD}/messageUrl?messageKey=${messageKey}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to create a new thread in a forum.\n * Target users: anyone who has READ permission to the project.\n * https://rest-docs.synapse.org/rest/POST/thread.html\n * @param accessToken\n * @param createDiscussionThread\n */\nexport const postThread = (\n  accessToken: string | undefined,\n  createDiscussionThread: CreateDiscussionThread,\n) => {\n  return doPost<DiscussionThreadBundle>(\n    THREAD,\n    createDiscussionThread,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to update the title of a thread.\n * Target users: only the author of the thread can update its title.\n * https://rest-docs.synapse.org/rest/PUT/thread/threadId/title.html\n * @param accessToken\n * @param request\n */\nexport const putThreadTitle = (\n  accessToken: string | undefined,\n  request: UpdateThreadTitleRequest,\n) => {\n  return doPut<DiscussionThreadBundle>(\n    `${THREAD}/${request.threadId}/title`,\n    { title: request.title },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to update the message of a thread.\n * Target users: only the author of the thread can update its message.\n * https://rest-docs.synapse.org/rest/PUT/thread/threadId/message.html\n * @param accessToken\n * @param request\n */\nexport const putThreadMessage = (\n  accessToken: string | undefined,\n  request: UpdateThreadMessageRequest,\n) => {\n  return doPut<DiscussionThreadBundle>(\n    `${THREAD}/${request.threadId}/message`,\n    { messageMarkdown: request.messageMarkdown },\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to mark a thread as deleted.\n * Target users: only forum's moderator can mark a thread as deleted.\n * https://rest-docs.synapse.org/rest/DELETE/thread/threadId.html\n * @param accessToken\n * @param threadId\n * @returns\n */\nexport const deleteThread = (\n  accessToken: string | undefined,\n  threadId: string,\n) => {\n  return doDelete(\n    THREAD_ID(threadId),\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport const restoreThread = (\n  accessToken: string | undefined,\n  threadId: string,\n) => {\n  return doPut<void>(\n    `${THREAD_ID(threadId)}/restore`,\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Returns a page of moderators for a given forum ID.\n * Target users: anyone who has READ permission to the project.\n * https://rest-docs.synapse.org/rest/GET/forum/forumId/moderators.html\n * @param accessToken\n * @param forumId\n * @returns\n */\nexport const getModerators = (\n  accessToken: string | undefined,\n  forumId: string,\n  limit: number = 20,\n  offset: number = 0,\n) => {\n  const params = new URLSearchParams()\n  params.set('offset', offset.toString())\n  params.set('limit', limit.toString())\n\n  return doGet<PaginatedIds>(\n    `${FORUM}/${forumId}/moderators?${params.toString()}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Performs a full text search in the forum defined by the given id.\n * Target users: anyone who has READ permission on the project of the forum.\n * http://rest-docs.synapse.org/rest/POST/forum/forumId/search.html\n * @param discussionSearchRequest\n * @param forumId\n * @param accessToken\n */\n\nexport const forumSearch = (\n  discussionSearchRequest: DiscussionSearchRequest,\n  forumId: string,\n  accessToken: string | undefined,\n) => {\n  return doPost<DiscussionSearchResponse>(\n    `${FORUM}/${forumId}/search`,\n    discussionSearchRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to get N number of threads for a given forum ID.\n * Target users: anyone who has READ permission to the project.\n * https://rest-docs.synapse.org/rest/GET/forum/forumId/threads.html\n */\n\nexport const getForumThread = (\n  accessToken: string | undefined,\n  forumId: string,\n  offset: number = 0,\n  limit: number = 20,\n  sort: DiscussionThreadOrder = DiscussionThreadOrder.PINNED_AND_LAST_ACTIVITY,\n  ascending: boolean = true,\n  filter: DiscussionFilter = DiscussionFilter.EXCLUDE_DELETED,\n) => {\n  const params = new URLSearchParams()\n  params.set('offset', offset.toString())\n  params.set('limit', limit?.toString())\n  params.set('sort', sort)\n  params.set('ascending', ascending.toString())\n  params.set('filter', filter)\n\n  const url = `${FORUM_THREAD(forumId)}?${params.toString()}`\n  return doGet<PaginatedResults<DiscussionThreadBundle>>(\n    url,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Search through the history of access approvals filtering by accessor/submitter\n * and optional by access requirement id. The caller must be a member of the ACT.\n * https://rest-docs.synapse.org/rest/POST/accessApproval/search.html\n * @param accessApprovalSearchRequest\n * @param accessToken\n */\n\nexport const searchAccessApprovals = (\n  accessApprovalSearchRequest: AccessApprovalSearchRequest | undefined,\n  accessToken: string | undefined,\n) => {\n  return doPost<AccessApprovalSearchResponse>(\n    '/repo/v1/accessApproval/search',\n    accessApprovalSearchRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Performs a search through access submissions that are reviewable by the user and\n * that match the criteria in the given request.\n * @param submissionSearchRequest\n * @param accessToken\n * https://rest-docs.synapse.org/rest/POST/dataAccessSubmission/search.html\n */\nexport const searchAccessSubmission = (\n  submissionSearchRequest: SubmissionSearchRequest,\n  accessToken: string | undefined,\n) => {\n  return doPost<SubmissionSearchResponse>(\n    ACCESS_REQUEST_SUBMISSION_SEARCH,\n    submissionSearchRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * http://rest-docs.synapse.org/rest/POST/accessRequirement/requirementId/approvedSubmissionInfo.html\n */\nexport const getApprovedSubmissionInfo = (\n  submissionInfoPageRequest: SubmissionInfoPageRequest,\n  accessToken: string | undefined,\n) => {\n  return doPost<SubmissionInfoPage>(\n    APPROVED_SUBMISSION_INFO(submissionInfoPageRequest.accessRequirementId),\n    submissionInfoPageRequest,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * http://rest-docs.synapse.org/rest/GET/activity/id/generated.html\n */\nexport const getActivityForEntity = (\n  entityId: string,\n  versionNumber?: number,\n  accessToken?: string,\n): Promise<Activity> => {\n  const url = ACTIVITY_FOR_ENTITY(\n    entityId,\n    versionNumber ? `${versionNumber}` : undefined,\n  )\n  return doGet<Activity>(url, accessToken, BackendDestinationEnum.REPO_ENDPOINT)\n}\n\n/**\n * Returns the presigned URL for a user's profile pic. Note that the presigned URL\n * expires after a short time, so it should be used immediately.\n * @param userId\n * @returns A presigned URL that can be used to fetch the profile preview image, or null if the user\n *   does not have a profile image\n */\nexport function getProfilePicPreviewPresignedUrl(userId: string) {\n  return allowNotFoundError(() =>\n    doGet<string>(\n      PROFILE_IMAGE_PREVIEW(userId) + `?redirect=false`,\n      undefined,\n      BackendDestinationEnum.REPO_ENDPOINT,\n    ),\n  )\n}\n\nexport function getItemsInTrashCan(\n  accessToken: string | undefined,\n  offset = 0,\n  limit = 25,\n) {\n  return doGet<PaginatedResults<TrashedEntity>>(\n    TRASHCAN_VIEW + `?offset=${offset}&limit=${limit}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport function restoreFromTrashCan(\n  entityId: string,\n  accessToken: string | undefined,\n) {\n  return doPut<void>(\n    TRASHCAN_RESTORE(entityId),\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nexport function purgeFromTrashCan(\n  entityId: string,\n  accessToken: string | undefined,\n) {\n  return doPut<void>(\n    TRASHCAN_PURGE(entityId),\n    undefined,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get the test to become a Certified User\n * https://rest-docs.synapse.org/rest/GET/certifiedUserTest.html\n */\nexport function getCertifyQuiz(accessToken: string | undefined) {\n  return doGet<Quiz>(\n    '/repo/v1/certifiedUserTest',\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Submit a response to the Certified User test.\n * https://rest-docs.synapse.org/rest/POST/certifiedUserTestResponse.html\n */\nexport function postCertifiedUserTestResponse(\n  accessToken: string | undefined,\n  quizResponse: QuizResponse,\n) {\n  return doPost<PassingRecord>(\n    '/repo/v1/certifiedUserTestResponse',\n    quizResponse,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\nconst S3_GEODATA_ENDPOINT = 'https://s3.amazonaws.com/geoloc.sagebase.org/'\nconst GEO_DATA_URL = S3_GEODATA_ENDPOINT + 'allPoints.json'\nconst API_KEY_URL = S3_GEODATA_ENDPOINT + 'googlemap.txt'\n\n/**\n * Fetches the API key for Google Maps used by Synapse, which can be used to fetch the API script.\n *\n * Note: the production API key is not a secret. It is secure because the key is configured to only\n *  allow Maps API requests from particular referrers (e.g. synapse.org)\n */\nexport async function getGoogleMapsApiKey(): Promise<string> {\n  const response = await fetch(API_KEY_URL)\n  return await response.text()\n}\n\n/**\n * Fetch Geolocation data for all Synapse users.\n */\nexport async function getAllSynapseUserGeoData(): Promise<GeoData[]> {\n  const response = await fetch(GEO_DATA_URL)\n  return (await response.json()) as GeoData[]\n}\n\n/**\n * Fetch Geolocation data for a particular Synapse team.\n */\nexport async function getSynapseTeamGeoData(\n  teamId: string,\n): Promise<GeoData[]> {\n  const response = await fetch(`${S3_GEODATA_ENDPOINT}${teamId}.json`)\n  return (await response.json()) as GeoData[]\n}\n\n/**\n * This API is used to retrieve a subscription given its ID\n * Target users: Synapse user who created this subscription.\n */\nexport function getSubscription(\n  accessToken: string | undefined,\n  subscriptionId: string,\n) {\n  return doGet<Subscription>(\n    `/repo/v1/subscription/${subscriptionId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Retrieve subscribers for a given topic.\n * https://rest-docs.synapse.org/rest/POST/subscription/subscribers.html\n * @param accessToken\n * @param topic\n * @returns\n */\nexport function getSubscribers(accessToken: string | undefined, topic: Topic) {\n  return doPost<SubscriberPagedResults>(\n    '/repo/v1/subscription/subscribers',\n    topic,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to subscribe to a topic.\n * Target users: anyone who has READ permission on the object.\n * https://rest-docs.synapse.org/rest/POST/subscription.html\n */\nexport function postSubscription(\n  accessToken: string | undefined,\n  topic: Topic,\n) {\n  return doPost<Subscription>(\n    '/repo/v1/subscription',\n    topic,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to unsubscribe to a topic.\n * Target users: Synapse user who created this subscription.\n */\nexport function deleteSubscription(\n  accessToken: string | undefined,\n  subscriptionId: string,\n) {\n  return doDelete(\n    `/repo/v1/subscription/${subscriptionId}`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * This API is used to retrieve subscriptions one has based on a list of provided topics.\n * These topics must have the same objectType.\n * Target users: all Synapse users.\n */\nexport function postSubscriptionList(\n  accessToken: string | undefined,\n  request: SubscriptionRequest,\n) {\n  return doPost<SubscriptionPagedResults>(\n    '/repo/v1/subscription/list',\n    request,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Get the default upload destination for the entity with the given id. The id might refer to the parent container\n * (e.g. a folder or a project) where a file needs to be uploaded.\n *\n * The upload destination is generated according to the default StorageLocationSetting for the project where the entity\n * resides. If the project does not contain any custom StorageLocationSetting the default synapse storage location is\n * used to generate an upload destination.\n *\n * https://rest-docs.synapse.org/rest/GET/entity/id/uploadDestination.html\n * @param containerEntityId\n * @param accessToken\n */\nexport function getDefaultUploadDestination(\n  containerEntityId: string,\n  accessToken: string | undefined,\n): Promise<UploadDestination> {\n  return doGet<UploadDestination>(\n    `/file/v1/entity/${containerEntityId}/uploadDestination`,\n    accessToken,\n    BackendDestinationEnum.REPO_ENDPOINT,\n  )\n}\n\n/**\n * Retrieves the DOI for the object. Note: this call only retrieves the DOI association, if it exists.\n * To retrieve the metadata for the object, see GET /doi\n *\n * https://rest-docs.synapse.org/rest/GET/doi/association.html\n */\nexport function getDOIAssociation(\n  accessToken: string | undefined,\n  objectId: string,\n  objectVersion?: number,\n  objectType = 'ENTITY',\n): Promise<DoiAssociation | null> {\n  const params = new URLSearchParams()\n  params.set('type', objectType)\n  params.set('id', objectId)\n  if (objectVersion) {\n    params.set('type', objectVersion.toString())\n  }\n\n  return allowNotFoundError(() =>\n    doGet<DoiAssociation>(\n      `${DOI_ASSOCIATION}?${params.toString()}`,\n      accessToken,\n      BackendDestinationEnum.REPO_ENDPOINT,\n    ),\n  )\n}\n\n/**\n * Returns the URL for the SWC file handle servlet so the user can retrieve the contents of a Synapse file handle when\n * they follow the link.\n * This effectively provides a stable URL where a user can request the contents of a file and get the same result, without\n * concern for the 30s expiration of presigned file handles returned by the Synapse backend.\n *\n * Note that this URL will only work if the user is logged in to Synapse on the domain of the SWC instance, and the client\n * (typically a browser) can provide the current access token cookie.\n * @param fileHandleId The ID of the file handle to retrieve\n * @param associatedObjectId ID of the object the file handle is associated with. Required if the user is not the one who uploaded the file handle\n * @param associatedObjectType The type of the associated object. Required if the user is not the one who uploaded the file handle\n */\nexport function getPortalFileHandleServletUrl(\n  fileHandleId: string,\n  associatedObjectId?: string,\n  associatedObjectType?: FileHandleAssociateType,\n) {\n  const search = new URLSearchParams()\n  search.set('fileHandleId', fileHandleId)\n  if (associatedObjectId && associatedObjectType) {\n    search.set('associatedObjectId', associatedObjectId)\n    search.set('associatedObjectType', associatedObjectType.toString())\n  }\n  return `${getEndpoint(\n    BackendDestinationEnum.PORTAL_ENDPOINT,\n  )}/Portal/filehandleassociation?${search.toString()}`\n}\n","import { unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nimport generateUtilityClass from '../generateUtilityClass';\nexport function getCollapseUtilityClass(slot) {\n  return generateUtilityClass('MuiCollapse', slot);\n}\nconst collapseClasses = generateUtilityClasses('MuiCollapse', ['root', 'horizontal', 'vertical', 'entered', 'hidden', 'wrapper', 'wrapperInner']);\nexport default collapseClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"addEndListener\", \"children\", \"className\", \"collapsedSize\", \"component\", \"easing\", \"in\", \"onEnter\", \"onEntered\", \"onEntering\", \"onExit\", \"onExited\", \"onExiting\", \"orientation\", \"style\", \"timeout\", \"TransitionComponent\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { Transition } from 'react-transition-group';\nimport { elementTypeAcceptingRef } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { duration } from '../styles/createTransitions';\nimport { getTransitionProps } from '../transitions/utils';\nimport useTheme from '../styles/useTheme';\nimport { useForkRef } from '../utils';\nimport { getCollapseUtilityClass } from './collapseClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    orientation,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root', `${orientation}`],\n    entered: ['entered'],\n    hidden: ['hidden'],\n    wrapper: ['wrapper', `${orientation}`],\n    wrapperInner: ['wrapperInner', `${orientation}`]\n  };\n  return composeClasses(slots, getCollapseUtilityClass, classes);\n};\nconst CollapseRoot = styled('div', {\n  name: 'MuiCollapse',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, styles[ownerState.orientation], ownerState.state === 'entered' && styles.entered, ownerState.state === 'exited' && !ownerState.in && ownerState.collapsedSize === '0px' && styles.hidden];\n  }\n})(({\n  theme,\n  ownerState\n}) => _extends({\n  height: 0,\n  overflow: 'hidden',\n  transition: theme.transitions.create('height')\n}, ownerState.orientation === 'horizontal' && {\n  height: 'auto',\n  width: 0,\n  transition: theme.transitions.create('width')\n}, ownerState.state === 'entered' && _extends({\n  height: 'auto',\n  overflow: 'visible'\n}, ownerState.orientation === 'horizontal' && {\n  width: 'auto'\n}), ownerState.state === 'exited' && !ownerState.in && ownerState.collapsedSize === '0px' && {\n  visibility: 'hidden'\n}));\nconst CollapseWrapper = styled('div', {\n  name: 'MuiCollapse',\n  slot: 'Wrapper',\n  overridesResolver: (props, styles) => styles.wrapper\n})(({\n  ownerState\n}) => _extends({\n  // Hack to get children with a negative margin to not falsify the height computation.\n  display: 'flex',\n  width: '100%'\n}, ownerState.orientation === 'horizontal' && {\n  width: 'auto',\n  height: '100%'\n}));\nconst CollapseWrapperInner = styled('div', {\n  name: 'MuiCollapse',\n  slot: 'WrapperInner',\n  overridesResolver: (props, styles) => styles.wrapperInner\n})(({\n  ownerState\n}) => _extends({\n  width: '100%'\n}, ownerState.orientation === 'horizontal' && {\n  width: 'auto',\n  height: '100%'\n}));\n\n/**\n * The Collapse transition is used by the\n * [Vertical Stepper](/material-ui/react-stepper/#vertical-stepper) StepContent component.\n * It uses [react-transition-group](https://github.com/reactjs/react-transition-group) internally.\n */\nconst Collapse = /*#__PURE__*/React.forwardRef(function Collapse(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiCollapse'\n  });\n  const {\n      addEndListener,\n      children,\n      className,\n      collapsedSize: collapsedSizeProp = '0px',\n      component,\n      easing,\n      in: inProp,\n      onEnter,\n      onEntered,\n      onEntering,\n      onExit,\n      onExited,\n      onExiting,\n      orientation = 'vertical',\n      style,\n      timeout = duration.standard,\n      // eslint-disable-next-line react/prop-types\n      TransitionComponent = Transition\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    orientation,\n    collapsedSize: collapsedSizeProp\n  });\n  const classes = useUtilityClasses(ownerState);\n  const theme = useTheme();\n  const timer = React.useRef();\n  const wrapperRef = React.useRef(null);\n  const autoTransitionDuration = React.useRef();\n  const collapsedSize = typeof collapsedSizeProp === 'number' ? `${collapsedSizeProp}px` : collapsedSizeProp;\n  const isHorizontal = orientation === 'horizontal';\n  const size = isHorizontal ? 'width' : 'height';\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(timer.current);\n    };\n  }, []);\n  const nodeRef = React.useRef(null);\n  const handleRef = useForkRef(ref, nodeRef);\n  const normalizedTransitionCallback = callback => maybeIsAppearing => {\n    if (callback) {\n      const node = nodeRef.current;\n\n      // onEnterXxx and onExitXxx callbacks have a different arguments.length value.\n      if (maybeIsAppearing === undefined) {\n        callback(node);\n      } else {\n        callback(node, maybeIsAppearing);\n      }\n    }\n  };\n  const getWrapperSize = () => wrapperRef.current ? wrapperRef.current[isHorizontal ? 'clientWidth' : 'clientHeight'] : 0;\n  const handleEnter = normalizedTransitionCallback((node, isAppearing) => {\n    if (wrapperRef.current && isHorizontal) {\n      // Set absolute position to get the size of collapsed content\n      wrapperRef.current.style.position = 'absolute';\n    }\n    node.style[size] = collapsedSize;\n    if (onEnter) {\n      onEnter(node, isAppearing);\n    }\n  });\n  const handleEntering = normalizedTransitionCallback((node, isAppearing) => {\n    const wrapperSize = getWrapperSize();\n    if (wrapperRef.current && isHorizontal) {\n      // After the size is read reset the position back to default\n      wrapperRef.current.style.position = '';\n    }\n    const {\n      duration: transitionDuration,\n      easing: transitionTimingFunction\n    } = getTransitionProps({\n      style,\n      timeout,\n      easing\n    }, {\n      mode: 'enter'\n    });\n    if (timeout === 'auto') {\n      const duration2 = theme.transitions.getAutoHeightDuration(wrapperSize);\n      node.style.transitionDuration = `${duration2}ms`;\n      autoTransitionDuration.current = duration2;\n    } else {\n      node.style.transitionDuration = typeof transitionDuration === 'string' ? transitionDuration : `${transitionDuration}ms`;\n    }\n    node.style[size] = `${wrapperSize}px`;\n    node.style.transitionTimingFunction = transitionTimingFunction;\n    if (onEntering) {\n      onEntering(node, isAppearing);\n    }\n  });\n  const handleEntered = normalizedTransitionCallback((node, isAppearing) => {\n    node.style[size] = 'auto';\n    if (onEntered) {\n      onEntered(node, isAppearing);\n    }\n  });\n  const handleExit = normalizedTransitionCallback(node => {\n    node.style[size] = `${getWrapperSize()}px`;\n    if (onExit) {\n      onExit(node);\n    }\n  });\n  const handleExited = normalizedTransitionCallback(onExited);\n  const handleExiting = normalizedTransitionCallback(node => {\n    const wrapperSize = getWrapperSize();\n    const {\n      duration: transitionDuration,\n      easing: transitionTimingFunction\n    } = getTransitionProps({\n      style,\n      timeout,\n      easing\n    }, {\n      mode: 'exit'\n    });\n    if (timeout === 'auto') {\n      // TODO: rename getAutoHeightDuration to something more generic (width support)\n      // Actually it just calculates animation duration based on size\n      const duration2 = theme.transitions.getAutoHeightDuration(wrapperSize);\n      node.style.transitionDuration = `${duration2}ms`;\n      autoTransitionDuration.current = duration2;\n    } else {\n      node.style.transitionDuration = typeof transitionDuration === 'string' ? transitionDuration : `${transitionDuration}ms`;\n    }\n    node.style[size] = collapsedSize;\n    node.style.transitionTimingFunction = transitionTimingFunction;\n    if (onExiting) {\n      onExiting(node);\n    }\n  });\n  const handleAddEndListener = next => {\n    if (timeout === 'auto') {\n      timer.current = setTimeout(next, autoTransitionDuration.current || 0);\n    }\n    if (addEndListener) {\n      // Old call signature before `react-transition-group` implemented `nodeRef`\n      addEndListener(nodeRef.current, next);\n    }\n  };\n  return /*#__PURE__*/_jsx(TransitionComponent, _extends({\n    in: inProp,\n    onEnter: handleEnter,\n    onEntered: handleEntered,\n    onEntering: handleEntering,\n    onExit: handleExit,\n    onExited: handleExited,\n    onExiting: handleExiting,\n    addEndListener: handleAddEndListener,\n    nodeRef: nodeRef,\n    timeout: timeout === 'auto' ? null : timeout\n  }, other, {\n    children: (state, childProps) => /*#__PURE__*/_jsx(CollapseRoot, _extends({\n      as: component,\n      className: clsx(classes.root, className, {\n        'entered': classes.entered,\n        'exited': !inProp && collapsedSize === '0px' && classes.hidden\n      }[state]),\n      style: _extends({\n        [isHorizontal ? 'minWidth' : 'minHeight']: collapsedSize\n      }, style),\n      ownerState: _extends({}, ownerState, {\n        state\n      }),\n      ref: handleRef\n    }, childProps, {\n      children: /*#__PURE__*/_jsx(CollapseWrapper, {\n        ownerState: _extends({}, ownerState, {\n          state\n        }),\n        className: classes.wrapper,\n        ref: wrapperRef,\n        children: /*#__PURE__*/_jsx(CollapseWrapperInner, {\n          ownerState: _extends({}, ownerState, {\n            state\n          }),\n          className: classes.wrapperInner,\n          children: children\n        })\n      })\n    }))\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? Collapse.propTypes /* remove-proptypes */ = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * Add a custom transition end trigger. Called with the transitioning DOM\n   * node and a done callback. Allows for more fine grained transition end\n   * logic. Note: Timeouts are still used as a fallback if provided.\n   */\n  addEndListener: PropTypes.func,\n  /**\n   * The content node to be collapsed.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The width (horizontal) or height (vertical) of the container when collapsed.\n   * @default '0px'\n   */\n  collapsedSize: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: elementTypeAcceptingRef,\n  /**\n   * The transition timing function.\n   * You may specify a single easing or a object containing enter and exit values.\n   */\n  easing: PropTypes.oneOfType([PropTypes.shape({\n    enter: PropTypes.string,\n    exit: PropTypes.string\n  }), PropTypes.string]),\n  /**\n   * If `true`, the component will transition in.\n   */\n  in: PropTypes.bool,\n  /**\n   * @ignore\n   */\n  onEnter: PropTypes.func,\n  /**\n   * @ignore\n   */\n  onEntered: PropTypes.func,\n  /**\n   * @ignore\n   */\n  onEntering: PropTypes.func,\n  /**\n   * @ignore\n   */\n  onExit: PropTypes.func,\n  /**\n   * @ignore\n   */\n  onExited: PropTypes.func,\n  /**\n   * @ignore\n   */\n  onExiting: PropTypes.func,\n  /**\n   * The transition orientation.\n   * @default 'vertical'\n   */\n  orientation: PropTypes.oneOf(['horizontal', 'vertical']),\n  /**\n   * @ignore\n   */\n  style: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The duration for the transition, in milliseconds.\n   * You may specify a single timeout for all transitions, or individually with an object.\n   *\n   * Set to 'auto' to automatically calculate transition time based on height.\n   * @default duration.standard\n   */\n  timeout: PropTypes.oneOfType([PropTypes.oneOf(['auto']), PropTypes.number, PropTypes.shape({\n    appear: PropTypes.number,\n    enter: PropTypes.number,\n    exit: PropTypes.number\n  })])\n} : void 0;\nCollapse.muiSupportAuto = true;\nexport default Collapse;","import * as React from 'react'\nimport SvgIcon, { SvgIconProps } from '@mui/material/SvgIcon'\n\nexport const GoogleIcon24 = (props: SvgIconProps) => {\n  return (\n    <SvgIcon {...props}>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M19.68 12.1818C19.68 11.6146 19.6291 11.0691 19.5345 10.5455H12V13.64H16.3055C16.12 14.64 15.5564 15.4873 14.7091 16.0546V18.0618H17.2945C18.8073 16.6691 19.68 14.6182 19.68 12.1818Z\"\n        fill=\"#4285F4\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M12 20C14.16 20 15.9709 19.2836 17.2946 18.0618L14.7091 16.0545C13.9927 16.5345 13.0764 16.8182 12 16.8182C9.91637 16.8182 8.15273 15.4109 7.52364 13.52H4.85091V15.5927C6.16728 18.2073 8.87273 20 12 20Z\"\n        fill=\"#34A853\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M7.52364 13.52C7.36364 13.04 7.27273 12.5273 7.27273 12C7.27273 11.4727 7.36364 10.96 7.52364 10.48V8.40729H4.85091C4.30909 9.48729 4 10.7091 4 12C4 13.2909 4.30909 14.5127 4.85091 15.5927L7.52364 13.52Z\"\n        fill=\"#FBBC05\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M12 7.18182C13.1746 7.18182 14.2291 7.58545 15.0582 8.37818L17.3527 6.08364C15.9673 4.79273 14.1564 4 12 4C8.87273 4 6.16728 5.79273 4.85091 8.40727L7.52364 10.48C8.15273 8.58909 9.91637 7.18182 12 7.18182Z\"\n        fill=\"#EA4335\"\n      />\n    </SvgIcon>\n  )\n}\n","import { Box, Button } from '@mui/material'\nimport { GoogleIcon24 } from '../../assets/GoogleIcon24'\nimport IconSvg from '../IconSvg'\nimport React from 'react'\nimport { SynapseClient } from '../../utils'\nimport { SynapseClientError } from '../../utils/SynapseClientError'\n\ntype AuthenticationMethodSelectionProps = {\n  ssoRedirectUrl?: string\n  /* Invoked before redirecting to Google. Useful in portals where we may want to store the current URL to redirect back here. */\n  onBeginOAuthSignIn?: () => void\n  onSelectUsernameAndPassword: () => void\n}\n\nexport const PROVIDERS = {\n  GOOGLE: 'GOOGLE_OAUTH_2_0',\n  ORCID: 'ORCID',\n}\n/**\n *  To support Google SSO in your portal, you must add your domain to the Authorized Redirect URIs for Synapse authentication.\n *  This can be done by visiting https://sagebionetworks.jira.com/servicedesk/customer/portal/9 to set up a collaboration.\n *  Synapse engineers must add your redirect URL in the Google API console found at https://console.cloud.google.com/ for this functionality to work.\n */\nexport default function AuthenticationMethodSelection(\n  props: AuthenticationMethodSelectionProps,\n) {\n  const { onBeginOAuthSignIn, ssoRedirectUrl, onSelectUsernameAndPassword } =\n    props\n  function onGoogleSignIn(event: React.MouseEvent<HTMLButtonElement>) {\n    if (onBeginOAuthSignIn) {\n      onBeginOAuthSignIn()\n    }\n\n    event.preventDefault()\n    const redirectUrl = ssoRedirectUrl\n      ? `${ssoRedirectUrl}${PROVIDERS.GOOGLE}`\n      : `${SynapseClient.getRootURL()}?provider=${PROVIDERS.GOOGLE}`\n    SynapseClient.oAuthUrlRequest(PROVIDERS.GOOGLE, redirectUrl)\n      .then(data => {\n        // Send the user to the authorization URL\n        window.location = data.authorizationUrl as unknown as Location\n      })\n      .catch((err: SynapseClientError) => {\n        console.log('Error on oAuth url ', err)\n      })\n  }\n\n  return (\n    <Box>\n      <Button\n        fullWidth\n        variant=\"outlined\"\n        onClick={onGoogleSignIn}\n        sx={{\n          color: 'grey.800',\n          height: '50px',\n          mb: '10px',\n        }}\n        startIcon={<GoogleIcon24 sx={{ width: '28px', height: '28px' }} />}\n      >\n        Sign in with Google\n      </Button>\n      <Button\n        fullWidth\n        variant=\"outlined\"\n        startIcon={\n          <IconSvg icon=\"email\" sx={{ width: '28px', height: '28px' }} />\n        }\n        sx={{\n          color: 'grey.800',\n          height: '50px',\n          mb: '10px',\n        }}\n        onClick={onSelectUsernameAndPassword}\n      >\n        Sign in with your email\n      </Button>\n    </Box>\n  )\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","import baseKeys from './_baseKeys.js';\nimport getTag from './_getTag.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLike from './isArrayLike.js';\nimport isBuffer from './isBuffer.js';\nimport isPrototype from './_isPrototype.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isEmpty;\n","import { isTypeViaConcreteTypeFactory } from '../../functions/TypeUtils'\nimport { Entity } from '../Entity'\n\nexport const DOCKER_REPOSITORY_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.docker.DockerRepository'\nexport type DOCKER_REPOSITORY_CONCRETE_TYPE =\n  typeof DOCKER_REPOSITORY_CONCRETE_TYPE_VALUE\n\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/docker/DockerRepository.html\nexport interface DockerRepository extends Entity {\n  concreteType: DOCKER_REPOSITORY_CONCRETE_TYPE\n  /** This is the repository name, [host[:port]/]path */\n  repositoryName: string\n  /** Indicates that the repository is managed by Synapse, rather than by an external registry. */\n  isManaged: boolean\n}\n\nexport const isDockerRepository =\n  isTypeViaConcreteTypeFactory<DockerRepository>(\n    DOCKER_REPOSITORY_CONCRETE_TYPE_VALUE,\n  )\n","import {\n  Entity,\n  EntityHeader,\n  EntityType,\n  EntityView,\n  ENTITY_CONCRETE_TYPE,\n  ENTITY_VIEW_TYPE_MASK_FILE,\n  ProjectHeader,\n  Dataset,\n  Table,\n  TableEntity,\n  SubmissionView,\n  VersionableEntity,\n  VIEW_CONCRETE_TYPE_VALUES,\n  View,\n  TABLE_CONCRETE_TYPE_VALUES,\n  SUBMISSION_VIEW_CONCRETE_TYPE_VALUE,\n  DATASET_CONCRETE_TYPE_VALUE,\n  ENTITY_VIEW_CONCRETE_TYPE_VALUE,\n  DatasetCollection,\n  DATASET_COLLECTION_CONCRETE_TYPE_VALUE,\n  FILE_ENTITY_CONCRETE_TYPE_VALUE,\n  LINK_CONCRETE_TYPE_VALUE,\n  FOLDER_CONCRETE_TYPE_VALUE,\n  PROJECT_CONCRETE_TYPE_VALUE,\n} from '../synapseTypes'\nimport { Hit } from '../synapseTypes/Search'\nimport {\n  MaterializedView,\n  MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE,\n} from '../synapseTypes/Table/MaterializedView'\nimport { TABLE_ENTITY_CONCRETE_TYPE_VALUE } from '../synapseTypes/Table/TableEntity'\nimport { isTypeViaConcreteTypeFactory } from './TypeUtils'\nimport { DOCKER_REPOSITORY_CONCRETE_TYPE_VALUE } from '../synapseTypes/docker/DockerRepository'\n\nexport function getEntityTypeFromHeader(\n  header:\n    | Pick<EntityHeader, 'name' | 'id' | 'type'>\n    | EntityHeader\n    | ProjectHeader\n    | Hit,\n) {\n  // Hit has the `node_type` field which is what we already want.\n  if ((header as Hit).node_type) {\n    return (header as Hit).node_type\n  }\n  // ProjectHeader doesn't have the `type` field, so we can just check that to determine if it's a ProjectHeader\n  return (header as EntityHeader).type === undefined\n    ? EntityType.PROJECT\n    : convertToEntityType((header as EntityHeader).type)\n}\n\nexport function isContainerType(type: EntityType): boolean {\n  switch (type) {\n    case EntityType.PROJECT:\n    case EntityType.FOLDER:\n      return true\n    case EntityType.LINK:\n    case EntityType.DOCKER_REPO:\n    case EntityType.FILE:\n    case EntityType.TABLE:\n    case EntityType.SUBMISSION_VIEW:\n    case EntityType.ENTITY_VIEW:\n    case EntityType.DATASET:\n    case EntityType.DATASET_COLLECTION:\n    case EntityType.MATERIALIZED_VIEW:\n      return false\n    default:\n      throw new Error(`Unknown entity type: ${type}`)\n  }\n}\n\nexport function isTableType(type: EntityType): boolean {\n  switch (type) {\n    case EntityType.PROJECT:\n    case EntityType.FOLDER:\n    case EntityType.LINK:\n    case EntityType.DOCKER_REPO:\n    case EntityType.FILE:\n      return false\n    case EntityType.TABLE:\n    case EntityType.SUBMISSION_VIEW:\n    case EntityType.ENTITY_VIEW:\n    case EntityType.DATASET:\n    case EntityType.DATASET_COLLECTION:\n    case EntityType.MATERIALIZED_VIEW:\n      return true\n    default:\n      throw new Error(`Unknown entity type: ${type}`)\n  }\n}\n\nexport function entityTypeToFriendlyName(entityType: EntityType): string {\n  switch (entityType) {\n    case EntityType.PROJECT:\n      return 'Project'\n    case EntityType.FOLDER:\n      return 'Folder'\n    case EntityType.FILE:\n      return 'File'\n    case EntityType.TABLE:\n      return 'Table'\n    case EntityType.LINK:\n      return 'Link'\n    case EntityType.ENTITY_VIEW:\n      return 'View'\n    case EntityType.DOCKER_REPO:\n      return 'Docker Repository'\n    case EntityType.SUBMISSION_VIEW:\n      return 'Submission View'\n    case EntityType.DATASET:\n      return 'Dataset'\n    case EntityType.DATASET_COLLECTION:\n      return 'Dataset Collection'\n    case EntityType.MATERIALIZED_VIEW:\n      return 'Materialized View'\n    default:\n      console.warn('Entity type could not be mapped to name:', entityType)\n      return ''\n  }\n}\n\nexport function convertToEntityType(\n  typeString: string | ENTITY_CONCRETE_TYPE | EntityType,\n): EntityType {\n  switch (typeString) {\n    case EntityType.PROJECT:\n    case 'org.sagebionetworks.repo.model.Project':\n      return EntityType.PROJECT\n    case EntityType.FOLDER:\n    case 'org.sagebionetworks.repo.model.Folder':\n      return EntityType.FOLDER\n    case EntityType.FILE:\n    case FILE_ENTITY_CONCRETE_TYPE_VALUE:\n      return EntityType.FILE\n    case EntityType.LINK:\n    case 'org.sagebionetworks.repo.model.Link':\n      return EntityType.LINK\n    case EntityType.DOCKER_REPO:\n    case 'org.sagebionetworks.repo.model.docker.DockerRepository':\n      return EntityType.DOCKER_REPO\n    case EntityType.TABLE:\n    case TABLE_ENTITY_CONCRETE_TYPE_VALUE:\n      return EntityType.TABLE\n    case EntityType.SUBMISSION_VIEW:\n    case 'org.sagebionetworks.repo.model.table.SubmissionView':\n      return EntityType.SUBMISSION_VIEW\n    case EntityType.ENTITY_VIEW:\n    case ENTITY_VIEW_CONCRETE_TYPE_VALUE:\n      return EntityType.ENTITY_VIEW\n    case EntityType.DATASET:\n    case DATASET_CONCRETE_TYPE_VALUE:\n      return EntityType.DATASET\n    case EntityType.DATASET_COLLECTION:\n    case DATASET_COLLECTION_CONCRETE_TYPE_VALUE:\n      return EntityType.DATASET_COLLECTION\n    case EntityType.MATERIALIZED_VIEW:\n    case MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE:\n      return EntityType.MATERIALIZED_VIEW\n    default:\n      throw new Error(`Unknown entity type: ${typeString}`)\n  }\n}\n\nexport function convertToConcreteEntityType(\n  type: EntityType,\n): ENTITY_CONCRETE_TYPE {\n  switch (type) {\n    case EntityType.PROJECT:\n      return 'org.sagebionetworks.repo.model.Project'\n    case EntityType.FOLDER:\n      return 'org.sagebionetworks.repo.model.Folder'\n    case EntityType.FILE:\n      return 'org.sagebionetworks.repo.model.FileEntity'\n    case EntityType.LINK:\n      return 'org.sagebionetworks.repo.model.Link'\n    case EntityType.DOCKER_REPO:\n      return 'org.sagebionetworks.repo.model.docker.DockerRepository'\n    case EntityType.TABLE:\n      return 'org.sagebionetworks.repo.model.table.TableEntity'\n    case EntityType.SUBMISSION_VIEW:\n      return 'org.sagebionetworks.repo.model.table.SubmissionView'\n    case EntityType.ENTITY_VIEW:\n      return 'org.sagebionetworks.repo.model.table.EntityView'\n    case EntityType.DATASET:\n      return 'org.sagebionetworks.repo.model.table.Dataset'\n    case EntityType.DATASET_COLLECTION:\n      return 'org.sagebionetworks.repo.model.table.DatasetCollection'\n    case EntityType.MATERIALIZED_VIEW:\n      return 'org.sagebionetworks.repo.model.table.MaterializedView'\n    default:\n      throw new Error(`Unknown entity type: ${type}`)\n  }\n}\n\n/**\n * https://docs.synapse.org/rest/org/sagebionetworks/repo/model/VersionableEntity.html\n * @param type\n * @returns\n */\nexport function isVersionableEntityType(type: EntityType): boolean {\n  switch (type) {\n    case EntityType.PROJECT:\n    case EntityType.FOLDER:\n    case EntityType.LINK:\n    case EntityType.DOCKER_REPO:\n    case EntityType.MATERIALIZED_VIEW: // MaterializedView implements VersionableEntity, but versions aren't supported.\n      return false\n    case EntityType.FILE:\n    case EntityType.TABLE:\n    case EntityType.SUBMISSION_VIEW:\n    case EntityType.ENTITY_VIEW:\n    case EntityType.DATASET:\n    case EntityType.DATASET_COLLECTION:\n      return true\n    default:\n      throw new Error(`Unknown entity type: ${type}`)\n  }\n}\n\nexport const isTable = isTypeViaConcreteTypeFactory<Table, Entity>(\n  ...TABLE_CONCRETE_TYPE_VALUES,\n)\n\nexport const isView = isTypeViaConcreteTypeFactory<View, Entity>(\n  ...VIEW_CONCRETE_TYPE_VALUES,\n)\n\nexport const isTableEntity = isTypeViaConcreteTypeFactory<TableEntity, Entity>(\n  TABLE_ENTITY_CONCRETE_TYPE_VALUE,\n)\n\nexport const isSubmissionView = isTypeViaConcreteTypeFactory<\n  SubmissionView,\n  Entity\n>(SUBMISSION_VIEW_CONCRETE_TYPE_VALUE)\n\nexport const isMaterializedView = isTypeViaConcreteTypeFactory<\n  MaterializedView,\n  Entity\n>(MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE)\n\nexport const isDataset = isTypeViaConcreteTypeFactory<Dataset, Entity>(\n  DATASET_CONCRETE_TYPE_VALUE,\n)\nexport const isDatasetCollection = isTypeViaConcreteTypeFactory<\n  DatasetCollection,\n  Entity\n>(DATASET_COLLECTION_CONCRETE_TYPE_VALUE)\n\nexport const isEntityRefCollectionView = (entity: Entity) =>\n  isDataset(entity) || isDatasetCollection(entity)\n\nexport const isEntityView = isTypeViaConcreteTypeFactory<EntityView, Entity>(\n  ENTITY_VIEW_CONCRETE_TYPE_VALUE,\n)\n\n/**\n * @param entityView\n * @returns true iff the viewTypeMask allows files to appear in the view\n */\nexport function hasFilesInView(entityView: EntityView) {\n  return (entityView.viewTypeMask & ENTITY_VIEW_TYPE_MASK_FILE) != 0\n}\n\n/**\n * @param entityView\n * @returns true iff the viewTypeMask allows only files to appear in the view\n */\nexport function isFileView(entityView: EntityView) {\n  return entityView.viewTypeMask === ENTITY_VIEW_TYPE_MASK_FILE\n}\n\nexport function isVersionableEntity(\n  entity: Entity,\n): entity is VersionableEntity {\n  return isVersionableEntityType(convertToEntityType(entity.concreteType))\n}\n\nexport function getVersionDisplay(entity: Entity): string {\n  if (!isVersionableEntity(entity)) {\n    console.warn(\"Entity isn't versionable:\", entity)\n    return ''\n  }\n\n  if (entity.isLatestVersion) {\n    if (!isTable(entity)) {\n      // e.g. Files. Always show the version number\n      return `${entity.versionNumber!.toString()} (Current)`\n    } else if (isDataset(entity)) {\n      return 'Draft'\n    } else {\n      return 'Current'\n    }\n  } else {\n    return entity.versionNumber!.toString()\n  }\n}\n\n// implemented by https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/Entity.html\nconst allEntityKeys: string[] = [\n  'name',\n  'description',\n  'id',\n  'etag',\n  'createdOn',\n  'modifiedOn',\n  'createdBy',\n  'modifiedBy',\n  'parentId',\n  'concreteType',\n]\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/VersionableEntity.html\nconst versionableKeys: string[] = [\n  ...allEntityKeys,\n  'versionNumber',\n  'versionLabel',\n  'versionComment',\n  'isLatestVersion',\n]\n\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/Table.html\nconst tableKeys: string[] = [...versionableKeys, 'columnIds', 'isSearchEnabled']\n\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/View.html\nconst viewKeys: string[] = [...tableKeys]\n\n// https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/EntityRefCollectionView.html\nconst entityRefCollectionViewKeys: string[] = [...viewKeys, 'items']\n\n/**\n * A string array of all possible keys used by Synapse in Entity objects (objects that inherit this interface: https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/Entity.html).\n * This object is used to determine which fields are standard and which are annotations,\n * so it's important that this object contains all keys in the objects that implement the linked interface above.\n */\nexport const entityJsonKeys: Record<ENTITY_CONCRETE_TYPE, string[]> = {\n  [LINK_CONCRETE_TYPE_VALUE]: [...allEntityKeys, 'linksTo', 'linksToClassName'],\n  [DOCKER_REPOSITORY_CONCRETE_TYPE_VALUE]: [\n    ...allEntityKeys,\n    'repositoryName',\n    'isManaged',\n  ],\n  [FILE_ENTITY_CONCRETE_TYPE_VALUE]: [\n    ...versionableKeys,\n    'dataFileHandleId',\n    'fileNameOverride',\n  ],\n  [SUBMISSION_VIEW_CONCRETE_TYPE_VALUE]: [...viewKeys, 'scopeIds'],\n  [DATASET_CONCRETE_TYPE_VALUE]: [\n    ...entityRefCollectionViewKeys,\n    'size',\n    'checksum',\n  ],\n  [DATASET_COLLECTION_CONCRETE_TYPE_VALUE]: [...entityRefCollectionViewKeys],\n  [ENTITY_VIEW_CONCRETE_TYPE_VALUE]: [\n    ...viewKeys,\n    'scopeIds',\n    'viewTypeMask',\n    'type',\n  ],\n  [TABLE_ENTITY_CONCRETE_TYPE_VALUE]: tableKeys,\n  [MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE]: [...tableKeys, 'definingSQL'],\n  [FOLDER_CONCRETE_TYPE_VALUE]: allEntityKeys,\n  [PROJECT_CONCRETE_TYPE_VALUE]: [...allEntityKeys, 'alias'],\n}\n","import { isEmpty } from 'lodash-es'\nimport { removeUndefined } from './ObjectUtils'\n\n/**\n * Removes trailing undefined elements from an array. Also removes trailing objects that are empty or only keys with\n * undefined values are present.\n */\nexport function removeTrailingUndefinedElements(params: any[]): any[] {\n  const result = [...params]\n  let lastElement = result[result.length - 1]\n  while (\n    result.length > 0 &&\n    (lastElement === undefined ||\n      // Also remove empty objects or objects where only keys with undefined values are present\n      (typeof lastElement === 'object' &&\n        isEmpty(removeUndefined(lastElement))))\n  ) {\n    result.pop()\n    lastElement = result[result.length - 1]\n  }\n  return result\n}\n","import { SubmissionSearchRequest } from '../../synapseTypes/AccessSubmission'\nimport {\n  AccessApprovalSearchRequest,\n  BatchFileRequest,\n  EntityBundleRequest,\n  EntityChildrenRequest,\n  FileHandle,\n  QueryBundleRequest,\n  ReferenceList,\n  RestrictionInformationRequest,\n  TYPE_FILTER,\n} from '../../synapseTypes'\nimport { AccessRequirementSearchRequest } from '../../synapseTypes/AccessRequirement/AccessRequirementSearch'\nimport { SubmissionInfoPageRequest } from '../../synapseTypes/SubmissionInfo'\nimport { AvailableFilesRequest } from '../../synapseTypes/DownloadListV2/QueryRequestDetails'\nimport { QueryKey } from 'react-query'\nimport {\n  DiscussionFilter,\n  DiscussionReplyOrder,\n  DiscussionThreadOrder,\n} from '../../synapseTypes/DiscussionBundle'\nimport { SearchQuery } from '../../synapseTypes/Search'\nimport { SubscriptionObjectType } from '../../synapseTypes/Subscription'\nimport {\n  FavoriteSortBy,\n  FavoriteSortDirection,\n} from '../../synapseTypes/FavoriteSortBy'\nimport { GetProjectsParameters } from '../../synapseTypes/GetProjectsParams'\nimport { PrincipalAliasRequest } from '../../synapseTypes/Principal/PrincipalServices'\nimport { removeTrailingUndefinedElements } from '../../functions/ArrayUtils'\n\nconst entityQueryKeyObjects = {\n  /* Query key for all entities */\n  all: { objectType: 'entity' },\n  // Data for an entity\n  entity: (id: string) => ({ ...entityQueryKeyObjects.all[1], id: id }),\n  // Data for a particular version of an entity\n  version: (id: string, versionNumber?: string | number) => ({\n    ...entityQueryKeyObjects.entity(id),\n    versionNumber,\n  }),\n  // List of Entity Versions\n  versions: (id: string) => ({\n    ...entityQueryKeyObjects.entity(id),\n    scope: 'versions',\n  }),\n  versionsQuery: (id: string, limit: number, offset: number) => ({\n    ...entityQueryKeyObjects.versions(id),\n    versionQuery: {\n      limit: limit,\n      offset: offset,\n    },\n  }),\n  // JSON Representation of an entity\n  json: (id: string) => ({\n    ...entityQueryKeyObjects.entity(id),\n    scope: 'json',\n  }),\n  activity: (id: string, versionNumber?: number) => ({\n    ...entityQueryKeyObjects.version(id),\n    scope: 'activity',\n  }),\n  // Entity path\n  path: (id: string) => ({\n    ...entityQueryKeyObjects.entity(id),\n    scope: 'path',\n  }),\n\n  // Entity bundle\n  bundle: (\n    id: string,\n    versionNumber: string | number | undefined,\n    bundleRequest: EntityBundleRequest,\n  ) => ({\n    ...entityQueryKeyObjects.version(id, versionNumber),\n    scope: 'entityBundle',\n    entityBundleRequest: bundleRequest,\n  }),\n  children: (request: EntityChildrenRequest, infinite: boolean) => ({\n    ...entityQueryKeyObjects.entity(request.parentId ?? 'root'),\n    scope: 'children',\n    isInfinite: infinite,\n    entityChildrenRequest: request,\n  }),\n\n  tableQueryResult: (\n    queryBundleRequest: QueryBundleRequest,\n    infinite: boolean,\n  ) => ({\n    ...entityQueryKeyObjects.entity(queryBundleRequest.entityId),\n    scope: 'tableQueryResult',\n    isInfinite: infinite,\n    tableQueryBundleRequest: queryBundleRequest,\n  }),\n\n  tableQueryResultWithAsyncStatus: (\n    queryBundleRequest: QueryBundleRequest,\n    infinite: boolean,\n  ) => ({\n    ...entityQueryKeyObjects.entity(queryBundleRequest.entityId),\n    scope: 'tableQueryResultWithAsyncStatus',\n    isInfinite: infinite,\n    tableQueryBundleRequest: queryBundleRequest,\n  }),\n\n  fullTableQueryResult: (queryBundleRequest: QueryBundleRequest) => ({\n    ...entityQueryKeyObjects.entity(queryBundleRequest.entityId),\n    scope: 'fullTableQueryResult',\n    tableQueryBundleRequest: queryBundleRequest,\n  }),\n\n  boundJSONSchema: (id: string) => ({\n    ...entityQueryKeyObjects.entity(id),\n    scope: 'boundJSONSchema',\n  }),\n\n  schemaValidationResults: (id: string) => ({\n    ...entityQueryKeyObjects.entity(id),\n    scope: 'schemaValidationResults',\n  }),\n  header: (id: string) => ({\n    ...entityQueryKeyObjects.entity(id),\n    scope: 'entityHeaders',\n  }),\n  headers: (references: ReferenceList) => ({\n    ...entityQueryKeyObjects.all,\n    scope: 'entityHeaders',\n    entityHeadersRequest: references,\n  }),\n  accessRequirements: (id: string) => ({\n    ...entityQueryKeyObjects.entity(id),\n    scope: 'accessRequirements',\n  }),\n}\n\nconst downloadListQueryKeys = {\n  /* Key used to invalidate all download list queries */\n  base: 'downloadList',\n  availableFiles: (request: AvailableFilesRequest) => [\n    downloadListQueryKeys.base,\n    'availableFiles',\n    request,\n  ],\n  availableFilesInfinite: (request: AvailableFilesRequest) => [\n    downloadListQueryKeys.availableFiles(request),\n    'infinite',\n  ],\n  getActionsRequired: () => [downloadListQueryKeys.base, 'actionsRequired'],\n  getActionsRequiredInfinite: () => [\n    ...downloadListQueryKeys.getActionsRequired(),\n    'infinite',\n  ],\n  getStatistics: () => [downloadListQueryKeys.base, 'statistics'],\n}\n\nconst ACCESS_REQUIREMENT_QUERY_KEY = 'accessRequirement'\n\n/**\n * Returns a react-query Query Key.\n *\n * Co-location of react-query keys for queries related to Synapse data. Two objectives of this strategy are\n * - minimize the risk of inappropriate cache key collisions\n * - simplify clearing the approprate query caches when the entity data is updated\n *\n * For more information, see https://tkdodo.eu/blog/leveraging-the-query-function-context\n */\nexport class KeyFactory {\n  accessToken: string | undefined = undefined\n  constructor(accessToken: string | undefined) {\n    this.accessToken = accessToken\n  }\n\n  /**\n   * Returns a react-query Query Key. Prepends the key with the access token, so that the key is unique per-session.\n   * Also removes trailing undefined elements from the passed args, so a key can be generated for query invalidation.\n   * @param args\n   * @private\n   */\n  private getKey(...args: any[]): QueryKey {\n    return [this.accessToken, ...removeTrailingUndefinedElements(args)]\n  }\n\n  public getAllEntityDataQueryKey() {\n    return this.getKey(entityQueryKeyObjects.all)\n  }\n\n  public getEntityQueryKey(id: string) {\n    return this.getKey(entityQueryKeyObjects.entity(id))\n  }\n\n  public getEntityActivityQueryKey(id: string, versionNumber?: number) {\n    return this.getKey(entityQueryKeyObjects.activity(id, versionNumber))\n  }\n\n  public getEntityVersionQueryKey(id: string, versionNumber?: string | number) {\n    return this.getKey(entityQueryKeyObjects.version(id, versionNumber))\n  }\n\n  public getPaginatedEntityVersionsQueryKey(\n    id: string,\n    limit: number,\n    offset: number,\n  ) {\n    return this.getKey(entityQueryKeyObjects.versionsQuery(id, limit, offset))\n  }\n  public getEntityVersionsQueryKey(id: string) {\n    return this.getKey(entityQueryKeyObjects.versions(id))\n  }\n\n  public getEntityChildrenQueryKey(\n    request: EntityChildrenRequest,\n    infinite: boolean,\n  ) {\n    return this.getKey(entityQueryKeyObjects.children(request, infinite))\n  }\n\n  public getEntityJsonQueryKey(id: string) {\n    return this.getKey(entityQueryKeyObjects.json(id))\n  }\n\n  public getEntityBundleQueryKey(\n    id: string,\n    version: number | undefined,\n    bundleRequest: EntityBundleRequest,\n  ) {\n    return this.getKey(entityQueryKeyObjects.bundle(id, version, bundleRequest))\n  }\n\n  public getEntityPathQueryKey(id: string) {\n    return this.getKey(entityQueryKeyObjects.path(id))\n  }\n\n  public getEntityBoundJsonSchemaQueryKey(id: string) {\n    return this.getKey(entityQueryKeyObjects.boundJSONSchema(id))\n  }\n\n  public getEntitySchemaValidationResultsQueryKey(id: string) {\n    return this.getKey(entityQueryKeyObjects.schemaValidationResults(id))\n  }\n\n  public getEntityHeaderQueryKey(id: string) {\n    return this.getKey(entityQueryKeyObjects.header(id))\n  }\n\n  public getEntityAccessRequirementsQueryKey(id: string) {\n    return this.getKey(entityQueryKeyObjects.accessRequirements(id))\n  }\n\n  public getEntityHeadersQueryKey(references: ReferenceList) {\n    return this.getKey(entityQueryKeyObjects.headers(references))\n  }\n\n  public getEntityTableQueryResultQueryKey(\n    queryBundleRequest: QueryBundleRequest,\n    infinite: boolean,\n  ) {\n    return this.getKey(\n      entityQueryKeyObjects.tableQueryResult(queryBundleRequest, infinite),\n    )\n  }\n\n  public getEntityTableQueryResultWithAsyncStatusQueryKey(\n    queryBundleRequest: QueryBundleRequest,\n    infinite: boolean,\n  ) {\n    return this.getKey(\n      entityQueryKeyObjects.tableQueryResultWithAsyncStatus(\n        queryBundleRequest,\n        infinite,\n      ),\n    )\n  }\n\n  public getFullTableQueryResultQueryKey(\n    queryBundleRequest: QueryBundleRequest,\n  ) {\n    return this.getKey(\n      entityQueryKeyObjects.fullTableQueryResult(queryBundleRequest),\n    )\n  }\n\n  public getDownloadListBaseQueryKey() {\n    return this.getKey(downloadListQueryKeys.base)\n  }\n\n  public getDownloadListAvailableFilesQueryKey(request: AvailableFilesRequest) {\n    return this.getKey(...downloadListQueryKeys.availableFiles(request))\n  }\n\n  public getDownloadListAvailableFilesInfiniteQueryKey(\n    request: AvailableFilesRequest,\n  ) {\n    return this.getKey(...downloadListQueryKeys.availableFilesInfinite(request))\n  }\n\n  public getDownloadListActionsRequiredQueryKey() {\n    return this.getKey(...downloadListQueryKeys.getActionsRequired())\n  }\n  public getDownloadListActionsRequiredInfiniteQueryKey() {\n    return this.getKey(...downloadListQueryKeys.getActionsRequiredInfinite())\n  }\n\n  public getDownloadListStatisticsQueryKey() {\n    return this.getKey(...downloadListQueryKeys.getStatistics())\n  }\n\n  public searchAccessApprovalsQueryKey(params?: AccessApprovalSearchRequest) {\n    return this.getKey('accessApprovalSearch', params)\n  }\n\n  public getAccessRequirementQueryKey(id?: string) {\n    return this.getKey(ACCESS_REQUIREMENT_QUERY_KEY, id)\n  }\n\n  public getAccessRequirementAclQueryKey(id: string) {\n    return this.getKey(ACCESS_REQUIREMENT_QUERY_KEY, id, 'acl')\n  }\n\n  public searchAccessRequirementsQueryKey(\n    params?: AccessRequirementSearchRequest,\n  ) {\n    return this.getKey(ACCESS_REQUIREMENT_QUERY_KEY, 'search', params)\n  }\n\n  public getAccessRequirementWikiPageKey(id: string) {\n    return this.getKey(ACCESS_REQUIREMENT_QUERY_KEY, id, 'wikiPageKey')\n  }\n\n  public getAccessRequirementRestrictionInformationQueryKey(\n    request?: RestrictionInformationRequest,\n  ) {\n    return this.getKey(\n      ACCESS_REQUIREMENT_QUERY_KEY,\n      'restrictionInformation',\n      request,\n    )\n  }\n\n  public getAccessRequirementStatusQueryKey(id: string) {\n    return this.getKey(ACCESS_REQUIREMENT_QUERY_KEY, id, 'status')\n  }\n\n  public getDataAccessRequestForUpdateQueryKey(accessRequirementId: string) {\n    return this.getKey(\n      ACCESS_REQUIREMENT_QUERY_KEY,\n      accessRequirementId,\n      'dataAccessRequestForUpdate',\n    )\n  }\n\n  public getAccessRequirementResearchProjectQueryKey(\n    accessRequirementId: string,\n  ) {\n    return this.getKey(\n      ACCESS_REQUIREMENT_QUERY_KEY,\n      accessRequirementId,\n      'researchProject',\n    )\n  }\n\n  public getDataAccessSubmissionQueryKey(id?: string) {\n    return this.getKey('dataAccessSubmission', id)\n  }\n\n  public searchDataAccessSubmissionQueryKey(params?: SubmissionSearchRequest) {\n    return this.getKey('accessSubmissionSearch', params)\n  }\n\n  public getApprovedSubmissionInfoQueryKey(\n    request?: SubmissionInfoPageRequest,\n  ) {\n    return this.getKey('approvedSubmissionInfo', request)\n  }\n\n  public getValidationSchemaQueryKey(schema$id: string) {\n    return this.getKey('validationSchema', schema$id)\n  }\n\n  public getPresignedUrlContentQueryKey(\n    fileHandle: FileHandle,\n    request: BatchFileRequest,\n    maxSizeBytes?: number,\n  ) {\n    return this.getKey('presignedUrlContent', fileHandle, request, maxSizeBytes)\n  }\n\n  public getProfileImageQueryKey(userId: string) {\n    return this.getKey('profileImageData', userId)\n  }\n\n  public getDefaultUploadDestinationQueryKey(containerEntityId: string) {\n    return this.getKey('uploadDestination', 'default', containerEntityId)\n  }\n\n  public getForumModeratorsQueryKey(forumId: string) {\n    return this.getKey('moderators', forumId)\n  }\n\n  public getAllForumThreadsQueryKey(forumId: string) {\n    return this.getKey('forumthread', forumId)\n  }\n\n  public getForumThreadsQueryKey(\n    forumId: string,\n    limit: number,\n    sort: DiscussionThreadOrder,\n    ascending: boolean,\n    filter?: DiscussionFilter,\n  ) {\n    return this.getKey('forumthread', forumId, {\n      limit,\n      filter,\n      sort,\n      ascending,\n    })\n  }\n\n  public getAllRepliesQueryKey(threadId: string) {\n    return this.getKey('reply', threadId)\n  }\n\n  public getRepliesQueryKey(\n    threadId: string,\n    ascending?: boolean,\n    limit?: number,\n    sort?: DiscussionReplyOrder,\n    filter?: DiscussionFilter,\n  ) {\n    return this.getKey('reply', threadId, { limit, filter, sort, ascending })\n  }\n\n  public getReplyQueryKey(\n    threadId: string,\n    replyId: string,\n    messageKey: string,\n  ) {\n    return this.getKey('reply', threadId, { replyId, messageKey })\n  }\n\n  public getThreadQueryKey(threadId: string) {\n    return this.getKey('thread', threadId)\n  }\n\n  public getThreadBodyQueryKey(threadId: string, messageKey: string) {\n    return this.getKey('thread', threadId, messageKey)\n  }\n\n  public getMyOAuthClientsQueryKey() {\n    return this.getKey('oauthClient')\n  }\n\n  public getDOIAssociationQueryKey(\n    objectType: string,\n    objectId: string,\n    versionNumber?: number,\n  ) {\n    return this.getKey([\n      'doi',\n      'association',\n      objectType,\n      objectId,\n      versionNumber,\n    ])\n  }\n\n  public getAllSubscribersQueryKey() {\n    return this.getKey('subscribers')\n  }\n\n  public getSubscribersQueryKey(\n    objectId: string,\n    objectType: SubscriptionObjectType,\n  ) {\n    return this.getKey('subscribers', objectId, objectType)\n  }\n\n  public getSubscriptionQueryKey(\n    objectId: string,\n    objectType: SubscriptionObjectType,\n  ) {\n    return this.getKey('subscription', objectId, objectType)\n  }\n\n  public getAllSubscriptionsQueryKey() {\n    return this.getKey('subscription')\n  }\n\n  public getSearchEntitiesQueryKey(query: SearchQuery) {\n    return this.getKey('searchEntities', query)\n  }\n\n  public getTeamMembersQueryKey(teamId: string) {\n    return this.getKey('team', teamId, 'membersList')\n  }\n\n  public getIsUserMemberOfTeamQueryKey(teamId: string, userId: string) {\n    return this.getKey('team', teamId, 'member', userId)\n  }\n\n  public getFavoritesQueryKey() {\n    return this.getKey('favorites')\n  }\n\n  public getUserFavoritesQueryKey(\n    sort: FavoriteSortBy,\n    sortDirection: FavoriteSortDirection,\n  ) {\n    return this.getKey('favorites', sort, sortDirection)\n  }\n\n  public getUserFavoritesInfiniteQueryKey(\n    sort: FavoriteSortBy,\n    sortDirection: FavoriteSortDirection,\n  ) {\n    return this.getKey('favorites', 'infinite', sort, sortDirection)\n  }\n  public getTrashCanItemsQueryKey() {\n    return this.getKey('trashCan', 'list')\n  }\n\n  public getUserChallengesQueryKey(userId: string) {\n    return this.getKey('userChallenges', userId)\n  }\n\n  public getUserProjectsQueryKey(\n    userId: string,\n    projectParams: GetProjectsParameters,\n  ) {\n    return this.getKey('userProjects', userId, projectParams)\n  }\n\n  public getUserTeamsQueryKey(userId: string) {\n    return this.getKey('userTeams', userId)\n  }\n\n  public getPersonalAccessTokensQueryKey() {\n    return this.getKey('personalAccessTokens')\n  }\n\n  public getMyProjectsQueryKey(params?: GetProjectsParameters) {\n    return this.getKey('myProjects', params)\n  }\n\n  public getNotificationEmailQueryKey() {\n    return this.getKey('notificationEmail')\n  }\n\n  public getCurrentUserProfileQueryKey() {\n    return this.getKey('user', 'current', 'profile')\n  }\n\n  public getUserBundleQueryKey(userId: string, mask?: number) {\n    return this.getKey('user', userId, 'bundle', mask)\n  }\n\n  public getUserProfileQueryKey(userId: string) {\n    return this.getKey('user', userId, 'profile')\n  }\n\n  public getPrincipalAliasQueryKey(request: PrincipalAliasRequest) {\n    return this.getKey('principalAlias', request)\n  }\n\n  public getUserGroupHeaderQueryKey(id: string) {\n    return this.getKey('userGroupHeader', id)\n  }\n  public getUserGroupHeaderWithAliasQueryKey(aliases: string[]) {\n    return this.getKey('userGroupHeader', aliases)\n  }\n\n  public getUserGroupHeaderSearchQueryKey(\n    prefix: string,\n    filter?: TYPE_FILTER,\n  ) {\n    return this.getKey('userGroupHeader', 'search', prefix, filter)\n  }\n\n  public getTwoFactorAuthStatusQueryKey() {\n    return this.getKey('twoFactorAuthStatus')\n  }\n\n  public getBatchOfFiles(request: BatchFileRequest) {\n    return this.getKey('fileBatch', request)\n  }\n}\n","import { useQuery, UseQueryOptions } from 'react-query'\nimport { SynapseClient } from '../../..'\nimport { SynapseClientError } from '../../../SynapseClientError'\nimport { useSynapseContext } from '../../../SynapseContext'\nimport {\n  NotificationEmail,\n  UserBundle,\n  UserProfile,\n} from '../../../synapseTypes'\nimport {\n  USER_BUNDLE_MASK_IS_ACT_MEMBER,\n  USER_BUNDLE_MASK_IS_AR_REVIEWER,\n  USER_BUNDLE_MASK_IS_CERTIFIED,\n  USER_BUNDLE_MASK_IS_VERIFIED,\n  USER_BUNDLE_MASK_ORCID,\n  USER_BUNDLE_MASK_USER_PROFILE,\n  USER_BUNDLE_MASK_VERIFICATION_SUBMISSION,\n} from '../../../SynapseConstants'\nimport {\n  PrincipalAliasRequest,\n  PrincipalAliasResponse,\n} from '../../../synapseTypes/Principal/PrincipalServices'\n\nexport function useGetNotificationEmail(\n  options?: UseQueryOptions<NotificationEmail, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  return useQuery<NotificationEmail, SynapseClientError>(\n    keyFactory.getNotificationEmailQueryKey(),\n    () => SynapseClient.getNotificationEmail(accessToken),\n    options,\n  )\n}\n\nexport function useGetCurrentUserProfile(\n  options?: UseQueryOptions<UserProfile, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  const queryKey = keyFactory.getCurrentUserProfileQueryKey()\n\n  return useQuery<UserProfile, SynapseClientError>(\n    queryKey,\n    () => SynapseClient.getUserProfile(accessToken),\n    options,\n  )\n}\n\nconst ALL_USER_BUNDLE_FIELDS =\n  USER_BUNDLE_MASK_USER_PROFILE |\n  USER_BUNDLE_MASK_ORCID |\n  USER_BUNDLE_MASK_VERIFICATION_SUBMISSION |\n  USER_BUNDLE_MASK_IS_CERTIFIED |\n  USER_BUNDLE_MASK_IS_VERIFIED |\n  USER_BUNDLE_MASK_IS_ACT_MEMBER |\n  USER_BUNDLE_MASK_IS_AR_REVIEWER\n\nexport function useGetUserBundle(\n  userId: string,\n  mask: number = ALL_USER_BUNDLE_FIELDS,\n  options?: UseQueryOptions<UserBundle, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  const queryKey = keyFactory.getUserBundleQueryKey(userId, mask)\n\n  return useQuery<UserBundle, SynapseClientError>(\n    queryKey,\n    () => SynapseClient.getUserBundle(userId, mask, accessToken),\n    options,\n  )\n}\n\nexport function useGetCurrentUserBundle<TData = UserBundle>(\n  mask: number = ALL_USER_BUNDLE_FIELDS,\n  options?: UseQueryOptions<UserBundle, SynapseClientError, TData>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  const queryKey = keyFactory.getUserBundleQueryKey('current', mask)\n\n  return useQuery<UserBundle, SynapseClientError, TData>(\n    queryKey,\n    () => SynapseClient.getMyUserBundle(mask, accessToken),\n    options,\n  )\n}\n\nexport function useGetUserProfile(\n  principalId: string,\n  options?: UseQueryOptions<UserProfile, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  const queryKey = keyFactory.getUserProfileQueryKey(principalId)\n  // We store the profile in a session storage cache used by SWC\n  const sessionStorageCacheKey = `${principalId}_USER_PROFILE`\n  const cachedValue = sessionStorage.getItem(sessionStorageCacheKey)\n\n  return useQuery<UserProfile, SynapseClientError>(\n    queryKey,\n    () => SynapseClient.getUserProfileById(accessToken, principalId),\n    {\n      ...options,\n\n      // Use the sessionStorage cache to pre-populate profile data.\n      initialData: cachedValue\n        ? (JSON.parse(cachedValue) as UserProfile)\n        : undefined,\n\n      // If the profile is re-fetched, save it to sessionStorage\n      onSuccess: profile => {\n        sessionStorage.setItem(sessionStorageCacheKey, JSON.stringify(profile))\n      },\n    },\n  )\n}\n\nexport function useGetPrincipalIdForAlias(\n  request: PrincipalAliasRequest,\n  options?: UseQueryOptions<\n    PrincipalAliasResponse['principalId'],\n    SynapseClientError\n  >,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  const queryKey = keyFactory.getPrincipalAliasQueryKey(request)\n\n  return useQuery<PrincipalAliasResponse['principalId'], SynapseClientError>(\n    queryKey,\n    async () => {\n      return (\n        await SynapseClient.getPrincipalAliasRequest(accessToken, request)\n      ).principalId\n    },\n    options,\n  )\n}\n\nexport function useIsCurrentUserACTMember() {\n  return useGetCurrentUserBundle<boolean>(undefined, {\n    select: data => data.isACTMember!,\n  })\n}\n","import { useEffect } from 'react'\nimport {\n  useGetCurrentUserProfile,\n  useGetNotificationEmail,\n} from '../utils/hooks/SynapseAPI/user/useUserBundle'\nimport { useSynapseContext } from '../utils/SynapseContext'\n\ntype IssueCollector = 'SWC' | 'Flagged Content' | 'Request Access'\n\nconst ISSUE_COLLECTOR_URL_MAP: Record<IssueCollector, string> = {\n  SWC: 'https://sagebionetworks.jira.com/s/d41d8cd98f00b204e9800998ecf8427e-T/-bhcm7i/b/6/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=ddc881b3',\n  'Flagged Content':\n    'https://sagebionetworks.jira.com/s/d41d8cd98f00b204e9800998ecf8427e-T/g39zuk/b/41/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=d0abcfa9',\n  'Request Access':\n    'https://sagebionetworks.jira.com/s/d41d8cd98f00b204e9800998ecf8427e-T/-2rg9hj/b/25/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=bd4dc1e5',\n}\n\ndeclare global {\n  interface Window {\n    jQuery?: JQueryStatic\n    ATL_JQ_PAGE_PROPS: any\n  }\n}\n\ntype JiraIssueCollectorConfig = {\n  issueCollector: IssueCollector\n  issueSummary: string\n  issueDescription: string\n  issuePriority: '1' | '2' | '3' | '4' | '5'\n  accessRequirementId?: string\n  synapseDataObjectId?: string\n  componentId?: string\n  principalId: string\n  userDisplayName?: string\n  userEmailAddress?: string\n}\n\n/**\n * Shows the Jira issue collector when invoked.\n * @param config\n */\nexport function showJiraIssueCollector(config: JiraIssueCollectorConfig): void {\n  const {\n    issueCollector,\n    issueSummary,\n    issueDescription,\n    principalId,\n    userDisplayName,\n    userEmailAddress,\n    synapseDataObjectId,\n    componentId,\n    accessRequirementId,\n    issuePriority,\n  } = config\n  try {\n    if (window.jQuery == null) {\n      throw new Error(\n        'jQuery is not present. Jira Issue Collector will not be shown.',\n      )\n    }\n    // Requires jQuery!\n    window.jQuery.ajax({\n      url: ISSUE_COLLECTOR_URL_MAP[issueCollector],\n      type: 'get',\n      cache: true,\n      dataType: 'script',\n    })\n\n    window.ATL_JQ_PAGE_PROPS = {\n      triggerFunction: function (showCollectorDialog: () => void) {\n        showCollectorDialog()\n      },\n\n      fieldValues: {\n        summary: issueSummary,\n        description: issueDescription,\n        priority: issuePriority,\n        customfield_10840: userEmailAddress,\n        email: userEmailAddress,\n        customfield_10841: accessRequirementId,\n        customfield_10740: principalId,\n        customfield_10741: userDisplayName,\n        customfield_10742: synapseDataObjectId,\n        fullname: userDisplayName,\n        components: componentId,\n        // Component ID of the component added to the Jira Governance Project\n      },\n    }\n  } catch (err) {\n    console.error(err)\n  }\n}\n\ntype UseJiraIssueCollectorConfig = Omit<\n  JiraIssueCollectorConfig,\n  'principalId' | 'userDisplayName' | 'userEmailAddress'\n> & {\n  show: boolean\n}\n\n/**\n * Hook used to show the Jira issue collector within Synapse. The collector will only be shown if the user is logged in.\n * @requires SynapseContext to be an ancestor in the component tree\n */\nexport function useJiraIssueCollector(config: UseJiraIssueCollectorConfig) {\n  const {\n    show,\n    issueCollector,\n    issueSummary,\n    issueDescription,\n    issuePriority,\n    accessRequirementId,\n    synapseDataObjectId,\n    componentId,\n  } = config\n\n  const { accessToken } = useSynapseContext()\n\n  const { data: currentUser, isLoading: profileIsLoading } =\n    useGetCurrentUserProfile({\n      enabled: !!accessToken,\n    })\n  const { data: notificationEmail, isLoading: emailIsLoading } =\n    useGetNotificationEmail({\n      enabled: !!accessToken,\n    })\n\n  useEffect(() => {\n    if (show && accessToken) {\n      if (currentUser && notificationEmail) {\n        showJiraIssueCollector({\n          issueCollector,\n          issueSummary,\n          issueDescription,\n          synapseDataObjectId,\n          componentId,\n          accessRequirementId,\n          issuePriority,\n          principalId: currentUser.ownerId,\n          userDisplayName: currentUser.displayName,\n          userEmailAddress: notificationEmail.email,\n        })\n      } else {\n        console.warn('Fetching profile data to display Jira popup')\n      }\n    } else if (show && !accessToken) {\n      console.error('User not logged in, not showing Jira popup')\n    }\n    // - Don't re-run the effect when currentUser or notificationEmail change -- if they are refetched, we'll end up in a bad state with two pop-ups\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [show, accessToken, profileIsLoading, emailIsLoading])\n}\n","import * as React from 'react'\nimport { SRC_SIGN_IN_CLASS } from '../utils/SynapseConstants'\n\nexport type SignInProps = {\n  className?: string\n  style?: React.CSSProperties\n}\n// An event listener for the class SRC_SIGN_IN_CLASS is needed to trigger a download\n// modal\nconst SignInButton = ({ className, style }: SignInProps) => {\n  return (\n    <a\n      type=\"button\"\n      style={style}\n      className={`SignInButton ${SRC_SIGN_IN_CLASS} ${className}`}\n    >\n      Sign In\n    </a>\n  )\n}\n\nexport default SignInButton\n","import React, { useState } from 'react'\nimport { Alert, Button } from 'react-bootstrap'\nimport {\n  ErrorBoundary,\n  ErrorBoundaryPropsWithComponent,\n  FallbackProps,\n} from 'react-error-boundary'\nimport { SynapseClientError } from '../../utils/SynapseClientError'\nimport { useSynapseContext } from '../../utils/SynapseContext'\nimport { Optional } from '../../utils/types/Optional'\nimport { useJiraIssueCollector } from '../JiraIssueCollector'\nimport SignInButton from '../SignInButton'\nimport { Collapse } from '@mui/material'\n\ntype ErrorBannerProps = {\n  error?: string | Error | SynapseClientError | null\n  reloadButtonFn?: () => void\n}\n\nexport const YOU_ARE_NOT_AUTHORIZED_MESSAGE =\n  'You are not authorized to access this resource.'\n\nexport const SignInPrompt = () => {\n  return (\n    <>\n      Please <SignInButton /> to view this resource.\n    </>\n  )\n}\n\nexport const ClientError = (props: { error: SynapseClientError }) => {\n  const [showDetailedError, setShowDetailedError] = useState(false)\n  const { accessToken } = useSynapseContext()\n  const { error } = props\n  const loginError =\n    (error.status === 403 || error.status === 401) && !accessToken\n  const accessDenied = error.status === 403 && accessToken\n\n  useJiraIssueCollector({\n    show: error.status >= 500,\n    issueCollector: 'SWC',\n    issueSummary: '',\n    issueDescription: error.reason,\n    issuePriority: '3',\n  })\n\n  if (loginError) {\n    return <SignInPrompt />\n  } else if (accessDenied) {\n    return (\n      <>\n        <div>{YOU_ARE_NOT_AUTHORIZED_MESSAGE}</div>\n        <Button\n          variant={'tertiary'}\n          style={{ fontSize: '12px' }}\n          onClick={() => setShowDetailedError(show => !show)}\n        >\n          {showDetailedError ? 'Hide' : 'Show'} details\n        </Button>\n        <div>\n          <Collapse in={showDetailedError}>\n            <pre>{error.reason}</pre>\n          </Collapse>\n        </div>\n      </>\n    )\n  } else {\n    return <>{error.reason}</>\n  }\n}\n\nexport const ErrorBanner = (props: ErrorBannerProps) => {\n  const { error, reloadButtonFn } = props\n\n  if (!error) {\n    return <></>\n  }\n\n  let synapseClientError: SynapseClientError | undefined = undefined\n  let jsError: Error | undefined = undefined\n  let stringError: string | undefined = undefined\n  if (error instanceof SynapseClientError) {\n    synapseClientError = error\n  } else if (error instanceof Error) {\n    jsError = error\n  } else if (typeof error === 'string') {\n    stringError = error\n  }\n  return (\n    <div data-testid=\"ErrorBanner\" className=\"Error bootstrap-4-backport\">\n      <Alert\n        dismissible={false}\n        show={true}\n        variant={'danger'}\n        transition={false}\n      >\n        <p>\n          {synapseClientError && <ClientError error={synapseClientError} />}\n          {jsError && jsError.message}\n          {stringError && stringError}\n        </p>\n        {reloadButtonFn && (\n          <Button variant=\"default\" onClick={reloadButtonFn}>\n            Reload\n          </Button>\n        )}\n      </Alert>\n    </div>\n  )\n}\n\nexport const ErrorFallbackComponent: React.FunctionComponent<FallbackProps> = ({\n  error,\n  resetErrorBoundary,\n}) => {\n  return (\n    <div className=\"bootstrap-4-backport SRC-marginBottomTop\">\n      <ErrorBanner\n        error={error}\n        reloadButtonFn={resetErrorBoundary}\n      ></ErrorBanner>\n    </div>\n  )\n}\n\nexport const TableRowFallbackComponent: React.FunctionComponent<\n  FallbackProps\n> = ({ error, resetErrorBoundary }) => {\n  return (\n    <tr>\n      <td colSpan={999}>\n        <ErrorBanner error={error} reloadButtonFn={resetErrorBoundary} />\n      </td>\n    </tr>\n  )\n}\n\n/**\n * ErrorBoundary component that uses the default error fallback component, unless overridden.\n * Internally uses `react-error-boundary`.\n *\n * Use with {@link react-error-boundary#handleError | handleError}\n * @param props\n * @returns\n */\nexport const SynapseErrorBoundary = (\n  props: React.PropsWithChildren<\n    Optional<ErrorBoundaryPropsWithComponent, 'FallbackComponent'>\n  >,\n) => <ErrorBoundary FallbackComponent={ErrorFallbackComponent} {...props} />\n","import React, { useContext, useMemo } from 'react'\nimport { SynapseErrorBoundary } from '../containers/error/ErrorBanner'\nimport { KeyFactory } from './hooks/SynapseAPI/KeyFactory'\n\nexport type SynapseContextType = {\n  /** The user's access token. If undefined, the user is not logged in */\n  accessToken: string | undefined\n  /** If the user has enabled experimental mode */\n  isInExperimentalMode: boolean\n  /** If the user prefers time to be displayed in UTC format */\n  utcTime: boolean\n  /** Whether to wrap all children of this context in an error boundary. Useful if this context wraps just one component. */\n  withErrorBoundary: boolean\n  /** The URL of the download cart page in the current app. Used to properly link components */\n  downloadCartPageUrl: string\n  /* The key factory to use for react-query. Generated automatically. */\n  keyFactory: KeyFactory\n}\n\nconst defaultContext = {\n  accessToken: undefined,\n  isInExperimentalMode: false,\n  utcTime: false,\n  withErrorBoundary: false,\n  keyFactory: new KeyFactory(undefined),\n  downloadCartPageUrl: '/DownloadCart',\n} satisfies SynapseContextType\n\n/**\n * This must be exported to use the context in class components.\n */\nexport const SynapseContext =\n  React.createContext<SynapseContextType>(defaultContext)\n\nexport type SynapseContextProviderProps = React.PropsWithChildren<{\n  synapseContext: Partial<SynapseContextType>\n}>\n\n/**\n * Provides context necessary for most components in SRC.\n *\n * The SynapseContextProvider must be wrapped in a react-query QueryClientProvider.\n * @param param0\n * @returns\n */\nexport function SynapseContextProvider(props: SynapseContextProviderProps) {\n  const { children, synapseContext: providedContext } = props\n  const queryKeyFactory = useMemo(\n    () => new KeyFactory(providedContext.accessToken),\n    [providedContext.accessToken],\n  )\n\n  const synapseContext: SynapseContextType = useMemo(\n    () => ({\n      accessToken: providedContext.accessToken,\n      isInExperimentalMode: providedContext.isInExperimentalMode ?? false,\n      utcTime: providedContext.utcTime ?? false,\n      withErrorBoundary: providedContext.withErrorBoundary ?? false,\n      downloadCartPageUrl:\n        providedContext.downloadCartPageUrl ?? '/DownloadCart',\n      keyFactory: providedContext.keyFactory ?? queryKeyFactory,\n    }),\n    [\n      providedContext.accessToken,\n      providedContext.downloadCartPageUrl,\n      providedContext.isInExperimentalMode,\n      providedContext.keyFactory,\n      providedContext.utcTime,\n      providedContext.withErrorBoundary,\n      queryKeyFactory,\n    ],\n  )\n\n  return (\n    <SynapseContext.Provider value={synapseContext}>\n      {synapseContext?.withErrorBoundary ? (\n        <SynapseErrorBoundary>{children}</SynapseErrorBoundary>\n      ) : (\n        children\n      )}\n    </SynapseContext.Provider>\n  )\n}\n\nexport const SynapseContextConsumer = SynapseContext.Consumer\n\nexport function useSynapseContext(): SynapseContextType {\n  const context = useContext(SynapseContext)\n  if (context === undefined) {\n    throw new Error(\n      'useSynapseContext must be used within a SynapseContextProvider',\n    )\n  }\n  return context\n}\n"],"names":["parse_1","cookie","parse","serialize_1","serialize","decode","encode","fieldContentRegExp","str","options","obj","opt","pairs","dec","i","pair","index","key","val","tryDecode","name","enc","value","maxAge","sameSite","getEndpoint","BackendDestinationEnum","REPO","FILE","ASYNC_START","ASYNC_GET","ENTITY","ENTITY_ID","id","ENTITY_ID_VERSION","version","ENTITY_ID_VERSIONS","ENTITY_BUNDLE_V2","ENTITY_PATH","ENTITY_HEADER_BY_ID","ENTITY_HEADERS","ENTITY_JSON","ENTITY_SCHEMA","ENTITY_SCHEMA_BINDING","ENTITY_SCHEMA_VALIDATION","ENTITY_ACCESS_REQUIREMENTS","entityId","TABLE_QUERY_ASYNC_START","TABLE_QUERY_ASYNC_GET","asyncJobToken","ASYNCHRONOUS_JOB_TOKEN","SCHEMA","SCHEMA_VALIDATION_START","SCHEMA_VALIDATION_GET","asyncJobId","USER","USER_BUNDLE","USER_ID","USER_ID_BUNDLE","USER_PROFILE","USER_PROFILE_ID","NOTIFICATION_EMAIL","ACCESS_REQUIREMENT_SEARCH","ACCESS_REQUEST_SUBMISSION_SEARCH","ACCESS_REQUIREMENT_BY_ID","ACCESS_REQUIREMENT_ACL","ACCESS_REQUIREMENT_STATUS","ACCESS_REQUIREMENT_WIKI_PAGE_KEY","ACCESS_REQUIREMENT_WIKI_PAGE","accessRequirementId","wikiId","FAVORITES","USER_GROUP_HEADERS","USER_GROUP_HEADERS_BATCH","DATA_ACCESS_SUBMISSION_BY_ID","PROFILE_IMAGE_PREVIEW","userId","APPROVED_SUBMISSION_INFO","EVALUATION","EVALUATION_BY_ID","EVALUATIONS_BY_ID","ids","ACTIVITY_FOR_ENTITY","versionNumber","TRASHCAN","TRASHCAN_VIEW","TRASHCAN_RESTORE","TRASHCAN_PURGE","TEAM","teamId","TEAM_ID_MEMBER_ID","memberId","FORUM","FORUM_THREAD","THREAD","THREAD_ID","DOI","DOI_ASSOCIATION","ACCESS_APPROVAL","DATA_ACCESS_REQUEST","DATA_ACCESS_REQUEST_SUBMISSION","ACCESS_REQUIREMENT_DATA_ACCESS_REQUEST_FOR_UPDATE","RESEARCH_PROJECT","ACCESS_REQUIREMENT_RESEARCH_PROJECT_FOR_UPDATE","FILE_HANDLE","FILE_HANDLE_BATCH","PROJECTS","isTypeViaConcreteTypeFactory","expectedConcreteTypes","object","FILE_ENTITY_CONCRETE_TYPE_VALUE","isFileEntity","DATASET_CONCRETE_TYPE_VALUE","DATASET_COLLECTION_CONCRETE_TYPE_VALUE","ENTITY_VIEW_TYPE_MASK_FILE","ENTITY_VIEW_CONCRETE_TYPE_VALUE","SUBMISSION_VIEW_CONCRETE_TYPE_VALUE","TABLE_ENTITY_CONCRETE_TYPE_VALUE","VIEW_CONCRETE_TYPE_VALUES","MATERIALIZED_VIEW_CONCRETE_TYPE_VALUE","TABLE_CONCRETE_TYPE_VALUES","FOLDER_CONCRETE_TYPE_VALUE","PROJECT_CONCRETE_TYPE_VALUE","LINK_CONCRETE_TYPE_VALUE","isLink","EntityType","FileHandleAssociateType","ObjectType","TYPE_FILTER","changedArray","a","b","item","initialState","ErrorBoundary","_React$Component","_inheritsLoose","_this","_len","_args","_key","_this$props","_len2","args","_key2","error","_proto","info","_this$props$onError","_this$props2","prevProps","prevState","resetKeys","_this$props$onResetKe","_this$props3","_this$props4","fallbackRender","FallbackComponent","fallback","_props","React.isValidElement","React.createElement","React.Component","useErrorHandler","givenError","_React$useState","React.useState","setError","SynapseClientError","status","reason","url","errorResponse","Subscribable","listener","callback","x","isServer","noop","functionalUpdate","updater","input","isValidTimeout","ensureQueryKeyArray","timeUntilStale","updatedAt","staleTime","parseQueryArgs","arg1","arg2","arg3","isQueryKey","_extends","parseMutationArgs","parseFilterArgs","mapQueryStatusFilter","active","inactive","isActive","matchQuery","filters","query","exact","fetching","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","queryStatusFilter","matchMutation","mutation","mutationKey","hashQueryKey","hashFn","asArray","stableValueHash","_","isPlainObject","result","partialDeepEqual","replaceEqualDeep","array","aSize","bItems","bSize","copy","equalItems","shallowEqualObjects","o","hasObjectPrototype","ctor","prot","sleep","timeout","resolve","scheduleMicrotask","getAbortController","FocusManager","_Subscribable","onFocus","_window","_this$cleanup","setup","_this$cleanup2","_this2","focused","focusManager","OnlineManager","onOnline","online","onlineManager","defaultRetryDelay","failureCount","isCancelable","CancelledError","isCancelledError","Retryer","config","cancelRetry","cancelFn","continueFn","promiseResolve","promiseReject","cancelOptions","outerResolve","outerReject","reject","pause","continueResolve","run","promiseOrValue","_config$retry","_config$retryDelay","retry","retryDelay","delay","shouldRetry","NotifyManager","_this3","queue","fn","notifyManager","logger","getLogger","setLogger","newLogger","QueryObserver","client","shouldFetchOnMount","shouldFetchOn","notifyOptions","prevOptions","prevQuery","mounted","shouldFetchOptionally","nextRefetchInterval","defaultedOptions","trackedResult","trackProp","unsubscribe","_this4","fetchOptions","_this5","promise","_this6","time","_this$options$refetch","nextInterval","_this7","prevResult","prevResultState","prevResultOptions","queryChange","queryInitialState","prevQueryResult","state","dataUpdatedAt","errorUpdatedAt","isFetching","isPreviousData","isPlaceholderData","data","fetchOnMount","fetchOptionally","selectError","placeholderData","isStale","_this$options","notifyOnChangeProps","notifyOnChangePropsExclusions","includedProps","typedKey","changed","isIncluded","isExcluded","defaultNotifyOptions","action","_this8","shouldLoadOnMount","field","unstable_batchedUpdates","ReactDOM","defaultContext","React","QueryClientSharingContext","getQueryClientContext","contextSharing","useQueryClient","queryClient","QueryClientProvider","_ref","_ref$contextSharing","children","Context","createValue","_isReset","QueryErrorResetBoundaryContext","useQueryErrorResetBoundary","shouldThrowError","suspense","_useErrorBoundary","params","useBaseQuery","Observer","mountedRef","forceUpdate","errorResetBoundary","_React$useState2","observer","useQuery","parsedOptions","factory","module","undefined","hex_chr","md5cycle","k","c","d","md5blk","s","md5blks","md5blk_array","md51","n","length","tail","tmp","lo","hi","md51_array","rhex","j","hex","clamp","from","to","begin","end","num","target","targetArray","sourceArray","toUtf8","utf8Str2ArrayBuffer","returnUInt8Array","buff","arr","arrayBuffer2Utf8Str","concatenateArrayBuffers","first","second","hexToBinaryString","bytes","SparkMD5","contents","raw","ret","content","hash","hasDocumentCookie","parseCookies","cookies","cookie.parse","isParsingCookie","doNotParse","readCookie","cleanValue","cleanupCookieValue","__assign","this","t","p","Cookies","parseOptions","name_1","_a","cookie.serialize","finalOptions","idx","Cookies$1","removeUndefined","inPlace","acc","_acc","DiscussionThreadOrder","DiscussionReplyOrder","DiscussionFilter","sufixes","calculateFriendlyFileSize","ErrorResponseCode","UniversalCookies","IS_OUTSIDE_SYNAPSE_ORG","ACCESS_TOKEN_COOKIE_KEY","MAX_JS_FILE_DOWNLOAD_SIZE","SYNAPSE_STORAGE_LOCATION_ID","getRootURL","portString","allowNotFoundError","response","e","returnIfTwoFactorAuthError","RETRY_STATUS_CODES","MAX_RETRY_STATUS_CODES","MAX_RETRY","fetchWithExponentialTimeout","delayMs","NETWORK_UNAVAILABLE_MESSAGE","numOfTry","contentType","responseBody","responseObject","doPost","requestJsonObject","accessToken","endpoint","additionalOptions","usedEndpoint","doGet","doDelete","doPut","getDownloadFromTableRequest","request","getAsyncResultBodyFromJobId","getFileHandleById","handleId","getActualFileHandleByIdURL","fileAssociateType","fileAssociateId","redirect","getFileHandleByIdURL","getAsyncResultFromJobId","responseBodyEndpoint","setCurrentAsyncStatus","failureResponse","getQueryTableAsyncJobResults","queryBundleRequest","getQueryTableResults","signal","getFullQueryTableResults","offset","rest","queryRequest","SynapseConstants.BUNDLE_MASK_QUERY_MAX_ROWS_PER_PAGE","isDone","login","username","password","authenticationReceipt","loginWith2fa","oAuthUrlRequest","provider","redirectUrl","oAuthSessionRequest","authenticationCode","getCurrentUserTwoFactorEnrollmentStatus","disableTwoFactorAuthForCurrentUser","start2FAEnrollment","complete2FAEnrollment","createRecoveryCodes","createEntity","entity","createProject","getUserProfile","getUserProfileById","ownerId","getUserBundle","mask","getMyUserBundle","getUserGroupHeaders","prefix","typeFilter","limit","postUserGroupHeadersWithAlias","aliases","getGroupHeadersBatch","getEvaluations","evalIds","getUserProfiles","list","getEntityChildren","getFiles","getEntity","entityTokens","getEntityHeadersByIds","entityIds","getEntityHeaders","references","fixedReferences","reference","getEntityHeader","updateEntity","deleteEntity","getEntityBundleV2","requestObject","getObjectTypeToString","getEntityWiki","objectType","objectTypeString","getUserFavorites","sort","sortDirection","addUserFavorite","removeUserFavorite","getUserChallenges","getUserTeamList","getIsUserMemberOfTeam","getWikiPageKeyForEntity","getWikiPageKeyForAccessRequirement","getWikiAttachmentsFromEntity","getPresignedUrlForWikiAttachment","fileName","isInSynapseExperimentalMode","SynapseConstants.EXPERIMENTAL_MODE_COOKIE","setAccessTokenCookie","token","getAccessTokenFromCookie","getUseUtcTimeFromCookie","DATETIME_UTC_COOKIE_KEY","getPrincipalAliasRequest","signOut","uploadFile","filename","file","fileUploadResolve","fileUploadReject","partSize","calculateMd5","md5","startMultipartUpload","fileBlob","blobSlice","chunkSize","chunks","spark","fileReader","currentChunk","loadNext","start","processFilePart","partNumber","multipartUploadStatus","uploadId","presignedUploadUrlRequest","presignedUrlUrl","presignedUrlResponse","presignedUrl","startByte","endByte","fileSlice","uploadFilePart","addPartUrl","addPartResponse","checkUploadComplete","fileHandleName","v","newStatus","clientSidePartsState","bit","getFileHandleContentFromID","fileHandleId","getFileHandleByIdPromise","getFileHandlePresignedUrlPromis","values","fileHandle","getFileHandleContent","err","maxFileSizeBytes","text","getFileResult","fileEntity","includeFileHandles","includePreSignedURLs","includePreviewPreSignedURLs","fileHandleAssociationList","addFileToDownloadListV2","fileEntityId","createPackageFromDownloadListV2","zipFileName","addFilesToDownloadListV2","getEvaluationPermissions","evalId","getEvaluation","updateEvaluation","evaluation","createEvaluation","deleteEvaluation","getEvaluationRoundsList","evaluationRoundListRequest","createEvaluationRound","evaluationRound","updateEvaluationRound","deleteEvaluationRound","evalRoundId","getOAuth2","nextPageToken","createOAuthClient","deleteOAuthClient","updateOAuthClient","isOAuthClientReverificationRequired","createOAuthClientSecret","getAuthenticatedOn","createFormData","formGroupId","dataFileHandleId","newFormData","updateFormData","formDataId","updatedFormData","submitFormData","getRestrictionInformation","getAccessRequirementById","getAccessRequirementAcl","searchAccessRequirements","getAccessRequirementStatus","requirementId","getAllAccessRequirements","getAllOfPaginatedService","createLockAccessRequirement","createAccessApproval","accessApproval","existsMoreData","results","createPersonalAccessToken","accessTokenGenerationRequest","getPersonalAccessTokenRecords","deletePersonalAccessToken","accessTokenId","getMyProjects","urlParams","getUserProjects","getEntityPath","getEntityVersions","searchEntities","getDownloadListJobResponse","queryRequestDetails","clearDownloadListV2","getAvailableFilesToDownload","getDownloadListStatistics","getDownloadListActionsRequired","removeItemFromDownloadListV2","updateResearchProject","requestObj","getResearchProject","getDataAccessRequestForUpdate","updateDataAccessRequest","submitDataAccessRequest","cancelDataAccessRequest","submissionId","getSubmissionById","updateSubmissionStatus","getSchemaBinding","getSchemaValidationResults","getValidationSchema","schema$id","getEntityJson","updateEntityJson","json","getNotificationEmail","oAuthRegisterAccountStep2","userName","bindOAuthProviderToAccount","changePasswordWithCurrentPassword","newPassword","getReply","replyId","postReply","createDiscussionReply","putReply","updateDiscussionReply","deleteReply","getReplies","threadId","ascending","filter","getReplyMessageUrl","messageKey","pinThread","unPinThread","getThread","getThreadMessageUrl","postThread","createDiscussionThread","putThreadTitle","putThreadMessage","deleteThread","restoreThread","getModerators","forumId","forumSearch","discussionSearchRequest","getForumThread","searchAccessApprovals","accessApprovalSearchRequest","searchAccessSubmission","submissionSearchRequest","getApprovedSubmissionInfo","submissionInfoPageRequest","getActivityForEntity","getProfilePicPreviewPresignedUrl","getItemsInTrashCan","restoreFromTrashCan","purgeFromTrashCan","getCertifyQuiz","postCertifiedUserTestResponse","quizResponse","S3_GEODATA_ENDPOINT","GEO_DATA_URL","API_KEY_URL","getGoogleMapsApiKey","getAllSynapseUserGeoData","getSynapseTeamGeoData","getSubscribers","topic","postSubscription","deleteSubscription","subscriptionId","postSubscriptionList","getDefaultUploadDestination","containerEntityId","getDOIAssociation","objectId","objectVersion","getCollapseUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","useUtilityClasses","ownerState","orientation","classes","slots","composeClasses","CollapseRoot","styled","props","styles","theme","CollapseWrapper","CollapseWrapperInner","Collapse","React.forwardRef","inProps","ref","useThemeProps","addEndListener","className","collapsedSizeProp","component","easing","inProp","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","duration","TransitionComponent","Transition","other","_objectWithoutPropertiesLoose","useTheme","timer","React.useRef","wrapperRef","autoTransitionDuration","collapsedSize","isHorizontal","size","React.useEffect","nodeRef","handleRef","useForkRef","normalizedTransitionCallback","maybeIsAppearing","node","getWrapperSize","handleEnter","isAppearing","handleEntering","wrapperSize","transitionDuration","transitionTimingFunction","getTransitionProps","duration2","handleEntered","handleExit","handleExited","handleExiting","_jsx","next","childProps","clsx","Collapse$1","GoogleIcon24","jsxs","SvgIcon","jsx","PROVIDERS","AuthenticationMethodSelection","onBeginOAuthSignIn","ssoRedirectUrl","onSelectUsernameAndPassword","onGoogleSignIn","event","SynapseClient.getRootURL","SynapseClient.oAuthUrlRequest","Box","Button","IconSvg","isObject","type","asyncTag","funcTag","genTag","proxyTag","isFunction","tag","baseGetTag","coreJsData","root","coreJsData$1","maskSrcKey","uid","isMasked","func","funcProto","funcToString","toSource","reRegExpChar","reIsHostCtor","objectProto","hasOwnProperty","reIsNative","baseIsNative","pattern","getValue","getNative","WeakMap","WeakMap$1","MAX_SAFE_INTEGER","isLength","isArrayLike","isPrototype","Ctor","proto","argsTag","baseIsArguments","isObjectLike","propertyIsEnumerable","isArguments","isArguments$1","stubFalse","freeExports","freeModule","moduleExports","Buffer","nativeIsBuffer","isBuffer","isBuffer$1","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","objectTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","baseUnary","freeProcess","freeGlobal","nodeUtil","types","nodeUtil$1","nodeIsTypedArray","isTypedArray","isTypedArray$1","overArg","transform","arg","nativeKeys","nativeKeys$1","baseKeys","Map","Map$1","DataView","DataView$1","Promise","Promise$2","Set","Set$1","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ctorString","getTag$1","isEmpty","isArray","DOCKER_REPOSITORY_CONCRETE_TYPE_VALUE","isDockerRepository","getEntityTypeFromHeader","header","convertToEntityType","isContainerType","isTableType","entityTypeToFriendlyName","entityType","typeString","convertToConcreteEntityType","isVersionableEntityType","isTable","isTableEntity","isDataset","isDatasetCollection","isEntityRefCollectionView","isEntityView","hasFilesInView","entityView","isFileView","isVersionableEntity","getVersionDisplay","allEntityKeys","versionableKeys","tableKeys","viewKeys","entityRefCollectionViewKeys","entityJsonKeys","removeTrailingUndefinedElements","lastElement","entityQueryKeyObjects","bundleRequest","infinite","downloadListQueryKeys","ACCESS_REQUIREMENT_QUERY_KEY","KeyFactory","maxSizeBytes","projectParams","useGetNotificationEmail","keyFactory","useSynapseContext","SynapseClient.getNotificationEmail","useGetCurrentUserProfile","SynapseClient.getUserProfile","ALL_USER_BUNDLE_FIELDS","USER_BUNDLE_MASK_USER_PROFILE","USER_BUNDLE_MASK_ORCID","USER_BUNDLE_MASK_VERIFICATION_SUBMISSION","USER_BUNDLE_MASK_IS_CERTIFIED","USER_BUNDLE_MASK_IS_VERIFIED","USER_BUNDLE_MASK_IS_ACT_MEMBER","USER_BUNDLE_MASK_IS_AR_REVIEWER","useGetUserBundle","SynapseClient.getUserBundle","useGetCurrentUserBundle","SynapseClient.getMyUserBundle","useGetUserProfile","principalId","sessionStorageCacheKey","cachedValue","SynapseClient.getUserProfileById","profile","useGetPrincipalIdForAlias","SynapseClient.getPrincipalAliasRequest","useIsCurrentUserACTMember","ISSUE_COLLECTOR_URL_MAP","showJiraIssueCollector","issueCollector","issueSummary","issueDescription","userDisplayName","userEmailAddress","synapseDataObjectId","componentId","issuePriority","showCollectorDialog","useJiraIssueCollector","show","currentUser","profileIsLoading","notificationEmail","emailIsLoading","useEffect","SignInButton","SRC_SIGN_IN_CLASS","YOU_ARE_NOT_AUTHORIZED_MESSAGE","SignInPrompt","Fragment","ClientError","showDetailedError","setShowDetailedError","useState","loginError","accessDenied","ErrorBanner","reloadButtonFn","synapseClientError","jsError","stringError","Alert","ErrorFallbackComponent","resetErrorBoundary","TableRowFallbackComponent","SynapseErrorBoundary","SynapseContext","SynapseContextProvider","providedContext","queryKeyFactory","useMemo","synapseContext","SynapseContextConsumer","context","useContext"],"mappings":"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"}