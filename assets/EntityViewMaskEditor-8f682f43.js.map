{"version":3,"file":"EntityViewMaskEditor-8f682f43.js","sources":["../../src/components/EntityViewScopeEditor/EntityViewMaskEditor.tsx"],"sourcesContent":["import React from 'react'\nimport { Alert, FormGroup, Typography } from '@mui/material'\nimport {\n  ENTITY_VIEW_TYPE_MASK_DATASET,\n  ENTITY_VIEW_TYPE_MASK_FILE,\n  ENTITY_VIEW_TYPE_MASK_FOLDER,\n  ENTITY_VIEW_TYPE_MASK_TABLE,\n} from '@sage-bionetworks/synapse-types'\nimport { Checkbox } from '../widgets/Checkbox'\n\nexport type EntityViewMaskEditorProps = {\n  value: number\n  onChange: (mask: number) => void\n}\n\nconst maskLabelPairs: [string, number][] = [\n  ['Files', ENTITY_VIEW_TYPE_MASK_FILE],\n  ['Folders', ENTITY_VIEW_TYPE_MASK_FOLDER],\n  ['Tables', ENTITY_VIEW_TYPE_MASK_TABLE],\n  ['Datasets', ENTITY_VIEW_TYPE_MASK_DATASET],\n]\n\nexport function isMaskSupportedInUI(value: number) {\n  maskLabelPairs.forEach(([, mask]) => {\n    // Remove each supported bit\n    if ((value & mask) !== 0) {\n      value = value - mask\n    }\n  })\n  // If value is not zero, then some unsupported bit remains\n  return value === 0\n}\n\nexport default function EntityViewMaskEditor(props: EntityViewMaskEditorProps) {\n  const { value, onChange } = props\n\n  const customMaskInUse = !isMaskSupportedInUI(value)\n\n  return (\n    <>\n      <Typography variant={'body1'} mt={2.5} mb={1.25} sx={{ fontWeight: 700 }}>\n        Include in View\n      </Typography>\n      <FormGroup sx={{ gap: 1 }}>\n        {maskLabelPairs.map(([label, mask]) => (\n          <Checkbox\n            key={label}\n            label={label}\n            checked={\n              // Checked if the mask bit is set\n              (value & mask) > 0\n            }\n            disabled={customMaskInUse}\n            onChange={() => {\n              // Toggle the clicked mask value with XOR\n              onChange(value ^ mask)\n            }}\n          />\n        ))}\n      </FormGroup>\n      {customMaskInUse && (\n        <Alert severity={'warning'} sx={{ my: 2.25 }}>\n          A custom mask is in use. Changes cannot be made in the UI.\n        </Alert>\n      )}\n    </>\n  )\n}\n"],"names":["maskLabelPairs","ENTITY_VIEW_TYPE_MASK_FILE","ENTITY_VIEW_TYPE_MASK_FOLDER","ENTITY_VIEW_TYPE_MASK_TABLE","ENTITY_VIEW_TYPE_MASK_DATASET","isMaskSupportedInUI","value","mask","EntityViewMaskEditor","props","onChange","customMaskInUse","jsxs","Fragment","jsx","Typography","FormGroup","label","Checkbox","Alert"],"mappings":"qSAeA,MAAAA,EAAA,CAA2C,CAAA,QAAAC,CAAA,EACL,CAAA,UAAAC,CAAA,EACI,CAAA,SAAAC,CAAA,EACF,CAAA,WAAAC,CAAA,CAExC,EAEO,SAAAC,EAAAC,EAAA,CACL,OAAAN,EAAA,QAAA,CAAA,CAAA,CAAAO,CAAA,IAAA,CAEED,EAAAC,IACED,EAAAA,EAAAC,EACF,CAAA,EAGFD,IAAA,CACF,CAEA,SAAAE,EAAAC,EAAA,CACE,KAAA,CAAA,MAAAH,EAAA,SAAAI,CAAA,EAAAD,EAEAE,EAAA,CAAAN,EAAAC,CAAA,EAEA,OAAAM,EAAAC,EAAA,CAAA,SAAA,CAEIC,EAAAC,EAAA,CAAA,QAAA,QAAA,GAAA,IAAA,GAAA,KAAA,GAAA,CAAA,WAAA,GAAA,EAAA,SAAA,kBAAA,EAEAD,EAAAE,EAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,SAAAhB,EAAA,IAAA,CAAA,CAAAiB,EAAAV,CAAA,IAAAO,EAGII,EAAC,CAAA,MAAAD,EAEC,SACAX,EAAAC,GAAA,EAEmB,SAAAI,EAET,SAAA,IAAA,CAGRD,EAAAJ,EAAAC,CAAA,CAAqB,CACvB,EAAAU,CAVK,CAAA,EAAA,EAaXN,GAAAG,EAAAK,EAAA,CAAA,SAAA,UAAA,GAAA,CAAA,GAAA,IAAA,EAAA,SAAA,4DAAA,CAAA,CAIE,CAAA,CAAA,CAIR"}