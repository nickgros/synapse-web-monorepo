import{j as N,a as j,F as z}from"./jsx-runtime-ad672792.js";import{bq as Ei,ao as ps,aR as ms,aD as vs,di as ys,dj as gs,bj as _s,dk as Ss,dl as Es,a6 as ws}from"./SynapseContext-d9d41f69.js";import{a as bo,c as G,g as bs}from"./_commonjsHelpers-042e6b4d.js";import{r as Rn,e as wr}from"./util-f26b5128.js";import{u as rn,r as Rs,b as Ro,c as Os}from"./browser-0b8f916a.js";import{b as As}from"./index-cc134824.js";import{a as Ts}from"./assert-4cf8988f.js";import{r as vt}from"./index-f1f749bf.js";import{S as Cs}from"./SynapseConstants-9d1f6e44.js";import{F as Is}from"./core.esm-d6052014.js";import{I as lr}from"./IconSvg-44530777.js";import{c as Oo}from"./cloneDeep-de653b9f.js";import{k as Ns}from"./_baseClone-7ad3b986.js";import{f as Fs,h as xs,i as wi,a as Ps,l as U,b as ks}from"./lodash.default-f40f8909.js";import{g as yt}from"./_baseMap-bab09401.js";import{a as bi}from"./isArray-5e3f9107.js";import{W as Ds}from"./WarningModal-cab5ead1.js";import{P as Ls}from"./react-router-b06b9355.js";import{A as Ri}from"./Alert-84d62a08.js";import{B as Bs}from"./Button-7d415009.js";import"./inheritsLoose-d541526f.js";import"./setPrototypeOf-0bb37fbe.js";import"./index-96c5f47c.js";import"./extends-98964cd2.js";import"./getEndpoint-5374ab4d.js";import"./SvgIcon-93d86b25.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./styled-8837a0b3.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-3d5299f2.js";import"./Box-2e3c1244.js";import"./extendSxProp-a6801df0.js";import"./Button-e0234af7.js";import"./ButtonBase-26873d31.js";import"./emotion-react.browser.esm-a8a50fc7.js";import"./assertThisInitialized-081f9914.js";import"./TransitionGroupContext-a2b6e27b.js";import"./useForkRef-dd8a6e5c.js";import"./Clear-a9f76abf.js";import"./useTheme-c4678cf9.js";import"./isHostComponent-fa76b8d9.js";import"./index-4d501b15.js";import"./pick-23be3b9c.js";import"./toString-cc90cb98.js";import"./isSymbol-7c514724.js";import"./_baseSlice-cf92e063.js";import"./_MapCache-c4e7294a.js";import"./_baseTimes-8cccc40f.js";import"./_isIndex-af14b756.js";import"./index.browser-ac474deb.js";import"./hasIn-6ae41e3d.js";import"./uniq-b503d6a4.js";import"./_baseIteratee-dd2a3782.js";import"./_baseUniq-7e37c67e.js";import"./isPlainObject-6d05c27d.js";import"./union-0c9bb423.js";import"./without-7fc0b149.js";import"./_cacheHas-62659ef2.js";import"./isArrayLikeObject-c1b2bd48.js";import"./_isIterateeCall-eac5140a.js";import"./uniq-01dc0575.js";import"./toInteger-405ccf0a.js";import"./_setToArray-3d6ec6fd.js";import"./startCase-b2e198bb.js";import"./upperFirst-79e605a3.js";import"./omitBy-a224ee7f.js";import"./times-edcdb997.js";import"./merge-66cc9f73.js";import"./_baseFor-d254fa1e.js";import"./isEqual-fb1c71a1.js";import"./uniqueId-4d05949d.js";import"./groupBy-61aa788b.js";import"./toLower-271fcf43.js";import"./Modal-6ffa84ac.js";import"./createWithBsPrefix-e09f51dd.js";import"./contains-33365353.js";import"./useWillUnmount-7fb15b8a.js";import"./divWithClassName-1aeead00.js";import"./usePrevious-9f30f8c7.js";import"./removeClass-164fd327.js";import"./hasClass-ec9efd32.js";import"./useWaitForDOMRef-54076dc2.js";import"./hook-c05d8d9f.js";var ge={},Ms={get exports(){return ge},set exports(e){ge=e}};const $s=!1,Us=/\r?\n/,js=/\bono[ @]/;function Vs(e){return Boolean(e&&e.configurable&&typeof e.get=="function")}function Hs(e){return Boolean(!e||e.writable||typeof e.set=="function")}function Ao(e,t){let r=To(e.stack),i=t?t.stack:void 0;return r&&i?r+`

`+i:r||i}function Ws(e,t,r){r?Object.defineProperty(t,"stack",{get:()=>{let i=e.get.apply(t);return Ao({stack:i},r)},enumerable:!1,configurable:!0}):Ys(t,e)}function To(e){if(e){let t=e.split(Us),r;for(let i=0;i<t.length;i++){let n=t[i];if(js.test(n))r===void 0&&(r=i);else if(r!==void 0){t.splice(r,i-r);break}}if(t.length>0)return t.join(`
`)}return e}function Ys(e,t){Object.defineProperty(e,"stack",{get:()=>To(t.get.apply(e)),enumerable:!1,configurable:!0})}const qs=["function","symbol","undefined"],Ks=["constructor","prototype","__proto__"],zs=Object.getPrototypeOf({});function Co(){let e={},t=this;for(let r of Io(t))if(typeof r=="string"){let i=t[r],n=typeof i;qs.includes(n)||(e[r]=i)}return e}function Io(e,t=[]){let r=[];for(;e&&e!==zs;)r=r.concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),e=Object.getPrototypeOf(e);let i=new Set(r);for(let n of t.concat(Ks))i.delete(n);return i}const Gs=["name","message","stack"];function sr(e,t,r){let i=e;return Js(i,t),t&&typeof t=="object"&&Xs(i,t),i.toJSON=Co,r&&typeof r=="object"&&Object.assign(i,r),i}function Js(e,t){let r=Object.getOwnPropertyDescriptor(e,"stack");Vs(r)?Ws(r,e,t):Hs(r)&&(e.stack=Ao(e,t))}function Xs(e,t){let r=Io(t,Gs),i=e,n=t;for(let o of r)if(i[o]===void 0)try{i[o]=n[o]}catch{}}function Qs(e){return e=e||{},{concatMessages:e.concatMessages===void 0?!0:Boolean(e.concatMessages),format:e.format===void 0?$s:typeof e.format=="function"?e.format:!1}}function Zs(e,t){let r,i,n,o="";return typeof e[0]=="string"?n=e:typeof e[1]=="string"?(e[0]instanceof Error?r=e[0]:i=e[0],n=e.slice(1)):(r=e[0],i=e[1],n=e.slice(2)),n.length>0&&(t.format?o=t.format.apply(void 0,n):o=n.join(" ")),t.concatMessages&&r&&r.message&&(o+=(o?` 
`:"")+r.message),{originalError:r,props:i,message:o}}const je=On;function On(e,t){t=Qs(t);function r(...i){let{originalError:n,props:o,message:a}=Zs(i,t),l=new e(a);return sr(l,n,o)}return r[Symbol.species]=e,r}On.toJSON=function(t){return Co.call(t)};On.extend=function(t,r,i){return i||r instanceof Error?sr(t,r,i):r?sr(t,void 0,r):sr(t)};const Oi=Ae;Ae.error=new je(Error);Ae.eval=new je(EvalError);Ae.range=new je(RangeError);Ae.reference=new je(ReferenceError);Ae.syntax=new je(SyntaxError);Ae.type=new je(TypeError);Ae.uri=new je(URIError);const eu=Ae;function Ae(...e){let t=e[0];if(typeof t=="object"&&typeof t.name=="string"){for(let r of Object.values(eu))if(typeof r=="function"&&r.name==="ono"){let i=r[Symbol.species];if(i&&i!==Error&&(t instanceof i||t.name===i.name))return r.apply(void 0,e)}}return Ae.error.apply(void 0,e)}Rn();typeof module=="object"&&typeof module.exports=="object"&&(module.exports=Object.assign(module.exports.default,module.exports));const tu=Object.freeze(Object.defineProperty({__proto__:null,Ono:je,default:Oi,ono:Oi},Symbol.toStringTag,{value:"Module"})),it=bo(tu);var ae={},ru={get exports(){return ae},set exports(e){ae=e}};(function(e,t){let r=/^win/.test(process.platform),i=/\//g,n=/^(\w{2,}):\/\//i,o=e.exports,a=/~1/g,l=/~0/g,f=[/\?/g,"%3F",/\#/g,"%23"],p=[/\%23/g,"#",/\%24/g,"$",/\%26/g,"&",/\%2C/g,",",/\%40/g,"@"];t.parse=rn.parse,t.resolve=rn.resolve,t.cwd=function(){if(process.browser)return location.href;let v=process.cwd(),y=v.slice(-1);return y==="/"||y==="\\"?v:v+"/"},t.getProtocol=function(v){let y=n.exec(v);if(y)return y[1].toLowerCase()},t.getExtension=function(v){let y=v.lastIndexOf(".");return y>=0?o.stripQuery(v.substr(y).toLowerCase()):""},t.stripQuery=function(v){let y=v.indexOf("?");return y>=0&&(v=v.substr(0,y)),v},t.getHash=function(v){let y=v.indexOf("#");return y>=0?v.substr(y):"#"},t.stripHash=function(v){let y=v.indexOf("#");return y>=0&&(v=v.substr(0,y)),v},t.isHttp=function(v){let y=o.getProtocol(v);return y==="http"||y==="https"?!0:y===void 0?process.browser:!1},t.isFileSystemPath=function(v){if(process.browser)return!1;let y=o.getProtocol(v);return y===void 0||y==="file"},t.fromFileSystemPath=function(v){r&&(v=v.replace(/\\/g,"/")),v=encodeURI(v);for(let y=0;y<f.length;y+=2)v=v.replace(f[y],f[y+1]);return v},t.toFileSystemPath=function(v,y){v=decodeURI(v);for(let w=0;w<p.length;w+=2)v=v.replace(p[w],p[w+1]);let _=v.substr(0,7).toLowerCase()==="file://";return _&&(v=v[7]==="/"?v.substr(8):v.substr(7),r&&v[1]==="/"&&(v=v[0]+":"+v.substr(1)),y?v="file:///"+v:(_=!1,v=r?v:"/"+v)),r&&!_&&(v=v.replace(i,"\\"),v.substr(1,2)===":\\"&&(v=v[0].toUpperCase()+v.substr(1))),v},t.safePointerToPath=function(v){return v.length<=1||v[0]!=="#"||v[1]!=="/"?[]:v.slice(2).split("/").map(y=>decodeURIComponent(y).replace(a,"/").replace(l,"~"))}})(ru,ae);var K={};const{Ono:No}=it,{stripHash:Fo,toFileSystemPath:nu}=ae,Ve=K.JSONParserError=class extends Error{constructor(t,r){super(),this.code="EUNKNOWN",this.message=t,this.source=r,this.path=null,No.extend(this)}get footprint(){return`${this.path}+${this.source}+${this.code}+${this.message}`}};He(Ve);const xo=K.JSONParserErrorGroup=class Po extends Error{constructor(t){super(),this.files=t,this.message=`${this.errors.length} error${this.errors.length>1?"s":""} occurred while reading '${nu(t.$refs._root$Ref.path)}'`,No.extend(this)}static getParserErrors(t){const r=[];for(const i of Object.values(t.$refs._$refs))i.errors&&r.push(...i.errors);return r}get errors(){return Po.getParserErrors(this.files)}};He(xo);const iu=K.ParserError=class extends Ve{constructor(t,r){super(`Error parsing ${r}: ${t}`,r),this.code="EPARSER"}};He(iu);const ou=K.UnmatchedParserError=class extends Ve{constructor(t){super(`Could not find parser for "${t}"`,t),this.code="EUNMATCHEDPARSER"}};He(ou);const au=K.ResolverError=class extends Ve{constructor(t,r){super(t.message||`Error reading file "${r}"`,r),this.code="ERESOLVER","code"in t&&(this.ioErrorCode=String(t.code))}};He(au);const su=K.UnmatchedResolverError=class extends Ve{constructor(t){super(`Could not find resolver for "${t}"`,t),this.code="EUNMATCHEDRESOLVER"}};He(su);const uu=K.MissingPointerError=class extends Ve{constructor(t,r){super(`Token "${t}" does not exist.`,Fo(r)),this.code="EMISSINGPOINTER"}};He(uu);const lu=K.InvalidPointerError=class extends Ve{constructor(t,r){super(`Invalid $ref pointer "${t}". Pointers must begin with "#/"`,Fo(r)),this.code="EINVALIDPOINTER"}};He(lu);function He(e){Object.defineProperty(e.prototype,"name",{value:e.name,enumerable:!0})}K.isHandledError=function(e){return e instanceof Ve||e instanceof xo};K.normalizeError=function(e){return e.path===null&&(e.path=[]),e};var jr,Ai;function br(){if(Ai)return jr;Ai=1,jr=m;const e=qt(),t=ae,{JSONParserError:r,InvalidPointerError:i,MissingPointerError:n,isHandledError:o}=K,a=/\//g,l=/~/g,f=/~1/g,p=/~0/g;function m(w,g,R){this.$ref=w,this.path=g,this.originalPath=R||g,this.value=void 0,this.circular=!1,this.indirections=0}m.prototype.resolve=function(w,g,R){let b=m.parse(this.path,this.originalPath);this.value=_(w);for(let E=0;E<b.length;E++){if(v(this,g)&&(this.path=m.join(this.path,b.slice(E))),typeof this.value=="object"&&this.value!==null&&"$ref"in this.value)return this;let A=b[E];if(this.value[A]===void 0||this.value[A]===null)throw this.value=null,new n(A,decodeURI(this.originalPath));this.value=this.value[A]}return(!this.value||this.value.$ref&&t.resolve(this.path,this.value.$ref)!==R)&&v(this,g),this},m.prototype.set=function(w,g,R){let b=m.parse(this.path),E;if(b.length===0)return this.value=g,g;this.value=_(w);for(let A=0;A<b.length-1;A++)v(this,R),E=b[A],this.value&&this.value[E]!==void 0?this.value=this.value[E]:this.value=y(this,E,{});return v(this,R),E=b[b.length-1],y(this,E,g),w},m.parse=function(w,g){let R=t.getHash(w).substr(1);if(!R)return[];R=R.split("/");for(let b=0;b<R.length;b++)R[b]=decodeURIComponent(R[b].replace(f,"/").replace(p,"~"));if(R[0]!=="")throw new i(R,g===void 0?w:g);return R.slice(1)},m.join=function(w,g){w.indexOf("#")===-1&&(w+="#"),g=Array.isArray(g)?g:[g];for(let R=0;R<g.length;R++){let b=g[R];w+="/"+encodeURIComponent(b.replace(l,"~0").replace(a,"~1"))}return w};function v(w,g){if(e.isAllowed$Ref(w.value,g)){let R=t.resolve(w.path,w.value.$ref);if(R===w.path)w.circular=!0;else{let b=w.$ref.$refs._resolve(R,w.path,g);return b===null?!1:(w.indirections+=b.indirections+1,e.isExtended$Ref(w.value)?(w.value=e.dereference(w.value,b.value),!1):(w.$ref=b.$ref,w.path=b.path,w.value=b.value,!0))}}}function y(w,g,R){if(w.value&&typeof w.value=="object")g==="-"&&Array.isArray(w.value)?w.value.push(R):w.value[g]=R;else throw new r(`Error assigning $ref pointer "${w.path}". 
Cannot set "${g}" of a non-object.`);return R}function _(w){if(o(w))throw w;return w}return jr}var Vr,Ti;function qt(){if(Ti)return Vr;Ti=1,Vr=l;const e=br(),{InvalidPointerError:t,isHandledError:r,normalizeError:i}=K,{safePointerToPath:n,stripHash:o,getHash:a}=ae;function l(){this.path=void 0,this.value=void 0,this.$refs=void 0,this.pathType=void 0,this.errors=void 0}return l.prototype.addError=function(f){this.errors===void 0&&(this.errors=[]);const p=this.errors.map(({footprint:m})=>m);Array.isArray(f.errors)?this.errors.push(...f.errors.map(i).filter(({footprint:m})=>!p.includes(m))):p.includes(f.footprint)||this.errors.push(i(f))},l.prototype.exists=function(f,p){try{return this.resolve(f,p),!0}catch{return!1}},l.prototype.get=function(f,p){return this.resolve(f,p).value},l.prototype.resolve=function(f,p,m,v){let y=new e(this,f,m);try{return y.resolve(this.value,p,v)}catch(_){if(!p||!p.continueOnError||!r(_))throw _;return _.path===null&&(_.path=n(a(v))),_ instanceof t&&(_.source=decodeURI(o(v))),this.addError(_),null}},l.prototype.set=function(f,p){let m=new e(this,f);this.value=m.set(this.value,p)},l.is$Ref=function(f){return f&&typeof f=="object"&&typeof f.$ref=="string"&&f.$ref.length>0},l.isExternal$Ref=function(f){return l.is$Ref(f)&&f.$ref[0]!=="#"},l.isAllowed$Ref=function(f,p){if(l.is$Ref(f)){if(f.$ref.substr(0,2)==="#/"||f.$ref==="#")return!0;if(f.$ref[0]!=="#"&&(!p||p.resolve.external))return!0}},l.isExtended$Ref=function(f){return l.is$Ref(f)&&Object.keys(f).length>1},l.dereference=function(f,p){if(p&&typeof p=="object"&&l.isExtended$Ref(f)){let m={};for(let v of Object.keys(f))v!=="$ref"&&(m[v]=f[v]);for(let v of Object.keys(p))v in m||(m[v]=p[v]);return m}else return p},Vr}const{ono:ko}=it,cu=qt(),$e=ae;var fu=_e;function _e(){this.circular=!1,this._$refs={},this._root$Ref=null}_e.prototype.paths=function(e){return Do(this._$refs,arguments).map(r=>r.decoded)};_e.prototype.values=function(e){let t=this._$refs;return Do(t,arguments).reduce((i,n)=>(i[n.decoded]=t[n.encoded].value,i),{})};_e.prototype.toJSON=_e.prototype.values;_e.prototype.exists=function(e,t){try{return this._resolve(e,"",t),!0}catch{return!1}};_e.prototype.get=function(e,t){return this._resolve(e,"",t).value};_e.prototype.set=function(e,t){let r=$e.resolve(this._root$Ref.path,e),i=$e.stripHash(r),n=this._$refs[i];if(!n)throw ko(`Error resolving $ref pointer "${e}". 
"${i}" not found.`);n.set(r,t)};_e.prototype._add=function(e){let t=$e.stripHash(e),r=new cu;return r.path=t,r.$refs=this,this._$refs[t]=r,this._root$Ref=this._root$Ref||r,r};_e.prototype._resolve=function(e,t,r){let i=$e.resolve(this._root$Ref.path,e),n=$e.stripHash(i),o=this._$refs[n];if(!o)throw ko(`Error resolving $ref pointer "${e}". 
"${n}" not found.`);return o.resolve(i,r,e,t)};_e.prototype._get$Ref=function(e){e=$e.resolve(this._root$Ref.path,e);let t=$e.stripHash(e);return this._$refs[t]};function Do(e,t){let r=Object.keys(e);return t=Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t),t.length>0&&t[0]&&(r=r.filter(i=>t.indexOf(e[i].pathType)!==-1)),r.map(i=>({encoded:i,decoded:e[i].pathType==="file"?$e.toFileSystemPath(i,!0):i}))}var Kt={};Kt.all=function(e){return Object.keys(e).filter(t=>typeof e[t]=="object").map(t=>(e[t].name=t,e[t]))};Kt.filter=function(e,t,r){return e.filter(i=>!!Lo(i,t,r))};Kt.sort=function(e){for(let t of e)t.order=t.order||Number.MAX_SAFE_INTEGER;return e.sort((t,r)=>t.order-r.order)};Kt.run=function(e,t,r,i){let n,o,a=0;return new Promise((l,f)=>{p();function p(){if(n=e[a++],!n)return f(o);try{let _=Lo(n,t,r,m,i);if(_&&typeof _.then=="function")_.then(v,y);else if(_!==void 0)v(_);else if(a===e.length)throw new Error("No promise has been returned or callback has been called.")}catch(_){y(_)}}function m(_,w){_?y(_):v(w)}function v(_){l({plugin:n,result:_})}function y(_){o={plugin:n,error:_},p()}})};function Lo(e,t,r,i,n){let o=e[t];if(typeof o=="function")return o.apply(e,[r,i,n]);if(!i){if(o instanceof RegExp)return o.test(r.url);if(typeof o=="string")return o===r.extension;if(Array.isArray(o))return o.indexOf(r.extension)!==-1}return o}const{ono:nn}=it,Ci=ae,Le=Kt,{ResolverError:Ii,ParserError:Ni,UnmatchedParserError:hu,UnmatchedResolverError:du,isHandledError:pu}=K;var Bo=mu;async function mu(e,t,r){e=Ci.stripHash(e);let i=t._add(e),n={url:e,extension:Ci.getExtension(e)};try{const o=await vu(n,r,t);i.pathType=o.plugin.name,n.data=o.result;const a=await yu(n,r,t);return i.value=a.result,a.result}catch(o){throw pu(o)&&(i.value=o),o}}function vu(e,t,r){return new Promise((i,n)=>{let o=Le.all(t.resolve);o=Le.filter(o,"canRead",e),Le.sort(o),Le.run(o,"read",e,r).then(i,a);function a(l){!l&&t.continueOnError?n(new du(e.url)):!l||!("error"in l)?n(nn.syntax(`Unable to resolve $ref pointer "${e.url}"`)):l.error instanceof Ii?n(l.error):n(new Ii(l,e.url))}})}function yu(e,t,r){return new Promise((i,n)=>{let o=Le.all(t.parse),a=Le.filter(o,"canParse",e),l=a.length>0?a:o;Le.sort(l),Le.run(l,"parse",e,r).then(f,p);function f(m){!m.plugin.allowEmpty&&gu(m.result)?n(nn.syntax(`Error parsing "${e.url}" as ${m.plugin.name}. 
Parsed value is empty`)):i(m)}function p(m){!m&&t.continueOnError?n(new hu(e.url)):!m||!("error"in m)?n(nn.syntax(`Unable to parse ${e.url}`)):m.error instanceof Ni?n(m.error):n(new Ni(m.error.message,e.url))}})}function gu(e){return e===void 0||typeof e=="object"&&Object.keys(e).length===0||typeof e=="string"&&e.trim().length===0||Buffer.isBuffer(e)&&e.length===0}const{ParserError:_u}=K;var Su={order:100,allowEmpty:!0,canParse:".json",async parse(e){let t=e.data;if(Buffer.isBuffer(t)&&(t=t.toString()),typeof t=="string"){if(t.trim().length===0)return;try{return JSON.parse(t)}catch(r){throw new _u(r.message,e.url)}}else return t}},Z={},An={},Se={};function Mo(e){return typeof e>"u"||e===null}function Eu(e){return typeof e=="object"&&e!==null}function wu(e){return Array.isArray(e)?e:Mo(e)?[]:[e]}function bu(e,t){var r,i,n,o;if(t)for(o=Object.keys(t),r=0,i=o.length;r<i;r+=1)n=o[r],e[n]=t[n];return e}function Ru(e,t){var r="",i;for(i=0;i<t;i+=1)r+=e;return r}function Ou(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Se.isNothing=Mo;Se.isObject=Eu;Se.toArray=wu;Se.repeat=Ru;Se.isNegativeZero=Ou;Se.extend=bu;function $o(e,t){var r="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),i+" "+r):i}function jt(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=$o(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}jt.prototype=Object.create(Error.prototype);jt.prototype.constructor=jt;jt.prototype.toString=function(t){return this.name+": "+$o(this,t)};var zt=jt,Bt=Se;function Hr(e,t,r,i,n){var o="",a="",l=Math.floor(n/2)-1;return i-t>l&&(o=" ... ",t=i-l+o.length),r-i>l&&(a=" ...",r=i+l-a.length),{str:o+e.slice(t,r).replace(/\t/g,"→")+a,pos:i-t+o.length}}function Wr(e,t){return Bt.repeat(" ",t-e.length)+e}function Au(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],n=[],o,a=-1;o=r.exec(e.buffer);)n.push(o.index),i.push(o.index+o[0].length),e.position<=o.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var l="",f,p,m=Math.min(e.line+t.linesAfter,n.length).toString().length,v=t.maxLength-(t.indent+m+3);for(f=1;f<=t.linesBefore&&!(a-f<0);f++)p=Hr(e.buffer,i[a-f],n[a-f],e.position-(i[a]-i[a-f]),v),l=Bt.repeat(" ",t.indent)+Wr((e.line-f+1).toString(),m)+" | "+p.str+`
`+l;for(p=Hr(e.buffer,i[a],n[a],e.position,v),l+=Bt.repeat(" ",t.indent)+Wr((e.line+1).toString(),m)+" | "+p.str+`
`,l+=Bt.repeat("-",t.indent+m+3+p.pos)+`^
`,f=1;f<=t.linesAfter&&!(a+f>=n.length);f++)p=Hr(e.buffer,i[a+f],n[a+f],e.position-(i[a]-i[a+f]),v),l+=Bt.repeat(" ",t.indent)+Wr((e.line+f+1).toString(),m)+" | "+p.str+`
`;return l.replace(/\n$/,"")}var Tu=Au,cr={},Cu={get exports(){return cr},set exports(e){cr=e}},Fi=zt,Iu=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Nu=["scalar","sequence","mapping"];function Fu(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(i){t[String(i)]=r})}),t}function xu(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Iu.indexOf(r)===-1)throw new Fi('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Fu(t.styleAliases||null),Nu.indexOf(this.kind)===-1)throw new Fi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var re=xu,Pt=zt,Yr=re;function xi(e,t){var r=[];return e[t].forEach(function(i){var n=r.length;r.forEach(function(o,a){o.tag===i.tag&&o.kind===i.kind&&o.multi===i.multi&&(n=a)}),r[n]=i}),r}function Pu(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function i(n){n.multi?(e.multi[n.kind].push(n),e.multi.fallback.push(n)):e[n.kind][n.tag]=e.fallback[n.tag]=n}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(i);return e}function on(e){return this.extend(e)}on.prototype.extend=function(t){var r=[],i=[];if(t instanceof Yr)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new Pt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Yr))throw new Pt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Pt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Pt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(o){if(!(o instanceof Yr))throw new Pt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(on.prototype);return n.implicit=(this.implicit||[]).concat(r),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=xi(n,"implicit"),n.compiledExplicit=xi(n,"explicit"),n.compiledTypeMap=Pu(n.compiledImplicit,n.compiledExplicit),n};var Uo=on,ku=re,jo=new ku("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Du=re,Vo=new Du("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Lu=re,Ho=new Lu("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Bu=Uo,Wo=new Bu({explicit:[jo,Vo,Ho]}),Mu=re;function $u(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Uu(){return null}function ju(e){return e===null}var Yo=new Mu("tag:yaml.org,2002:null",{kind:"scalar",resolve:$u,construct:Uu,predicate:ju,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Vu=re;function Hu(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Wu(e){return e==="true"||e==="True"||e==="TRUE"}function Yu(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var qo=new Vu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Hu,construct:Wu,predicate:Yu,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),qu=Se,Ku=re;function zu(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Gu(e){return 48<=e&&e<=55}function Ju(e){return 48<=e&&e<=57}function Xu(e){if(e===null)return!1;var t=e.length,r=0,i=!1,n;if(!t)return!1;if(n=e[r],(n==="-"||n==="+")&&(n=e[++r]),n==="0"){if(r+1===t)return!0;if(n=e[++r],n==="b"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(!zu(e.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(!Gu(e.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;r<t;r++)if(n=e[r],n!=="_"){if(!Ju(e.charCodeAt(r)))return!1;i=!0}return!(!i||n==="_")}function Qu(e){var t=e,r=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Zu(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!qu.isNegativeZero(e)}var Ko=new Ku("tag:yaml.org,2002:int",{kind:"scalar",resolve:Xu,construct:Qu,predicate:Zu,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),zo=Se,el=re,tl=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function rl(e){return!(e===null||!tl.test(e)||e[e.length-1]==="_")}function nl(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var il=/^[-+]?[0-9]+e/;function ol(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(zo.isNegativeZero(e))return"-0.0";return r=e.toString(10),il.test(r)?r.replace("e",".e"):r}function al(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||zo.isNegativeZero(e))}var Go=new el("tag:yaml.org,2002:float",{kind:"scalar",resolve:rl,construct:nl,predicate:al,represent:ol,defaultStyle:"lowercase"}),Jo=Wo.extend({implicit:[Yo,qo,Ko,Go]});(function(e){e.exports=Jo})(Cu);var sl=re,Xo=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Qo=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ul(e){return e===null?!1:Xo.exec(e)!==null||Qo.exec(e)!==null}function ll(e){var t,r,i,n,o,a,l,f=0,p=null,m,v,y;if(t=Xo.exec(e),t===null&&(t=Qo.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],i=+t[2]-1,n=+t[3],!t[4])return new Date(Date.UTC(r,i,n));if(o=+t[4],a=+t[5],l=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(m=+t[10],v=+(t[11]||0),p=(m*60+v)*6e4,t[9]==="-"&&(p=-p)),y=new Date(Date.UTC(r,i,n,o,a,l,f)),p&&y.setTime(y.getTime()-p),y}function cl(e){return e.toISOString()}var Zo=new sl("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ul,construct:ll,instanceOf:Date,represent:cl}),fl=re;function hl(e){return e==="<<"||e===null}var ea=new fl("tag:yaml.org,2002:merge",{kind:"scalar",resolve:hl}),dl=re,Tn=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function pl(e){if(e===null)return!1;var t,r,i=0,n=e.length,o=Tn;for(r=0;r<n;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function ml(e){var t,r,i=e.replace(/[\r\n=]/g,""),n=i.length,o=Tn,a=0,l=[];for(t=0;t<n;t++)t%4===0&&t&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(i.charAt(t));return r=n%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function vl(e){var t="",r=0,i,n,o=e.length,a=Tn;for(i=0;i<o;i++)i%3===0&&i&&(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]),r=(r<<8)+e[i];return n=o%3,n===0?(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]):n===2?(t+=a[r>>10&63],t+=a[r>>4&63],t+=a[r<<2&63],t+=a[64]):n===1&&(t+=a[r>>2&63],t+=a[r<<4&63],t+=a[64],t+=a[64]),t}function yl(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var ta=new dl("tag:yaml.org,2002:binary",{kind:"scalar",resolve:pl,construct:ml,predicate:yl,represent:vl}),gl=re,_l=Object.prototype.hasOwnProperty,Sl=Object.prototype.toString;function El(e){if(e===null)return!0;var t=[],r,i,n,o,a,l=e;for(r=0,i=l.length;r<i;r+=1){if(n=l[r],a=!1,Sl.call(n)!=="[object Object]")return!1;for(o in n)if(_l.call(n,o))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function wl(e){return e!==null?e:[]}var ra=new gl("tag:yaml.org,2002:omap",{kind:"sequence",resolve:El,construct:wl}),bl=re,Rl=Object.prototype.toString;function Ol(e){if(e===null)return!0;var t,r,i,n,o,a=e;for(o=new Array(a.length),t=0,r=a.length;t<r;t+=1){if(i=a[t],Rl.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;o[t]=[n[0],i[n[0]]]}return!0}function Al(e){if(e===null)return[];var t,r,i,n,o,a=e;for(o=new Array(a.length),t=0,r=a.length;t<r;t+=1)i=a[t],n=Object.keys(i),o[t]=[n[0],i[n[0]]];return o}var na=new bl("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Ol,construct:Al}),Tl=re,Cl=Object.prototype.hasOwnProperty;function Il(e){if(e===null)return!0;var t,r=e;for(t in r)if(Cl.call(r,t)&&r[t]!==null)return!1;return!0}function Nl(e){return e!==null?e:{}}var ia=new Tl("tag:yaml.org,2002:set",{kind:"mapping",resolve:Il,construct:Nl}),Cn=cr.extend({implicit:[Zo,ea],explicit:[ta,ra,na,ia]}),rt=Se,oa=zt,Fl=Tu,xl=Cn,Ue=Object.prototype.hasOwnProperty,fr=1,aa=2,sa=3,hr=4,qr=1,Pl=2,Pi=3,kl=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Dl=/[\x85\u2028\u2029]/,Ll=/[,\[\]\{\}]/,ua=/^(?:!|!!|![a-z\-]+!)$/i,la=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ki(e){return Object.prototype.toString.call(e)}function Oe(e){return e===10||e===13}function nt(e){return e===9||e===32}function oe(e){return e===9||e===32||e===10||e===13}function gt(e){return e===44||e===91||e===93||e===123||e===125}function Bl(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Ml(e){return e===120?2:e===117?4:e===85?8:0}function $l(e){return 48<=e&&e<=57?e-48:-1}function Di(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function Ul(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var ca=new Array(256),fa=new Array(256);for(var ft=0;ft<256;ft++)ca[ft]=Di(ft)?1:0,fa[ft]=Di(ft);function jl(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||xl,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ha(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Fl(r),new oa(t,r)}function D(e,t){throw ha(e,t)}function dr(e,t){e.onWarning&&e.onWarning.call(null,ha(e,t))}var Li={YAML:function(t,r,i){var n,o,a;t.version!==null&&D(t,"duplication of %YAML directive"),i.length!==1&&D(t,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&D(t,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),a=parseInt(n[2],10),o!==1&&D(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&dr(t,"unsupported YAML version of the document")},TAG:function(t,r,i){var n,o;i.length!==2&&D(t,"TAG directive accepts exactly two arguments"),n=i[0],o=i[1],ua.test(n)||D(t,"ill-formed tag handle (first argument) of the TAG directive"),Ue.call(t.tagMap,n)&&D(t,'there is a previously declared suffix for "'+n+'" tag handle'),la.test(o)||D(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{D(t,"tag prefix is malformed: "+o)}t.tagMap[n]=o}};function Be(e,t,r,i){var n,o,a,l;if(t<r){if(l=e.input.slice(t,r),i)for(n=0,o=l.length;n<o;n+=1)a=l.charCodeAt(n),a===9||32<=a&&a<=1114111||D(e,"expected valid JSON character");else kl.test(l)&&D(e,"the stream contains non-printable characters");e.result+=l}}function Bi(e,t,r,i){var n,o,a,l;for(rt.isObject(r)||D(e,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(r),a=0,l=n.length;a<l;a+=1)o=n[a],Ue.call(t,o)||(t[o]=r[o],i[o]=!0)}function _t(e,t,r,i,n,o,a,l,f){var p,m;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),p=0,m=n.length;p<m;p+=1)Array.isArray(n[p])&&D(e,"nested arrays are not supported inside keys"),typeof n=="object"&&ki(n[p])==="[object Object]"&&(n[p]="[object Object]");if(typeof n=="object"&&ki(n)==="[object Object]"&&(n="[object Object]"),n=String(n),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(p=0,m=o.length;p<m;p+=1)Bi(e,t,o[p],r);else Bi(e,t,o,r);else!e.json&&!Ue.call(r,n)&&Ue.call(t,n)&&(e.line=a||e.line,e.lineStart=l||e.lineStart,e.position=f||e.position,D(e,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[n]=o,delete r[n];return t}function In(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):D(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function q(e,t,r){for(var i=0,n=e.input.charCodeAt(e.position);n!==0;){for(;nt(n);)n===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),n=e.input.charCodeAt(++e.position);if(t&&n===35)do n=e.input.charCodeAt(++e.position);while(n!==10&&n!==13&&n!==0);if(Oe(n))for(In(e),n=e.input.charCodeAt(e.position),i++,e.lineIndent=0;n===32;)e.lineIndent++,n=e.input.charCodeAt(++e.position);else break}return r!==-1&&i!==0&&e.lineIndent<r&&dr(e,"deficient indentation"),i}function Rr(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||oe(r)))}function Nn(e,t){t===1?e.result+=" ":t>1&&(e.result+=rt.repeat(`
`,t-1))}function Vl(e,t,r){var i,n,o,a,l,f,p,m,v=e.kind,y=e.result,_;if(_=e.input.charCodeAt(e.position),oe(_)||gt(_)||_===35||_===38||_===42||_===33||_===124||_===62||_===39||_===34||_===37||_===64||_===96||(_===63||_===45)&&(n=e.input.charCodeAt(e.position+1),oe(n)||r&&gt(n)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,l=!1;_!==0;){if(_===58){if(n=e.input.charCodeAt(e.position+1),oe(n)||r&&gt(n))break}else if(_===35){if(i=e.input.charCodeAt(e.position-1),oe(i))break}else{if(e.position===e.lineStart&&Rr(e)||r&&gt(_))break;if(Oe(_))if(f=e.line,p=e.lineStart,m=e.lineIndent,q(e,!1,-1),e.lineIndent>=t){l=!0,_=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=f,e.lineStart=p,e.lineIndent=m;break}}l&&(Be(e,o,a,!1),Nn(e,e.line-f),o=a=e.position,l=!1),nt(_)||(a=e.position+1),_=e.input.charCodeAt(++e.position)}return Be(e,o,a,!1),e.result?!0:(e.kind=v,e.result=y,!1)}function Hl(e,t){var r,i,n;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=n=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Be(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)i=e.position,e.position++,n=e.position;else return!0;else Oe(r)?(Be(e,i,n,!0),Nn(e,q(e,!1,t)),i=n=e.position):e.position===e.lineStart&&Rr(e)?D(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);D(e,"unexpected end of the stream within a single quoted scalar")}function Wl(e,t){var r,i,n,o,a,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return Be(e,r,e.position,!0),e.position++,!0;if(l===92){if(Be(e,r,e.position,!0),l=e.input.charCodeAt(++e.position),Oe(l))q(e,!1,t);else if(l<256&&ca[l])e.result+=fa[l],e.position++;else if((a=Ml(l))>0){for(n=a,o=0;n>0;n--)l=e.input.charCodeAt(++e.position),(a=Bl(l))>=0?o=(o<<4)+a:D(e,"expected hexadecimal character");e.result+=Ul(o),e.position++}else D(e,"unknown escape sequence");r=i=e.position}else Oe(l)?(Be(e,r,i,!0),Nn(e,q(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Rr(e)?D(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}D(e,"unexpected end of the stream within a double quoted scalar")}function Yl(e,t){var r=!0,i,n,o,a=e.tag,l,f=e.anchor,p,m,v,y,_,w=Object.create(null),g,R,b,E;if(E=e.input.charCodeAt(e.position),E===91)m=93,_=!1,l=[];else if(E===123)m=125,_=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),E=e.input.charCodeAt(++e.position);E!==0;){if(q(e,!0,t),E=e.input.charCodeAt(e.position),E===m)return e.position++,e.tag=a,e.anchor=f,e.kind=_?"mapping":"sequence",e.result=l,!0;r?E===44&&D(e,"expected the node content, but found ','"):D(e,"missed comma between flow collection entries"),R=g=b=null,v=y=!1,E===63&&(p=e.input.charCodeAt(e.position+1),oe(p)&&(v=y=!0,e.position++,q(e,!0,t))),i=e.line,n=e.lineStart,o=e.position,Et(e,t,fr,!1,!0),R=e.tag,g=e.result,q(e,!0,t),E=e.input.charCodeAt(e.position),(y||e.line===i)&&E===58&&(v=!0,E=e.input.charCodeAt(++e.position),q(e,!0,t),Et(e,t,fr,!1,!0),b=e.result),_?_t(e,l,w,R,g,b,i,n,o):v?l.push(_t(e,null,w,R,g,b,i,n,o)):l.push(g),q(e,!0,t),E=e.input.charCodeAt(e.position),E===44?(r=!0,E=e.input.charCodeAt(++e.position)):r=!1}D(e,"unexpected end of the stream within a flow collection")}function ql(e,t){var r,i,n=qr,o=!1,a=!1,l=t,f=0,p=!1,m,v;if(v=e.input.charCodeAt(e.position),v===124)i=!1;else if(v===62)i=!0;else return!1;for(e.kind="scalar",e.result="";v!==0;)if(v=e.input.charCodeAt(++e.position),v===43||v===45)qr===n?n=v===43?Pi:Pl:D(e,"repeat of a chomping mode identifier");else if((m=$l(v))>=0)m===0?D(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?D(e,"repeat of an indentation width identifier"):(l=t+m-1,a=!0);else break;if(nt(v)){do v=e.input.charCodeAt(++e.position);while(nt(v));if(v===35)do v=e.input.charCodeAt(++e.position);while(!Oe(v)&&v!==0)}for(;v!==0;){for(In(e),e.lineIndent=0,v=e.input.charCodeAt(e.position);(!a||e.lineIndent<l)&&v===32;)e.lineIndent++,v=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>l&&(l=e.lineIndent),Oe(v)){f++;continue}if(e.lineIndent<l){n===Pi?e.result+=rt.repeat(`
`,o?1+f:f):n===qr&&o&&(e.result+=`
`);break}for(i?nt(v)?(p=!0,e.result+=rt.repeat(`
`,o?1+f:f)):p?(p=!1,e.result+=rt.repeat(`
`,f+1)):f===0?o&&(e.result+=" "):e.result+=rt.repeat(`
`,f):e.result+=rt.repeat(`
`,o?1+f:f),o=!0,a=!0,f=0,r=e.position;!Oe(v)&&v!==0;)v=e.input.charCodeAt(++e.position);Be(e,r,e.position,!1)}return!0}function Mi(e,t){var r,i=e.tag,n=e.anchor,o=[],a,l=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),f=e.input.charCodeAt(e.position);f!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,D(e,"tab characters must not be used in indentation")),!(f!==45||(a=e.input.charCodeAt(e.position+1),!oe(a))));){if(l=!0,e.position++,q(e,!0,-1)&&e.lineIndent<=t){o.push(null),f=e.input.charCodeAt(e.position);continue}if(r=e.line,Et(e,t,sa,!1,!0),o.push(e.result),q(e,!0,-1),f=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&f!==0)D(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=i,e.anchor=n,e.kind="sequence",e.result=o,!0):!1}function Kl(e,t,r){var i,n,o,a,l,f,p=e.tag,m=e.anchor,v={},y=Object.create(null),_=null,w=null,g=null,R=!1,b=!1,E;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=v),E=e.input.charCodeAt(e.position);E!==0;){if(!R&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,D(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),o=e.line,(E===63||E===58)&&oe(i))E===63?(R&&(_t(e,v,y,_,w,null,a,l,f),_=w=g=null),b=!0,R=!0,n=!0):R?(R=!1,n=!0):D(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,E=i;else{if(a=e.line,l=e.lineStart,f=e.position,!Et(e,r,aa,!1,!0))break;if(e.line===o){for(E=e.input.charCodeAt(e.position);nt(E);)E=e.input.charCodeAt(++e.position);if(E===58)E=e.input.charCodeAt(++e.position),oe(E)||D(e,"a whitespace character is expected after the key-value separator within a block mapping"),R&&(_t(e,v,y,_,w,null,a,l,f),_=w=g=null),b=!0,R=!1,n=!1,_=e.tag,w=e.result;else if(b)D(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=p,e.anchor=m,!0}else if(b)D(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=p,e.anchor=m,!0}if((e.line===o||e.lineIndent>t)&&(R&&(a=e.line,l=e.lineStart,f=e.position),Et(e,t,hr,!0,n)&&(R?w=e.result:g=e.result),R||(_t(e,v,y,_,w,g,a,l,f),_=w=g=null),q(e,!0,-1),E=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&E!==0)D(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return R&&_t(e,v,y,_,w,null,a,l,f),b&&(e.tag=p,e.anchor=m,e.kind="mapping",e.result=v),b}function zl(e){var t,r=!1,i=!1,n,o,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&D(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(r=!0,a=e.input.charCodeAt(++e.position)):a===33?(i=!0,n="!!",a=e.input.charCodeAt(++e.position)):n="!",t=e.position,r){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(o=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):D(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!oe(a);)a===33&&(i?D(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),ua.test(n)||D(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),Ll.test(o)&&D(e,"tag suffix cannot contain flow indicator characters")}o&&!la.test(o)&&D(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{D(e,"tag name is malformed: "+o)}return r?e.tag=o:Ue.call(e.tagMap,n)?e.tag=e.tagMap[n]+o:n==="!"?e.tag="!"+o:n==="!!"?e.tag="tag:yaml.org,2002:"+o:D(e,'undeclared tag handle "'+n+'"'),!0}function Gl(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&D(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!oe(r)&&!gt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&D(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Jl(e){var t,r,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!oe(i)&&!gt(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&D(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Ue.call(e.anchorMap,r)||D(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],q(e,!0,-1),!0}function Et(e,t,r,i,n){var o,a,l,f=1,p=!1,m=!1,v,y,_,w,g,R;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=l=hr===r||sa===r,i&&q(e,!0,-1)&&(p=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),f===1)for(;zl(e)||Gl(e);)q(e,!0,-1)?(p=!0,l=o,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):l=!1;if(l&&(l=p||n),(f===1||hr===r)&&(fr===r||aa===r?g=t:g=t+1,R=e.position-e.lineStart,f===1?l&&(Mi(e,R)||Kl(e,R,g))||Yl(e,g)?m=!0:(a&&ql(e,g)||Hl(e,g)||Wl(e,g)?m=!0:Jl(e)?(m=!0,(e.tag!==null||e.anchor!==null)&&D(e,"alias node should not have any properties")):Vl(e,g,fr===r)&&(m=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(m=l&&Mi(e,R))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&D(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),v=0,y=e.implicitTypes.length;v<y;v+=1)if(w=e.implicitTypes[v],w.resolve(e.result)){e.result=w.construct(e.result),e.tag=w.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Ue.call(e.typeMap[e.kind||"fallback"],e.tag))w=e.typeMap[e.kind||"fallback"][e.tag];else for(w=null,_=e.typeMap.multi[e.kind||"fallback"],v=0,y=_.length;v<y;v+=1)if(e.tag.slice(0,_[v].tag.length)===_[v].tag){w=_[v];break}w||D(e,"unknown tag !<"+e.tag+">"),e.result!==null&&w.kind!==e.kind&&D(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+w.kind+'", not "'+e.kind+'"'),w.resolve(e.result,e.tag)?(e.result=w.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):D(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||m}function Xl(e){var t=e.position,r,i,n,o=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(q(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(o=!0,a=e.input.charCodeAt(++e.position),r=e.position;a!==0&&!oe(a);)a=e.input.charCodeAt(++e.position);for(i=e.input.slice(r,e.position),n=[],i.length<1&&D(e,"directive name must not be less than one character in length");a!==0;){for(;nt(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!Oe(a));break}if(Oe(a))break;for(r=e.position;a!==0&&!oe(a);)a=e.input.charCodeAt(++e.position);n.push(e.input.slice(r,e.position))}a!==0&&In(e),Ue.call(Li,i)?Li[i](e,i,n):dr(e,'unknown document directive "'+i+'"')}if(q(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,q(e,!0,-1)):o&&D(e,"directives end mark is expected"),Et(e,e.lineIndent-1,hr,!1,!0),q(e,!0,-1),e.checkLineBreaks&&Dl.test(e.input.slice(t,e.position))&&dr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Rr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,q(e,!0,-1));return}if(e.position<e.length-1)D(e,"end of the stream or a document separator is expected");else return}function da(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new jl(e,t),i=e.indexOf("\0");for(i!==-1&&(r.position=i,D(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Xl(r);return r.documents}function Ql(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var i=da(e,r);if(typeof t!="function")return i;for(var n=0,o=i.length;n<o;n+=1)t(i[n])}function Zl(e,t){var r=da(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new oa("expected a single document in the stream, but found more")}}An.loadAll=Ql;An.load=Zl;var pa={},Or=Se,Gt=zt,ec=Cn,ma=Object.prototype.toString,va=Object.prototype.hasOwnProperty,Fn=65279,tc=9,Vt=10,rc=13,nc=32,ic=33,oc=34,an=35,ac=37,sc=38,uc=39,lc=42,ya=44,cc=45,pr=58,fc=61,hc=62,dc=63,pc=64,ga=91,_a=93,mc=96,Sa=123,vc=124,Ea=125,ee={};ee[0]="\\0";ee[7]="\\a";ee[8]="\\b";ee[9]="\\t";ee[10]="\\n";ee[11]="\\v";ee[12]="\\f";ee[13]="\\r";ee[27]="\\e";ee[34]='\\"';ee[92]="\\\\";ee[133]="\\N";ee[160]="\\_";ee[8232]="\\L";ee[8233]="\\P";var yc=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],gc=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function _c(e,t){var r,i,n,o,a,l,f;if(t===null)return{};for(r={},i=Object.keys(t),n=0,o=i.length;n<o;n+=1)a=i[n],l=String(t[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),f=e.compiledTypeMap.fallback[a],f&&va.call(f.styleAliases,l)&&(l=f.styleAliases[l]),r[a]=l;return r}function Sc(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else if(e<=4294967295)r="U",i=8;else throw new Gt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Or.repeat("0",i-t.length)+t}var Ec=1,Ht=2;function wc(e){this.schema=e.schema||ec,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Or.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=_c(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Ht:Ec,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function $i(e,t){for(var r=Or.repeat(" ",t),i=0,n=-1,o="",a,l=e.length;i<l;)n=e.indexOf(`
`,i),n===-1?(a=e.slice(i),i=l):(a=e.slice(i,n+1),i=n+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function sn(e,t){return`
`+Or.repeat(" ",e.indent*t)}function bc(e,t){var r,i,n;for(r=0,i=e.implicitTypes.length;r<i;r+=1)if(n=e.implicitTypes[r],n.resolve(t))return!0;return!1}function mr(e){return e===nc||e===tc}function Wt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Fn||65536<=e&&e<=1114111}function Ui(e){return Wt(e)&&e!==Fn&&e!==rc&&e!==Vt}function ji(e,t,r){var i=Ui(e),n=i&&!mr(e);return(r?i:i&&e!==ya&&e!==ga&&e!==_a&&e!==Sa&&e!==Ea)&&e!==an&&!(t===pr&&!n)||Ui(t)&&!mr(t)&&e===an||t===pr&&n}function Rc(e){return Wt(e)&&e!==Fn&&!mr(e)&&e!==cc&&e!==dc&&e!==pr&&e!==ya&&e!==ga&&e!==_a&&e!==Sa&&e!==Ea&&e!==an&&e!==sc&&e!==lc&&e!==ic&&e!==vc&&e!==fc&&e!==hc&&e!==uc&&e!==oc&&e!==ac&&e!==pc&&e!==mc}function Oc(e){return!mr(e)&&e!==pr}function Mt(e,t){var r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function wa(e){var t=/^\n* /;return t.test(e)}var ba=1,un=2,Ra=3,Oa=4,pt=5;function Ac(e,t,r,i,n,o,a,l){var f,p=0,m=null,v=!1,y=!1,_=i!==-1,w=-1,g=Rc(Mt(e,0))&&Oc(Mt(e,e.length-1));if(t||a)for(f=0;f<e.length;p>=65536?f+=2:f++){if(p=Mt(e,f),!Wt(p))return pt;g=g&&ji(p,m,l),m=p}else{for(f=0;f<e.length;p>=65536?f+=2:f++){if(p=Mt(e,f),p===Vt)v=!0,_&&(y=y||f-w-1>i&&e[w+1]!==" ",w=f);else if(!Wt(p))return pt;g=g&&ji(p,m,l),m=p}y=y||_&&f-w-1>i&&e[w+1]!==" "}return!v&&!y?g&&!a&&!n(e)?ba:o===Ht?pt:un:r>9&&wa(e)?pt:a?o===Ht?pt:un:y?Oa:Ra}function Tc(e,t,r,i,n){e.dump=function(){if(t.length===0)return e.quotingType===Ht?'""':"''";if(!e.noCompatMode&&(yc.indexOf(t)!==-1||gc.test(t)))return e.quotingType===Ht?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),l=i||e.flowLevel>-1&&r>=e.flowLevel;function f(p){return bc(e,p)}switch(Ac(t,l,e.indent,a,f,e.quotingType,e.forceQuotes&&!i,n)){case ba:return t;case un:return"'"+t.replace(/'/g,"''")+"'";case Ra:return"|"+Vi(t,e.indent)+Hi($i(t,o));case Oa:return">"+Vi(t,e.indent)+Hi($i(Cc(t,a),o));case pt:return'"'+Ic(t)+'"';default:throw new Gt("impossible error: invalid scalar style")}}()}function Vi(e,t){var r=wa(e)?String(t):"",i=e[e.length-1]===`
`,n=i&&(e[e.length-2]===`
`||e===`
`),o=n?"+":i?"":"-";return r+o+`
`}function Hi(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Cc(e,t){for(var r=/(\n+)([^\n]*)/g,i=function(){var p=e.indexOf(`
`);return p=p!==-1?p:e.length,r.lastIndex=p,Wi(e.slice(0,p),t)}(),n=e[0]===`
`||e[0]===" ",o,a;a=r.exec(e);){var l=a[1],f=a[2];o=f[0]===" ",i+=l+(!n&&!o&&f!==""?`
`:"")+Wi(f,t),n=o}return i}function Wi(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,i,n=0,o,a=0,l=0,f="";i=r.exec(e);)l=i.index,l-n>t&&(o=a>n?a:l,f+=`
`+e.slice(n,o),n=o+1),a=l;return f+=`
`,e.length-n>t&&a>n?f+=e.slice(n,a)+`
`+e.slice(a+1):f+=e.slice(n),f.slice(1)}function Ic(e){for(var t="",r=0,i,n=0;n<e.length;r>=65536?n+=2:n++)r=Mt(e,n),i=ee[r],!i&&Wt(r)?(t+=e[n],r>=65536&&(t+=e[n+1])):t+=i||Sc(r);return t}function Nc(e,t,r){var i="",n=e.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(xe(e,t,l,!1,!1)||typeof l>"u"&&xe(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=n,e.dump="["+i+"]"}function Yi(e,t,r,i){var n="",o=e.tag,a,l,f;for(a=0,l=r.length;a<l;a+=1)f=r[a],e.replacer&&(f=e.replacer.call(r,String(a),f)),(xe(e,t+1,f,!0,!0,!1,!0)||typeof f>"u"&&xe(e,t+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=sn(e,t)),e.dump&&Vt===e.dump.charCodeAt(0)?n+="-":n+="- ",n+=e.dump);e.tag=o,e.dump=n||"[]"}function Fc(e,t,r){var i="",n=e.tag,o=Object.keys(r),a,l,f,p,m;for(a=0,l=o.length;a<l;a+=1)m="",i!==""&&(m+=", "),e.condenseFlow&&(m+='"'),f=o[a],p=r[f],e.replacer&&(p=e.replacer.call(r,f,p)),xe(e,t,f,!1,!1)&&(e.dump.length>1024&&(m+="? "),m+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),xe(e,t,p,!1,!1)&&(m+=e.dump,i+=m));e.tag=n,e.dump="{"+i+"}"}function xc(e,t,r,i){var n="",o=e.tag,a=Object.keys(r),l,f,p,m,v,y;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new Gt("sortKeys must be a boolean or a function");for(l=0,f=a.length;l<f;l+=1)y="",(!i||n!=="")&&(y+=sn(e,t)),p=a[l],m=r[p],e.replacer&&(m=e.replacer.call(r,p,m)),xe(e,t+1,p,!0,!0,!0)&&(v=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,v&&(e.dump&&Vt===e.dump.charCodeAt(0)?y+="?":y+="? "),y+=e.dump,v&&(y+=sn(e,t)),xe(e,t+1,m,!0,v)&&(e.dump&&Vt===e.dump.charCodeAt(0)?y+=":":y+=": ",y+=e.dump,n+=y));e.tag=o,e.dump=n||"{}"}function qi(e,t,r){var i,n,o,a,l,f;for(n=r?e.explicitTypes:e.implicitTypes,o=0,a=n.length;o<a;o+=1)if(l=n[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof t=="object"&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(r?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(f=e.styleMap[l.tag]||l.defaultStyle,ma.call(l.represent)==="[object Function]")i=l.represent(t,f);else if(va.call(l.represent,f))i=l.represent[f](t,f);else throw new Gt("!<"+l.tag+'> tag resolver accepts not "'+f+'" style');e.dump=i}return!0}return!1}function xe(e,t,r,i,n,o,a){e.tag=null,e.dump=r,qi(e,r,!1)||qi(e,r,!0);var l=ma.call(e.dump),f=i,p;i&&(i=e.flowLevel<0||e.flowLevel>t);var m=l==="[object Object]"||l==="[object Array]",v,y;if(m&&(v=e.duplicates.indexOf(r),y=v!==-1),(e.tag!==null&&e.tag!=="?"||y||e.indent!==2&&t>0)&&(n=!1),y&&e.usedDuplicates[v])e.dump="*ref_"+v;else{if(m&&y&&!e.usedDuplicates[v]&&(e.usedDuplicates[v]=!0),l==="[object Object]")i&&Object.keys(e.dump).length!==0?(xc(e,t,e.dump,n),y&&(e.dump="&ref_"+v+e.dump)):(Fc(e,t,e.dump),y&&(e.dump="&ref_"+v+" "+e.dump));else if(l==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!a&&t>0?Yi(e,t-1,e.dump,n):Yi(e,t,e.dump,n),y&&(e.dump="&ref_"+v+e.dump)):(Nc(e,t,e.dump),y&&(e.dump="&ref_"+v+" "+e.dump));else if(l==="[object String]")e.tag!=="?"&&Tc(e,e.dump,t,o,f);else{if(l==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Gt("unacceptable kind of an object to dump "+l)}e.tag!==null&&e.tag!=="?"&&(p=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",e.dump=p+" "+e.dump)}return!0}function Pc(e,t){var r=[],i=[],n,o;for(ln(e,r,i),n=0,o=i.length;n<o;n+=1)t.duplicates.push(r[i[n]]);t.usedDuplicates=new Array(o)}function ln(e,t,r){var i,n,o;if(e!==null&&typeof e=="object")if(n=t.indexOf(e),n!==-1)r.indexOf(n)===-1&&r.push(n);else if(t.push(e),Array.isArray(e))for(n=0,o=e.length;n<o;n+=1)ln(e[n],t,r);else for(i=Object.keys(e),n=0,o=i.length;n<o;n+=1)ln(e[i[n]],t,r)}function kc(e,t){t=t||{};var r=new wc(t);r.noRefs||Pc(e,r);var i=e;return r.replacer&&(i=r.replacer.call({"":i},"",i)),xe(r,0,i,!0,!0)?r.dump+`
`:""}pa.dump=kc;var Aa=An,Dc=pa;function xn(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}Z.Type=re;Z.Schema=Uo;Z.FAILSAFE_SCHEMA=Wo;Z.JSON_SCHEMA=Jo;Z.CORE_SCHEMA=cr;Z.DEFAULT_SCHEMA=Cn;Z.load=Aa.load;Z.loadAll=Aa.loadAll;Z.dump=Dc.dump;Z.YAMLException=zt;Z.types={binary:ta,float:Go,map:Ho,null:Yo,pairs:na,set:ia,timestamp:Zo,bool:qo,int:Ko,merge:ea,omap:ra,seq:Vo,str:jo};Z.safeLoad=xn("safeLoad","load");Z.safeLoadAll=xn("safeLoadAll","loadAll");Z.safeDump=xn("safeDump","dump");const{ParserError:Lc}=K,Bc=Z,{JSON_SCHEMA:Mc}=Z;var $c={order:200,allowEmpty:!0,canParse:[".yaml",".yml",".json"],async parse(e){let t=e.data;if(Buffer.isBuffer(t)&&(t=t.toString()),typeof t=="string")try{return Bc.load(t,{schema:Mc})}catch(r){throw new Lc(r.message,e.url)}else return t}};const{ParserError:Uc}=K;let jc=/\.(txt|htm|html|md|xml|js|min|map|css|scss|less|svg)$/i;var Vc={order:300,allowEmpty:!0,encoding:"utf8",canParse(e){return(typeof e.data=="string"||Buffer.isBuffer(e.data))&&jc.test(e.url)},parse(e){if(typeof e.data=="string")return e.data;if(Buffer.isBuffer(e.data))return e.data.toString(this.encoding);throw new Uc("data is not text",e.url)}};let Hc=/\.(jpeg|jpg|gif|png|bmp|ico)$/i;var Wc={order:400,allowEmpty:!0,canParse(e){return Buffer.isBuffer(e.data)&&Hc.test(e.url)},parse(e){return Buffer.isBuffer(e.data)?e.data:Buffer.from(e.data)}},vr={},Yc={get exports(){return vr},set exports(e){vr=e}},ot={},We={};Object.defineProperty(We,"__esModule",{value:!0});We.constants=void 0;We.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4};var cn={};typeof BigInt=="function"?cn.default=BigInt:cn.default=function(){throw new Error("BigInt is not supported in this environment.")};Object.defineProperty(ot,"__esModule",{value:!0});ot.Stats=void 0;var Ye=We,qc=cn,Kc=Ye.constants.S_IFMT,zc=Ye.constants.S_IFDIR,Gc=Ye.constants.S_IFREG,Jc=Ye.constants.S_IFBLK,Xc=Ye.constants.S_IFCHR,Qc=Ye.constants.S_IFLNK,Zc=Ye.constants.S_IFIFO,ef=Ye.constants.S_IFSOCK,Ta=function(){function e(){}return e.build=function(t,r){r===void 0&&(r=!1);var i=new e,n=t.uid,o=t.gid,a=t.atime,l=t.mtime,f=t.ctime,p=r?qc.default:function(v){return v};i.uid=p(n),i.gid=p(o),i.rdev=p(0),i.blksize=p(4096),i.ino=p(t.ino),i.size=p(t.getSize()),i.blocks=p(1),i.atime=a,i.mtime=l,i.ctime=f,i.birthtime=f,i.atimeMs=p(a.getTime()),i.mtimeMs=p(l.getTime());var m=p(f.getTime());return i.ctimeMs=m,i.birthtimeMs=m,i.dev=p(0),i.mode=p(t.mode),i.nlink=p(t.nlink),i},e.prototype._checkModeProperty=function(t){return(Number(this.mode)&Kc)===t},e.prototype.isDirectory=function(){return this._checkModeProperty(zc)},e.prototype.isFile=function(){return this._checkModeProperty(Gc)},e.prototype.isBlockDevice=function(){return this._checkModeProperty(Jc)},e.prototype.isCharacterDevice=function(){return this._checkModeProperty(Xc)},e.prototype.isSymbolicLink=function(){return this._checkModeProperty(Qc)},e.prototype.isFIFO=function(){return this._checkModeProperty(Zc)},e.prototype.isSocket=function(){return this._checkModeProperty(ef)},e}();ot.Stats=Ta;ot.default=Ta;var wt={},Pn={},Ar={};(function(e){var t=G&&G.__spreadArray||function(a,l,f){if(f||arguments.length===2)for(var p=0,m=l.length,v;p<m;p++)(v||!(p in l))&&(v||(v=Array.prototype.slice.call(l,0,p)),v[p]=l[p]);return a.concat(v||Array.prototype.slice.call(l))};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferFrom=e.bufferAllocUnsafe=e.Buffer=void 0;var r=As;Object.defineProperty(e,"Buffer",{enumerable:!0,get:function(){return r.Buffer}});function i(a){for(var l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];return new(r.Buffer.bind.apply(r.Buffer,t([void 0,a],l,!1)))}var n=r.Buffer.allocUnsafe||i;e.bufferAllocUnsafe=n;var o=r.Buffer.from||i;e.bufferFrom=o})(Ar);var kn={};(function(e){var t=G&&G.__extends||function(){var g=function(R,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,A){E.__proto__=A}||function(E,A){for(var C in A)Object.prototype.hasOwnProperty.call(A,C)&&(E[C]=A[C])},g(R,b)};return function(R,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");g(R,b);function E(){this.constructor=R}R.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.E=e.AssertionError=e.message=e.RangeError=e.TypeError=e.Error=void 0;var r=Ts,i=Rn(),n=typeof Symbol>"u"?"_kCode":Symbol("code"),o={};function a(g){return function(R){t(b,R);function b(E){for(var A=[],C=1;C<arguments.length;C++)A[C-1]=arguments[C];var T=R.call(this,p(E,A))||this;return T.code=E,T[n]=E,T.name="".concat(R.prototype.name," [").concat(T[n],"]"),T}return b}(g)}var l=typeof globalThis<"u"?globalThis:G,f=function(g){t(R,g);function R(b){var E=this;if(typeof b!="object"||b===null)throw new e.TypeError("ERR_INVALID_ARG_TYPE","options","object");return b.message?E=g.call(this,b.message)||this:E=g.call(this,"".concat(i.inspect(b.actual).slice(0,128)," ")+"".concat(b.operator," ").concat(i.inspect(b.expected).slice(0,128)))||this,E.generatedMessage=!b.message,E.name="AssertionError [ERR_ASSERTION]",E.code="ERR_ASSERTION",E.actual=b.actual,E.expected=b.expected,E.operator=b.operator,e.Error.captureStackTrace(E,b.stackStartFunction),E}return R}(l.Error);e.AssertionError=f;function p(g,R){r.strictEqual(typeof g,"string");var b=o[g];r(b,"An invalid error message key was used: ".concat(g,"."));var E;if(typeof b=="function")E=b;else{if(E=i.format,R===void 0||R.length===0)return b;R.unshift(b)}return String(E.apply(null,R))}e.message=p;function m(g,R){o[g]=typeof R=="function"?R:String(R)}e.E=m,e.Error=a(l.Error),e.TypeError=a(l.TypeError),e.RangeError=a(l.RangeError),m("ERR_ARG_NOT_ITERABLE","%s must be iterable"),m("ERR_ASSERTION","%s"),m("ERR_BUFFER_OUT_OF_BOUNDS",w),m("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),m("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),m("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),m("ERR_DNS_SET_SERVERS_FAILED",function(g,R){return'c-ares failed to set servers: "'.concat(g,'" [').concat(R,"]")}),m("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),m("ERR_ENCODING_NOT_SUPPORTED",function(g){return'The "'.concat(g,'" encoding is not supported')}),m("ERR_ENCODING_INVALID_ENCODED_DATA",function(g){return"The encoded data was not valid for encoding ".concat(g)}),m("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),m("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),m("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),m("ERR_INDEX_OUT_OF_RANGE","Index out of range"),m("ERR_INVALID_ARG_TYPE",v),m("ERR_INVALID_ARRAY_LENGTH",function(g,R,b){return r.strictEqual(typeof b,"number"),'The array "'.concat(g,'" (length ').concat(b,") must be of length ").concat(R,".")}),m("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),m("ERR_INVALID_CALLBACK","Callback must be a function"),m("ERR_INVALID_CHAR","Invalid character in %s"),m("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),m("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),m("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),m("ERR_INVALID_FILE_URL_PATH","File URL path %s"),m("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),m("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),m("ERR_INVALID_OPT_VALUE",function(g,R){return'The value "'.concat(String(R),'" is invalid for option "').concat(g,'"')}),m("ERR_INVALID_OPT_VALUE_ENCODING",function(g){return'The value "'.concat(String(g),'" is invalid for option "encoding"')}),m("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),m("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),m("ERR_INVALID_THIS",'Value of "this" must be of type %s'),m("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),m("ERR_INVALID_URL","Invalid URL: %s"),m("ERR_INVALID_URL_SCHEME",function(g){return"The URL must be ".concat(_(g,"scheme"))}),m("ERR_IPC_CHANNEL_CLOSED","Channel closed"),m("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),m("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),m("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),m("ERR_MISSING_ARGS",y),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),m("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),m("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),m("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),m("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),m("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),m("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),m("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),m("ERR_SOCKET_CANNOT_SEND","Unable to send data"),m("ERR_SOCKET_CLOSED","Socket is closed"),m("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),m("ERR_STDERR_CLOSE","process.stderr cannot be closed"),m("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),m("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),m("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),m("ERR_TLS_DH_PARAM_SIZE",function(g){return"DH parameter size ".concat(g," is less than 2048")}),m("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),m("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),m("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),m("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),m("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),m("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),m("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),m("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),m("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),m("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function v(g,R,b){r(g,"name is required");var E;R.includes("not ")?(E="must not be",R=R.split("not ")[1]):E="must be";var A;if(Array.isArray(g)){var C=g.map(function(x){return'"'.concat(x,'"')}).join(", ");A="The ".concat(C," arguments ").concat(E," ").concat(_(R,"type"))}else if(g.includes(" argument"))A="The ".concat(g," ").concat(E," ").concat(_(R,"type"));else{var T=g.includes(".")?"property":"argument";A='The "'.concat(g,'" ').concat(T," ").concat(E," ").concat(_(R,"type"))}return arguments.length>=3&&(A+=". Received type ".concat(b!==null?typeof b:"null")),A}function y(){for(var g=[],R=0;R<arguments.length;R++)g[R]=arguments[R];r(g.length>0,"At least one arg needs to be specified");var b="The ",E=g.length;switch(g=g.map(function(A){return'"'.concat(A,'"')}),E){case 1:b+="".concat(g[0]," argument");break;case 2:b+="".concat(g[0]," and ").concat(g[1]," arguments");break;default:b+=g.slice(0,E-1).join(", "),b+=", and ".concat(g[E-1]," arguments");break}return"".concat(b," must be specified")}function _(g,R){if(r(g,"expected is required"),r(typeof R=="string","thing is required"),Array.isArray(g)){var b=g.length;return r(b>0,"At least one expected value needs to be specified"),g=g.map(function(E){return String(E)}),b>2?"one of ".concat(R," ").concat(g.slice(0,b-1).join(", "),", or ")+g[b-1]:b===2?"one of ".concat(R," ").concat(g[0]," or ").concat(g[1]):"of ".concat(R," ").concat(g[0])}else return"of ".concat(R," ").concat(String(g))}function w(g,R){return R?"Attempt to write outside buffer bounds":'"'.concat(g,'" is outside of buffer bounds')}})(kn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.strToEncoding=e.assertEncoding=e.ENCODING_UTF8=void 0;var t=Ar,r=kn;e.ENCODING_UTF8="utf8";function i(o){if(o&&!t.Buffer.isEncoding(o))throw new r.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",o)}e.assertEncoding=i;function n(o,a){return!a||a===e.ENCODING_UTF8?o:a==="buffer"?new t.Buffer(o):new t.Buffer(o).toString(a)}e.strToEncoding=n})(Pn);Object.defineProperty(wt,"__esModule",{value:!0});wt.Dirent=void 0;var qe=We,tf=Pn,rf=qe.constants.S_IFMT,nf=qe.constants.S_IFDIR,of=qe.constants.S_IFREG,af=qe.constants.S_IFBLK,sf=qe.constants.S_IFCHR,uf=qe.constants.S_IFLNK,lf=qe.constants.S_IFIFO,cf=qe.constants.S_IFSOCK,Ca=function(){function e(){this.name="",this.mode=0}return e.build=function(t,r){var i=new e,n=t.getNode().mode;return i.name=(0,tf.strToEncoding)(t.getName(),r),i.mode=n,i},e.prototype._checkModeProperty=function(t){return(this.mode&rf)===t},e.prototype.isDirectory=function(){return this._checkModeProperty(nf)},e.prototype.isFile=function(){return this._checkModeProperty(of)},e.prototype.isBlockDevice=function(){return this._checkModeProperty(af)},e.prototype.isCharacterDevice=function(){return this._checkModeProperty(sf)},e.prototype.isSymbolicLink=function(){return this._checkModeProperty(uf)},e.prototype.isFIFO=function(){return this._checkModeProperty(lf)},e.prototype.isSocket=function(){return this._checkModeProperty(cf)},e}();wt.Dirent=Ca;wt.default=Ca;var Ia={};function be(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Ki(e,t){for(var r="",i=0,n=-1,o=0,a,l=0;l<=e.length;++l){if(l<e.length)a=e.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(n===l-1||o===1))if(n!==l-1&&o===2){if(r.length<2||i!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var f=r.lastIndexOf("/");if(f!==r.length-1){f===-1?(r="",i=0):(r=r.slice(0,f),i=r.length-1-r.lastIndexOf("/")),n=l,o=0;continue}}else if(r.length===2||r.length===1){r="",i=0,n=l,o=0;continue}}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(n+1,l):r=e.slice(n+1,l),i=l-n-1;n=l,o=0}else a===46&&o!==-1?++o:o=-1}return r}function ff(e,t){var r=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+i:r+e+i:i}var St={resolve:function(){for(var t="",r=!1,i,n=arguments.length-1;n>=-1&&!r;n--){var o;n>=0?o=arguments[n]:(i===void 0&&(i=process.cwd()),o=i),be(o),o.length!==0&&(t=o+"/"+t,r=o.charCodeAt(0)===47)}return t=Ki(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(be(t),t.length===0)return".";var r=t.charCodeAt(0)===47,i=t.charCodeAt(t.length-1)===47;return t=Ki(t,!r),t.length===0&&!r&&(t="."),t.length>0&&i&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return be(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,r=0;r<arguments.length;++r){var i=arguments[r];be(i),i.length>0&&(t===void 0?t=i:t+="/"+i)}return t===void 0?".":St.normalize(t)},relative:function(t,r){if(be(t),be(r),t===r||(t=St.resolve(t),r=St.resolve(r),t===r))return"";for(var i=1;i<t.length&&t.charCodeAt(i)===47;++i);for(var n=t.length,o=n-i,a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var l=r.length,f=l-a,p=o<f?o:f,m=-1,v=0;v<=p;++v){if(v===p){if(f>p){if(r.charCodeAt(a+v)===47)return r.slice(a+v+1);if(v===0)return r.slice(a+v)}else o>p&&(t.charCodeAt(i+v)===47?m=v:v===0&&(m=0));break}var y=t.charCodeAt(i+v),_=r.charCodeAt(a+v);if(y!==_)break;y===47&&(m=v)}var w="";for(v=i+m+1;v<=n;++v)(v===n||t.charCodeAt(v)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+r.slice(a+m):(a+=m,r.charCodeAt(a)===47&&++a,r.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(be(t),t.length===0)return".";for(var r=t.charCodeAt(0),i=r===47,n=-1,o=!0,a=t.length-1;a>=1;--a)if(r=t.charCodeAt(a),r===47){if(!o){n=a;break}}else o=!1;return n===-1?i?"/":".":i&&n===1?"//":t.slice(0,n)},basename:function(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');be(t);var i=0,n=-1,o=!0,a;if(r!==void 0&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var l=r.length-1,f=-1;for(a=t.length-1;a>=0;--a){var p=t.charCodeAt(a);if(p===47){if(!o){i=a+1;break}}else f===-1&&(o=!1,f=a+1),l>=0&&(p===r.charCodeAt(l)?--l===-1&&(n=a):(l=-1,n=f))}return i===n?n=f:n===-1&&(n=t.length),t.slice(i,n)}else{for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!o){i=a+1;break}}else n===-1&&(o=!1,n=a+1);return n===-1?"":t.slice(i,n)}},extname:function(t){be(t);for(var r=-1,i=0,n=-1,o=!0,a=0,l=t.length-1;l>=0;--l){var f=t.charCodeAt(l);if(f===47){if(!o){i=l+1;break}continue}n===-1&&(o=!1,n=l+1),f===46?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||n===-1||a===0||a===1&&r===n-1&&r===i+1?"":t.slice(r,n)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return ff("/",t)},parse:function(t){be(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return r;var i=t.charCodeAt(0),n=i===47,o;n?(r.root="/",o=1):o=0;for(var a=-1,l=0,f=-1,p=!0,m=t.length-1,v=0;m>=o;--m){if(i=t.charCodeAt(m),i===47){if(!p){l=m+1;break}continue}f===-1&&(p=!1,f=m+1),i===46?a===-1?a=m:v!==1&&(v=1):a!==-1&&(v=-1)}return a===-1||f===-1||v===0||v===1&&a===f-1&&a===l+1?f!==-1&&(l===0&&n?r.base=r.name=t.slice(1,f):r.base=r.name=t.slice(l,f)):(l===0&&n?(r.name=t.slice(1,a),r.base=t.slice(1,f)):(r.name=t.slice(l,a),r.base=t.slice(l,f)),r.ext=t.slice(a,f)),l>0?r.dir=t.slice(0,l-1):n&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};St.posix=St;var hf=St,Na={},bt={},yr={},df={get exports(){return yr},set exports(e){yr=e}},zi;function pf(){if(zi)return yr;zi=1;var e=df.exports={},t,r;function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=i}catch{t=i}try{typeof clearTimeout=="function"?r=clearTimeout:r=n}catch{r=n}})();function o(g){if(t===setTimeout)return setTimeout(g,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(g,0);try{return t(g,0)}catch{try{return t.call(null,g,0)}catch{return t.call(this,g,0)}}}function a(g){if(r===clearTimeout)return clearTimeout(g);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(g);try{return r(g)}catch{try{return r.call(null,g)}catch{return r.call(this,g)}}}var l=[],f=!1,p,m=-1;function v(){!f||!p||(f=!1,p.length?l=p.concat(l):m=-1,l.length&&y())}function y(){if(!f){var g=o(v);f=!0;for(var R=l.length;R;){for(p=l,l=[];++m<R;)p&&p[m].run();m=-1,R=l.length}p=null,f=!1,a(g)}}e.nextTick=function(g){var R=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)R[b-1]=arguments[b];l.push(new _(g,R)),l.length===1&&!f&&o(y)};function _(g,R){this.fun=g,this.array=R}_.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function w(){}return e.on=w,e.addListener=w,e.once=w,e.off=w,e.removeListener=w,e.removeAllListeners=w,e.emit=w,e.prependListener=w,e.prependOnceListener=w,e.listeners=function(g){return[]},e.binding=function(g){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(g){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},yr}var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});var fn;typeof setImmediate=="function"?fn=setImmediate.bind(typeof globalThis<"u"?globalThis:G):fn=setTimeout.bind(typeof globalThis<"u"?globalThis:G);Tr.default=fn;Object.defineProperty(bt,"__esModule",{value:!0});bt.createProcess=void 0;var mf=function(){if(typeof process<"u")return process;try{return pf()}catch{return}};function Fa(){var e=mf()||{};return e.cwd||(e.cwd=function(){return"/"}),e.nextTick||(e.nextTick=Tr.default),e.emitWarning||(e.emitWarning=function(t,r){console.warn("".concat(r).concat(r?": ":"").concat(t))}),e.env||(e.env={}),e}bt.createProcess=Fa;bt.default=Fa();(function(e){var t=G&&G.__extends||function(){var b=function(E,A){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(C[x]=T[x])},b(E,A)};return function(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");b(E,A);function C(){this.constructor=E}E.prototype=A===null?Object.create(A):(C.prototype=A.prototype,new C)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.File=e.Link=e.Node=e.SEP=void 0;var r=bt,i=Ar,n=We,o=wr,a=ot,l=n.constants.S_IFMT,f=n.constants.S_IFDIR,p=n.constants.S_IFREG,m=n.constants.S_IFLNK,v=n.constants.O_APPEND,y=function(){var b,E;return(E=(b=r.default.getuid)===null||b===void 0?void 0:b.call(r.default))!==null&&E!==void 0?E:0},_=function(){var b,E;return(E=(b=r.default.getgid)===null||b===void 0?void 0:b.call(r.default))!==null&&E!==void 0?E:0};e.SEP="/";var w=function(b){t(E,b);function E(A,C){C===void 0&&(C=438);var T=b.call(this)||this;return T.uid=y(),T.gid=_(),T.atime=new Date,T.mtime=new Date,T.ctime=new Date,T.perm=438,T.mode=p,T.nlink=1,T.perm=C,T.mode|=C,T.ino=A,T}return E.prototype.getString=function(A){return A===void 0&&(A="utf8"),this.getBuffer().toString(A)},E.prototype.setString=function(A){this.buf=(0,i.bufferFrom)(A,"utf8"),this.touch()},E.prototype.getBuffer=function(){return this.buf||this.setBuffer((0,i.bufferAllocUnsafe)(0)),(0,i.bufferFrom)(this.buf)},E.prototype.setBuffer=function(A){this.buf=(0,i.bufferFrom)(A),this.touch()},E.prototype.getSize=function(){return this.buf?this.buf.length:0},E.prototype.setModeProperty=function(A){this.mode=this.mode&~l|A},E.prototype.setIsFile=function(){this.setModeProperty(p)},E.prototype.setIsDirectory=function(){this.setModeProperty(f)},E.prototype.setIsSymlink=function(){this.setModeProperty(m)},E.prototype.isFile=function(){return(this.mode&l)===p},E.prototype.isDirectory=function(){return(this.mode&l)===f},E.prototype.isSymlink=function(){return(this.mode&l)===m},E.prototype.makeSymlink=function(A){this.symlink=A,this.setIsSymlink()},E.prototype.write=function(A,C,T,x){if(C===void 0&&(C=0),T===void 0&&(T=A.length),x===void 0&&(x=0),this.buf||(this.buf=(0,i.bufferAllocUnsafe)(0)),x+T>this.buf.length){var L=(0,i.bufferAllocUnsafe)(x+T);this.buf.copy(L,0,0,this.buf.length),this.buf=L}return A.copy(this.buf,x,C,C+T),this.touch(),T},E.prototype.read=function(A,C,T,x){C===void 0&&(C=0),T===void 0&&(T=A.byteLength),x===void 0&&(x=0),this.buf||(this.buf=(0,i.bufferAllocUnsafe)(0));var L=T;return L>A.byteLength&&(L=A.byteLength),L+x>this.buf.length&&(L=this.buf.length-x),this.buf.copy(A,C,x,x+L),L},E.prototype.truncate=function(A){if(A===void 0&&(A=0),!A)this.buf=(0,i.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,i.bufferAllocUnsafe)(0)),A<=this.buf.length)this.buf=this.buf.slice(0,A);else{var C=(0,i.bufferAllocUnsafe)(A);this.buf.copy(C),C.fill(0,this.buf.length),this.buf=C}this.touch()},E.prototype.chmod=function(A){this.perm=A,this.mode=this.mode&-512|A,this.touch()},E.prototype.chown=function(A,C){this.uid=A,this.gid=C,this.touch()},E.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},E.prototype.canRead=function(A,C){return A===void 0&&(A=y()),C===void 0&&(C=_()),!!(this.perm&4||C===this.gid&&this.perm&32||A===this.uid&&this.perm&256)},E.prototype.canWrite=function(A,C){return A===void 0&&(A=y()),C===void 0&&(C=_()),!!(this.perm&2||C===this.gid&&this.perm&16||A===this.uid&&this.perm&128)},E.prototype.del=function(){this.emit("delete",this)},E.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},E}(o.EventEmitter);e.Node=w;var g=function(b){t(E,b);function E(A,C,T){var x=b.call(this)||this;return x.children={},x._steps=[],x.ino=0,x.length=0,x.vol=A,x.parent=C,x.name=T,x.syncSteps(),x}return Object.defineProperty(E.prototype,"steps",{get:function(){return this._steps},set:function(A){this._steps=A;for(var C=0,T=Object.values(this.children);C<T.length;C++){var x=T[C];x==null||x.syncSteps()}},enumerable:!1,configurable:!0}),E.prototype.setNode=function(A){this.node=A,this.ino=A.ino},E.prototype.getNode=function(){return this.node},E.prototype.createChild=function(A,C){C===void 0&&(C=this.vol.createNode());var T=new E(this.vol,this,A);return T.setNode(C),C.isDirectory(),this.setChild(A,T),T},E.prototype.setChild=function(A,C){return C===void 0&&(C=new E(this.vol,this,A)),this.children[A]=C,C.parent=this,this.length++,this.emit("child:add",C,this),C},E.prototype.deleteChild=function(A){delete this.children[A.getName()],this.length--,this.emit("child:delete",A,this)},E.prototype.getChild=function(A){if(Object.hasOwnProperty.call(this.children,A))return this.children[A]},E.prototype.getPath=function(){return this.steps.join(e.SEP)},E.prototype.getName=function(){return this.steps[this.steps.length-1]},E.prototype.walk=function(A,C,T){if(C===void 0&&(C=A.length),T===void 0&&(T=0),T>=A.length)return this;if(T>=C)return this;var x=A[T],L=this.getChild(x);return L?L.walk(A,C,T+1):null},E.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},E.prototype.syncSteps=function(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]},E}(o.EventEmitter);e.Link=g;var R=function(){function b(E,A,C,T){this.position=0,this.link=E,this.node=A,this.flags=C,this.fd=T}return b.prototype.getString=function(E){return this.node.getString()},b.prototype.setString=function(E){this.node.setString(E)},b.prototype.getBuffer=function(){return this.node.getBuffer()},b.prototype.setBuffer=function(E){this.node.setBuffer(E)},b.prototype.getSize=function(){return this.node.getSize()},b.prototype.truncate=function(E){this.node.truncate(E)},b.prototype.seekTo=function(E){this.position=E},b.prototype.stats=function(){return a.default.build(this.node)},b.prototype.write=function(E,A,C,T){A===void 0&&(A=0),C===void 0&&(C=E.length),typeof T!="number"&&(T=this.position),this.flags&v&&(T=this.getSize());var x=this.node.write(E,A,C,T);return this.position=T+x,x},b.prototype.read=function(E,A,C,T){A===void 0&&(A=0),C===void 0&&(C=E.byteLength),typeof T!="number"&&(T=this.position);var x=this.node.read(E,A,C,T);return this.position=T+x,x},b.prototype.chmod=function(E){this.node.chmod(E)},b.prototype.chown=function(E,A){this.node.chown(E,A)},b}();e.File=R})(Na);var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});function vf(e,t,r){var i=setTimeout.apply(typeof globalThis<"u"?globalThis:G,arguments);return i&&typeof i=="object"&&typeof i.unref=="function"&&i.unref(),i}Dn.default=vf;var Jt={},Gi=G&&G.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,o;i<n;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.FileHandle=void 0;function $(e,t,r){return r===void 0&&(r=function(i){return i}),function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return new Promise(function(o,a){e[t].bind(e).apply(void 0,Gi(Gi([],i,!1),[function(l,f){return l?a(l):o(r(f))}],!1))})}}var mt=function(){function e(t,r){this.vol=t,this.fd=r}return e.prototype.appendFile=function(t,r){return $(this.vol,"appendFile")(this.fd,t,r)},e.prototype.chmod=function(t){return $(this.vol,"fchmod")(this.fd,t)},e.prototype.chown=function(t,r){return $(this.vol,"fchown")(this.fd,t,r)},e.prototype.close=function(){return $(this.vol,"close")(this.fd)},e.prototype.datasync=function(){return $(this.vol,"fdatasync")(this.fd)},e.prototype.read=function(t,r,i,n){return $(this.vol,"read",function(o){return{bytesRead:o,buffer:t}})(this.fd,t,r,i,n)},e.prototype.readFile=function(t){return $(this.vol,"readFile")(this.fd,t)},e.prototype.stat=function(t){return $(this.vol,"fstat")(this.fd,t)},e.prototype.sync=function(){return $(this.vol,"fsync")(this.fd)},e.prototype.truncate=function(t){return $(this.vol,"ftruncate")(this.fd,t)},e.prototype.utimes=function(t,r){return $(this.vol,"futimes")(this.fd,t,r)},e.prototype.write=function(t,r,i,n){return $(this.vol,"write",function(o){return{bytesWritten:o,buffer:t}})(this.fd,t,r,i,n)},e.prototype.writeFile=function(t,r){return $(this.vol,"writeFile")(this.fd,t,r)},e}();Jt.FileHandle=mt;function yf(e){return typeof Promise>"u"?null:{FileHandle:mt,access:function(t,r){return $(e,"access")(t,r)},appendFile:function(t,r,i){return $(e,"appendFile")(t instanceof mt?t.fd:t,r,i)},chmod:function(t,r){return $(e,"chmod")(t,r)},chown:function(t,r,i){return $(e,"chown")(t,r,i)},copyFile:function(t,r,i){return $(e,"copyFile")(t,r,i)},lchmod:function(t,r){return $(e,"lchmod")(t,r)},lchown:function(t,r,i){return $(e,"lchown")(t,r,i)},link:function(t,r){return $(e,"link")(t,r)},lstat:function(t,r){return $(e,"lstat")(t,r)},mkdir:function(t,r){return $(e,"mkdir")(t,r)},mkdtemp:function(t,r){return $(e,"mkdtemp")(t,r)},open:function(t,r,i){return $(e,"open",function(n){return new mt(e,n)})(t,r,i)},readdir:function(t,r){return $(e,"readdir")(t,r)},readFile:function(t,r){return $(e,"readFile")(t instanceof mt?t.fd:t,r)},readlink:function(t,r){return $(e,"readlink")(t,r)},realpath:function(t,r){return $(e,"realpath")(t,r)},rename:function(t,r){return $(e,"rename")(t,r)},rmdir:function(t){return $(e,"rmdir")(t)},rm:function(t,r){return $(e,"rm")(t,r)},stat:function(t,r){return $(e,"stat")(t,r)},symlink:function(t,r,i){return $(e,"symlink")(t,r,i)},truncate:function(t,r){return $(e,"truncate")(t,r)},unlink:function(t){return $(e,"unlink")(t)},utimes:function(t,r,i){return $(e,"utimes")(t,r,i)},writeFile:function(t,r,i){return $(e,"writeFile")(t instanceof mt?t.fd:t,r,i)}}}Jt.default=yf;var kt={},Ji;function gf(){if(Ji)return kt;Ji=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.unixify=n,kt.correctPath=o;var e=process.platform==="win32";function t(a){var l=a.length-1;if(l<2)return a;for(;r(a,l);)l--;return a.substr(0,l+1)}function r(a,l){var f=a[l];return l>0&&(f==="/"||e&&f==="\\")}function i(a,l){if(typeof a!="string")throw new TypeError("expected a string");return a=a.replace(/[\\\/]+/g,"/"),l!==!1&&(a=t(a)),a}function n(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e?(a=i(a,l),a.replace(/^([a-zA-Z]+:|\.\/)/,"")):a}function o(a){return n(a.replace(/^\\\\\?\\.:\\/,"\\"))}return kt}(function(e){var t=G&&G.__extends||function(){var h=function(s,u){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var S in d)Object.prototype.hasOwnProperty.call(d,S)&&(c[S]=d[S])},h(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");h(s,u);function c(){this.constructor=s}s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=G&&G.__spreadArray||function(h,s,u){if(u||arguments.length===2)for(var c=0,d=s.length,S;c<d;c++)(S||!(c in s))&&(S||(S=Array.prototype.slice.call(s,0,c)),S[c]=s[c]);return h.concat(S||Array.prototype.slice.call(s))};Object.defineProperty(e,"__esModule",{value:!0}),e.FSWatcher=e.StatWatcher=e.Volume=e.toUnixTimestamp=e.bufferToEncoding=e.dataToBuffer=e.dataToStr=e.pathToSteps=e.filenameToSteps=e.pathToFilename=e.flagsToNumber=e.FLAGS=void 0;var i=hf,n=Na,o=ot,a=wt,l=Ar,f=Tr,p=bt,m=Dn,v=Rs(),y=We,_=wr,w=Pn,g=kn,R=Rn(),b=Jt,E=i.resolve,A=y.constants.O_RDONLY,C=y.constants.O_WRONLY,T=y.constants.O_RDWR,x=y.constants.O_CREAT,L=y.constants.O_EXCL,Q=y.constants.O_TRUNC,ue=y.constants.O_APPEND,ne=y.constants.O_SYNC,At=y.constants.O_DIRECTORY,Tt=y.constants.F_OK,st=y.constants.COPYFILE_EXCL,Pe=y.constants.COPYFILE_FICLONE_FORCE,Ke=i.posix?i.posix:i,te=Ke.sep,ke=Ke.relative,ze=Ke.join,Ge=Ke.dirname,Ct=p.default.platform==="win32",Va=128,Ie={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},Ha=function(h){return"Expected options to be either an object or a string, but got ".concat(h," instead")},H="ENOENT",Pr="EBADF",Jn="EINVAL",Wa="EPERM",Ya="EPROTO",De="EEXIST",Je="ENOTDIR",Xn="EMFILE",Qn="EACCES",kr="EISDIR",Zn="ENOTEMPTY",ei="ENOSYS",ti="ERR_FS_EISDIR";function qa(h,s,u,c){s===void 0&&(s=""),u===void 0&&(u=""),c===void 0&&(c="");var d="";switch(u&&(d=" '".concat(u,"'")),c&&(d+=" -> '".concat(c,"'")),h){case H:return"ENOENT: no such file or directory, ".concat(s).concat(d);case Pr:return"EBADF: bad file descriptor, ".concat(s).concat(d);case Jn:return"EINVAL: invalid argument, ".concat(s).concat(d);case Wa:return"EPERM: operation not permitted, ".concat(s).concat(d);case Ya:return"EPROTO: protocol error, ".concat(s).concat(d);case De:return"EEXIST: file already exists, ".concat(s).concat(d);case Je:return"ENOTDIR: not a directory, ".concat(s).concat(d);case kr:return"EISDIR: illegal operation on a directory, ".concat(s).concat(d);case Qn:return"EACCES: permission denied, ".concat(s).concat(d);case Zn:return"ENOTEMPTY: directory not empty, ".concat(s).concat(d);case Xn:return"EMFILE: too many open files, ".concat(s).concat(d);case ei:return"ENOSYS: function not implemented, ".concat(s).concat(d);case ti:return"[ERR_FS_EISDIR]: Path is a directory: ".concat(s," returned EISDIR (is a directory) ").concat(u);default:return"".concat(h,": error occurred, ").concat(s).concat(d)}}function M(h,s,u,c,d){s===void 0&&(s=""),u===void 0&&(u=""),c===void 0&&(c=""),d===void 0&&(d=Error);var S=new d(qa(h,s,u,c));return S.code=h,u&&(S.path=u),S}var Xe;(function(h){h[h.r=A]="r",h[h["r+"]=T]="r+",h[h.rs=A|ne]="rs",h[h.sr=h.rs]="sr",h[h["rs+"]=T|ne]="rs+",h[h["sr+"]=h["rs+"]]="sr+",h[h.w=C|x|Q]="w",h[h.wx=C|x|Q|L]="wx",h[h.xw=h.wx]="xw",h[h["w+"]=T|x|Q]="w+",h[h["wx+"]=T|x|Q|L]="wx+",h[h["xw+"]=h["wx+"]]="xw+",h[h.a=C|ue|x]="a",h[h.ax=C|ue|x|L]="ax",h[h.xa=h.ax]="xa",h[h["a+"]=T|ue|x]="a+",h[h["ax+"]=T|ue|x|L]="ax+",h[h["xa+"]=h["ax+"]]="xa+"})(Xe=e.FLAGS||(e.FLAGS={}));function Qe(h){if(typeof h=="number")return h;if(typeof h=="string"){var s=Xe[h];if(typeof s<"u")return s}throw new g.TypeError("ERR_INVALID_OPT_VALUE","flags",h)}e.flagsToNumber=Qe;function Dr(h,s){var u;if(s){var c=typeof s;switch(c){case"string":u=Object.assign({},h,{encoding:s});break;case"object":u=Object.assign({},h,s);break;default:throw TypeError(Ha(c))}}else return h;return u.encoding!=="buffer"&&(0,w.assertEncoding)(u.encoding),u}function Ze(h){return function(s){return Dr(h,s)}}function ie(h){if(typeof h!="function")throw TypeError(Ie.CB);return h}function ut(h){return function(s,u){return typeof s=="function"?[h(),s]:[h(s),ie(u)]}}var Lr={encoding:"utf8"},Zt=Ze(Lr),ri=ut(Zt),Ka={flag:"r"},ni=Ze(Ka),ii={encoding:"utf8",mode:438,flag:Xe[Xe.w]},oi=Ze(ii),ai={encoding:"utf8",mode:438,flag:Xe[Xe.a]},si=Ze(ai),za=ut(si),Ga=Lr,ui=Ze(Ga),Ja=ut(ui),li={mode:511,recursive:!1},ci=function(h){return typeof h=="number"?Object.assign({},li,{mode:h}):Object.assign({},li,h)},Xa={recursive:!1},fi=function(h){return Object.assign({},Xa,h)},Qa=Ze(Lr),Za=ut(Qa),es={encoding:"utf8",withFileTypes:!1},hi=Ze(es),ts=ut(hi),rs={bigint:!1},It=function(h){return h===void 0&&(h={}),Object.assign({},rs,h)},Br=function(h,s){return typeof h=="function"?[It(),h]:[It(h),ie(s)]};function ns(h){if(h.hostname!=="")throw new g.TypeError("ERR_INVALID_FILE_URL_HOST",p.default.platform);for(var s=h.pathname,u=0;u<s.length;u++)if(s[u]==="%"){var c=s.codePointAt(u+2)|32;if(s[u+1]==="2"&&c===102)throw new g.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(s)}function k(h){if(typeof h!="string"&&!l.Buffer.isBuffer(h)){try{if(!(h instanceof rn.URL))throw new TypeError(Ie.PATH_STR)}catch{throw new TypeError(Ie.PATH_STR)}h=ns(h)}var s=String(h);return Mr(s),s}e.pathToFilename=k;var Nt=function(h,s){return s===void 0&&(s=p.default.cwd()),E(s,h)};if(Ct){var is=Nt,os=gf().unixify;Nt=function(h,s){return os(is(h,s))}}function Y(h,s){var u=Nt(h,s),c=u.substring(1);return c?c.split(te):[]}e.filenameToSteps=Y;function as(h){return Y(k(h))}e.pathToSteps=as;function ss(h,s){return s===void 0&&(s=w.ENCODING_UTF8),l.Buffer.isBuffer(h)?h.toString(s):h instanceof Uint8Array?(0,l.bufferFrom)(h).toString(s):String(h)}e.dataToStr=ss;function Ft(h,s){return s===void 0&&(s=w.ENCODING_UTF8),l.Buffer.isBuffer(h)?h:h instanceof Uint8Array?(0,l.bufferFrom)(h):(0,l.bufferFrom)(String(h),s)}e.dataToBuffer=Ft;function di(h,s){return!s||s==="buffer"?h:h.toString(s)}e.bufferToEncoding=di;function Mr(h,s){if((""+h).indexOf("\0")!==-1){var u=new Error("Path must be a string without null bytes");if(u.code=H,typeof s!="function")throw u;return p.default.nextTick(s,u),!1}return!0}function us(h,s){if(typeof h=="number")return h;if(typeof h=="string")return parseInt(h,8);if(s)return se(s)}function se(h,s){var u=us(h,s);if(typeof u!="number"||isNaN(u))throw new TypeError(Ie.MODE_INT);return u}function et(h){return h>>>0===h}function xt(h){if(!et(h))throw TypeError(Ie.FD)}function Ne(h){if(typeof h=="string"&&+h==h)return+h;if(h instanceof Date)return h.getTime()/1e3;if(isFinite(h))return h<0?Date.now()/1e3:h;throw new Error("Cannot parse time: "+h)}e.toUnixTimestamp=Ne;function lt(h){if(typeof h!="number")throw TypeError(Ie.UID)}function ct(h){if(typeof h!="number")throw TypeError(Ie.GID)}function ls(h){var s={};function u(c,d){for(var S in d){var O=d[S],I=ze(c,S);typeof O=="string"?s[I]=O:typeof O=="object"&&O!==null&&Object.keys(O).length>0?u(I,O):s[I]=null}}return u("",h),s}var cs=function(){function h(s){s===void 0&&(s={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=(0,b.default)(this),this.statWatchers={},this.props=Object.assign({Node:n.Node,Link:n.Link,File:n.File},s);var u=this.createLink();u.setNode(this.createNode(!0));var c=this;this.StatWatcher=function(O){t(I,O);function I(){return O.call(this,c)||this}return I}(pi);var d=we;this.ReadStream=function(O){t(I,O);function I(){for(var F=[],P=0;P<arguments.length;P++)F[P]=arguments[P];return O.apply(this,r([c],F,!1))||this}return I}(d);var S=ce;this.WriteStream=function(O){t(I,O);function I(){for(var F=[],P=0;P<arguments.length;P++)F[P]=arguments[P];return O.apply(this,r([c],F,!1))||this}return I}(S),this.FSWatcher=function(O){t(I,O);function I(){return O.call(this,c)||this}return I}(vi),this.root=u}return h.fromJSON=function(s,u){var c=new h;return c.fromJSON(s,u),c},h.fromNestedJSON=function(s,u){var c=new h;return c.fromNestedJSON(s,u),c},Object.defineProperty(h.prototype,"promises",{get:function(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0}),h.prototype.createLink=function(s,u,c,d){if(c===void 0&&(c=!1),!s)return new this.props.Link(this,null,"");if(!u)throw new Error("createLink: name cannot be empty");return s.createChild(u,this.createNode(c,d))},h.prototype.deleteLink=function(s){var u=s.parent;return u?(u.deleteChild(s),!0):!1},h.prototype.newInoNumber=function(){var s=this.releasedInos.pop();return s||(this.ino=(this.ino+1)%4294967295,this.ino)},h.prototype.newFdNumber=function(){var s=this.releasedFds.pop();return typeof s=="number"?s:h.fd--},h.prototype.createNode=function(s,u){s===void 0&&(s=!1);var c=new this.props.Node(this.newInoNumber(),u);return s&&c.setIsDirectory(),this.inodes[c.ino]=c,c},h.prototype.getNode=function(s){return this.inodes[s]},h.prototype.deleteNode=function(s){s.del(),delete this.inodes[s.ino],this.releasedInos.push(s.ino)},h.prototype.genRndStr=function(){var s=(Math.random()+1).toString(36).substring(2,8);return s.length===6?s:this.genRndStr()},h.prototype.getLink=function(s){return this.root.walk(s)},h.prototype.getLinkOrThrow=function(s,u){var c=Y(s),d=this.getLink(c);if(!d)throw M(H,u,s);return d},h.prototype.getResolvedLink=function(s){for(var u=typeof s=="string"?Y(s):s,c=this.root,d=0;d<u.length;){var S=u[d];if(c=c.getChild(S),!c)return null;var O=c.getNode();if(O.isSymlink()){u=O.symlink.concat(u.slice(d+1)),c=this.root,d=0;continue}d++}return c},h.prototype.getResolvedLinkOrThrow=function(s,u){var c=this.getResolvedLink(s);if(!c)throw M(H,u,s);return c},h.prototype.resolveSymlinks=function(s){return this.getResolvedLink(s.steps.slice(1))},h.prototype.getLinkAsDirOrThrow=function(s,u){var c=this.getLinkOrThrow(s,u);if(!c.getNode().isDirectory())throw M(Je,u,s);return c},h.prototype.getLinkParent=function(s){return this.root.walk(s,s.length-1)},h.prototype.getLinkParentAsDirOrThrow=function(s,u){var c=s instanceof Array?s:Y(s),d=this.getLinkParent(c);if(!d)throw M(H,u,te+c.join(te));if(!d.getNode().isDirectory())throw M(Je,u,te+c.join(te));return d},h.prototype.getFileByFd=function(s){return this.fds[String(s)]},h.prototype.getFileByFdOrThrow=function(s,u){if(!et(s))throw TypeError(Ie.FD);var c=this.getFileByFd(s);if(!c)throw M(Pr,u);return c},h.prototype.wrapAsync=function(s,u,c){var d=this;ie(c),(0,f.default)(function(){var S;try{S=s.apply(d,u)}catch(O){c(O);return}c(null,S)})},h.prototype._toJSON=function(s,u,c){var d;s===void 0&&(s=this.root),u===void 0&&(u={});var S=!0,O=s.children;s.getNode().isFile()&&(O=(d={},d[s.getName()]=s.parent.getChild(s.getName()),d),s=s.parent);for(var I in O){S=!1;var F=s.getChild(I);if(!F)throw new Error("_toJSON: unexpected undefined");var P=F.getNode();if(P.isFile()){var B=F.getPath();c&&(B=ke(c,B)),u[B]=P.getString()}else P.isDirectory()&&this._toJSON(F,u,c)}var W=s.getPath();return c&&(W=ke(c,W)),W&&S&&(u[W]=null),u},h.prototype.toJSON=function(s,u,c){u===void 0&&(u={}),c===void 0&&(c=!1);var d=[];if(s){s instanceof Array||(s=[s]);for(var S=0,O=s;S<O.length;S++){var I=O[S],F=k(I),P=this.getResolvedLink(F);P&&d.push(P)}}else d.push(this.root);if(!d.length)return u;for(var B=0,W=d;B<W.length;B++){var P=W[B];this._toJSON(P,u,c?P.getPath():"")}return u},h.prototype.fromJSON=function(s,u){u===void 0&&(u=p.default.cwd());for(var c in s){var d=s[c];if(c=Nt(c,u),typeof d=="string"){var S=Ge(c);this.mkdirpBase(S,511),this.writeFileSync(c,d)}else this.mkdirpBase(c,511)}},h.prototype.fromNestedJSON=function(s,u){this.fromJSON(ls(s),u)},h.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},h.prototype.mountSync=function(s,u){this.fromJSON(u,s)},h.prototype.openLink=function(s,u,c){if(c===void 0&&(c=!0),this.openFiles>=this.maxFiles)throw M(Xn,"open",s.getPath());var d=s;if(c&&(d=this.resolveSymlinks(s)),!d)throw M(H,"open",s.getPath());var S=d.getNode();if(S.isDirectory()){if((u&(A|T|C))!==A)throw M(kr,"open",s.getPath())}else if(u&At)throw M(Je,"open",s.getPath());if(!(u&C)&&!S.canRead())throw M(Qn,"open",s.getPath());var O=new this.props.File(s,S,u,this.newFdNumber());return this.fds[O.fd]=O,this.openFiles++,u&Q&&O.truncate(),O},h.prototype.openFile=function(s,u,c,d){d===void 0&&(d=!0);var S=Y(s),O=d?this.getResolvedLink(S):this.getLink(S);if(O&&u&L)throw M(De,"open",s);if(!O&&u&x){var I=this.getResolvedLink(S.slice(0,S.length-1));if(!I)throw M(H,"open",te+S.join(te));u&x&&typeof c=="number"&&(O=this.createLink(I,S[S.length-1],!1,c))}if(O)return this.openLink(O,u,d);throw M(H,"open",s)},h.prototype.openBase=function(s,u,c,d){d===void 0&&(d=!0);var S=this.openFile(s,u,c,d);if(!S)throw M(H,"open",s);return S.fd},h.prototype.openSync=function(s,u,c){c===void 0&&(c=438);var d=se(c),S=k(s),O=Qe(u);return this.openBase(S,O,d)},h.prototype.open=function(s,u,c,d){var S=c,O=d;typeof c=="function"&&(S=438,O=c),S=S||438;var I=se(S),F=k(s),P=Qe(u);this.wrapAsync(this.openBase,[F,P,I],O)},h.prototype.closeFile=function(s){this.fds[s.fd]&&(this.openFiles--,delete this.fds[s.fd],this.releasedFds.push(s.fd))},h.prototype.closeSync=function(s){xt(s);var u=this.getFileByFdOrThrow(s,"close");this.closeFile(u)},h.prototype.close=function(s,u){xt(s),this.wrapAsync(this.closeSync,[s],u)},h.prototype.openFileOrGetById=function(s,u,c){if(typeof s=="number"){var d=this.fds[s];if(!d)throw M(H);return d}else return this.openFile(k(s),u,c)},h.prototype.readBase=function(s,u,c,d,S){var O=this.getFileByFdOrThrow(s);return O.read(u,Number(c),Number(d),S)},h.prototype.readSync=function(s,u,c,d,S){return xt(s),this.readBase(s,u,c,d,S)},h.prototype.read=function(s,u,c,d,S,O){var I=this;if(ie(O),d===0)return p.default.nextTick(function(){O&&O(null,0,u)});(0,f.default)(function(){try{var F=I.readBase(s,u,c,d,S);O(null,F,u)}catch(P){O(P)}})},h.prototype.readFileBase=function(s,u,c){var d,S=typeof s=="number",O=S&&et(s),I;if(O)I=s;else{var F=k(s),P=Y(F),B=this.getResolvedLink(P);if(B){var W=B.getNode();if(W.isDirectory())throw M(kr,"open",B.getPath())}I=this.openSync(s,u)}try{d=di(this.getFileByFdOrThrow(I).getBuffer(),c)}finally{O||this.closeSync(I)}return d},h.prototype.readFileSync=function(s,u){var c=ni(u),d=Qe(c.flag);return this.readFileBase(s,d,c.encoding)},h.prototype.readFile=function(s,u,c){var d=ut(ni)(u,c),S=d[0],O=d[1],I=Qe(S.flag);this.wrapAsync(this.readFileBase,[s,I,S.encoding],O)},h.prototype.writeBase=function(s,u,c,d,S){var O=this.getFileByFdOrThrow(s,"write");return O.write(u,c,d,S)},h.prototype.writeSync=function(s,u,c,d,S){xt(s);var O,I,F,P,B=typeof u!="string";B?(I=(c||0)|0,F=d,P=S):(P=c,O=d);var W=Ft(u,O);return B?typeof F>"u"&&(F=W.length):(I=0,F=W.length),this.writeBase(s,W,I,F,P)},h.prototype.write=function(s,u,c,d,S,O){var I=this;xt(s);var F,P,B,W,de,$r=typeof u,yi=typeof c,gi=typeof d,_i=typeof S;$r!=="string"?yi==="function"?de=c:gi==="function"?(F=c|0,de=d):_i==="function"?(F=c|0,P=d,de=S):(F=c|0,P=d,B=S,de=O):yi==="function"?de=c:gi==="function"?(B=c,de=d):_i==="function"&&(B=c,W=d,de=S);var er=Ft(u,W);$r!=="string"?typeof P>"u"&&(P=er.length):(F=0,P=er.length);var Ur=ie(de);(0,f.default)(function(){try{var Si=I.writeBase(s,er,F,P,B);$r!=="string"?Ur(null,Si,er):Ur(null,Si,u)}catch(ds){Ur(ds)}})},h.prototype.writeFileBase=function(s,u,c,d){var S=typeof s=="number",O;S?O=s:O=this.openBase(k(s),c,d);var I=0,F=u.length,P=c&ue?void 0:0;try{for(;F>0;){var B=this.writeSync(O,u,I,F,P);I+=B,F-=B,P!==void 0&&(P+=B)}}finally{S||this.closeSync(O)}},h.prototype.writeFileSync=function(s,u,c){var d=oi(c),S=Qe(d.flag),O=se(d.mode),I=Ft(u,d.encoding);this.writeFileBase(s,I,S,O)},h.prototype.writeFile=function(s,u,c,d){var S=c,O=d;typeof c=="function"&&(S=ii,O=c);var I=ie(O),F=oi(S),P=Qe(F.flag),B=se(F.mode),W=Ft(u,F.encoding);this.wrapAsync(this.writeFileBase,[s,W,P,B],I)},h.prototype.linkBase=function(s,u){var c=Y(s),d=this.getLink(c);if(!d)throw M(H,"link",s,u);var S=Y(u),O=this.getLinkParent(S);if(!O)throw M(H,"link",s,u);var I=S[S.length-1];if(O.getChild(I))throw M(De,"link",s,u);var F=d.getNode();F.nlink++,O.createChild(I,F)},h.prototype.copyFileBase=function(s,u,c){var d=this.readFileSync(s);if(c&st&&this.existsSync(u))throw M(De,"copyFile",s,u);if(c&Pe)throw M(ei,"copyFile",s,u);this.writeFileBase(u,d,Xe.w,438)},h.prototype.copyFileSync=function(s,u,c){var d=k(s),S=k(u);return this.copyFileBase(d,S,(c||0)|0)},h.prototype.copyFile=function(s,u,c,d){var S=k(s),O=k(u),I,F;typeof c=="function"?(I=0,F=c):(I=c,F=d),ie(F),this.wrapAsync(this.copyFileBase,[S,O,I],F)},h.prototype.linkSync=function(s,u){var c=k(s),d=k(u);this.linkBase(c,d)},h.prototype.link=function(s,u,c){var d=k(s),S=k(u);this.wrapAsync(this.linkBase,[d,S],c)},h.prototype.unlinkBase=function(s){var u=Y(s),c=this.getLink(u);if(!c)throw M(H,"unlink",s);if(c.length)throw Error("Dir not empty...");this.deleteLink(c);var d=c.getNode();d.nlink--,d.nlink<=0&&this.deleteNode(d)},h.prototype.unlinkSync=function(s){var u=k(s);this.unlinkBase(u)},h.prototype.unlink=function(s,u){var c=k(s);this.wrapAsync(this.unlinkBase,[c],u)},h.prototype.symlinkBase=function(s,u){var c=Y(u),d=this.getLinkParent(c);if(!d)throw M(H,"symlink",s,u);var S=c[c.length-1];if(d.getChild(S))throw M(De,"symlink",s,u);var O=d.createChild(S);return O.getNode().makeSymlink(Y(s)),O},h.prototype.symlinkSync=function(s,u,c){var d=k(s),S=k(u);this.symlinkBase(d,S)},h.prototype.symlink=function(s,u,c,d){var S=ie(typeof c=="function"?c:d),O=k(s),I=k(u);this.wrapAsync(this.symlinkBase,[O,I],S)},h.prototype.realpathBase=function(s,u){var c=Y(s),d=this.getResolvedLink(c);if(!d)throw M(H,"realpath",s);return(0,w.strToEncoding)(d.getPath()||"/",u)},h.prototype.realpathSync=function(s,u){return this.realpathBase(k(s),ui(u).encoding)},h.prototype.realpath=function(s,u,c){var d=Ja(u,c),S=d[0],O=d[1],I=k(s);this.wrapAsync(this.realpathBase,[I,S.encoding],O)},h.prototype.lstatBase=function(s,u,c){u===void 0&&(u=!1),c===void 0&&(c=!1);var d=this.getLink(Y(s));if(d)return o.default.build(d.getNode(),u);if(c)throw M(H,"lstat",s)},h.prototype.lstatSync=function(s,u){var c=It(u),d=c.throwIfNoEntry,S=d===void 0?!0:d,O=c.bigint,I=O===void 0?!1:O;return this.lstatBase(k(s),I,S)},h.prototype.lstat=function(s,u,c){var d=Br(u,c),S=d[0],O=S.throwIfNoEntry,I=O===void 0?!0:O,F=S.bigint,P=F===void 0?!1:F,B=d[1];this.wrapAsync(this.lstatBase,[k(s),P,I],B)},h.prototype.statBase=function(s,u,c){u===void 0&&(u=!1),c===void 0&&(c=!0);var d=this.getResolvedLink(Y(s));if(d)return o.default.build(d.getNode(),u);if(c)throw M(H,"stat",s)},h.prototype.statSync=function(s,u){var c=It(u),d=c.bigint,S=d===void 0?!0:d,O=c.throwIfNoEntry,I=O===void 0?!0:O;return this.statBase(k(s),S,I)},h.prototype.stat=function(s,u,c){var d=Br(u,c),S=d[0],O=S.bigint,I=O===void 0?!1:O,F=S.throwIfNoEntry,P=F===void 0?!0:F,B=d[1];this.wrapAsync(this.statBase,[k(s),I,P],B)},h.prototype.fstatBase=function(s,u){u===void 0&&(u=!1);var c=this.getFileByFd(s);if(!c)throw M(Pr,"fstat");return o.default.build(c.node,u)},h.prototype.fstatSync=function(s,u){return this.fstatBase(s,It(u).bigint)},h.prototype.fstat=function(s,u,c){var d=Br(u,c),S=d[0],O=d[1];this.wrapAsync(this.fstatBase,[s,S.bigint],O)},h.prototype.renameBase=function(s,u){var c=this.getLink(Y(s));if(!c)throw M(H,"rename",s,u);var d=Y(u),S=this.getLinkParent(d);if(!S)throw M(H,"rename",s,u);var O=c.parent;O&&O.deleteChild(c);var I=d[d.length-1];c.name=I,c.steps=r(r([],S.steps,!0),[I],!1),S.setChild(c.getName(),c)},h.prototype.renameSync=function(s,u){var c=k(s),d=k(u);this.renameBase(c,d)},h.prototype.rename=function(s,u,c){var d=k(s),S=k(u);this.wrapAsync(this.renameBase,[d,S],c)},h.prototype.existsBase=function(s){return!!this.statBase(s)},h.prototype.existsSync=function(s){try{return this.existsBase(k(s))}catch{return!1}},h.prototype.exists=function(s,u){var c=this,d=k(s);if(typeof u!="function")throw Error(Ie.CB);(0,f.default)(function(){try{u(c.existsBase(d))}catch{u(!1)}})},h.prototype.accessBase=function(s,u){this.getLinkOrThrow(s,"access")},h.prototype.accessSync=function(s,u){u===void 0&&(u=Tt);var c=k(s);u=u|0,this.accessBase(c,u)},h.prototype.access=function(s,u,c){var d=Tt,S;typeof u!="function"?(d=u|0,S=ie(c)):S=u;var O=k(s);this.wrapAsync(this.accessBase,[O,d],S)},h.prototype.appendFileSync=function(s,u,c){c===void 0&&(c=ai);var d=si(c);(!d.flag||et(s))&&(d.flag="a"),this.writeFileSync(s,u,d)},h.prototype.appendFile=function(s,u,c,d){var S=za(c,d),O=S[0],I=S[1];(!O.flag||et(s))&&(O.flag="a"),this.writeFile(s,u,O,I)},h.prototype.readdirBase=function(s,u){var c=Y(s),d=this.getResolvedLink(c);if(!d)throw M(H,"readdir",s);var S=d.getNode();if(!S.isDirectory())throw M(Je,"scandir",s);if(u.withFileTypes){var O=[];for(var I in d.children){var F=d.getChild(I);F&&O.push(a.default.build(F,u.encoding))}return!Ct&&u.encoding!=="buffer"&&O.sort(function(W,de){return W.name<de.name?-1:W.name>de.name?1:0}),O}var P=[];for(var B in d.children)P.push((0,w.strToEncoding)(B,u.encoding));return!Ct&&u.encoding!=="buffer"&&P.sort(),P},h.prototype.readdirSync=function(s,u){var c=hi(u),d=k(s);return this.readdirBase(d,c)},h.prototype.readdir=function(s,u,c){var d=ts(u,c),S=d[0],O=d[1],I=k(s);this.wrapAsync(this.readdirBase,[I,S],O)},h.prototype.readlinkBase=function(s,u){var c=this.getLinkOrThrow(s,"readlink"),d=c.getNode();if(!d.isSymlink())throw M(Jn,"readlink",s);var S=te+d.symlink.join(te);return(0,w.strToEncoding)(S,u)},h.prototype.readlinkSync=function(s,u){var c=Zt(u),d=k(s);return this.readlinkBase(d,c.encoding)},h.prototype.readlink=function(s,u,c){var d=ri(u,c),S=d[0],O=d[1],I=k(s);this.wrapAsync(this.readlinkBase,[I,S.encoding],O)},h.prototype.fsyncBase=function(s){this.getFileByFdOrThrow(s,"fsync")},h.prototype.fsyncSync=function(s){this.fsyncBase(s)},h.prototype.fsync=function(s,u){this.wrapAsync(this.fsyncBase,[s],u)},h.prototype.fdatasyncBase=function(s){this.getFileByFdOrThrow(s,"fdatasync")},h.prototype.fdatasyncSync=function(s){this.fdatasyncBase(s)},h.prototype.fdatasync=function(s,u){this.wrapAsync(this.fdatasyncBase,[s],u)},h.prototype.ftruncateBase=function(s,u){var c=this.getFileByFdOrThrow(s,"ftruncate");c.truncate(u)},h.prototype.ftruncateSync=function(s,u){this.ftruncateBase(s,u)},h.prototype.ftruncate=function(s,u,c){var d=typeof u=="number"?u:0,S=ie(typeof u=="number"?c:u);this.wrapAsync(this.ftruncateBase,[s,d],S)},h.prototype.truncateBase=function(s,u){var c=this.openSync(s,"r+");try{this.ftruncateSync(c,u)}finally{this.closeSync(c)}},h.prototype.truncateSync=function(s,u){if(et(s))return this.ftruncateSync(s,u);this.truncateBase(s,u)},h.prototype.truncate=function(s,u,c){var d=typeof u=="number"?u:0,S=ie(typeof u=="number"?c:u);if(et(s))return this.ftruncate(s,d,S);this.wrapAsync(this.truncateBase,[s,d],S)},h.prototype.futimesBase=function(s,u,c){var d=this.getFileByFdOrThrow(s,"futimes"),S=d.node;S.atime=new Date(u*1e3),S.mtime=new Date(c*1e3)},h.prototype.futimesSync=function(s,u,c){this.futimesBase(s,Ne(u),Ne(c))},h.prototype.futimes=function(s,u,c,d){this.wrapAsync(this.futimesBase,[s,Ne(u),Ne(c)],d)},h.prototype.utimesBase=function(s,u,c){var d=this.openSync(s,"r");try{this.futimesBase(d,u,c)}finally{this.closeSync(d)}},h.prototype.utimesSync=function(s,u,c){this.utimesBase(k(s),Ne(u),Ne(c))},h.prototype.utimes=function(s,u,c,d){this.wrapAsync(this.utimesBase,[k(s),Ne(u),Ne(c)],d)},h.prototype.mkdirBase=function(s,u){var c=Y(s);if(!c.length)throw M(De,"mkdir",s);var d=this.getLinkParentAsDirOrThrow(s,"mkdir"),S=c[c.length-1];if(d.getChild(S))throw M(De,"mkdir",s);d.createChild(S,this.createNode(!0,u))},h.prototype.mkdirpBase=function(s,u){for(var c=Nt(s),d=c.substring(1),S=d?d.split(te):[],O=this.root,I=!1,F=0;F<S.length;F++){var P=S[F];if(!O.getNode().isDirectory())throw M(Je,"mkdir",O.getPath());var B=O.getChild(P);if(B)if(B.getNode().isDirectory())O=B;else throw M(Je,"mkdir",B.getPath());else O=O.createChild(P,this.createNode(!0,u)),I=!0}return I?c:void 0},h.prototype.mkdirSync=function(s,u){var c=ci(u),d=se(c.mode,511),S=k(s);if(c.recursive)return this.mkdirpBase(S,d);this.mkdirBase(S,d)},h.prototype.mkdir=function(s,u,c){var d=ci(u),S=ie(typeof u=="function"?u:c),O=se(d.mode,511),I=k(s);d.recursive?this.wrapAsync(this.mkdirpBase,[I,O],S):this.wrapAsync(this.mkdirBase,[I,O],S)},h.prototype.mkdirpSync=function(s,u){return this.mkdirSync(s,{mode:u,recursive:!0})},h.prototype.mkdirp=function(s,u,c){var d=typeof u=="function"?void 0:u,S=ie(typeof u=="function"?u:c);this.mkdir(s,{mode:d,recursive:!0},S)},h.prototype.mkdtempBase=function(s,u,c){c===void 0&&(c=5);var d=s+this.genRndStr();try{return this.mkdirBase(d,511),(0,w.strToEncoding)(d,u)}catch(S){if(S.code===De){if(c>1)return this.mkdtempBase(s,u,c-1);throw Error("Could not create temp dir.")}else throw S}},h.prototype.mkdtempSync=function(s,u){var c=Zt(u).encoding;if(!s||typeof s!="string")throw new TypeError("filename prefix is required");return Mr(s),this.mkdtempBase(s,c)},h.prototype.mkdtemp=function(s,u,c){var d=ri(u,c),S=d[0].encoding,O=d[1];if(!s||typeof s!="string")throw new TypeError("filename prefix is required");Mr(s)&&this.wrapAsync(this.mkdtempBase,[s,S],O)},h.prototype.rmdirBase=function(s,u){var c=fi(u),d=this.getLinkAsDirOrThrow(s,"rmdir");if(d.length&&!c.recursive)throw M(Zn,"rmdir",s);this.deleteLink(d)},h.prototype.rmdirSync=function(s,u){this.rmdirBase(k(s),u)},h.prototype.rmdir=function(s,u,c){var d=fi(u),S=ie(typeof u=="function"?u:c);this.wrapAsync(this.rmdirBase,[k(s),d],S)},h.prototype.rmBase=function(s,u){u===void 0&&(u={});var c=this.getResolvedLink(s);if(!c){if(!u.force)throw M(H,"stat",s);return}if(c.getNode().isDirectory()&&!u.recursive)throw M(ti,"rm",s);this.deleteLink(c)},h.prototype.rmSync=function(s,u){this.rmBase(k(s),u)},h.prototype.rm=function(s,u,c){var d=Za(u,c),S=d[0],O=d[1];this.wrapAsync(this.rmBase,[k(s),S],O)},h.prototype.fchmodBase=function(s,u){var c=this.getFileByFdOrThrow(s,"fchmod");c.chmod(u)},h.prototype.fchmodSync=function(s,u){this.fchmodBase(s,se(u))},h.prototype.fchmod=function(s,u,c){this.wrapAsync(this.fchmodBase,[s,se(u)],c)},h.prototype.chmodBase=function(s,u){var c=this.openSync(s,"r");try{this.fchmodBase(c,u)}finally{this.closeSync(c)}},h.prototype.chmodSync=function(s,u){var c=se(u),d=k(s);this.chmodBase(d,c)},h.prototype.chmod=function(s,u,c){var d=se(u),S=k(s);this.wrapAsync(this.chmodBase,[S,d],c)},h.prototype.lchmodBase=function(s,u){var c=this.openBase(s,T,0,!1);try{this.fchmodBase(c,u)}finally{this.closeSync(c)}},h.prototype.lchmodSync=function(s,u){var c=se(u),d=k(s);this.lchmodBase(d,c)},h.prototype.lchmod=function(s,u,c){var d=se(u),S=k(s);this.wrapAsync(this.lchmodBase,[S,d],c)},h.prototype.fchownBase=function(s,u,c){this.getFileByFdOrThrow(s,"fchown").chown(u,c)},h.prototype.fchownSync=function(s,u,c){lt(u),ct(c),this.fchownBase(s,u,c)},h.prototype.fchown=function(s,u,c,d){lt(u),ct(c),this.wrapAsync(this.fchownBase,[s,u,c],d)},h.prototype.chownBase=function(s,u,c){var d=this.getResolvedLinkOrThrow(s,"chown"),S=d.getNode();S.chown(u,c)},h.prototype.chownSync=function(s,u,c){lt(u),ct(c),this.chownBase(k(s),u,c)},h.prototype.chown=function(s,u,c,d){lt(u),ct(c),this.wrapAsync(this.chownBase,[k(s),u,c],d)},h.prototype.lchownBase=function(s,u,c){this.getLinkOrThrow(s,"lchown").getNode().chown(u,c)},h.prototype.lchownSync=function(s,u,c){lt(u),ct(c),this.lchownBase(k(s),u,c)},h.prototype.lchown=function(s,u,c,d){lt(u),ct(c),this.wrapAsync(this.lchownBase,[k(s),u,c],d)},h.prototype.watchFile=function(s,u,c){var d=k(s),S=u,O=c;if(typeof S=="function"&&(O=u,S=null),typeof O!="function")throw Error('"watchFile()" requires a listener function');var I=5007,F=!0;S&&typeof S=="object"&&(typeof S.interval=="number"&&(I=S.interval),typeof S.persistent=="boolean"&&(F=S.persistent));var P=this.statWatchers[d];return P||(P=new this.StatWatcher,P.start(d,F,I),this.statWatchers[d]=P),P.addListener("change",O),P},h.prototype.unwatchFile=function(s,u){var c=k(s),d=this.statWatchers[c];d&&(typeof u=="function"?d.removeListener("change",u):d.removeAllListeners("change"),d.listenerCount("change")===0&&(d.stop(),delete this.statWatchers[c]))},h.prototype.createReadStream=function(s,u){return new this.ReadStream(s,u)},h.prototype.createWriteStream=function(s,u){return new this.WriteStream(s,u)},h.prototype.watch=function(s,u,c){var d=k(s),S=u;typeof u=="function"&&(c=u,S=null);var O=Zt(S),I=O.persistent,F=O.recursive,P=O.encoding;I===void 0&&(I=!0),F===void 0&&(F=!1);var B=new this.FSWatcher;return B.start(d,I,F,P),c&&B.addListener("change",c),B},h.fd=2147483647,h}();e.Volume=cs;function fs(h){h.emit("stop")}var pi=function(h){t(s,h);function s(u){var c=h.call(this)||this;return c.onInterval=function(){try{var d=c.vol.statSync(c.filename);c.hasChanged(d)&&(c.emit("change",d,c.prev),c.prev=d)}finally{c.loop()}},c.vol=u,c}return s.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},s.prototype.hasChanged=function(u){return u.mtimeMs>this.prev.mtimeMs||u.nlink!==this.prev.nlink},s.prototype.start=function(u,c,d){c===void 0&&(c=!0),d===void 0&&(d=5007),this.filename=k(u),this.setTimeout=c?setTimeout.bind(typeof globalThis<"u"?globalThis:G):m.default,this.interval=d,this.prev=this.vol.statSync(this.filename),this.loop()},s.prototype.stop=function(){clearTimeout(this.timeoutRef),p.default.nextTick(fs,this)},s}(_.EventEmitter);e.StatWatcher=pi;var le;function hs(h){le=(0,l.bufferAllocUnsafe)(h),le.used=0}R.inherits(we,v.Readable),e.ReadStream=we;function we(h,s,u){if(!(this instanceof we))return new we(h,s,u);if(this._vol=h,u=Object.assign({},Dr(u,{})),u.highWaterMark===void 0&&(u.highWaterMark=64*1024),v.Readable.call(this,u),this.path=k(s),this.fd=u.fd===void 0?null:u.fd,this.flags=u.flags===void 0?"r":u.flags,this.mode=u.mode===void 0?438:u.mode,this.start=u.start,this.end=u.end,this.autoClose=u.autoClose===void 0?!0:u.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}we.prototype.open=function(){var h=this;this._vol.open(this.path,this.flags,this.mode,function(s,u){if(s){h.autoClose&&h.destroy&&h.destroy(),h.emit("error",s);return}h.fd=u,h.emit("open",u),h.read()})},we.prototype._read=function(h){if(typeof this.fd!="number")return this.once("open",function(){this._read(h)});if(this.destroyed)return;(!le||le.length-le.used<Va)&&hs(this._readableState.highWaterMark);var s=le,u=Math.min(le.length-le.used,h),c=le.used;if(this.pos!==void 0&&(u=Math.min(this.end-this.pos+1,u)),u<=0)return this.push(null);var d=this;this._vol.read(this.fd,le,le.used,u,this.pos,S),this.pos!==void 0&&(this.pos+=u),le.used+=u;function S(O,I){if(O)d.autoClose&&d.destroy&&d.destroy(),d.emit("error",O);else{var F=null;I>0&&(d.bytesRead+=I,F=s.slice(c,c+I)),d.push(F)}}},we.prototype._destroy=function(h,s){this.close(function(u){s(h||u)})},we.prototype.close=function(h){var s=this,u;if(h&&this.once("close",h),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",mi);return}return p.default.nextTick(function(){return s.emit("close")})}typeof((u=this._readableState)===null||u===void 0?void 0:u.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(c){c?s.emit("error",c):s.emit("close")}),this.fd=null};function mi(h){this.close()}R.inherits(ce,v.Writable),e.WriteStream=ce;function ce(h,s,u){if(!(this instanceof ce))return new ce(h,s,u);if(this._vol=h,u=Object.assign({},Dr(u,{})),v.Writable.call(this,u),this.path=k(s),this.fd=u.fd===void 0?null:u.fd,this.flags=u.flags===void 0?"w":u.flags,this.mode=u.mode===void 0?438:u.mode,this.start=u.start,this.autoClose=u.autoClose===void 0?!0:!!u.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}u.encoding&&this.setDefaultEncoding(u.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}ce.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(h,s){if(h){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",h);return}this.fd=s,this.emit("open",s)}.bind(this))},ce.prototype._write=function(h,s,u){if(!(h instanceof l.Buffer||h instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(h,s,u)});var c=this;this._vol.write(this.fd,h,0,h.length,this.pos,function(d,S){if(d)return c.autoClose&&c.destroy&&c.destroy(),u(d);c.bytesWritten+=S,u()}),this.pos!==void 0&&(this.pos+=h.length)},ce.prototype._writev=function(h,s){if(typeof this.fd!="number")return this.once("open",function(){this._writev(h,s)});for(var u=this,c=h.length,d=new Array(c),S=0,O=0;O<c;O++){var I=h[O].chunk;d[O]=I,S+=I.length}var F=l.Buffer.concat(d);this._vol.write(this.fd,F,0,F.length,this.pos,function(P,B){if(P)return u.destroy&&u.destroy(),s(P);u.bytesWritten+=B,s()}),this.pos!==void 0&&(this.pos+=S)},ce.prototype.close=function(h){var s=this,u;if(h&&this.once("close",h),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",mi);return}return p.default.nextTick(function(){return s.emit("close")})}typeof((u=this._writableState)===null||u===void 0?void 0:u.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(c){c?s.emit("error",c):s.emit("close")}),this.fd=null},ce.prototype._destroy=we.prototype._destroy,ce.prototype.destroySoon=ce.prototype.end;var vi=function(h){t(s,h);function s(u){var c=h.call(this)||this;return c._filename="",c._filenameEncoded="",c._recursive=!1,c._encoding=w.ENCODING_UTF8,c._onNodeChange=function(){c._emit("change")},c._onParentChild=function(d){d.getName()===c._getName()&&c._emit("rename")},c._emit=function(d){c.emit("change",d,c._filenameEncoded)},c._persist=function(){c._timer=setTimeout(c._persist,1e6)},c._vol=u,c}return s.prototype._getName=function(){return this._steps[this._steps.length-1]},s.prototype.start=function(u,c,d,S){c===void 0&&(c=!0),d===void 0&&(d=!1),S===void 0&&(S=w.ENCODING_UTF8),this._filename=k(u),this._steps=Y(this._filename),this._filenameEncoded=(0,w.strToEncoding)(this._filename),this._recursive=d,this._encoding=S;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(F){var O=new Error("watch ".concat(this._filename," ").concat(F.code));throw O.code=F.code,O.errno=F.code,O}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange);var I=this._link.parent;I&&(I.setMaxListeners(I.getMaxListeners()+1),I.on("child:delete",this._onParentChild)),c&&this._persist()},s.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var u=this._link.parent;u&&u.removeListener("child:delete",this._onParentChild)},s}(_.EventEmitter);e.FSWatcher=vi})(Ia);var Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.fsAsyncMethods=Me.fsSyncMethods=Me.fsProps=void 0;var _f=["constants","F_OK","R_OK","W_OK","X_OK","Stats"];Me.fsProps=_f;var Sf=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","createReadStream","createWriteStream"];Me.fsSyncMethods=Sf;var Ef=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","watchFile","unwatchFile","watch"];Me.fsAsyncMethods=Ef;(function(e,t){var r=G&&G.__assign||function(){return r=Object.assign||function(g){for(var R,b=1,E=arguments.length;b<E;b++){R=arguments[b];for(var A in R)Object.prototype.hasOwnProperty.call(R,A)&&(g[A]=R[A])}return g},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.fs=t.createFsFromVolume=t.vol=t.Volume=void 0;var i=ot,n=wt,o=Ia,a=Me,l=a.fsSyncMethods,f=a.fsAsyncMethods,p=We,m=p.constants.F_OK,v=p.constants.R_OK,y=p.constants.W_OK,_=p.constants.X_OK;t.Volume=o.Volume,t.vol=new o.Volume;function w(g){for(var R={F_OK:m,R_OK:v,W_OK:y,X_OK:_,constants:p.constants,Stats:i.default,Dirent:n.default},b=0,E=l;b<E.length;b++){var A=E[b];typeof g[A]=="function"&&(R[A]=g[A].bind(g))}for(var C=0,T=f;C<T.length;C++){var A=T[C];typeof g[A]=="function"&&(R[A]=g[A].bind(g))}return R.StatWatcher=g.StatWatcher,R.FSWatcher=g.FSWatcher,R.WriteStream=g.WriteStream,R.ReadStream=g.ReadStream,R.promises=g.promises,R._toUnixTimestamp=o.toUnixTimestamp,R}t.createFsFromVolume=w,t.fs=w(t.vol),e.exports=r(r({},e.exports),t.fs),e.exports.semantic=!0})(Yc,vr);const wf=vr,{ono:Kr}=it,Xi=ae,{ResolverError:zr}=K;var bf={order:100,canRead(e){return Xi.isFileSystemPath(e.url)},read(e){return new Promise((t,r)=>{let i;try{i=Xi.toFileSystemPath(e.url)}catch(n){r(new zr(Kr.uri(n,`Malformed URI: ${e.url}`),e.url))}try{wf.readFile(i,(n,o)=>{n?r(new zr(Kr(n,`Error opening file "${i}"`),i)):t(o)})}catch(n){r(new zr(Kr(n,`Error opening file "${i}"`),i))}})}};const Rf=Ro,Of=Ro,{ono:tr}=it,$t=ae,{ResolverError:Qi}=K;var Af={order:200,headers:null,timeout:5e3,redirects:5,withCredentials:!1,canRead(e){return $t.isHttp(e.url)},read(e){let t=$t.parse(e.url);return process.browser&&!t.protocol&&(t.protocol=$t.parse(location.href).protocol),xa(t,this)}};function xa(e,t,r){return new Promise((i,n)=>{e=$t.parse(e),r=r||[],r.push(e.href),Tf(e,t).then(o=>{if(o.statusCode>=400)throw tr({status:o.statusCode},`HTTP ERROR ${o.statusCode}`);if(o.statusCode>=300)if(r.length>t.redirects)n(new Qi(tr({status:o.statusCode},`Error downloading ${r[0]}. 
Too many redirects: 
  ${r.join(` 
  `)}`)));else if(o.headers.location){let a=$t.resolve(e,o.headers.location);xa(a,t,r).then(i,n)}else throw tr({status:o.statusCode},`HTTP ${o.statusCode} redirect with no location header`);else i(o.body||Buffer.alloc(0))}).catch(o=>{n(new Qi(tr(o,`Error downloading ${e.href}`),e.href))})})}function Tf(e,t){return new Promise((r,i)=>{let o=(e.protocol==="https:"?Of:Rf).get({hostname:e.hostname,port:e.port,path:e.path,auth:e.auth,protocol:e.protocol,headers:t.headers||{},withCredentials:t.withCredentials});typeof o.setTimeout=="function"&&o.setTimeout(t.timeout),o.on("timeout",()=>{o.abort()}),o.on("error",i),o.once("response",a=>{a.body=Buffer.alloc(0),a.on("data",l=>{a.body=Buffer.concat([a.body,Buffer.from(l)])}),a.on("error",i),a.on("end",()=>{r(a)})})})}const Cf=Su,If=$c,Nf=Vc,Ff=Wc,xf=bf,Pf=Af;var kf=Ln;function Ln(e){hn(this,Ln.defaults),hn(this,e)}Ln.defaults={parse:{json:Cf,yaml:If,text:Nf,binary:Ff},resolve:{file:xf,http:Pf,external:!0},continueOnError:!1,dereference:{circular:!0,excludedPathMatcher:()=>!1}};function hn(e,t){if(Zi(t)){let r=Object.keys(t);for(let i=0;i<r.length;i++){let n=r[i],o=t[n],a=e[n];Zi(o)?e[n]=hn(a||{},o):o!==void 0&&(e[n]=o)}}return e}function Zi(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}const eo=kf;var Df=Lf;function Lf(e){let t,r,i,n;return e=Array.prototype.slice.call(e),typeof e[e.length-1]=="function"&&(n=e.pop()),typeof e[0]=="string"?(t=e[0],typeof e[2]=="object"?(r=e[1],i=e[2]):(r=void 0,i=e[1])):(t="",r=e[0],i=e[1]),i instanceof eo||(i=new eo(i)),{path:t,schema:r,options:i,callback:n}}const to=qt(),Bf=br(),Mf=Bo,Dt=ae,{isHandledError:$f}=K;var Uf=jf;function jf(e,t){if(!t.resolve.external)return Promise.resolve();try{let r=Bn(e.schema,e.$refs._root$Ref.path+"#",e.$refs,t);return Promise.all(r)}catch(r){return Promise.reject(r)}}function Bn(e,t,r,i,n){n=n||new Set;let o=[];if(e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!n.has(e))if(n.add(e),to.isExternal$Ref(e))o.push(ro(e,t,r,i));else for(let a of Object.keys(e)){let l=Bf.join(t,a),f=e[a];to.isExternal$Ref(f)?o.push(ro(f,l,r,i)):o=o.concat(Bn(f,l,r,i,n))}return o}async function ro(e,t,r,i){let n=Dt.resolve(t,e.$ref),o=Dt.stripHash(n);if(e=r._$refs[o],e)return Promise.resolve(e.value);try{const a=await Mf(n,r,i);let l=Bn(a,o+"#",r,i);return Promise.all(l)}catch(a){if(!i.continueOnError||!$f(a))throw a;return r._$refs[o]&&(a.source=decodeURI(Dt.stripHash(t)),a.path=Dt.safePointerToPath(Dt.getHash(t))),[]}}const gr=qt(),Yt=br(),Gr=ae;var Vf=Hf;function Hf(e,t){let r=[];Mn(e,"schema",e.$refs._root$Ref.path+"#","#",0,r,e.$refs,t),Wf(r)}function Mn(e,t,r,i,n,o,a,l){let f=t===null?e:e[t];if(f&&typeof f=="object"&&!ArrayBuffer.isView(f))if(gr.isAllowed$Ref(f))no(e,t,r,i,n,o,a,l);else{let p=Object.keys(f).sort((m,v)=>m==="definitions"?-1:v==="definitions"?1:m.length-v.length);for(let m of p){let v=Yt.join(r,m),y=Yt.join(i,m),_=f[m];gr.isAllowed$Ref(_)?no(f,m,r,y,n,o,a,l):Mn(f,m,v,y,n,o,a,l)}}}function no(e,t,r,i,n,o,a,l){let f=t===null?e:e[t],p=Gr.resolve(r,f.$ref),m=a._resolve(p,i,l);if(m===null)return;let v=Yt.parse(i).length,y=Gr.stripHash(m.path),_=Gr.getHash(m.path),w=y!==a._root$Ref.path,g=gr.isExtended$Ref(f);n+=m.indirections;let R=Yf(o,e,t);if(R)if(v<R.depth||n<R.indirections)qf(o,R);else return;o.push({$ref:f,parent:e,key:t,pathFromRoot:i,depth:v,file:y,hash:_,value:m.value,circular:m.circular,extended:g,external:w,indirections:n}),R||Mn(m.value,null,m.path,i,n+1,o,a,l)}function Wf(e){e.sort((n,o)=>{if(n.file!==o.file)return n.file<o.file?-1:1;if(n.hash!==o.hash)return n.hash<o.hash?-1:1;if(n.circular!==o.circular)return n.circular?-1:1;if(n.extended!==o.extended)return n.extended?1:-1;if(n.indirections!==o.indirections)return n.indirections-o.indirections;if(n.depth!==o.depth)return n.depth-o.depth;{let a=n.pathFromRoot.lastIndexOf("/definitions"),l=o.pathFromRoot.lastIndexOf("/definitions");return a!==l?l-a:n.pathFromRoot.length-o.pathFromRoot.length}});let t,r,i;for(let n of e)n.external?n.file===t&&n.hash===r?n.$ref.$ref=i:n.file===t&&n.hash.indexOf(r+"/")===0?n.$ref.$ref=Yt.join(i,Yt.parse(n.hash.replace(r,"#"))):(t=n.file,r=n.hash,i=n.pathFromRoot,n.$ref=n.parent[n.key]=gr.dereference(n.$ref,n.value),n.circular&&(n.$ref.$ref=n.pathFromRoot)):n.$ref.$ref=n.hash}function Yf(e,t,r){for(let i=0;i<e.length;i++){let n=e[i];if(n.parent===t&&n.key===r)return n}}function qf(e,t){let r=e.indexOf(t);e.splice(r,1)}const dn=qt(),io=br(),{ono:Kf}=it,zf=ae;var Gf=Jf;function Jf(e,t){let r=$n(e.schema,e.$refs._root$Ref.path,"#",new Set,new Set,new Map,e.$refs,t);e.$refs.circular=r.circular,e.schema=r.value}function $n(e,t,r,i,n,o,a,l){let f,p={value:e,circular:!1},m=l.dereference.excludedPathMatcher;if((l.dereference.circular==="ignore"||!n.has(e))&&e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!m(r)){if(i.add(e),n.add(e),dn.isAllowed$Ref(e,l))f=oo(e,t,r,i,n,o,a,l),p.circular=f.circular,p.value=f.value;else for(const v of Object.keys(e)){let y=io.join(t,v),_=io.join(r,v);if(m(_))continue;let w=e[v],g=!1;dn.isAllowed$Ref(w,l)?(f=oo(w,y,_,i,n,o,a,l),g=f.circular,e[v]!==f.value&&(e[v]=f.value)):i.has(w)?g=Pa(y,a,l):(f=$n(w,y,_,i,n,o,a,l),g=f.circular,e[v]!==f.value&&(e[v]=f.value)),p.circular=p.circular||g}i.delete(e)}return p}function oo(e,t,r,i,n,o,a,l){let f=zf.resolve(t,e.$ref);const p=o.get(f);if(p){const g=Object.keys(e);if(g.length>1){const R={};for(let b of g)b!=="$ref"&&!(b in p.value)&&(R[b]=e[b]);return{circular:p.circular,value:Object.assign({},p.value,R)}}return p}let m=a._resolve(f,t,l);if(m===null)return{circular:!1,value:null};let v=m.circular,y=v||i.has(m.value);y&&Pa(t,a,l);let _=dn.dereference(e,m.value);if(!y){let g=$n(_,m.path,r,i,n,o,a,l);y=g.circular,_=g.value}y&&!v&&l.dereference.circular==="ignore"&&(_=e),v&&(_.$ref=r);const w={circular:y,value:_};return Object.keys(e).length===1&&o.set(f,w),w}function Pa(e,t,r){if(t.circular=!0,!r.dereference.circular)throw Kf.reference(`Circular $ref pointer found at ${e}`);return!0}function Xf(){return typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:typeof setImmediate=="function"?setImmediate:function(t){setTimeout(t,0)}}var Qf=Xf(),ao=Qf,Zf=function(t,r){if(t){r.then(function(i){ao(function(){t(null,i)})},function(i){ao(function(){t(i)})});return}else return r};const ka=fu,eh=Bo,Cr=Df,th=Uf,rh=Vf,nh=Gf,ht=ae,{JSONParserError:ih,InvalidPointerError:oh,MissingPointerError:ah,ResolverError:sh,ParserError:uh,UnmatchedParserError:lh,UnmatchedResolverError:ch,isHandledError:fh,JSONParserErrorGroup:so}=K,ve=Zf,{ono:uo}=it;Ms.exports=Te;ge.default=Te;ge.JSONParserError=ih;ge.InvalidPointerError=oh;ge.MissingPointerError=ah;ge.ResolverError=sh;ge.ParserError=uh;ge.UnmatchedParserError=lh;ge.UnmatchedResolverError=ch;function Te(){this.schema=null,this.$refs=new ka}Te.parse=function(t,r,i,n){let o=this,a=new o;return a.parse.apply(a,arguments)};Te.prototype.parse=async function(t,r,i,n){let o=Cr(arguments),a;if(!o.path&&!o.schema){let p=uo(`Expected a file path, URL, or object. Got ${o.path||o.schema}`);return ve(o.callback,Promise.reject(p))}this.schema=null,this.$refs=new ka;let l="http";if(ht.isFileSystemPath(o.path)&&(o.path=ht.fromFileSystemPath(o.path),l="file"),o.path=ht.resolve(ht.cwd(),o.path),o.schema&&typeof o.schema=="object"){let p=this.$refs._add(o.path);p.value=o.schema,p.pathType=l,a=Promise.resolve(o.schema)}else a=eh(o.path,this.$refs,o.options);let f=this;try{let p=await a;if(p!==null&&typeof p=="object"&&!Buffer.isBuffer(p))return f.schema=p,ve(o.callback,Promise.resolve(f.schema));if(o.options.continueOnError)return f.schema=null,ve(o.callback,Promise.resolve(f.schema));throw uo.syntax(`"${f.$refs._root$Ref.path||p}" is not a valid JSON Schema`)}catch(p){return!o.options.continueOnError||!fh(p)?ve(o.callback,Promise.reject(p)):(this.$refs._$refs[ht.stripHash(o.path)]&&this.$refs._$refs[ht.stripHash(o.path)].addError(p),ve(o.callback,Promise.resolve(null)))}};Te.resolve=function(t,r,i,n){let o=this,a=new o;return a.resolve.apply(a,arguments)};Te.prototype.resolve=async function(t,r,i,n){let o=this,a=Cr(arguments);try{return await this.parse(a.path,a.schema,a.options),await th(o,a.options),Un(o),ve(a.callback,Promise.resolve(o.$refs))}catch(l){return ve(a.callback,Promise.reject(l))}};Te.bundle=function(t,r,i,n){let o=this,a=new o;return a.bundle.apply(a,arguments)};Te.prototype.bundle=async function(t,r,i,n){let o=this,a=Cr(arguments);try{return await this.resolve(a.path,a.schema,a.options),rh(o,a.options),Un(o),ve(a.callback,Promise.resolve(o.schema))}catch(l){return ve(a.callback,Promise.reject(l))}};Te.dereference=function(t,r,i,n){let o=this,a=new o;return a.dereference.apply(a,arguments)};Te.prototype.dereference=async function(t,r,i,n){let o=this,a=Cr(arguments);try{return await this.resolve(a.path,a.schema,a.options),nh(o,a.options),Un(o),ve(a.callback,Promise.resolve(o.schema))}catch(l){return ve(a.callback,Promise.reject(l))}};function Un(e){if(so.getParserErrors(e).length>0)throw new so(e)}var _r={},hh={get exports(){return _r},set exports(e){_r=e}},ye={},Fe={},Xt={},Ut=typeof Symbol=="function"?Symbol("curriable placeholder"):60881;function dh(e,t){function r(i){return function(){var n=i.length,o=arguments,a=o.length,l=[],f=0,p=t,m;if(n)for(var v=-1;++v<n;)l[v]=m=i[v]===Ut&&f<a?o[f++]:i[v],m!==Ut&&--p;if(f<a)for(;f<a;)l[l.length]=m=o[f],m!==Ut&&f<t&&--p,++f;return p>0?r(l):e.apply(this,l)}}return r([])}function at(e,t){var r=typeof t=="number"?t:e.length,i=dh(e,r);return i.arity=r,i.fn=e,i}at.__=Ut;function ph(e){return e===Ut}at.isPlaceholder=ph;function mh(e){return e.fn}at.uncurry=mh;var rr,nr,pe,dt,vh=typeof Buffer<"u"&&typeof Buffer.from=="function",yh=typeof Uint16Array=="function",gh=/\[object (HTML(.*)Element)\]/,_h=/\[object (SVG(.*)Element)\]/,Sh=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"],Re=Sh.reduce(function(e,t){return e["[object "+t+"]"]=t,e},{}),V=Object.keys(Re).reduce(function(e,t){return e[Re[t].toUpperCase()]=t,e},{}),Eh={"[object Map]":!0,"[object Set]":!0},wh={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},bh=(rr={},rr[V.ARGUMENTS]=!0,rr[V.ARRAY]=!0,rr),Rh=(nr={},nr[V.REGEXP]=!0,nr[V.SYMBOL]=!0,nr),Oh=(pe={},pe[V.FLOAT32ARRAY]=!0,pe[V.FLOAT64ARRAY]=!0,pe[V.INT8ARRAY]=!0,pe[V.INT16ARRAY]=!0,pe[V.INT32ARRAY]=!0,pe[V.UINT8ARRAY]=!0,pe[V.UINT8CLAMPEDARRAY]=!0,pe[V.UINT16ARRAY]=!0,pe[V.UINT32ARRAY]=!0,pe),Ah=(dt={},dt[V.GENERATOR]=!0,dt[V.PROMISE]=!0,dt[V.WEAKMAP]=!0,dt[V.WEAKSET]=!0,dt),Th=/^\s*function\s*([^(]*)/i,Da=Object.prototype.toString,Ch=Object.keys;function Ih(e){return e.name||(e.toString().match(Th)||[])[1]||"anonymous"}function Nh(e){for(var t=e.length,r=5381,i=52711,n;t--;)n=e.charCodeAt(t),r=r*33^n,i=i*33^n;return(r>>>0)*4096+(i>>>0)}function Fh(e){return{bubbles:e.bubbles,cancelBubble:e.cancelBubble,cancelable:e.cancelable,composed:e.composed,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isTrusted:e.isTrusted,returnValue:e.returnValue,target:e.target,type:e.type}}function La(e,t){return e>t}function xh(e,t){return e[0]>t[0]}function pn(e,t){for(var r,i,n=0;n<e.length;++n){for(i=e[n],r=n-1;~r&&t(e[r],i);--r)e[r+1]=e[r];e[r+1]=i}return e}function Ph(e,t,r){var i=typeof e.get=="function",n=[];i?(e.forEach(function(p,m){n.push([ur(m,t,r),ur(p,t,r)])}),pn(n,xh)):(e.forEach(function(p){n.push(ur(p,t,r))}),pn(n,La));for(var o=Ih(e.constructor)+"|[",a=0,l=n.length,f;a<l;++a)f=n[a],o+=(a?",":"")+(i?"["+f[0]+","+f[1]+"]":f);return o+"]"}function kh(e){for(var t=pn(Ch(e),La),r={},i,n=0;n<t.length;++n)i=t[n],r[i]=e[i];return r}function Dh(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function Lh(e){return Buffer.from(e).toString("utf8")}function Bh(){return""}var lo=function(){return vh?Lh:yh?Dh:Bh}();function Mh(e){for(var t=e.children,r="",i=0;i<t.length;++i)r+=t[i].outerHTML;return r}function co(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r+1;return 0}function Sr(e,t,r,i){if(i===void 0){var n=typeof e;if(n==="string"||wh[n])return n+"|"+e;if(e===null)return"null|"+e}var o=i||Da.call(e);return bh[o]?e:o===V.OBJECT?kh(e):Rh[o]?Re[o]+"|"+e.toString():Eh[o]?Ph(e,t,r):o===V.DATE?Re[o]+"|"+e.getTime():o===V.ERROR?Re[o]+"|"+e.stack:o===V.EVENT?Fh(e):Ah[o]?Re[o]+"|NOT_ENUMERABLE":gh.test(o)||_h.test(o)?o.slice(8,-1)+"|"+e.outerHTML:o===V.DOCUMENTFRAGMENT?Re[o]+"|"+Mh(e):Oh[o]?Re[o]+"|"+e.join(","):o===V.ARRAYBUFFER?Re[o]+"|"+lo(e):o===V.DATAVIEW?Re[o]+"|"+lo(e.buffer):e}function $h(e,t){return e===void 0&&(e=[]),t===void 0&&(t=[]),function(r,i){if(typeof i=="object")if(e.length){var n=co(e,this);n===0?e.push(this):(e.splice(n),t.splice(n)),t.push(r);var o=co(e,i);if(o!==0)return"[~"+(t.slice(0,o).join(".")||".")+"]";e.push(i)}else e[0]=i,t[0]=r;return r&&this[r]instanceof Date?Sr(this[r],e,t,V.DATE):Sr(i,e,t)}}function ur(e,t,r){if(!e||typeof e!="object")return Sr(e,t,r);var i=Da.call(e);return i===V.DATE||i===V.REGEXP?Sr(e,t,r,i):JSON.stringify(e,$h(t,r))}function he(e){return Nh(ur(e))}he.is=at(function(e,t){return he(e)===he(t)});he.is.all=at(function(e){for(var t=he.is(e),r=1;r<arguments.length;++r)if(!t(arguments[r]))return!1;return!0},2);he.is.any=at(function(e){for(var t=he.is(e),r=1;r<arguments.length;r++)if(t(arguments[r]))return!0;return!1},2);he.is.not=at(function(e,t){return he(e)!==he(t)});const Uh=Object.freeze(Object.defineProperty({__proto__:null,default:he,hash:he},Symbol.toStringTag,{value:"Module"})),jh=bo(Uh);Object.defineProperty(Xt,"__esModule",{value:!0});var Vh=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Hh=jh,Wh=Yh(Hh);function Yh(e){return e&&e.__esModule?e:{default:e}}function qh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var jn=function(){function e(t,r,i){qh(this,e),this.id=t;var n={cache:!0};if(typeof i>"u"&&(i=n),typeof r!="function"?(this.value=r,this.type=this.constructor.CONSTANT):(this.calculationMethod=r,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");if(typeof this.value>"u"&&typeof this.calculationMethod>"u")throw new Error("facts must have a value or method");return this.priority=parseInt(i.priority||1,10),this.options=Object.assign({},n,i),this.cacheKeyMethod=this.defaultCacheKeys,this}return Vh(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(r,i){return this.hasOwnProperty("value")?this.value:this.calculationMethod(r,i)}},{key:"defaultCacheKeys",value:function(r,i){return{params:i,id:r}}},{key:"getCacheKey",value:function(r){if(this.options.cache===!0){var i=this.cacheKeyMethod(this.id,r),n=e.hashFromObject(i);return n}}}],[{key:"hashFromObject",value:function(r){return(0,Wh.default)(r)}}]),e}();jn.CONSTANT="CONSTANT";jn.DYNAMIC="DYNAMIC";Xt.default=jn;var Ir={},Vn={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.default=Kh;function Kh(e){(typeof process<"u"&&process.env&&{}.DEBUG&&{}.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}function zh(e){return!!e&&typeof e=="object"}var Ba=zh;Object.defineProperty(Vn,"__esModule",{value:!0});var Gh=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Jh=Rt,Xh=Ma(Jh),Qh=Ba,Zh=Ma(Qh);function Ma(e){return e&&e.__esModule?e:{default:e}}function ed(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var td=function(){function e(t){if(ed(this,e),!t)throw new Error("Condition: constructor options required");var r=e.booleanOperator(t);if(Object.assign(this,t),r){var i=t[r];if(!Array.isArray(i))throw new Error('"'+r+'" must be an array');this.operator=r,this.priority=parseInt(t.priority,10)||1,this[r]=i.map(function(n){return new e(n)})}else{if(!t.hasOwnProperty("fact"))throw new Error('Condition: constructor "fact" property required');if(!t.hasOwnProperty("operator"))throw new Error('Condition: constructor "operator" property required');if(!t.hasOwnProperty("value"))throw new Error('Condition: constructor "value" property required');t.hasOwnProperty("priority")&&(t.priority=parseInt(t.priority,10))}}return Gh(e,[{key:"toJSON",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={};this.priority&&(i.priority=this.priority);var n=e.booleanOperator(this);return n?i[n]=this[n].map(function(o){return o.toJSON(r)}):(i.operator=this.operator,i.value=this.value,i.fact=this.fact,this.factResult!==void 0&&(i.factResult=this.factResult),this.result!==void 0&&(i.result=this.result),this.params&&(i.params=this.params),this.path&&(i.path=this.path)),r?JSON.stringify(i):i}},{key:"_getValue",value:function(r){var i=this.value;return(0,Zh.default)(i)&&i.hasOwnProperty("fact")?r.factValue(i.fact,i.params,i.path):Promise.resolve(i)}},{key:"evaluate",value:function(r,i){var n=this;if(!r)return Promise.reject(new Error("almanac required"));if(!i)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var o=i.get(this.operator);return o?this._getValue(r).then(function(a){return r.factValue(n.fact,n.params,n.path).then(function(l){var f=o.evaluate(l,a);return(0,Xh.default)("condition::evaluate <"+l+" "+n.operator+" "+a+"?> ("+f+")"),{result:f,leftHandSideValue:l,rightHandSideValue:a,operator:n.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return e.booleanOperator(this)!==void 0}}],[{key:"booleanOperator",value:function(r){if(r.hasOwnProperty("any"))return"any";if(r.hasOwnProperty("all"))return"all"}}]),e}();Vn.default=td;var Hn={},mn={},rd={get exports(){return mn},set exports(e){mn=e}};(function(e){var t=function(){function r(y,_){return _!=null&&y instanceof _}var i;try{i=Map}catch{i=function(){}}var n;try{n=Set}catch{n=function(){}}var o;try{o=Promise}catch{o=function(){}}function a(y,_,w,g,R){typeof _=="object"&&(w=_.depth,g=_.prototype,R=_.includeNonEnumerable,_=_.circular);var b=[],E=[],A=typeof Buffer<"u";typeof _>"u"&&(_=!0),typeof w>"u"&&(w=1/0);function C(T,x){if(T===null)return null;if(x===0)return T;var L,Q;if(typeof T!="object")return T;if(r(T,i))L=new i;else if(r(T,n))L=new n;else if(r(T,o))L=new o(function(ke,ze){T.then(function(Ge){ke(C(Ge,x-1))},function(Ge){ze(C(Ge,x-1))})});else if(a.__isArray(T))L=[];else if(a.__isRegExp(T))L=new RegExp(T.source,v(T)),T.lastIndex&&(L.lastIndex=T.lastIndex);else if(a.__isDate(T))L=new Date(T.getTime());else{if(A&&Buffer.isBuffer(T))return Buffer.allocUnsafe?L=Buffer.allocUnsafe(T.length):L=new Buffer(T.length),T.copy(L),L;r(T,Error)?L=Object.create(T):typeof g>"u"?(Q=Object.getPrototypeOf(T),L=Object.create(Q)):(L=Object.create(g),Q=g)}if(_){var ue=b.indexOf(T);if(ue!=-1)return E[ue];b.push(T),E.push(L)}r(T,i)&&T.forEach(function(ke,ze){var Ge=C(ze,x-1),Ct=C(ke,x-1);L.set(Ge,Ct)}),r(T,n)&&T.forEach(function(ke){var ze=C(ke,x-1);L.add(ze)});for(var ne in T){var At;Q&&(At=Object.getOwnPropertyDescriptor(Q,ne)),!(At&&At.set==null)&&(L[ne]=C(T[ne],x-1))}if(Object.getOwnPropertySymbols)for(var Tt=Object.getOwnPropertySymbols(T),ne=0;ne<Tt.length;ne++){var st=Tt[ne],Pe=Object.getOwnPropertyDescriptor(T,st);Pe&&!Pe.enumerable&&!R||(L[st]=C(T[st],x-1),Pe.enumerable||Object.defineProperty(L,st,{enumerable:!1}))}if(R)for(var Ke=Object.getOwnPropertyNames(T),ne=0;ne<Ke.length;ne++){var te=Ke[ne],Pe=Object.getOwnPropertyDescriptor(T,te);Pe&&Pe.enumerable||(L[te]=C(T[te],x-1),Object.defineProperty(L,te,{enumerable:!1}))}return L}return C(y,w)}a.clonePrototype=function(_){if(_===null)return null;var w=function(){};return w.prototype=_,new w};function l(y){return Object.prototype.toString.call(y)}a.__objToStr=l;function f(y){return typeof y=="object"&&l(y)==="[object Date]"}a.__isDate=f;function p(y){return typeof y=="object"&&l(y)==="[object Array]"}a.__isArray=p;function m(y){return typeof y=="object"&&l(y)==="[object RegExp]"}a.__isRegExp=m;function v(y){var _="";return y.global&&(_+="g"),y.ignoreCase&&(_+="i"),y.multiline&&(_+="m"),_}return a.__getRegExpFlags=v,a}();e.exports&&(e.exports=t)})(rd);Object.defineProperty(Hn,"__esModule",{value:!0});var nd=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),id=mn,ir=od(id);function od(e){return e&&e.__esModule?e:{default:e}}function ad(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var sd=function(){function e(t,r,i,n){ad(this,e),this.conditions=(0,ir.default)(t),this.event=(0,ir.default)(r),this.priority=(0,ir.default)(i),this.name=(0,ir.default)(n),this.result=null}return nd(e,[{key:"setResult",value:function(r){this.result=r}},{key:"toJSON",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return r?JSON.stringify(i):i}}]),e}();Hn.default=sd;Object.defineProperty(Ir,"__esModule",{value:!0});var ud=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),ld=Vn,cd=Wn(ld),fd=Hn,hd=Wn(fd),dd=wr,pd=Rt,Jr=Wn(pd);function Wn(e){return e&&e.__esModule?e:{default:e}}function md(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gd=function(e){yd(t,e);function t(r){md(this,t);var i=vd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));typeof r=="string"&&(r=JSON.parse(r)),r&&r.conditions&&i.setConditions(r.conditions),r&&r.onSuccess&&i.on("success",r.onSuccess),r&&r.onFailure&&i.on("failure",r.onFailure),r&&(r.name||r.name===0)&&i.setName(r.name);var n=r&&r.priority||1;i.setPriority(n);var o=r&&r.event||{type:"unknown"};return i.setEvent(o),i}return ud(t,[{key:"setPriority",value:function(i){if(i=parseInt(i,10),i<=0)throw new Error("Priority must be greater than zero");return this.priority=i,this}},{key:"setName",value:function(i){if(!i&&i!==0)throw new Error('Rule "name" must be defined');return this.name=i,this}},{key:"setConditions",value:function(i){if(!i.hasOwnProperty("all")&&!i.hasOwnProperty("any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new cd.default(i),this}},{key:"setEvent",value:function(i){if(!i)throw new Error("Rule: setEvent() requires event object");if(!i.hasOwnProperty("type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:i.type},i.params&&(this.event.params=i.params),this}},{key:"setEngine",value:function(i){return this.engine=i,this}},{key:"toJSON",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return i?JSON.stringify(n):n}},{key:"prioritizeConditions",value:function(i){var n=this,o=i.reduce(function(a,l){var f=l.priority;if(!f){var p=n.engine.getFact(l.fact);f=p&&p.priority||1}return a[f]||(a[f]=[]),a[f].push(l),a},{});return Object.keys(o).sort(function(a,l){return Number(a)>Number(l)?-1:1}).map(function(a){return o[a]})}},{key:"evaluate",value:function(i){var n=this,o=new hd.default(this.conditions,this.event,this.priority,this.name),a=function(_){if(_.isBooleanOperator()){var w=_[_.operator],g=void 0;return _.operator==="all"?g=m(w):g=p(w),g.then(function(R){var b=R===!0;return _.result=b,b})}else return _.evaluate(i,n.engine.operators).then(function(R){var b=R.result;return _.factResult=R.leftHandSideValue,_.result=b,b})},l=function(_,w){return Array.isArray(_)||(_=[_]),Promise.all(_.map(function(g){return a(g)})).then(function(g){return(0,Jr.default)("rule::evaluateConditions results",g),w.call(g,function(R){return R===!0})})},f=function(_,w){if(_.length===0)return Promise.resolve(!0);var g=Array.prototype.some;w==="all"&&(g=Array.prototype.every);for(var R=n.prioritizeConditions(_),b=Promise.resolve(),E=function(T){var x=R[T],L=!1;b=b.then(function(Q){return w==="any"&&Q===!0||L?((0,Jr.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),L=!0,!0):w==="all"&&Q===!1||L?((0,Jr.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),L=!0,!1):l(x,g)})},A=0;A<R.length;A++)E(A);return b},p=function(_){return f(_,"any")},m=function(_){return f(_,"all")},v=function(_){return o.setResult(_),_?n.emit("success",o.event,i,o):n.emit("failure",o.event,i,o),o};return o.conditions.any?p(o.conditions.any).then(function(y){return v(y)}):m(o.conditions.all).then(function(y){return v(y)})}}]),t}(dd.EventEmitter);Ir.default=gd;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});var _d=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Sd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ed=function(){function e(t,r,i){if(Sd(this,e),this.name=String(t),!t)throw new Error("Missing operator name");if(typeof r!="function")throw new Error("Missing operator callback");this.cb=r,this.factValueValidator=i,this.factValueValidator||(this.factValueValidator=function(){return!0})}return _d(e,[{key:"evaluate",value:function(r,i){return this.factValueValidator(r)&&this.cb(r,i)}}]),e}();Qt.default=Ed;var Yn={},qn={};Object.defineProperty(qn,"__esModule",{value:!0});function wd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Rd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}qn.UndefinedFactError=function(e){Rd(t,e);function t(){var r;wd(this,t);for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];var a=bd(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(n)));return a.code="UNDEFINED_FACT",a}return t}(Error);var Xr,fo;function Od(){return fo||(fo=1,Xr=function(e){var t=this,r;if(arguments.length<2)r=function(){if(this instanceof r){var o=t.apply(this,arguments);return Object(o)===o?o:this}else return t.apply(e,arguments)};else{for(var i=new Array(arguments.length-1),n=1;n<arguments.length;n++)i[n-1]=arguments[n];r=function(){var o=i.length,a=new Array(o+arguments.length),l;for(l=0;l<o;l++)a[l]=i[l];for(l=0;l<arguments.length;l++)a[o+l]=arguments[l];if(this instanceof r){var f=t.apply(this,a);return Object(f)===f?f:this}else return t.apply(e,a)}}return r.prototype=t.prototype,r}),Xr}/*!
 * imports.
 */var Ad=Function.prototype.bind||Od();/*!
 * exports.
 */var Td=Cd;function Cd(e,t){var r=function(){return arguments.length===0?r:arguments.length>1?e.apply(t,arguments):Ad.call(e,t,arguments[0])};return r.uncurry=function(){return e},r}/*!
 * exports.
 */var Id=xd;/*!
 * regexp patterns.
 */var Nd=/\[([^\[\]]+)\]/g,Fd=/^[.]*|[.]*$/g;function xd(e){return{}.toString.call(e)=="[object String]"?e.replace(Nd,".$1").replace(Fd,""):""}var Pd=Object.prototype.toString;function kd(e){for(var t=-1,r=Ld(Dd(e).split(".")),i=r.length,n=[];++t<i;)n.push(Bd(r[t]));return n}function Dd(e){return(Pd.call(e)==="[object String]"?e:"").replace(/\\\./g,"￿")}function Ld(e){for(var t=-1,r=e.length,i=[];++t<r;)e[t]&&i.push(e[t]);return i}function Bd(e){return e.replace(/\uffff/g,".")}/*!
 * exports.
 */var Md=kd,$d=Td,ho=Os("selectn"),Ud=Id,jd=Md,Vd=Object.prototype.toString,Hd=$d(Wd);function Wd(e,t){ho("arguments:",{path:e,object:t});for(var r=-1,i=Vd.call(e)==="[object Array]"?e:jd(Ud(e)),n=i.length,o=n?t:void 0;++r<n;){if(Object(o)!==o)return;o=o[i[r]]}return ho("ref:",o),typeof o=="function"?o():o}Object.defineProperty(Yn,"__esModule",{value:!0});var po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),qd=Xt,Qr=Nr(qd),Kd=qn,zd=Rt,Lt=Nr(zd),Gd=Hd,Jd=Nr(Gd),Xd=Ba,Qd=Nr(Xd);function Nr(e){return e&&e.__esModule?e:{default:e}}function Zd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ep=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Zd(this,e),this.factMap=new Map(t),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(i.allowUndefinedFacts);for(var n in r){var o=void 0;r[n]instanceof Qr.default?o=r[n]:o=new Qr.default(n,r[n]),this._addConstantFact(o),(0,Lt.default)("almanac::constructor initialized runtime fact:"+o.id+" with "+o.value+"<"+po(o.value)+">")}}return Yd(e,[{key:"_getFact",value:function(r){return this.factMap.get(r)}},{key:"_addConstantFact",value:function(r){this.factMap.set(r.id,r),this._setFactValue(r,{},r.value)}},{key:"_setFactValue",value:function(r,i,n){var o=r.getCacheKey(i),a=Promise.resolve(n);return o&&this.factResultsCache.set(o,a),a}},{key:"addRuntimeFact",value:function(r,i){var n=new Qr.default(r,i);return this._addConstantFact(n)}},{key:"factValue",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=void 0,a=this._getFact(r);if(a===void 0)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new Kd.UndefinedFactError("Undefined fact: "+r));if(a.isConstant())o=Promise.resolve(a.calculate(i,this));else{var l=a.getCacheKey(i),f=l&&this.factResultsCache.get(l);f?(o=Promise.resolve(f),(0,Lt.default)("almanac::factValue cache hit for fact:"+r)):((0,Lt.default)("almanac::factValue cache miss for fact:"+r+"; calculating"),o=this._setFactValue(a,i,a.calculate(i,this)))}return n?o.then(function(p){if((0,Qd.default)(p)){var m=(0,Jd.default)(n)(p);return(0,Lt.default)("condition::evaluate extracting object property "+n+", received: "+m),m}else return(0,Lt.default)("condition::evaluate could not compute object path("+n+") of non-object: "+p+" <"+(typeof p>"u"?"undefined":po(p))+">; continuing with "+p),p}):o}}]),e}();Yn.default=ep;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});var tp=function(){var t=[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r.event&&t.push(r.event),t}};Kn.SuccessEventFact=tp;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});var rp=Qt,Ce=np(rp);function np(e){return e&&e.__esModule?e:{default:e}}var Ee=[];Ee.push(new Ce.default("equal",function(e,t){return e===t}));Ee.push(new Ce.default("notEqual",function(e,t){return e!==t}));Ee.push(new Ce.default("in",function(e,t){return t.indexOf(e)>-1}));Ee.push(new Ce.default("notIn",function(e,t){return t.indexOf(e)===-1}));Ee.push(new Ce.default("contains",function(e,t){return e.indexOf(t)>-1},Array.isArray));Ee.push(new Ce.default("doesNotContain",function(e,t){return e.indexOf(t)===-1},Array.isArray));function Fr(e){return Number.parseFloat(e).toString()!=="NaN"}Ee.push(new Ce.default("lessThan",function(e,t){return e<t},Fr));Ee.push(new Ce.default("lessThanInclusive",function(e,t){return e<=t},Fr));Ee.push(new Ce.default("greaterThan",function(e,t){return e>t},Fr));Ee.push(new Ce.default("greaterThanInclusive",function(e,t){return e>=t},Fr));zn.default=Ee;Object.defineProperty(Fe,"__esModule",{value:!0});Fe.FINISHED=Fe.RUNNING=Fe.READY=void 0;var ip=function(){function e(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),op=Xt,or=Ot(op),ap=Ir,Zr=Ot(ap),sp=Qt,en=Ot(sp),up=Yn,lp=Ot(up),cp=wr,fp=Kn,hp=zn,dp=Ot(hp),pp=Rt,tt=Ot(pp);function Ot(e){return e&&e.__esModule?e:{default:e}}function mp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vp(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yp(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gp=Fe.READY="READY",mo=Fe.RUNNING="RUNNING",vo=Fe.FINISHED="FINISHED",_p=function(e){yp(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};mp(this,t);var n=vp(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.rules=[],n.allowUndefinedFacts=i.allowUndefinedFacts||!1,n.operators=new Map,n.facts=new Map,n.status=gp,r.map(function(o){return n.addRule(o)}),dp.default.map(function(o){return n.addOperator(o)}),n}return ip(t,[{key:"addRule",value:function(i){if(!i)throw new Error("Engine: addRule() requires options");if(!i.hasOwnProperty("conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!i.hasOwnProperty("event"))throw new Error('Engine: addRule() argument requires "event" property');var n=void 0;return i instanceof Zr.default?n=i:n=new Zr.default(i),n.setEngine(this),this.rules.push(n),this.prioritizedRules=null,this}},{key:"removeRule",value:function(i){if(!(i instanceof Zr.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var n=this.rules.indexOf(i);return n===-1?!1:(this.prioritizedRules=null,Boolean(this.rules.splice(n,1).length))}},{key:"addOperator",value:function(i,n){var o=void 0;i instanceof en.default?o=i:o=new en.default(i,n),(0,tt.default)("engine::addOperator name:"+o.name),this.operators.set(o.name,o)}},{key:"removeOperator",value:function(i){var n=void 0;return i instanceof en.default?n=i.name:n=i,this.operators.delete(n)}},{key:"addFact",value:function(i,n,o){var a=i,l=void 0;return i instanceof or.default?(a=i.id,l=i):l=new or.default(i,n,o),(0,tt.default)("engine::addFact id:"+a),this.facts.set(a,l),this}},{key:"removeFact",value:function(i){var n=void 0;return i instanceof or.default?n=i.id:n=i,this.facts.delete(n)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var i=this.rules.reduce(function(n,o){var a=o.priority;return n[a]||(n[a]=[]),n[a].push(o),n},{});this.prioritizedRules=Object.keys(i).sort(function(n,o){return Number(n)>Number(o)?-1:1}).map(function(n){return i[n]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=vo,this}},{key:"getFact",value:function(i){return this.facts.get(i)}},{key:"evaluateRules",value:function(i,n){var o=this;return Promise.all(i.map(function(a){if(o.status!==mo){(0,tt.default)("engine::run status:"+o.status+"; skipping remaining rules");return}return a.evaluate(n).then(function(l){(0,tt.default)("engine::run ruleResult:"+l.result),l.result?(o.emit("success",a.event,n,l),o.emit(a.event.type,a.event.params,n,l),n.factValue("success-events",{event:a.event})):o.emit("failure",a.event,n,l)})}))}},{key:"run",value:function(){var i=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,tt.default)("engine::run started"),(0,tt.default)("engine::run runtimeFacts:",n),n["success-events"]=new or.default("success-events",(0,fp.SuccessEventFact)(),{cache:!1}),this.status=mo;var o=new lp.default(this.facts,n,{allowUndefinedFacts:this.allowUndefinedFacts}),a=this.prioritizeRules(),l=Promise.resolve();return new Promise(function(f,p){a.map(function(m){return l=l.then(function(){return i.evaluateRules(m,o)}).catch(p),l}),l.then(function(){return i.status=vo,(0,tt.default)("engine::run completed"),o.factValue("success-events")}).then(function(m){f({events:m,almanac:o})}).catch(p)})}}]),t}(cp.EventEmitter);Fe.default=_p;Object.defineProperty(ye,"__esModule",{value:!0});ye.Engine=ye.Operator=ye.Rule=ye.Fact=void 0;ye.default=function(e,t){return new $a.default(e,t)};var Sp=Fe,$a=xr(Sp),Ep=Xt,wp=xr(Ep),bp=Ir,Rp=xr(bp),Op=Qt,Ap=xr(Op);function xr(e){return e&&e.__esModule?e:{default:e}}ye.Fact=wp.default;ye.Rule=Rp.default;ye.Operator=Ap.default;ye.Engine=$a.default;(function(e){e.exports=ye})(hh);var fe=(e=>(e[e.TODO=0]="TODO",e[e.PROGRESS=1]="PROGRESS",e[e.COMPLETED=2]="COMPLETED",e[e.EXCLUDED=3]="EXCLUDED",e[e.ERROR=4]="ERROR",e))(fe||{}),J=(e=>(e[e.PREVIOUS=0]="PREVIOUS",e[e.NEXT=1]="NEXT",e[e.GO_TO_STEP=2]="GO_TO_STEP",e[e.SAVE=3]="SAVE",e[e.SUBMIT=4]="SUBMIT",e[e.VALIDATE=5]="VALIDATE",e[e.NONE=6]="NONE",e))(J||{}),X=(e=>(e[e.PROGRESS=0]="PROGRESS",e[e.ERROR=1]="ERROR",e[e.SAVE_SUCCESS=2]="SAVE_SUCCESS",e[e.SUBMIT_SUCCESS=3]="SUBMIT_SUCCESS",e[e.ERROR_CRITICAL=4]="ERROR_CRITICAL",e))(X||{});function vn(e){let t=N(z,{});return e.isSubmitted?t=N("div",{children:"Your information has been submitted"}):e.bodyText&&(t=N("div",{dangerouslySetInnerHTML:{__html:e.bodyText}})),j("div",{className:`submission-header${e.isSubmitted?" submitted":""}`,children:[N("h2",{children:e.title}),t,N("hr",{})]})}try{vn.displayName="Header",vn.__docgenInfo={description:"",displayName:"Header",props:{isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}},bodyText:{defaultValue:null,description:"",name:"bodyText",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}}}catch{}function yn(e){const t=e.stepList.filter(o=>o.child!==!0),r=(o,a,l,f)=>{let p="circle";return l||f?{iconDef:p}:(a?p="block":o===fe.COMPLETED?p="checkCircle":o===fe.ERROR&&(p="errorOutlined"),{iconDef:p})},i=(o,a=!1)=>{let l="item";return o&&(l=`${l} pointed `),a&&(l=`${l} static`),l},n=(o,a,l=!1)=>{if(!o||o.child&&!l)return N(z,{});const f=(v,y,_)=>!v.inProgress&&(!y||v.final)?N("button",{className:"btn btn-link",onClick:()=>_(v),children:v.title}):N("span",{children:v.title}),p=r(o.state,o.excluded,o.static,o.final),m=i(o.inProgress,o.static);return j("div",{className:m,children:[N(lr,{icon:p.iconDef}),f(o,a,e.onStepChange)]})};return N("div",{className:"SRC-menuLayout json-forms-menu",style:{flex:"1"},children:N("ul",{children:t.map((o,a)=>j("li",{className:"item-wrap",children:[n(o,!!e.isWizardMode),o.children&&o.children.length>0&&N("div",{className:"subMenu",children:N("ul",{children:o.children&&o.children.map((l,f)=>{const p=e.stepList.find(m=>m.id===l);return typeof p>"u"?N(z,{}):N("li",{className:"item-wrap",children:n(p,!!e.isWizardMode,!0)},`${f}-${l}`)})})})]},`${a}-${o.id}`))})})}try{yn.displayName="StepsSideNav",yn.__docgenInfo={description:"",displayName:"StepsSideNav",props:{stepList:{defaultValue:null,description:"",name:"stepList",required:!0,type:{name:"Step[]"}},onStepChange:{defaultValue:null,description:"",name:"onStepChange",required:!0,type:{name:"(step: Step) => void"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}}}}}catch{}function gn(e){const r=(o=>o.isWizardMode?o.previousStepIds&&o.previousStepIds.length>0:o.steps.findIndex(a=>a.id===o.currentStep.id)>0)(e)?N("button",{type:"button",onClick:o=>e.onNavAction(J.PREVIOUS),className:"btn btn-link nav-link prev",children:N(lr,{icon:"chevronLeft"})}):N(z,{}),i=e.currentStep.final?N(z,{}):N("button",{type:"button",onClick:o=>e.onNavAction(J.NEXT),className:"btn btn-link nav-link next",children:N(lr,{icon:"chevronRight"})}),n=N("button",{type:"button",className:"btn btn-action save",disabled:e.isFormSubmitted,onClick:o=>e.onNavAction(J.SAVE),children:"SAVE"});return j("div",{children:[N("hr",{}),j("div",{className:"buttonWrapper pull-right",children:[r," ",i," ",n]})]})}function _n(e){const t=e.steps.find(r=>r.id===e.nextStepId);return typeof t>"u"?N(z,{}):j("span",{className:"nav-link",children:[N("a",{onClick:r=>e.onNavAction(t),children:t.title}),N(lr,{icon:"chevronRight"})]})}try{gn.displayName="NavButtons",gn.__docgenInfo={description:"",displayName:"NavButtons",props:{isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},previousStepIds:{defaultValue:null,description:"",name:"previousStepIds",required:!0,type:{name:"string[]"}},onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"(action: NavActionEnum) => void"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},currentStep:{defaultValue:null,description:"",name:"currentStep",required:!0,type:{name:"Step"}},isFormSubmitted:{defaultValue:null,description:"",name:"isFormSubmitted",required:!1,type:{name:"boolean"}}}}}catch{}try{_n.displayName="NextStepLink",_n.__docgenInfo={description:"",displayName:"NextStepLink",props:{onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"(step: Step) => void"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},nextStepId:{defaultValue:null,description:"",name:"nextStepId",required:!0,type:{name:"string | undefined"}}}}}catch{}function Sn(e){const t=j("div",{children:[N("h6",{children:"Data"}),N("pre",{children:JSON.stringify(e.formData,null,2)})]});return N(z,{children:!e.hidden&&t})}try{Sn.displayName="DataDebug",Sn.__docgenInfo={description:"",displayName:"DataDebug",props:{formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!0,type:{name:"boolean"}}}}}catch{}function Tp(e,t,r){const i=/\[\d+\]\./g,n=/\.(\d)+/g;e=e.replace(n,"[$1]");const a=`${e.split(".").join(".properties.")}.title`,l=`${e}.ui:title`,f=a.replace(i,".items."),p=l.replace(i,".items."),m=a.match(i);let v=xs(m);v&&(v=v.substring(1,v.length-2),v=isNaN(parseInt(v))?"":`${parseInt(v)+1}`);const y=yt(r,l)||yt(t.properties,a)||yt(r,p)||yt(t.properties,f)||`${f}`;return`${v?"["+v+"] ":""}${y}`}function Cp(e,t,r,i){function n(f,p,m){const v=".";return Object.keys(f).forEach(y=>{if(f[y]===null)p[m+y]="";else if(bi(f[y])&&!wi(f[y]))for(const _ in f[y])if(bi(f[y][_])||Ei(f[y])&&!wi(f[y][_]))n(f[y][_],p,`${m}${y}[${_}]${v}`);else{let w=p[`${m}${y}`];w=w?`${w}, `:"",p[`${m}${y}`]=w+f[y][_]}else Ei(f[y])&&!Ps(f[y])?n(f[y],p,`${m}${y}${v}`):p[m+y]=f[y]}),p}const o=n(Oo(e),[],"");return Ns(o).map(f=>{let p=o[f];o[f]===!1&&(p="false"),o[f]===!0&&(p="true");const m=f.indexOf(".");return{screen:Fs(t,{id:f.substring(0,m)}),label:Tp(f,r,i),value:p}}).filter(f=>f.label.indexOf(".properties.included.title")===-1).filter(f=>f.screen&&typeof f.value<"u").map(f=>({label:f.label,value:f.value,screen:f.screen})).sort((f,p)=>f.screen.order-p.screen.order)}function En(e){let t=[];t=Cp(Oo(e.formData),e.steps,e.schema,e.uiSchema);let r="";const i=j(z,{children:[N("table",{className:"table summary-table-header",children:N("thead",{children:j("tr",{children:[N("th",{children:"Step"}),N("th",{children:"Label"}),N("th",{children:"Value"})]})})}),N("div",{className:"scroll-area table-body",children:N("table",{className:"table summary-table",children:N("tbody",{children:t.map((n,o)=>j("tr",{children:[N("td",{children:r!==n.screen.id&&(r=n.screen.id)&&N("span",{children:n.screen.title})}),N("td",{children:n.label}),N("td",{children:n.value})]},`${o}-${n.screen.id}-${n.label}`))})})})]});return j(z,{children:[N("p",{className:"step-exclude-directions",children:'Below is all of the data you have entered. Before submitting, click "Validate" to ensure that all of the required data has been entered.'}),N("button",{className:"nav-link pull-right",onClick:()=>window.print(),children:"Print this data"}),N("div",{className:"panel panel-default padding-full wrap",children:N("div",{className:"summary scroll-area",children:i})})]})}try{En.displayName="SummaryTable",En.__docgenInfo={description:"",displayName:"SummaryTable",props:{isWizard:{defaultValue:null,description:"",name:"isWizard",required:!1,type:{name:"boolean"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},callbackFn:{defaultValue:null,description:"",name:"callbackFn",required:!1,type:{name:"((screenId: string) => void)"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}}}}}catch{}var wn={},Ip={get exports(){return wn},set exports(e){wn=e}},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});var me=vt;function Ua(){return(Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var Np=me.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},me.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),Fp=me.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},me.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function xp(e,t,r,i,n){var o=(e-r)/(t-r);if(o===0)return i;if(o===1)return n;for(var a="#",l=1;l<6;l+=2){var f=parseInt(i.substr(l,2),16),p=parseInt(n.substr(l,2),16),m=Math.round((1-o)*f+o*p).toString(16);m.length===1&&(m="0"+m),a+=m}return a}function yo(e){if(e.length===7)return e;for(var t="#",r=1;r<4;r+=1)t+=e[r]+e[r];return t}function go(e,t,r,i,n){return xp(e,t,r,yo(i),yo(n))}function Pp(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)===-1&&(r[i]=e[i]);return r}var _o=function(e){function t(r){e.call(this,r);var i=r.height,n=r.width,o=r.checked;this.t=r.handleDiameter||i-2,this.i=Math.max(n-i,n-(i+this.t)/2),this.o=Math.max(0,(i-this.t)/2),this.state={s:o?this.i:this.o},this.n=0,this.e=0,this.h=this.h.bind(this),this.r=this.r.bind(this),this.a=this.a.bind(this),this.c=this.c.bind(this),this.l=this.l.bind(this),this.u=this.u.bind(this),this.f=this.f.bind(this),this.p=this.p.bind(this),this.b=this.b.bind(this),this.g=this.g.bind(this),this.v=this.v.bind(this),this.w=this.w.bind(this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.componentDidUpdate=function(r){r.checked!==this.props.checked&&this.setState({s:this.props.checked?this.i:this.o})},t.prototype.k=function(r){this.y.focus(),this.setState({C:r,M:!0,m:Date.now()})},t.prototype.x=function(r){var i=this.state,n=i.C,o=i.s,a=(this.props.checked?this.i:this.o)+r-n;i.R||r===n||this.setState({R:!0});var l=Math.min(this.i,Math.max(this.o,a));l!==o&&this.setState({s:l})},t.prototype.S=function(r){var i=this.state,n=i.s,o=i.R,a=i.m,l=this.props.checked,f=(this.i+this.o)/2,p=Date.now()-a;!o||p<250?this.T(r):l?f<n?this.setState({s:this.i}):this.T(r):n<f?this.setState({s:this.o}):this.T(r),this.setState({R:!1,M:!1}),this.n=Date.now()},t.prototype.h=function(r){r.preventDefault(),typeof r.button=="number"&&r.button!==0||(this.k(r.clientX),window.addEventListener("mousemove",this.r),window.addEventListener("mouseup",this.a))},t.prototype.r=function(r){r.preventDefault(),this.x(r.clientX)},t.prototype.a=function(r){this.S(r),window.removeEventListener("mousemove",this.r),window.removeEventListener("mouseup",this.a)},t.prototype.c=function(r){this.$=null,this.k(r.touches[0].clientX)},t.prototype.l=function(r){this.x(r.touches[0].clientX)},t.prototype.u=function(r){r.preventDefault(),this.S(r)},t.prototype.p=function(r){50<Date.now()-this.n&&(this.T(r),50<Date.now()-this.e&&this.setState({M:!1}))},t.prototype.b=function(){this.e=Date.now()},t.prototype.g=function(){this.setState({M:!0})},t.prototype.v=function(){this.setState({M:!1})},t.prototype.w=function(r){this.y=r},t.prototype.f=function(r){r.preventDefault(),this.y.focus(),this.T(r),this.setState({M:!1})},t.prototype.T=function(r){var i=this.props;(0,i.onChange)(!i.checked,r,i.id)},t.prototype.render=function(){var r=this.props,i=r.disabled,n=r.className,o=r.offColor,a=r.onColor,l=r.offHandleColor,f=r.onHandleColor,p=r.checkedIcon,m=r.uncheckedIcon,v=r.boxShadow,y=r.activeBoxShadow,_=r.height,w=r.width,g=Pp(r,["disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","boxShadow","activeBoxShadow","height","width","handleDiameter"]),R=this.state,b=R.s,E=R.R,A=R.M,C={position:"relative",display:"inline-block",textAlign:"left",opacity:i?.5:1,direction:"ltr",borderRadius:_/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},T={height:_,width:w,margin:Math.max(0,(this.t-_)/2),position:"relative",background:go(b,this.i,this.o,o,a),borderRadius:_/2,cursor:i?"default":"pointer",WebkitTransition:E?null:"background 0.25s",MozTransition:E?null:"background 0.25s",transition:E?null:"background 0.25s"},x={height:_,width:Math.min(1.5*_,w-(this.t+_)/2+1),position:"relative",opacity:(b-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:E?null:"opacity 0.25s",MozTransition:E?null:"opacity 0.25s",transition:E?null:"opacity 0.25s"},L={height:_,width:Math.min(1.5*_,w-(this.t+_)/2+1),position:"absolute",opacity:1-(b-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:E?null:"opacity 0.25s",MozTransition:E?null:"opacity 0.25s",transition:E?null:"opacity 0.25s"},Q={height:this.t,width:this.t,background:go(b,this.i,this.o,l,f),display:"inline-block",cursor:i?"default":"pointer",borderRadius:"50%",position:"absolute",transform:"translateX("+b+"px)",top:Math.max(0,(_-this.t)/2),outline:0,boxShadow:A?y:v,border:0,WebkitTransition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"};return me.createElement("div",{className:n,style:C},me.createElement("div",{className:"react-switch-bg",style:T,onClick:i?null:this.f,onMouseDown:function(ue){return ue.preventDefault()}},p&&me.createElement("div",{style:x},p),m&&me.createElement("div",{style:L},m)),me.createElement("div",{className:"react-switch-handle",style:Q,onClick:function(ue){return ue.preventDefault()},onMouseDown:i?null:this.h,onTouchStart:i?null:this.c,onTouchMove:i?null:this.l,onTouchEnd:i?null:this.u,onTouchCancel:i?null:this.v}),me.createElement("input",Ua({},{type:"checkbox",role:"switch",disabled:i,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},g,{ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})))},t}(me.Component);_o.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:Np,checkedIcon:Fp,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},Gn.default=_o;(function(e){e.exports=Gn})(Ip);const kp=bs(wn);class bn extends vt.Component{constructor(t){super(t),this.excludeWarningText=j("div",{children:[N("p",{children:"This action will clear any entered data on this page and remove this form from your submission. You can include it again at anytime. Only this page will be affected."}),N("p",{children:"Are you sure you want to skip this step and clear any entered data?"})]}),this.excludeWarningHeader="Skip This Step?",this.unsavedDataWarning="You might have some unsaved data. Are you sure you want to leave?",this.navAction=J.NONE,this.extraErrors=[],this.isNewForm=n=>Object.keys(n).length==1&&Object.keys(n)[0]==="metadata"||Object.keys(n).length==0,this.getFirstStep=(n,o)=>this.isNewForm(o)?n[0]:n.find(a=>a.final===!0)||n[0],this.onUnload=n=>this.state.hasUnsavedChanges?(n.preventDefault(),n.returnValue=this.unsavedDataWarning):void 0,this.setupBeforeUnloadListener=()=>{window.addEventListener("beforeunload",this.onUnload)},this._setIncludedPropInFormDataNonWizard=(n,o)=>{const a={},l=n.formData;return Object.keys(o).forEach(f=>{U.get(o[f],"properties.included")&&U.set(a,`${f}.included`,!0)}),{...l,...a}},this._setIncludedPropInFormDataWizard=n=>{const o=n.currentStep.id,a=U.cloneDeep(n.formData);return U.set(a,`${o}.included`,!0),a},this.getSchema=({id:n,final:o})=>o?this.props.schema:U.pick(this.props.schema,["title","type",`properties.${n}`]),this.getNextStepId=async(n,o,a)=>{if(a)return a;if(!n.rules||n.rules.length===0)return n.default;const l=new _r.Engine(n.rules);try{const f=await l.run(o);return f.events.length>0?f.events[0].params.next:n.default}catch{return n.default}},this.moveStep=async(n,o,a,l=[...this.state.previousStepIds])=>{var _;const f=this.state.currentStep;let p;(_=this.formRef)!=null&&_.current&&this.formRef.current.setState({errorSchema:{}});const m=this.props.isWizardMode&&!o;m&&l.push(f.id),a?p=fe.ERROR:(p=fe.COMPLETED,!m&&this.props.isWizardMode&&(p=fe.TODO)),o=await this.getNextStepId(f,n,o);const v=this.state.steps.map(w=>w.id===f.id?{...w,state:p,inProgress:!1}:w.id===o?{...w,inProgress:!0}:w);m&&U.set(n,`${o}.included`,!0);const y=this.state.steps.find(w=>w.id===o);this.props.isWizardMode&&y.final&&Object.keys(n).forEach(w=>{n[w].included===void 0&&(n[w]={})}),this.saveStepState(l,v,y,n)},this.saveStepState=(n,o,a,l)=>{this.setState({previousStepIds:n,steps:o,currentStep:a,formData:l,hasValidated:!1,doShowErrors:!1})},this.goPrevious=async(n,o)=>{let a;const l=[...this.state.previousStepIds];if(this.props.isWizardMode)a=l.pop(),this.isSubmitScreen()||U.set(n,`${this.state.currentStep.id}.included`,void 0);else{const f=U.findIndex(this.state.steps,{id:this.state.currentStep.id});f>0&&(a=this.state.steps[f-1].id)}if(!U.isUndefined(a))return this.moveStep(n,a,o,l)},this.triggerAction=async n=>{if(n===J.SAVE)return this.props.onSave(this.state.formData);this.navAction=n,this.extraErrors=await this.runCustomValidation(this.state.formData,this.state.currentStep,this.state.steps),this.submitButtonRef.current&&this.submitButtonRef.current.click()},this.triggerStepChange=n=>{this.nextStep=n,this.triggerAction(J.GO_TO_STEP)},this.onError=n=>{if(this.setState({doShowErrors:!0,hasValidated:!1}),this.navAction===J.VALIDATE){const o=this.setStepStatusForFailedValidation(n.props,this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep));this.setState({steps:o}),this.formDivRef.current.scrollTo(0,0),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,o[0].id,!0),this.setState({isLoadingSaved:!1}))}},this.setStepStatusForFailedValidation=(n,o,a,l,f)=>{const p=n.map(y=>U.trimStart(y.property,".").split(".")[0]),m=Object.keys(f);return o.map(y=>{if(p.indexOf(y.id)>-1)return{...y,state:fe.ERROR};if(m.indexOf(y.id)>-1){let _=fe.COMPLETED;return a&&!U.get(l[y.id],"included")&&(_=y.state),{...y,state:_}}else return y})},this.onSubmit=()=>{this.performAction(this.navAction,this.state.currentStep.state===fe.ERROR)},this.isSubmitScreen=()=>this.state.currentStep.final===!0&&!this.state.isLoadingSaved,this.showExcludeStateWarningModal=(n,o=!1)=>{this.setState({modalContext:{action:this.toggleExcludeStep,arguments:[n,!0,o]}})},this.toggleExcludeStep=(n,o)=>{this.setState((a,l)=>{const f=a.steps.map(v=>v.id===n?{...v,excluded:o}:v),p=U.cloneDeep(a.formData),m=U.cloneDeep(a.currentStep);return m.id===n&&(m.excluded=o),o?p[n]={}:U.set(p,`${n}.included`,!0),{steps:f,formData:p,modalContext:void 0,currentStep:m}})},this.renderNotification=n=>n===X.SAVE_SUCCESS?N("div",{className:"notification-area",children:" Successfully saved "}):n===X.SUBMIT_SUCCESS?N("div",{className:"notification-area",children:" Successfully submitted "}):n===X.PROGRESS?N("div",{className:"notification-area",children:" working on it ...."}):N(z,{}),this.renderTextForStaticScreen=()=>{if(!this.state.currentStep.copy)return N(z,{});const n=this.state.currentStep.copy;return N("div",{className:"static-screen",dangerouslySetInnerHTML:{__html:n}})},this.renderOptionalFormSubheader=(n=!1)=>{if(n)return N(z,{});const o=this.state.currentStep;return o.excluded===!0?j("div",{className:"step-exclude-directions",children:["This form is currently not included in the submission.",N("button",{className:"btn btn-link",onClick:()=>this.toggleExcludeStep(o.id,!1),children:"Include"})]}):o.excluded===!1?j("div",{className:"step-exclude-directions",children:['This form is currently included in the submission. Enter some data if you have it, or click "Skip".',N("button",{className:"btn btn-link",onClick:()=>this.showExcludeStateWarningModal(this.state.currentStep.id),children:"Skip"})]}):N(z,{})},this.renderHelpToggle=(n,o,a)=>n.static||n.final?N(z,{}):N(z,{children:j("label",{className:"pull-right toggle-help-label",children:[N("span",{children:"Hide help"}),N(kp,{checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,className:"toggle-help",offColor:"#ccc",onChange:()=>a(),checked:o}),N("span",{children:"Show help"})]})}),this.runCustomValidation=async(n,o,a)=>{const l=[];let f=o.validationRules||[],p={[o.id]:n[o.id]};if(o.final&&(f=a.reduce((y,_)=>_.validationRules&&_.validationRules.length>0?y.concat(_.validationRules):y,[]),p=U.cloneDeep(n)),f.length===0)return[];const m=[];f.forEach(y=>{const _=y.event.params.property;if(_.indexOf("[*]")===-1)m.push(y);else{const w=_.split("[*]")[0].substring(1),g=U.get(n,w);if(Array.isArray(g)&&typeof g!="string")for(let R=0;R<g.length;R++){const b=JSON.parse(JSON.stringify(y).replace(/\[\*\]/g,`[${R}]`));m.push(b)}else m.push(y)}});const v=new _r.Engine(m,{allowUndefinedFacts:!0});try{(await v.run(p)).events.forEach(w=>{const g={...w.params,params:{},stack:`${w.params.property} ${w.params.message}`};l.push(g)})}catch(y){console.log(y)}return l},this.transformErrors=n=>{if(this.extraErrors.forEach(a=>{n.find(l=>l.stack===a.stack)||n.push(a)}),this.navAction!==J.SUBMIT&&this.navAction!==J.VALIDATE&&(!this.props.isWizardMode||this.state.currentStep.final)){const a={...this.state.currentStep};return n.length>0?a.state=fe.ERROR:a.state=fe.COMPLETED,this.setState({currentStep:a}),[]}return n.filter(a=>a.name==="required").forEach(a=>{const l=a.property.substring(0,a.property.lastIndexOf("."));U.remove(n,f=>f.property.indexOf(l)>-1&&(f.name==="enum"||f.name==="oneOf"))}),n.map(a=>(a.message=a.message.replace("property","field"),a))},this.renderErrorListTemplate=n=>{const{errors:o}=n,a=o.map((l,f)=>Dp(this.state.steps,l,this.uiSchema,f,this.props.schema)).sort((l,f)=>l.order-f.order).map(l=>l.element);return N("div",{className:"form-error-summary",children:N("ul",{className:"error-detail",children:a})})},this.uiSchema=ja(U.cloneDeep(t.uiSchema),"ui:help");const r=t.navSchema.steps.map((n,o)=>({...n,inProgress:o===0})).sort((n,o)=>n.order-o.order);this.formRef=vt.createRef(),this.formDivRef=vt.createRef(),this.submitButtonRef=vt.createRef();const i=this.getFirstStep(r,t.formData);this.state={currentStep:i,steps:r,previousStepIds:[],formData:t.formData,doShowErrors:!1,doShowHelp:!0,hasUnsavedChanges:!1,isSubmitted:t.isSubmitted,isLoadingSaved:!this.isNewForm(this.props.formData)}}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}componentDidUpdate(t){const r=this.props.callbackStatus!==t.callbackStatus,i=this.props.callbackStatus===X.SAVE_SUCCESS||this.props.callbackStatus===X.SUBMIT_SUCCESS;r&&i&&(this.setState({hasUnsavedChanges:!1}),this.props.callbackStatus===X.SUBMIT_SUCCESS&&(this.setState({isSubmitted:!0}),window.history.back()))}componentDidMount(){this.setupBeforeUnloadListener(),this.isNewForm(this.state.formData)?this.setState(r=>({formData:this.props.isWizardMode?this._setIncludedPropInFormDataWizard(r):this._setIncludedPropInFormDataNonWizard(r,this.props.schema)})):this.triggerAction(J.VALIDATE)}handleOnChange({formData:t}){if(!this.isSubmitScreen()&&!this.state.currentStep.excluded){const r=!U.isEqual(this.state.formData,t);this.setState({formData:t,hasUnsavedChanges:r})}}performAction(t,r){const i=this.state.formData;switch(t){case J.NEXT:return this.moveStep(i,void 0,r);case J.PREVIOUS:return this.goPrevious(i,r);case J.GO_TO_STEP:return this.nextStep?this.moveStep(i,this.nextStep.id,r):void 0;case J.SUBMIT:{this.props.onSubmit(i);return}case J.VALIDATE:{const n=this.setStepStatusForFailedValidation([],this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep)),o={...this.state.currentStep,state:fe.COMPLETED};this.setState({hasValidated:!0,currentStep:o,steps:n}),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,n[0].id,!1),this.setState({isLoadingSaved:!1}));return}default:return}}render(){return j("div",{className:"outter-wrap",children:[N(Ls,{when:this.state.hasUnsavedChanges,message:this.unsavedDataWarning}),N(vn,{isSubmitted:this.state.isSubmitted,bodyText:this.state.currentStep.description,title:this.props.formTitle}),N("div",{children:j("div",{className:"inner-wrap",children:[N(yn,{stepList:this.state.steps,isWizardMode:this.props.isWizardMode,onStepChange:this.triggerStepChange}),this.state.isLoadingSaved&&N("div",{className:"text-center",children:N("span",{className:"spinner"})}),j("div",{className:"form-wrap",children:[N("div",{className:"form-title",children:this.state.currentStep.title}),this.renderNotification(this.props.callbackStatus),j("div",{className:`right-top-actions ${this.state.isSubmitted?"hide":""}`,children:[!this.state.currentStep.static&&N("button",{type:"button",className:"btn btn-action save pull-right",onClick:()=>{this.triggerAction(J.VALIDATE)},children:"VALIDATE"}),this.renderHelpToggle(this.state.currentStep,this.state.doShowHelp,()=>this.setState({doShowHelp:!this.state.doShowHelp})),this.isSubmitScreen()&&N("button",{type:"button",className:"btn btn-action save pull-right",disabled:this.state.isSubmitted,onClick:()=>{this.triggerAction(J.SUBMIT)},children:"SUBMIT"})]}),this.renderOptionalFormSubheader(this.props.isWizardMode),j("div",{className:this.isSubmitScreen()||this.state.currentStep.static?"hide-form-only":"wrap",children:[this.state.hasValidated&&N("div",{className:"notification-area",children:"Great! All required data on this form has been entered."}),j("div",{ref:this.formDivRef,className:`scroll-area ${this.state.currentStep.excluded?"disabled":" "} `,children:[N(Is,{noHtml5Validate:!0,className:this.state.doShowHelp?"submissionInputForm":"submissionInputForm no-help",liveValidate:!1,formData:this.state.formData,schema:this.getSchema(this.state.currentStep),uiSchema:this.uiSchema,onSubmit:this.onSubmit,onChange:t=>this.handleOnChange(t),onError:t=>this.onError({props:t,form:this.formRef}),showErrorList:!!this.state.doShowErrors||!!this.props.isWizardMode,ErrorList:this.renderErrorListTemplate,transformErrors:this.transformErrors,ref:this.formRef,disabled:this.state.currentStep.excluded||this.state.isSubmitted,children:N("div",{style:{display:"none"},children:N("button",{type:"submit",ref:this.submitButtonRef})})}),this.renderTextForStaticScreen(),!this.props.isWizardMode&&N(_n,{steps:this.state.steps,nextStepId:this.state.currentStep.default,onNavAction:t=>this.triggerStepChange(t)})]})]}),this.isSubmitScreen()&&N(En,{formData:this.state.formData,steps:this.state.steps,callbackFn:t=>this.showExcludeStateWarningModal(t,!0),uiSchema:this.props.uiSchema,schema:this.props.schema}),N(gn,{currentStep:this.state.currentStep,steps:this.state.steps,previousStepIds:this.state.previousStepIds,isFormSubmitted:this.state.isSubmitted,onNavAction:t=>{this.triggerAction(t)}})]})]})}),this.state.modalContext&&N(Ds,{show:!0,title:this.excludeWarningHeader,modalBody:this.excludeWarningText,className:`theme-${this.props.formClass}`,onConfirmCallbackArgs:this.state.modalContext.arguments,onCancel:()=>this.setState({modalContext:void 0}),onConfirm:(t,r)=>this.toggleExcludeStep(t,r)}),N(Sn,{formData:this.state.formData,hidden:!0})]})}}function Dp(e,t,r,i,n){const o=U.trimStart(t.property,"."),a=o.split("."),l=`${a.join(".properties.")}.title`,f=`${o}.ui:title`,p=l.replace(/\[.*?\]/,".items"),m=f.replace(/\[.*?\]/,".items"),v=l.match(/\[.*?\]/);let y=U.first(v);y&&(y=y.substring(1,y.length-1),y=isNaN(parseInt(y))?"":` [${parseInt(y)+1}]`);const _=U.get(r,f)||U.get(n.properties,l)||U.get(r,m)||U.get(n.properties,p)||t.property,w=U.find(e,{id:a[0]})||{title:a[0],order:0},g=N("li",{className:"",children:j("span",{children:[j("strong",{children:[w.title,y,":"]}),_,"  ",t.message]})},i);return{order:w.order,element:g}}function ja(e,t){return U.keys(e).some(r=>{if(r===t){const i=e[r];return e[r]=N("span",{dangerouslySetInnerHTML:{__html:i}}),e}e[r]&&typeof e[r]=="object"&&ja(e[r],t)}),e}try{bn.displayName="SynapseForm",bn.__docgenInfo={description:"",displayName:"SynapseForm",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}},navSchema:{defaultValue:null,description:"",name:"navSchema",required:!0,type:{name:"{ steps: any[]; }"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"IFormData"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(formData: IFormData) => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(formData: IFormData) => void"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},callbackStatus:{defaultValue:null,description:"",name:"callbackStatus",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"}]}},isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}}}}}catch{}async function tn(e,t,r,i){try{const n=await ps(e,t,r),o=await ms(n,e,!0,!0),a=await vs(o.fileHandle,o.preSignedURL),l=JSON.parse(a);return{version:n.versionNumber,content:l}}catch(n){const o={message:`${n.message}:  configuration data for ${t} failed to load`};return i&&i(o),Promise.reject(o)}}class Er extends vt.Component{constructor(t){var r,i;super(t),this.getFileEntityDataDereferenced=async(n,o,a)=>{const{version:l,content:f}=await tn(n,o,a,this.onError),p=await ge.dereference(f);return{version:l,content:p}},this.getData=async n=>{if(n)try{let o={},a,l,f,p,m;const{searchParams:v}=this.props;if(v&&({dataFileHandleId:a,submitted:l}=v),a){const w=await ys(a,n);o=JSON.parse(w),l&&o&&o.metadata&&({formSchemaVersion:f,uiSchemaVersion:p,navSchemaVersion:m}=o.metadata)}const y=[this.getFileEntityDataDereferenced(n,this.props.formSchemaEntityId,f),tn(n,this.props.formUiSchemaEntityId,p,this.onError),tn(n,this.props.formNavSchemaEntityId,m,this.onError)],_=await Promise.all(y);a||(o={metadata:{formSchemaVersion:_[0].version,uiSchemaVersion:_[1].version,navSchemaVersion:_[2].version}}),this.setState({formData:o,formSchema:_[0].content,formUiSchema:_[1].content,formNavSchema:_[2].content,isLoading:!1})}catch(o){this.onError({message:o})}finally{this.setState({isLoading:!1})}},this.finishedProcessing=(n,o)=>{this.setState({isLoading:!1,notification:{type:n,message:o},status:n}),setTimeout(()=>{this.setState({status:void 0})},7e3)},this.onError=n=>{this.setState({notification:{type:X.ERROR,message:n.message,name:n.name},status:X.ERROR,isLoading:!1})},this.submitForm=async n=>{await this.saveToFile(n),this.setState({isLoading:!0}),await gs(this.state.formDataId,this.props.token),this.finishedProcessing(X.SUBMIT_SUCCESS,"File Submitted")},this.createOrUpdateFormDataFile=async(n,o)=>{n=`${n}.json`;const a=await _s(this.props.token,n,o),{searchParams:l}=this.props,f=l&&l.formGroupId;if(!f)throw console.error("formGroupId must be defined"),"formGroupId must be defined";try{const p=a.fileHandleId;let m;return this.state.formDataId?m=await Ss(this.state.formDataId,n,p,this.props.token):m=await Es(f,n,p,this.props.token),m}catch(p){throw this.onError(p),p}},this.saveToFile=async n=>{const o=yt(n,this.props.fileNamePath);if(this.setState({status:X.PROGRESS,notification:{type:X.PROGRESS,message:"Progress"},isLoading:!0}),!o){let a="File Name";try{const l=`${this.props.fileNamePath.replace(".",".properties.")}.title`;a=yt(this.state.formSchema.properties,l,a)}finally{const l=`Please Provide the ${a} before saving`;this.onError({message:l})}return}try{const a=new Blob([JSON.stringify(n)],{type:"text/json"}),l=await this.createOrUpdateFormDataFile(o,a);this.setState({formDataId:l.formDataId}),this.finishedProcessing(X.SAVE_SUCCESS,"File Saved")}catch(a){this.onError({message:a})}},this.isReadyToDisplayForm=n=>this.state.status!==X.ERROR_CRITICAL&&n.formSchema&&n.formUiSchema&&n.formNavSchema&&n.formData,this.renderLoader=(n,o)=>ks([X.ERROR,X.ERROR_CRITICAL],n.status)&&o.token&&n.isLoading?N("div",{className:"text-center",children:N("span",{className:"spinner"})}):N(z,{}),this.renderNotification=n=>n?n.type===X.ERROR?j(Ri,{variant:"danger",onClose:()=>this.setState({status:void 0}),children:[N(Ri.Heading,{children:"Error"}),j("p",{children:[n.name," ",n.message]})]}):N(z,{}):N(z,{}),this.renderUnauthenticatedView=n=>n?N(z,{}):j("div",{className:"panel padding-full unauthenticated text-center bootstrap-4-backport",children:["Please",N(Bs,{variant:"light-primary-base",style:{margin:"10px"},className:`${Cs}`,children:"sign in"}),"to initiate or continue your submission"]}),this.state={isLoading:!0,formDataId:(i=(r=this.props)==null?void 0:r.searchParams)==null?void 0:i.formDataId}}async componentDidMount(){await this.getData(this.props.token)}async componentDidUpdate(t){this.props.token!==t.token&&await this.getData(this.props.token)}render(){return N("div",{className:`theme-${this.props.formClass}`,children:j("div",{className:"SRC-ReactJsonForm",children:[this.renderNotification(this.state.notification),this.renderLoader(this.state,this.props),this.renderUnauthenticatedView(this.props.token),this.isReadyToDisplayForm(this.state)&&N("div",{children:N(bn,{schema:this.state.formSchema,uiSchema:this.state.formUiSchema,formData:this.state.formData,navSchema:this.state.formNavSchema,isWizardMode:this.props.isWizardMode,formTitle:this.props.formTitle,formClass:this.props.formClass,callbackStatus:this.state.status,onSave:t=>{this.saveToFile(t)},onSubmit:t=>{this.submitForm(t)},isSubmitted:this.props.searchParams&&!!this.props.searchParams.submitted})})]})})}}try{Er.displayName="SynapseFormWrapper",Er.__docgenInfo={description:"",displayName:"SynapseFormWrapper",props:{formSchemaEntityId:{defaultValue:null,description:"",name:"formSchemaEntityId",required:!0,type:{name:"string"}},formUiSchemaEntityId:{defaultValue:null,description:"",name:"formUiSchemaEntityId",required:!0,type:{name:"string"}},formNavSchemaEntityId:{defaultValue:null,description:"",name:"formNavSchemaEntityId",required:!0,type:{name:"string"}},token:{defaultValue:null,description:"",name:"token",required:!1,type:{name:"string"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"UploadToolSearchParams"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},fileNamePath:{defaultValue:null,description:"",name:"fileNamePath",required:!0,type:{name:"string"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}}}}}catch{}const yv={title:"Synapse/SynapseFormWrapper",component:Er,render:e=>N(ws,{children:t=>N(Er,{...e,token:t==null?void 0:t.accessToken})})},ar={args:{formTitle:"Your Contribution Request",formClass:"contribution-request",formSchemaEntityId:"syn20692910",fileNamePath:"study.submission_name",formUiSchemaEntityId:"syn20692911",formNavSchemaEntityId:"syn20968007",isWizardMode:!0}};var So,Eo,wo;ar.parameters={...ar.parameters,docs:{...(So=ar.parameters)==null?void 0:So.docs,source:{originalSource:`{
  args: {
    formTitle: 'Your Contribution Request',
    formClass: 'contribution-request',
    formSchemaEntityId: 'syn20692910',
    fileNamePath: 'study.submission_name',
    formUiSchemaEntityId: 'syn20692911',
    formNavSchemaEntityId: 'syn20968007',
    isWizardMode: true
  }
}`,...(wo=(Eo=ar.parameters)==null?void 0:Eo.docs)==null?void 0:wo.source}}};const gv=["Demo"];export{ar as Demo,gv as __namedExportsOrder,yv as default};
//# sourceMappingURL=SynapseFormWrapper.stories-acfcfd3d.js.map
