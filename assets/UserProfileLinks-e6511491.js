import{a as p,F as h,j as r}from"./jsx-runtime-095bf462.js";import{r as y}from"./index-8db94870.js";import{a as x,d as T,i as I,b5 as b,k as O}from"./SynapseClient-3fe62353.js";import{I as L}from"./IconSvg-86724fbb.js";import{u as C}from"./react-intersection-observer.modern-64b519d2.js";import{P as U}from"./getEndpoint-ac94413e.js";import{u as S}from"./useInfiniteQuery-5dcb980e.js";import{S as w}from"./SkeletonTable-06f62106.js";import{a as k}from"./useGetUserTeams-d3e225a9.js";import{T as R}from"./Typography-387311b4.js";import{S as $}from"./Skeleton-877784f8.js";function F(s,n){const{accessToken:i,keyFactory:a}=x();return S(a.getUserChallengesQueryKey(s),async o=>{const e=await T.getUserChallenges(i,s,o.pageParam,10);if(e.results.length>0){const l=Array.from(e.results,c=>c.projectId),g=await T.getEntityHeadersByIds(l);return{results:Array.from(e.results,(c,u)=>({challenge:c,projectHeader:g.results[u]})),totalNumberOfResults:e.totalNumberOfResults}}return{results:[],totalNumberOfResults:e.totalNumberOfResults}},{...n,getNextPageParam:(o,e)=>{if(o.results.length>0)return e.length*10}})}function H(s,n,i){const{accessToken:a,keyFactory:o}=x();return S(o.getUserProjectsQueryKey(s,n),async e=>T.getUserProjects(s,{...n,nextPageToken:e.pageParam},a),{...i,getNextPageParam:e=>e.nextPageToken})}function N({userId:s}){const n=I(),{ref:i,inView:a}=C(),{data:o,status:e,isFetching:l,isLoading:g,hasNextPage:m,fetchNextPage:c,isError:u,error:f}=F(s);y.useEffect(()=>{u&&f&&n(f)},[u,f,n]),y.useEffect(()=>{e==="success"&&!l&&m&&c&&a&&c()},[e,l,m,c,a]);const d=(o==null?void 0:o.pages.flatMap(t=>t.results))??[];return p(h,{children:[d.length>0&&p(h,{children:[d.map(t=>t&&t.challenge&&t.projectHeader?r("p",{children:r("a",{target:"_self",rel:"noopener noreferrer",href:`${U.PORTAL}#!Synapse:${t.challenge.projectId}/challenge`,children:t.projectHeader.name})},`user-challenge-list-item-${t.challenge.projectId}`):!1),r("div",{ref:i})]}),!l&&d.length==0&&r("div",{children:"Empty"}),g&&r(w,{numRows:5,numCols:1})]})}try{N.displayName="UserChallenges",N.__docgenInfo={description:"",displayName:"UserChallenges",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}function E({userId:s}){const n=I(),{ref:i,inView:a}=C(),o={},{data:e,status:l,isFetching:g,isLoading:m,hasNextPage:c,fetchNextPage:u,isError:f,error:d}=H(s,o);y.useEffect(()=>{f&&d&&n(d)},[f,d,n]),y.useEffect(()=>{l==="success"&&!g&&c&&u&&a&&u()},[l,g,c,u,a]);const t=(e==null?void 0:e.pages.flatMap(P=>P.results))??[];return p(h,{children:[t.length>0&&p(h,{children:[t.map(P=>P?r("p",{children:r("a",{target:"_self",rel:"noopener noreferrer",href:`${U.PORTAL}#!Synapse:${P.id}`,children:P.name})},`user-project-list-item-${P.id}`):!1),r("div",{ref:i})]}),!g&&t.length==0&&r("div",{children:"Empty"}),m&&r(w,{numRows:5,numCols:1})]})}try{E.displayName="UserProjects",E.__docgenInfo={description:"",displayName:"UserProjects",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}function j({userId:s}){const n=I(),{ref:i,inView:a}=C(),{data:o,status:e,isFetching:l,isLoading:g,hasNextPage:m,fetchNextPage:c,isError:u,error:f}=k(s);y.useEffect(()=>{u&&f&&n(f)},[u,f,n]),y.useEffect(()=>{e==="success"&&!l&&m&&c&&a&&c()},[e,l,m,c,a]);const d=(o==null?void 0:o.pages.flatMap(t=>t.results))??[];return p(h,{children:[d.length>0&&p(h,{children:[d.map(t=>t?r("p",{children:r("a",{target:"_self",rel:"noopener noreferrer",href:`${U.PORTAL}#!Team:${t.id}`,children:t.name})},`user-team-list-item-${t.id}`):!1),r("div",{ref:i})]}),!l&&d.length==0&&r("div",{children:"Empty"}),g&&r(w,{numRows:5,numCols:1})]})}try{j.displayName="UserTeams",j.__docgenInfo={description:"",displayName:"UserTeams",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}var _=(s=>(s.PROJECTS="Projects",s.TEAMS="Teams",s.CHALLENGES="Challenges",s))(_||{});function v({userId:s}){const[n,i]=y.useState("Projects"),{data:a}=b(s);function o(e){switch(e){case"Projects":return"dashboard";case"Teams":return"peopleTwoTone";case"Challenges":return"challengesTwoTone"}}return p("div",{className:"UserProfileLinks",children:[p(R,{variant:"headline2",className:"title",children:[a&&p(h,{children:[a==null?void 0:a.userName,"'s Items"]}),!a&&r($,{width:"75%"})]}),r("div",{className:"Tabs",children:Object.keys(_).map(e=>r("div",{className:"Tab",role:"tab",onClick:l=>{l.stopPropagation(),i(_[e])},"aria-selected":_[e]===n,children:p(R,{variant:"buttonLink",children:[r(L,{icon:o(_[e])})," ",_[e]]})},e))}),r("div",{className:"TabContent",children:p(O,{children:[n==="Projects"&&r(h,{children:r(E,{userId:s})}),n==="Teams"&&r(h,{children:r(j,{userId:s})}),n==="Challenges"&&r(h,{children:r(N,{userId:s})})]})})]})}try{v.displayName="UserProfileLinks",v.__docgenInfo={description:"",displayName:"UserProfileLinks",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}export{v as U};
//# sourceMappingURL=UserProfileLinks-e6511491.js.map
