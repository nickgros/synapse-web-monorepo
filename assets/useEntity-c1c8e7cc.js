import{r as o}from"./index-8db94870.js";import{u,az as f,b4 as S,aF as E,bI as d,bJ as Q,bK as T,bL as m,bM as F,bN as K,bO as k}from"./EntityTypeUtils-80a22eb6.js";import{u as g}from"./useMutation-76a8b48d.js";import{u as J}from"./useInfiniteQuery-39fdcb17.js";import"./getEndpoint-ac94413e.js";import"./jsx-runtime-095bf462.js";import{_ as w,o as M}from"./pick-614a0d06.js";function l(t,a,s){return t.invalidateQueries(a.getEntityQueryKey(s))}function L(t,a,s){const{accessToken:n,keyFactory:e}=u();return f(e.getEntityVersionQueryKey(t,a),()=>S(n,t,a==null?void 0:a.toString()),s)}function D(t){const a=E(),{accessToken:s,keyFactory:n}=u();return g(e=>d(e,s),{...t,onSuccess:async(e,c,r)=>{await l(a,n,e.id),a.setQueryData(n.getEntityQueryKey(e.id),e),t!=null&&t.onSuccess&&await t.onSuccess(e,c,r)}})}function A(t){const a=E(),{accessToken:s,keyFactory:n}=u();return g(e=>Q(s,e),{...t,onSuccess:async(e,c,r)=>{await l(a,n,c),t!=null&&t.onSuccess&&await t.onSuccess(e,c,r)}})}function U(t,a){const{accessToken:n,keyFactory:e}=u();return J(e.getEntityVersionsQueryKey(t),async c=>await T(t,n,c.pageParam,200),{...a,getNextPageParam:(c,r)=>{if(c.results.length>0)return r.length*200}})}function I(t){return w(t,k[t.concreteType])}function P(t){return M(t,k[t.concreteType])}function _(t,a){const[s,n]=o.useState(),[e,c]=o.useState(),{accessToken:r,keyFactory:i}=u(),y=f(i.getEntityJsonQueryKey(t),()=>m(t,r),a);return o.useEffect(()=>{y.data&&(n(I(y.data)),c(P(y.data)))},[y.data]),{...y,entityMetadata:s,annotations:e}}function z(t){const a=E(),{accessToken:s,keyFactory:n}=u();return g(e=>{const c=e.id;return F(c,e,s)},{...t,onSuccess:async(e,c,r)=>{const i=e.id;await l(a,n,i),a.setQueryData(n.getEntityJsonQueryKey(i),e),t!=null&&t.onSuccess&&await t.onSuccess(e,c,r)}})}function O(t,a){const{accessToken:s,keyFactory:n}=u();return f(n.getEntityPathQueryKey(t),()=>K(t,s),a)}export{O as a,D as b,A as c,U as d,_ as e,z as f,L as u};
//# sourceMappingURL=useEntity-c1c8e7cc.js.map
