{"version":3,"file":"ForumThreadEditor-810bcc27.js","sources":["../../src/lib/utils/hooks/SynapseAPI/forum/useReply.ts","../../src/lib/utils/hooks/SynapseAPI/forum/useThread.ts","../../src/lib/utils/synapseTypes/MarkdownCommands.ts","../../src/lib/containers/markdown/UserMentionModal.tsx","../../src/lib/containers/markdown/MarkdownEditor.tsx","../../src/lib/containers/discussion_forum/ForumThreadEditor.tsx"],"sourcesContent":["import {\n  UseInfiniteQueryOptions,\n  useInfiniteQuery,\n  UseMutationOptions,\n  useQueryClient,\n  useMutation,\n  UseQueryOptions,\n  useQuery,\n} from 'react-query'\nimport { SynapseClient } from '../../..'\nimport { SynapseClientError } from '../../../SynapseClientError'\nimport { useSynapseContext } from '../../../SynapseContext'\nimport {\n  CreateDiscussionReply,\n  DiscussionFilter,\n  DiscussionReplyBundle,\n  DiscussionReplyOrder,\n  UpdateDiscussionReply,\n} from '../../../synapseTypes/DiscussionBundle'\nimport { PaginatedResults } from '../../../synapseTypes'\nimport { Match } from '../../../synapseTypes/DiscussionSearch'\n\nexport function useGetRepliesInfinite(\n  threadId: string,\n  ascending: boolean,\n  limit: number,\n  sort?: DiscussionReplyOrder,\n  filter?: DiscussionFilter,\n  options?: UseInfiniteQueryOptions<\n    PaginatedResults<DiscussionReplyBundle>,\n    SynapseClientError\n  >,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  return useInfiniteQuery<\n    PaginatedResults<DiscussionReplyBundle>,\n    SynapseClientError\n  >(\n    keyFactory.getRepliesQueryKey(threadId, ascending, limit, sort, filter),\n    async context => {\n      return SynapseClient.getReplies(\n        accessToken,\n        threadId,\n        limit,\n        context.pageParam,\n        sort,\n        ascending,\n        filter,\n      )\n    },\n    {\n      ...options,\n      getNextPageParam: (lastPage, pages) => {\n        const numberOfFetchedResults = pages.flatMap(\n          page => page.results,\n        ).length\n        if (lastPage.totalNumberOfResults! > numberOfFetchedResults) {\n          return numberOfFetchedResults\n        } else {\n          return undefined\n        }\n      },\n    },\n  )\n}\n\nexport function useGetReply(\n  reply: DiscussionReplyBundle,\n  options?: UseQueryOptions<string, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  const queryFn = async () => {\n    const messageUrl = await SynapseClient.getReplyMessageUrl(\n      reply.messageKey,\n      accessToken,\n    )\n    const data = await fetch(messageUrl.messageUrl, {\n      method: 'GET',\n      headers: {\n        Accept: '*/*',\n        'Access-Control-Request-Headers': 'authorization',\n        'Content-Type': 'text/plain; charset=utf-8',\n      },\n    })\n    return data.text()\n  }\n  return useQuery<string, SynapseClientError>(\n    keyFactory.getReplyQueryKey(reply.threadId, reply.id, reply.messageKey),\n    queryFn,\n    options,\n  )\n}\n\nexport function usePostReply(\n  options?: UseMutationOptions<\n    DiscussionReplyBundle,\n    SynapseClientError,\n    CreateDiscussionReply\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n  return useMutation<\n    DiscussionReplyBundle,\n    SynapseClientError,\n    CreateDiscussionReply\n  >(\n    (request: CreateDiscussionReply) =>\n      SynapseClient.postReply(request, accessToken),\n    {\n      ...options,\n      onSuccess: async (newReply, variables, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllRepliesQueryKey(newReply.threadId),\n        )\n        if (options?.onSuccess) {\n          await options.onSuccess(newReply, variables, ctx)\n        }\n      },\n    },\n  )\n}\n\nexport function usePutReply(\n  options?: UseMutationOptions<\n    DiscussionReplyBundle,\n    SynapseClientError,\n    UpdateDiscussionReply\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useMutation<\n    DiscussionReplyBundle,\n    SynapseClientError,\n    UpdateDiscussionReply\n  >(\n    (request: UpdateDiscussionReply) =>\n      SynapseClient.putReply(request, accessToken),\n    {\n      ...options,\n      onSuccess: async (newReply, variables, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllRepliesQueryKey(newReply.threadId),\n        )\n\n        if (options?.onSuccess) {\n          await options.onSuccess(newReply, variables, ctx)\n        }\n      },\n    },\n  )\n}\n\nexport function useDeleteReply(\n  options?: UseMutationOptions<void, SynapseClientError, Match>,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useMutation<void, SynapseClientError, Match>(\n    (match: Match) => SynapseClient.deleteReply(accessToken, match.replyId),\n    {\n      ...options,\n      onSuccess: async (updatedReply, variables, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllRepliesQueryKey(variables.threadId),\n        )\n\n        if (options?.onSuccess) {\n          await options.onSuccess(updatedReply, variables, ctx)\n        }\n      },\n    },\n  )\n}\n","import { useCallback } from 'react'\nimport {\n  UseQueryOptions,\n  useQuery,\n  UseMutationOptions,\n  useQueryClient,\n  useMutation,\n} from 'react-query'\nimport {\n  CreateDiscussionThread,\n  DiscussionThreadBundle,\n  UpdateThreadMessageRequest,\n  UpdateThreadTitleRequest,\n} from '../../../synapseTypes/DiscussionBundle'\nimport { SynapseClient } from '../../..'\nimport { SynapseClientError } from '../../../SynapseClientError'\nimport { useSynapseContext } from '../../../SynapseContext'\n\nexport function useGetThread(threadId: string) {\n  const { data: threadData, isLoading: isLoadingBundle } =\n    useGetThreadBundle(threadId)\n  const { data: threadBody, isLoading: isLoadingBody } = useGetThreadBody(\n    threadData,\n    { enabled: !!threadData },\n  )\n  const { mutate: pinThread } = usePinThread()\n  const { mutate: unPinThread } = useUnPinThread()\n\n  const togglePin = useCallback(() => {\n    if (threadData) {\n      if (threadData?.isPinned) {\n        unPinThread(threadData)\n      } else {\n        pinThread(threadData)\n      }\n    }\n  }, [unPinThread, pinThread, threadData])\n\n  const isLoading = isLoadingBody || isLoadingBundle\n  return { threadData, threadBody, togglePin, isLoading }\n}\n\nexport function useGetThreadBundle(\n  threadId: string,\n  options?: UseQueryOptions<DiscussionThreadBundle, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useQuery<DiscussionThreadBundle, SynapseClientError>(\n    keyFactory.getThreadQueryKey(threadId),\n    () => SynapseClient.getThread(threadId, accessToken),\n    options,\n  )\n}\n\nexport function useGetThreadBody(\n  threadData?: DiscussionThreadBundle,\n  options?: UseQueryOptions<string, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  const queryFn = async () => {\n    const messageUrl = await SynapseClient.getThreadMessageUrl(\n      threadData?.messageKey!,\n      accessToken,\n    )\n    const data = await fetch(messageUrl.messageUrl, {\n      method: 'GET',\n      headers: {\n        Accept: '*/*',\n        'Access-Control-Request-Headers': 'authorization',\n        'Content-Type': 'text/plain; charset=utf-8',\n      },\n    })\n    return data.text()\n  }\n  return useQuery<string, SynapseClientError>(\n    keyFactory.getThreadBodyQueryKey(threadData?.id!, threadData?.messageKey!),\n    queryFn,\n    options,\n  )\n}\n\nexport function useUpdateThreadTitle(\n  options?: UseMutationOptions<\n    DiscussionThreadBundle,\n    SynapseClientError,\n    UpdateThreadTitleRequest\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n  return useMutation<\n    DiscussionThreadBundle,\n    SynapseClientError,\n    UpdateThreadTitleRequest\n  >(\n    (request: UpdateThreadTitleRequest) =>\n      SynapseClient.putThreadTitle(accessToken, request),\n    {\n      ...options,\n      onSuccess: async (newThread, variables, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllForumThreadsQueryKey(newThread.forumId),\n        )\n        await queryClient.invalidateQueries(\n          keyFactory.getThreadQueryKey(variables.threadId),\n        )\n        if (options?.onSuccess) {\n          await options.onSuccess(newThread, variables, ctx)\n        }\n      },\n    },\n  )\n}\n\nexport function useUpdateThreadMessage(\n  options?: UseMutationOptions<\n    DiscussionThreadBundle,\n    SynapseClientError,\n    UpdateThreadMessageRequest\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useMutation<\n    DiscussionThreadBundle,\n    SynapseClientError,\n    UpdateThreadMessageRequest\n  >(\n    (request: UpdateThreadMessageRequest) =>\n      SynapseClient.putThreadMessage(accessToken, request),\n    {\n      ...options,\n      onSuccess: async (newThread, variables, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getThreadQueryKey(variables.threadId),\n        )\n        if (options?.onSuccess) {\n          await options.onSuccess(newThread, variables, ctx)\n        }\n      },\n    },\n  )\n}\n\nexport function useCreateThread(\n  options?: UseMutationOptions<\n    DiscussionThreadBundle,\n    SynapseClientError,\n    CreateDiscussionThread\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useMutation<\n    DiscussionThreadBundle,\n    SynapseClientError,\n    CreateDiscussionThread\n  >(\n    (newThread: CreateDiscussionThread) =>\n      SynapseClient.postThread(accessToken, newThread),\n    {\n      ...options,\n      onSuccess: async (threadBundle, newThreadRequest, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllForumThreadsQueryKey(threadBundle.forumId),\n        )\n        if (options?.onSuccess) {\n          await options.onSuccess(threadBundle, newThreadRequest, ctx)\n        }\n      },\n    },\n  )\n}\n\nexport function useDeleteThread(\n  options?: UseMutationOptions<\n    void,\n    SynapseClientError,\n    DiscussionThreadBundle\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useMutation<void, SynapseClientError, DiscussionThreadBundle>(\n    (threadBundle: DiscussionThreadBundle) =>\n      SynapseClient.deleteThread(accessToken, threadBundle.id),\n    {\n      ...options,\n      onSuccess: async (updatedThread, threadBundle, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllForumThreadsQueryKey(threadBundle.forumId),\n        )\n        await queryClient.invalidateQueries(\n          keyFactory.getThreadQueryKey(threadBundle.id),\n        )\n        if (options?.onSuccess) {\n          await options.onSuccess(updatedThread, threadBundle, ctx)\n        }\n      },\n    },\n  )\n}\n\nexport function useRestoreThread(\n  options?: UseMutationOptions<\n    void,\n    SynapseClientError,\n    DiscussionThreadBundle\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useMutation<void, SynapseClientError, DiscussionThreadBundle>(\n    (threadBundle: DiscussionThreadBundle) =>\n      SynapseClient.restoreThread(accessToken, threadBundle.id),\n    {\n      ...options,\n      onSuccess: async (updatedThread, threadBundle, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllForumThreadsQueryKey(threadBundle.forumId),\n        )\n        await queryClient.invalidateQueries(\n          keyFactory.getThreadQueryKey(threadBundle.id),\n        )\n        if (options?.onSuccess) {\n          await options.onSuccess(updatedThread, threadBundle, ctx)\n        }\n      },\n    },\n  )\n}\n\nexport function usePinThread(\n  options?: UseMutationOptions<\n    void,\n    SynapseClientError,\n    DiscussionThreadBundle\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useMutation<void, SynapseClientError, DiscussionThreadBundle>(\n    (threadBundle: DiscussionThreadBundle) =>\n      SynapseClient.pinThread(accessToken, threadBundle.id),\n    {\n      ...options,\n      onSuccess: async (updatedThread, threadBundle, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllForumThreadsQueryKey(threadBundle.forumId),\n        )\n        await queryClient.invalidateQueries(\n          keyFactory.getThreadQueryKey(threadBundle.id),\n        )\n        if (options?.onSuccess) {\n          await options.onSuccess(updatedThread, threadBundle, ctx)\n        }\n      },\n    },\n  )\n}\n\nexport function useUnPinThread(\n  options?: UseMutationOptions<\n    void,\n    SynapseClientError,\n    DiscussionThreadBundle\n  >,\n) {\n  const queryClient = useQueryClient()\n  const { accessToken, keyFactory } = useSynapseContext()\n\n  return useMutation<void, SynapseClientError, DiscussionThreadBundle>(\n    (threadBundle: DiscussionThreadBundle) =>\n      SynapseClient.unPinThread(accessToken, threadBundle.id),\n    {\n      ...options,\n      onSuccess: async (updatedThread, threadBundle, ctx) => {\n        await queryClient.invalidateQueries(\n          keyFactory.getAllForumThreadsQueryKey(threadBundle.forumId),\n        )\n        await queryClient.invalidateQueries(\n          keyFactory.getThreadQueryKey(threadBundle.id),\n        )\n        if (options?.onSuccess) {\n          await options.onSuccess(updatedThread, threadBundle, ctx)\n        }\n      },\n    },\n  )\n}\n","export type MarkdownEditorCommandData = {\n  openSyntax: string\n  closeSyntax: string\n}\n\nexport const commandList = [\n  'title',\n  'bold',\n  'italic',\n  'strikethrough',\n  'code',\n  'latex',\n  'subscript',\n  'superscript',\n  'link',\n  'image',\n] as const\n\nexport type CommandListType = typeof commandList[number]\nexport type MarkdownEditorCommands = Record<\n  CommandListType,\n  MarkdownEditorCommandData\n>\n\nexport const MARKDOWN_COMMANDS_DATA: MarkdownEditorCommands = {\n  title: {\n    openSyntax: '###',\n    closeSyntax: '',\n  },\n  bold: {\n    openSyntax: '**',\n    closeSyntax: '**',\n  },\n  italic: {\n    openSyntax: '_',\n    closeSyntax: '_',\n  },\n  strikethrough: {\n    openSyntax: '--',\n    closeSyntax: '--',\n  },\n  code: {\n    openSyntax: '```',\n    closeSyntax: '```',\n  },\n  latex: {\n    openSyntax: '$$\\\\(',\n    closeSyntax: '\\\\)$$',\n  },\n  subscript: {\n    openSyntax: '~',\n    closeSyntax: '~',\n  },\n  superscript: {\n    openSyntax: '^',\n    closeSyntax: '^',\n  },\n  link: {\n    openSyntax: '[',\n    closeSyntax: '](url)',\n  },\n  image: {\n    openSyntax: '![',\n    closeSyntax: '](image-url)',\n  },\n}\n","import React, { useCallback } from 'react'\nimport { DialogBase } from '../DialogBase'\nimport { TYPE_FILTER, UserGroupHeader } from '../../utils/synapseTypes'\nimport UserSearchBoxV2 from '../UserSearchBoxV2'\n\nexport type UserMentionModalProps = {\n  show: boolean\n  onClose: () => void\n  handleUserTag: (user: string) => void\n}\n\nexport const UserMentionModal: React.FC<UserMentionModalProps> = ({\n  show,\n  onClose,\n  handleUserTag,\n}: UserMentionModalProps) => {\n  const onUserChange = useCallback(\n    (selected: string | null, header: UserGroupHeader | null) => {\n      if (selected && header) {\n        handleUserTag(header.userName)\n      }\n      onClose()\n    },\n    [onClose, handleUserTag],\n  )\n\n  return (\n    <>\n      <DialogBase\n        open={show}\n        onCancel={onClose}\n        title=\"Find User or Team\"\n        content={\n          <UserSearchBoxV2\n            placeholder=\"Search for a user or team name\"\n            onChange={onUserChange}\n            typeFilter={TYPE_FILTER.ALL}\n            focusOnSelect={true}\n          />\n        }\n        sx={{\n          '.MuiDialog-paperFullWidth': {\n            overflowY: 'visible',\n            '.MuiDialogContent-root': { overflowY: 'visible' },\n          },\n        }}\n      />\n    </>\n  )\n}\n","import React, { useRef, useState, useEffect } from 'react'\nimport {\n  commandList,\n  CommandListType,\n  MARKDOWN_COMMANDS_DATA,\n} from '../../utils/synapseTypes/MarkdownCommands'\nimport IconSvg from '../IconSvg'\nimport MarkdownSynapse from './MarkdownSynapse'\nimport { UserMentionModal } from './UserMentionModal'\nimport { startCase } from 'lodash-es'\n\nexport enum MarkdownEditorTabs {\n  WRITE = 'WRITE',\n  PREVIEW = 'PREVIEW',\n}\n\nexport type MarkdownEditorProps = {\n  placeholder?: string\n  text: string\n  setText: (text: string) => void\n}\n\nexport const MarkdownEditor: React.FunctionComponent<MarkdownEditorProps> = ({\n  placeholder,\n  text,\n  setText,\n}) => {\n  const [currentTab, setCurrentTab] = useState<MarkdownEditorTabs>(\n    MarkdownEditorTabs.WRITE,\n  )\n  const [selectionStart, setSelectionStart] = useState<number>(0)\n  const [isShowingTagModal, setIsShowingTagModal] = useState<boolean>(false)\n  const [tagModalWithKeyboard, setTagModalWithKeyboard] =\n    useState<boolean>(false)\n  const textAreaRef = useRef<HTMLTextAreaElement>(null)\n\n  /**\n   * Updates the position of the cursor. This must occur within `useEffect` because we need to ensure that the\n   * cursor position is updated after the state of `text` is updated.\n   */\n  useEffect(() => {\n    const input = textAreaRef.current\n    if (input) {\n      input.setSelectionRange(selectionStart, selectionStart)\n    }\n  }, [textAreaRef, selectionStart])\n\n  useEffect(() => {\n    textAreaRef.current?.focus()\n  }, [isShowingTagModal])\n\n  const handleUserTag = (user: string) => {\n    const newText: string[] = []\n    const textVal = textAreaRef.current\n    if (textVal) {\n      const start = textVal?.selectionStart\n      const textBeforeTag = text.substring(0, start)\n      const textAfterTag = text.substring(start, text.length)\n      setSelectionStart(start + user.length)\n      newText.push(\n        textBeforeTag,\n        `${tagModalWithKeyboard ? '' : '@'}${user.replace(/\\s/g, '')}`,\n        textAfterTag,\n      )\n    }\n    setText(newText.join(''))\n    setTagModalWithKeyboard(false)\n  }\n\n  const handleTagModal = (text: string) => {\n    const start = textAreaRef.current && textAreaRef.current.selectionStart\n    if (start && start > 0 && text.charAt(start - 1) === '@') {\n      setTagModalWithKeyboard(true)\n      setIsShowingTagModal(true)\n    }\n  }\n  const handleCommands = (command: CommandListType) => {\n    const textVal = textAreaRef.current\n    if (textVal) {\n      const start = textVal.selectionStart\n      const end = textVal.selectionEnd\n      const selected = text.substring(start, end)\n      const textBeforeSelection = text.substring(0, start)\n      const textAfterSelection = text.substring(end, text.length)\n\n      const openSyntax = MARKDOWN_COMMANDS_DATA[command].openSyntax\n      const closeSyntax = MARKDOWN_COMMANDS_DATA[command].closeSyntax\n\n      switch (command) {\n        case 'code': {\n          const newText: string[] = []\n          newText.push(\n            textBeforeSelection,\n            openSyntax,\n            selected,\n            closeSyntax,\n            textAfterSelection,\n          )\n\n          setText(newText.join('\\r\\n'))\n          textVal.focus()\n          // adds 2 due to new line\n          setSelectionStart(start + openSyntax.length + 2)\n          break\n        }\n        case 'title':\n        case 'bold':\n        case 'italic':\n        case 'strikethrough':\n        case 'latex':\n        case 'subscript':\n        case 'superscript':\n        case 'link':\n        case 'image': {\n          const newText = `${textBeforeSelection}${openSyntax}${selected}${closeSyntax}${textAfterSelection}`\n          textVal.focus()\n          setSelectionStart(start + openSyntax.length)\n          setText(newText)\n        }\n      }\n    }\n  }\n\n  return (\n    <div className=\"bootstrap-4-backport MarkdownEditor\">\n      <div className=\"MarkdownEditorControls\">\n        <div className=\"Tabs\">\n          {Object.keys(MarkdownEditorTabs).map((tabName: string) => {\n            return (\n              <button\n                className=\"Tab\"\n                role=\"tab\"\n                aria-selected={tabName === currentTab}\n                key={tabName}\n                onClick={e => {\n                  e.stopPropagation()\n                  setCurrentTab(MarkdownEditorTabs[tabName])\n                }}\n              >\n                {tabName}\n              </button>\n            )\n          })}\n        </div>\n        {currentTab === MarkdownEditorTabs.WRITE && (\n          <div className=\"MarkdownEditorControlsToolbar\">\n            {commandList.map(type => {\n              return (\n                <button key={type} onClick={() => handleCommands(type)}>\n                  <IconSvg icon={type} label={startCase(type)} />\n                </button>\n              )\n            })}\n            <button onClick={() => setIsShowingTagModal(true)}>\n              <IconSvg icon=\"tag\" label=\"Mention\" />\n            </button>\n          </div>\n        )}\n      </div>\n      <div>\n        {currentTab === MarkdownEditorTabs.WRITE ? (\n          <textarea\n            onChange={e => {\n              setText(e.target.value)\n              handleTagModal(e.target.value)\n            }}\n            style={{ width: '100%' }}\n            rows={6}\n            value={text}\n            ref={textAreaRef}\n            placeholder={placeholder}\n          />\n        ) : text ? (\n          <MarkdownSynapse markdown={text} />\n        ) : (\n          'Nothing to preview'\n        )}\n      </div>\n\n      <UserMentionModal\n        show={isShowingTagModal}\n        onClose={() => setIsShowingTagModal(false)}\n        handleUserTag={handleUserTag}\n      />\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport { Box } from '@mui/material'\nimport { FormControl } from 'react-bootstrap'\nimport {\n  useCreateThread,\n  useUpdateThreadTitle,\n  useUpdateThreadMessage,\n} from '../../utils/hooks/SynapseAPI/forum/useThread'\nimport {\n  usePostReply,\n  usePutReply,\n} from '../../utils/hooks/SynapseAPI/forum/useReply'\nimport { CreateDiscussionThread } from '../../utils/synapseTypes/DiscussionBundle'\nimport { MarkdownEditor } from '../markdown/MarkdownEditor'\nimport { ConfirmationButtons, ConfirmationDialog } from '../ConfirmationDialog'\n\nexport type ForumThreadEditorProps = {\n  initialTitle?: string\n  initialText?: string\n  id: string\n  onClose: () => void\n  isReply: boolean\n} & (\n  | { isDialog: false; openDialog?: never }\n  | { isDialog: true; openDialog: boolean }\n)\n\nexport const ForumThreadEditor: React.FunctionComponent<\n  ForumThreadEditorProps\n> = props => {\n  const {\n    initialText,\n    initialTitle,\n    id,\n    onClose,\n    isReply,\n    isDialog,\n    openDialog,\n  } = props\n\n  const [title, setTitle] = useState<string>(initialTitle ?? '')\n  const [text, setText] = useState<string>(initialText ?? '')\n  const { mutate: updateTitle, isLoading: isLoadingTitle } =\n    useUpdateThreadTitle({\n      onSuccess: () => onClose(),\n    })\n  const { mutate: updateMessage, isLoading: isLoadingMessage } =\n    useUpdateThreadMessage({\n      onSuccess: () => onClose(),\n    })\n  const { mutate: createThread, isLoading: isLoadingThread } = useCreateThread({\n    onSuccess: () => onClose(),\n  })\n  const { mutate: createReply, isLoading: isLoadingReply } = usePostReply({\n    onSuccess: () => onClose(),\n  })\n  const { mutate: updateReply, isLoading: isLoadingReplyUpdate } = usePutReply({\n    onSuccess: () => onClose(),\n  })\n\n  const isLoading =\n    isLoadingMessage ||\n    isLoadingReply ||\n    isLoadingThread ||\n    isLoadingTitle ||\n    isLoadingReplyUpdate\n\n  const isExistingThread = !isReply && initialTitle\n\n  const onSave = (text: string, title: string) => {\n    if (isReply) {\n      if (initialText) {\n        // updating reply\n        updateReply({\n          replyId: id,\n          messageMarkdown: text,\n        })\n      } else {\n        // posting reply\n        createReply({\n          threadId: id,\n          messageMarkdown: text,\n        })\n      }\n    } else {\n      if (isExistingThread) {\n        // updating thread\n        updateTitle({\n          title: title,\n          threadId: id,\n        })\n        updateMessage({\n          messageMarkdown: text,\n          threadId: id,\n        })\n      } else {\n        // posting thread\n        const request: CreateDiscussionThread = {\n          forumId: id,\n          title: title,\n          messageMarkdown: text,\n        }\n        createThread(request)\n      }\n    }\n  }\n\n  const editorContent = (\n    <div className=\"bootstrap-4-backport\">\n      {!isReply && (\n        <FormControl\n          type=\"text\"\n          placeholder=\"Title\"\n          value={title}\n          onChange={e => setTitle(e.target.value)}\n        />\n      )}\n      <MarkdownEditor text={text} setText={setText} />\n    </div>\n  )\n\n  const confirmButtonText = isLoading ? 'Saving' : 'Save'\n\n  return (\n    <>\n      {isDialog ? (\n        <ConfirmationDialog\n          maxWidth=\"md\"\n          open={openDialog}\n          onCancel={onClose}\n          title={\n            isReply\n              ? 'Edit Reply'\n              : isExistingThread\n              ? 'Edit Thread'\n              : 'New Thread'\n          }\n          content={editorContent}\n          onConfirm={() => onSave(text, title)}\n          confirmButtonText={confirmButtonText}\n        />\n      ) : (\n        <>\n          {editorContent}\n          <Box display=\"flex\" justifyContent=\"flex-end\">\n            <ConfirmationButtons\n              onCancel={onClose}\n              onConfirm={() => onSave(text, title)}\n              confirmButtonText={confirmButtonText}\n            />\n          </Box>\n        </>\n      )}\n    </>\n  )\n}\n"],"names":["useGetRepliesInfinite","threadId","ascending","limit","sort","filter","options","accessToken","keyFactory","useSynapseContext","useInfiniteQuery","context","SynapseClient.getReplies","lastPage","pages","numberOfFetchedResults","page","useGetReply","reply","queryFn","messageUrl","SynapseClient.getReplyMessageUrl","useQuery","usePostReply","queryClient","useQueryClient","useMutation","request","SynapseClient.postReply","newReply","variables","ctx","usePutReply","SynapseClient.putReply","useDeleteReply","match","SynapseClient.deleteReply","updatedReply","useGetThread","threadData","isLoadingBundle","useGetThreadBundle","threadBody","isLoadingBody","useGetThreadBody","pinThread","usePinThread","unPinThread","useUnPinThread","togglePin","useCallback","SynapseClient.getThread","SynapseClient.getThreadMessageUrl","useUpdateThreadTitle","SynapseClient.putThreadTitle","newThread","useUpdateThreadMessage","SynapseClient.putThreadMessage","useCreateThread","SynapseClient.postThread","threadBundle","newThreadRequest","useDeleteThread","SynapseClient.deleteThread","updatedThread","useRestoreThread","SynapseClient.restoreThread","SynapseClient.pinThread","SynapseClient.unPinThread","commandList","MARKDOWN_COMMANDS_DATA","UserMentionModal","show","onClose","handleUserTag","onUserChange","selected","header","jsx","Fragment","DialogBase","UserSearchBoxV2","TYPE_FILTER","MarkdownEditorTabs","MarkdownEditorTabs2","MarkdownEditor","placeholder","text","setText","currentTab","setCurrentTab","useState","selectionStart","setSelectionStart","isShowingTagModal","setIsShowingTagModal","tagModalWithKeyboard","setTagModalWithKeyboard","textAreaRef","useRef","useEffect","input","_a","user","newText","textVal","start","textBeforeTag","textAfterTag","handleTagModal","text2","handleCommands","command","end","textBeforeSelection","textAfterSelection","openSyntax","closeSyntax","jsxs","tabName","e","type","IconSvg","startCase","MarkdownSynapse","ForumThreadEditor","props","initialText","initialTitle","id","isReply","isDialog","openDialog","title","setTitle","updateTitle","isLoadingTitle","updateMessage","isLoadingMessage","createThread","isLoadingThread","createReply","isLoadingReply","updateReply","isLoadingReplyUpdate","isLoading","isExistingThread","onSave","title2","editorContent","FormControl","confirmButtonText","ConfirmationDialog","Box","ConfirmationButtons"],"mappings":"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"}