{"version":3,"file":"getEndpoint-ac94413e.js","sources":["../../src/utils/functions/getEndpoint.ts"],"sourcesContent":["export enum BackendDestinationEnum {\n  REPO_ENDPOINT,\n  PORTAL_ENDPOINT,\n}\n\n// Encodes the portal and repo service destinations\nexport type EndpointObject = {\n  REPO: string\n  PORTAL: string\n}\n\nconst KNOWN_SYNAPSE_ORG_URLS = [\n  'www.synapse.org',\n  'staging.synapse.org',\n  'tst.synapse.org',\n  'portal-dev.dev.sagebase.org',\n  '127.0.0.1',\n]\n\nexport const getSynapsePortalEndpoint = (hostname: string): string => {\n  return KNOWN_SYNAPSE_ORG_URLS.includes(hostname.toLowerCase())\n    ? '/'\n    : 'https://www.synapse.org/'\n}\nconst DEFAULT_SYNAPSE_PORTAL = getSynapsePortalEndpoint(\n  window.location.hostname,\n)\n\nexport const PRODUCTION_ENDPOINT_CONFIG: EndpointObject = {\n  REPO: 'https://repo-prod.prod.sagebase.org',\n  PORTAL: DEFAULT_SYNAPSE_PORTAL,\n}\n\n// Given an endpoint will return the specific stack object\nexport const getEndpoint = (endpoint: BackendDestinationEnum): string => {\n  let endpoint_config = PRODUCTION_ENDPOINT_CONFIG\n  // @ts-ignore if overriding endpoint config\n  if (window.SRC && window.SRC.OVERRIDE_ENDPOINT_CONFIG) {\n    // @ts-ignore\n    endpoint_config = window.SRC && window.SRC.OVERRIDE_ENDPOINT_CONFIG\n  }\n  const { PORTAL, REPO } = endpoint_config\n  if (!PORTAL || !REPO) {\n    throw Error('Error failed to specify endpoints, cannot make call')\n  }\n  if (endpoint === BackendDestinationEnum.PORTAL_ENDPOINT) {\n    return PORTAL\n  }\n  return REPO\n}\n\nexport type SynapseStack = 'production' | 'staging' | 'development' | 'mock'\n\nexport const MOCK_REPO_ORIGIN =\n  'https://mock-repo.sagebase.org' satisfies string\nconst MOCK_PORTAL_ORIGIN = 'https://mock-portal.sagebase.org/' satisfies string\n\nexport const STACK_MAP: Record<SynapseStack, EndpointObject> = {\n  production: {\n    REPO: 'https://repo-prod.prod.sagebase.org',\n    PORTAL: 'https://www.synapse.org/',\n  },\n  staging: {\n    REPO: 'https://repo-staging.prod.sagebase.org',\n    PORTAL: 'https://staging.synapse.org/',\n  },\n  development: {\n    REPO: 'https://repo-dev.dev.sagebase.org',\n    PORTAL: 'https://portal-dev.dev.sagebase.org/',\n  },\n  mock: {\n    REPO: MOCK_REPO_ORIGIN,\n    PORTAL: MOCK_PORTAL_ORIGIN,\n  },\n}\n"],"names":["BackendDestinationEnum","BackendDestinationEnum2","KNOWN_SYNAPSE_ORG_URLS","getSynapsePortalEndpoint","hostname","DEFAULT_SYNAPSE_PORTAL","PRODUCTION_ENDPOINT_CONFIG","getEndpoint","endpoint","endpoint_config","PORTAL","REPO","MOCK_REPO_ORIGIN","MOCK_PORTAL_ORIGIN","STACK_MAP"],"mappings":"AAAY,IAAAA,GAAAA,IACVA,EAAAC,EAAA,cAAA,CAAA,EAAA,gBACAD,EAAAC,EAAA,gBAAA,CAAA,EAAA,kBAFUD,IAAAA,GAAA,CAAA,CAAA,EAWZ,MAAME,EAAyB,CAC7B,kBACA,sBACA,kBACA,8BACA,WACF,EAEaC,EAA4BC,GAChCF,EAAuB,SAASE,EAAS,YAAY,CAAC,EACzD,IACA,2BAEAC,EAAyBF,EAC7B,OAAO,SAAS,QAClB,EAEaG,EAA6C,CACxD,KAAM,sCACN,OAAQD,CACV,EAGaE,EAAeC,GAA6C,CACvE,IAAIC,EAAkBH,EAElB,OAAO,KAAO,OAAO,IAAI,2BAETG,EAAA,OAAO,KAAO,OAAO,IAAI,0BAEvC,KAAA,CAAE,OAAAC,EAAQ,KAAAC,CAAS,EAAAF,EACrB,GAAA,CAACC,GAAU,CAACC,EACd,MAAM,MAAM,qDAAqD,EAEnE,OAAIH,IAAa,EACRE,EAEFC,CACT,EAIaC,EACX,iCACIC,EAAqB,oCAEdC,EAAkD,CAC7D,WAAY,CACV,KAAM,sCACN,OAAQ,0BACV,EACA,QAAS,CACP,KAAM,yCACN,OAAQ,8BACV,EACA,YAAa,CACX,KAAM,oCACN,OAAQ,sCACV,EACA,KAAM,CACJ,KAAMF,EACN,OAAQC,CACV,CACF"}