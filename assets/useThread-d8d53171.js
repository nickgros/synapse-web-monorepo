import{r as o}from"./index-8db94870.js";import{u as t,z as T,n as i,G as y}from"./SynapseClient-2be0d786.js";import{u as d}from"./useMutation-04744998.js";import"./getEndpoint-ac94413e.js";import"./OrientationBanner-d057b0e6.js";function C(e){const{data:s,isLoading:u}=g(e),{data:r,isLoading:a}=f(s,{enabled:!!s}),{mutate:c}=Q(),{mutate:n}=m(),l=o.useCallback(()=>{s&&(s!=null&&s.isPinned?n(s):c(s))},[n,c,s]);return{threadData:s,threadBody:r,togglePin:l,isLoading:a||u}}function g(e,s){const{accessToken:u,keyFactory:r}=t();return T(r.getThreadQueryKey(e),()=>i.getThread(e,u),s)}function f(e,s){const{accessToken:u,keyFactory:r}=t(),a=async()=>{const c=await i.getThreadMessageUrl(e==null?void 0:e.messageKey,u);return(await fetch(c.messageUrl,{method:"GET",headers:{Accept:"*/*","Access-Control-Request-Headers":"authorization","Content-Type":"text/plain; charset=utf-8"}})).text()};return T(r.getThreadBodyQueryKey(e==null?void 0:e.id,e==null?void 0:e.messageKey),a,s)}function v(e){const s=y(),{accessToken:u,keyFactory:r}=t();return d(a=>i.putThreadTitle(u,a),{...e,onSuccess:async(a,c,n)=>{await s.invalidateQueries(r.getAllForumThreadsQueryKey(a.forumId)),await s.invalidateQueries(r.getThreadQueryKey(c.threadId)),e!=null&&e.onSuccess&&await e.onSuccess(a,c,n)}})}function q(e){const s=y(),{accessToken:u,keyFactory:r}=t();return d(a=>i.putThreadMessage(u,a),{...e,onSuccess:async(a,c,n)=>{await s.invalidateQueries(r.getThreadQueryKey(c.threadId)),e!=null&&e.onSuccess&&await e.onSuccess(a,c,n)}})}function A(e){const s=y(),{accessToken:u,keyFactory:r}=t();return d(a=>i.postThread(u,a),{...e,onSuccess:async(a,c,n)=>{await s.invalidateQueries(r.getAllForumThreadsQueryKey(a.forumId)),e!=null&&e.onSuccess&&await e.onSuccess(a,c,n)}})}function I(e){const s=y(),{accessToken:u,keyFactory:r}=t();return d(a=>i.deleteThread(u,a.id),{...e,onSuccess:async(a,c,n)=>{await s.invalidateQueries(r.getAllForumThreadsQueryKey(c.forumId)),await s.invalidateQueries(r.getThreadQueryKey(c.id)),e!=null&&e.onSuccess&&await e.onSuccess(a,c,n)}})}function L(e){const s=y(),{accessToken:u,keyFactory:r}=t();return d(a=>i.restoreThread(u,a.id),{...e,onSuccess:async(a,c,n)=>{await s.invalidateQueries(r.getAllForumThreadsQueryKey(c.forumId)),await s.invalidateQueries(r.getThreadQueryKey(c.id)),e!=null&&e.onSuccess&&await e.onSuccess(a,c,n)}})}function Q(e){const s=y(),{accessToken:u,keyFactory:r}=t();return d(a=>i.pinThread(u,a.id),{...e,onSuccess:async(a,c,n)=>{await s.invalidateQueries(r.getAllForumThreadsQueryKey(c.forumId)),await s.invalidateQueries(r.getThreadQueryKey(c.id)),e!=null&&e.onSuccess&&await e.onSuccess(a,c,n)}})}function m(e){const s=y(),{accessToken:u,keyFactory:r}=t();return d(a=>i.unPinThread(u,a.id),{...e,onSuccess:async(a,c,n)=>{await s.invalidateQueries(r.getAllForumThreadsQueryKey(c.forumId)),await s.invalidateQueries(r.getThreadQueryKey(c.id)),e!=null&&e.onSuccess&&await e.onSuccess(a,c,n)}})}export{I as a,L as b,v as c,q as d,A as e,C as u};
//# sourceMappingURL=useThread-d8d53171.js.map
