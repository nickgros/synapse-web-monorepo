import{j as n,a as c}from"./jsx-runtime-9dc53467.js";import{r as s,R as m}from"./index-76fb7be0.js";import{Y as y,Z as f,_ as C,n as d,$ as k,a as S,a0 as h,a1 as g,a2 as w,X as E,a3 as b,a4 as v}from"./ApplicationSessionManager-9bd355c2.js";import{S as x}from"./getEndpoint-ac94413e.js";import"./OrientationBanner-a1ca5cdb.js";import{S as _}from"./ToastMessage-313b7aae.js";import{d as Q}from"./dayjs.min-f79c4412.js";var T=function(){return null};async function R(){let e=await g(),o;try{o=await w(e)}catch(t){throw t instanceof E&&t.status===401&&(console.error("Encountered error fetching profile: ",t,"Signing out..."),await b(),e=void 0),t}let r;return e&&v(e).then(t=>{r=Q(t.authenticatedOn).format("L LT")}),{accessToken:e,profile:o,authenticatedOn:r}}const a=new y(f);function O(e){const o=x[e];window.SRC={OVERRIDE_ENDPOINT_CONFIG:o},a.resetQueries()}function l(e){const{storybookContext:o}=e,r=o.globals.stack||o.parameters.stack;s.useEffect(()=>{O(r)},[r]);const[t,u]=m.useState(void 0);C(),s.useEffect(()=>{R().then(i=>{u(i.accessToken)})}),s.useEffect(()=>{async function i(){await a.cancelQueries(),a.removeQueries(),await a.invalidateQueries()}i()},[t]);const p=s.useMemo(()=>({accessToken:t,isInExperimentalMode:d.isInSynapseExperimentalMode(),utcTime:d.getUseUtcTimeFromCookie(),withErrorBoundary:!0,downloadCartPageUrl:"/?path=/story/download-downloadcartpage--demo"}),[t]);return n(k,{client:a,children:c(S,{synapseContext:p,children:[o.globals.showReactQueryDevtools&&n(T,{}),c(h,{children:[n(_,{}),n("main",{children:e.children})]})]})})}try{l.displayName="StorybookComponentWrapper",l.__docgenInfo={description:"Wraps storybook story components to ensure that all components receive required context.",displayName:"StorybookComponentWrapper",props:{storybookContext:{defaultValue:null,description:"",name:"storybookContext",required:!0,type:{name:"{ globals: { stack?: SynapseStack | undefined; showReactQueryDevtools?: boolean | undefined; }; parameters: { stack?: SynapseStack | undefined; }; }"}}}}}catch{}export{l as S,R as s};
