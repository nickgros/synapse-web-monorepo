{"version":3,"file":"RequestDownloadCard-d26db0f7.js","sources":["../../src/lib/containers/download_list_v2/RequestDownloadCard.tsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { useErrorHandler } from 'react-error-boundary'\nimport { useGetEntityHeaders } from '../../utils/hooks/SynapseAPI/entity/useGetEntityHeaders'\nimport { EntityHeader } from '../../utils/synapseTypes'\nimport { Icon } from '../row_renderers/utils'\nimport { DOWNLOAD_PERMISSION_REQUIRED } from '../../utils/SynapseConstants'\nimport { Button } from 'react-bootstrap'\nimport { LoadingAccessRequirementCard } from './MeetAccessRequirementCard'\nimport { Typography } from '@mui/material'\n\nexport type RequestDownloadCardProps = {\n  entityId: string\n  count: number\n  /** Invoked when a user clicks \"View Sharing Settings\" for a set of files that require the Download permission*/\n  onViewSharingSettingsClicked: (benefactorId: string) => void\n}\n\nexport const REQUEST_DOWNLOAD_TITLE = 'Download Permission Required'\nexport const RequestDownloadCard: React.FunctionComponent<\n  RequestDownloadCardProps\n> = ({\n  entityId,\n  count,\n  onViewSharingSettingsClicked,\n}: RequestDownloadCardProps) => {\n  const handleError = useErrorHandler()\n  const {\n    data,\n    isLoading,\n    isError,\n    error: newError,\n  } = useGetEntityHeaders([{ targetId: entityId }])\n  const entityHeader: EntityHeader | undefined = data?.results[0]\n  useEffect(() => {\n    if (isError && newError) {\n      handleError(newError)\n    }\n  }, [isError, newError, handleError])\n\n  return (\n    <>\n      {!isError && !isLoading && (\n        <div className=\"RequestDownloadCart actionRequiredCard\">\n          <Icon type={DOWNLOAD_PERMISSION_REQUIRED} />\n          <div className=\"metadata\">\n            <Typography variant=\"headline3\" className=\"title\">\n              {REQUEST_DOWNLOAD_TITLE}\n            </Typography>\n            <div className=\"fileCount\">{count} File(s)</div>\n            <div className=\"description\">\n              You must be granted the download permission on{' '}\n              <strong>{entityHeader?.name}</strong> in order to download this\n              set of files.\n            </div>\n          </div>\n          <div className=\"startButtonContainer\">\n            <Typography variant=\"smallText1\" className=\"contactAdminNote\">\n              Contact an administrator to request download permission\n            </Typography>\n            <Button\n              className=\"startButton\"\n              variant=\"outline-primary\"\n              onClick={() => {\n                onViewSharingSettingsClicked(entityId)\n              }}\n            >\n              View Sharing Settings\n            </Button>\n          </div>\n        </div>\n      )}\n      {isLoading && <LoadingAccessRequirementCard />}\n    </>\n  )\n}\n"],"names":["REQUEST_DOWNLOAD_TITLE","RequestDownloadCard","entityId","count","onViewSharingSettingsClicked","handleError","useErrorHandler","data","isLoading","isError","newError","useGetEntityHeaders","entityHeader","useEffect","jsxs","Fragment","jsx","Icon","DOWNLOAD_PERMISSION_REQUIRED","Typography","Button","LoadingAccessRequirementCard"],"mappings":"ycAiBO,MAAAA,EAAA,+BACAC,EAAA,CAAA,CAEF,SAAAC,EACH,MAAAC,EACA,6BAAAC,CAEF,IAAA,CACE,MAAAC,EAAAC,IACA,CAAM,KAAAC,EACJ,UAAAC,EACA,QAAAC,EACA,MAAAC,CACO,EAAAC,EAAA,CAAA,CAAA,SAAAT,CAAA,CAAA,CAAA,EAETU,EAAAL,GAAA,YAAAA,EAAA,QAAA,GACAM,OAAAA,EAAAA,UAAA,IAAA,CACEJ,GAAAC,GACEL,EAAAK,CAAA,CACF,EAAA,CAAAD,EAAAC,EAAAL,CAAA,CAAA,EAGFS,EAAAC,EAAA,CAAA,SAAA,CAEK,CAAAN,GAAA,CAAAD,GAAAM,EAAA,MAAA,CAAA,UAAA,yCAAA,SAAA,CAEGE,EAAAC,EAAA,CAAA,KAAAC,CAAA,CAAA,EAA0CJ,EAAA,MAAA,CAAA,UAAA,WAAA,SAAA,CAExCE,EAAAG,EAAA,CAAA,QAAA,YAAA,UAAA,QAAA,SAAAnB,EAAA,EAEAc,EAAA,MAAA,CAAA,UAAA,YAAA,SAAA,CAC4BX,EAAA,UAAM,EAAA,EAAQW,EAAA,MAAA,CAAA,UAAA,cAAA,SAAA,CACb,iDAAA,IACoBE,EAAA,SAAA,CAAA,SAAAJ,GAAA,YAAAA,EAAA,IAAA,CAAA,EACnB,0CAAS,EAAA,CAEvC,EAAA,EACFE,EAAA,MAAA,CAAA,UAAA,uBAAA,SAAA,CAEEE,EAAAG,EAAA,CAAA,QAAA,aAAA,UAAA,mBAAA,SAAA,0DAAA,EAEAH,EACAI,EAAC,CAAA,UAAA,cACW,QAAA,kBACF,QAAA,IAAA,CAENhB,EAAAF,CAAA,CAAqC,EACvC,SAAA,uBACD,CAAA,CAED,EAAA,CACF,EAAA,EACFM,GAAAQ,EAAAK,EAAA,EAAA,CAE0C,CAAA,CAAA,CAGlD"}