import{j as e,a as s,F as B}from"./jsx-runtime-095bf462.js";import{r}from"./index-8db94870.js";import{S as D}from"./createSvgIcon-102248e7.js";import{a1 as M}from"./SynapseClient-130f11d4.js";import"./SkeletonButton-1cc36769.js";import{a as N,J as U}from"./SynapseTableCell-317d3f3b.js";import"./SkeletonTable-8496dca2.js";import{u as O}from"./UserCard-7d23cbaa.js";import"./MarkdownEditor-b48c0b79.js";import"./MarkdownCollapse-bffe6999.js";import{L as E}from"./Link-9ad54ce1.js";import{t as P}from"./times-02fa7569.js";import{S as L}from"./Skeleton-a24326d8.js";import{U as z,b as j}from"./SynapseConstants-71869ab2.js";import"./getEndpoint-ac94413e.js";import{a as H}from"./useGetQueryResultBundle-7c980804.js";import{B as $}from"./Button-d3d5b3a8.js";const _=n=>e(D,{...n,height:15,viewBox:"0 0 19 15",children:e("path",{d:"M18.7184 1.81746L6.05903 14.6667L0.256836 8.77744L1.74431 7.26766L6.05903 11.6364L17.2309 0.307678L18.7184 1.81746Z",fill:"white"})});try{_.displayName="CheckIcon",_.__docgenInfo={description:"",displayName:"CheckIcon",props:{children:{defaultValue:null,description:"Node passed into the SVG element.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"(Partial<SvgIconClasses> & Partial<ClassNameMap<never>>)"}},color:{defaultValue:{value:"'inherit'"},description:`The color of the component.
It supports both default and custom theme colors, which can be added as shown in the
[palette customization guide](https://mui.com/material-ui/customization/palette/#adding-new-colors).
You can use the \`htmlColor\` prop to apply a color attribute to the SVG element.`,name:"color",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"action"'},{value:'"disabled"'},{value:'"primary"'},{value:'"secondary"'},{value:'"success"'},{value:'"error"'},{value:'"info"'},{value:'"warning"'}]}},fontSize:{defaultValue:{value:"'medium'"},description:"The fontSize applied to the icon. Defaults to 24px, but can be configure to inherit font size.",name:"fontSize",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"inherit"'},{value:'"medium"'},{value:'"large"'}]}},htmlColor:{defaultValue:null,description:"Applies a color attribute to the SVG element.",name:"htmlColor",required:!1,type:{name:"string"}},inheritViewBox:{defaultValue:{value:"false"},description:"If `true`, the root node will inherit the custom `component`'s viewBox and the `viewBox`\nprop will be ignored.\nUseful when you want to reference a custom `component` and have `SvgIcon` pass that\n`component`'s viewBox to the root node.",name:"inheritViewBox",required:!1,type:{name:"boolean"}},shapeRendering:{defaultValue:null,description:`The shape-rendering attribute. The behavior of the different options is described on the
[MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering).
If you are having issues with blurry icons you should investigate this prop.`,name:"shapeRendering",required:!1,type:{name:"string"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},titleAccess:{defaultValue:null,description:`Provides a human-readable title for the element that contains it.
https://www.w3.org/TR/SVG-access/#Equivalent`,name:"titleAccess",required:!1,type:{name:"string"}},viewBox:{defaultValue:{value:"'0 0 24 24'"},description:`Allows you to redefine what the coordinates without units mean inside an SVG element.
For example, if the SVG element is 500 (width) by 200 (height),
and you pass viewBox="0 0 50 20",
this means that the coordinates inside the SVG will go from the top left corner (0,0)
to bottom right (50,20) and each unit will be worth 10px.`,name:"viewBox",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: SVGSVGElement | null) => void) | RefObject<SVGSVGElement> | null"}}}}}catch{}const V=n=>{const{id:l,item:h,enabled:u,checked:m,onChange:C,termsAndConditionsTableID:d}=n,{iconFileHandleId:w,label:S,description:i}=h,{data:y}=O({associateObjectId:d,associateObjectType:M.TableEntity,fileHandleId:w},!0),[o,f]=r.useState(!1),[b,g]=r.useState(!1);let v=!0;r.useEffect(()=>(v&&g(m),()=>{v=!1}),[u,m]);const I=a=>{a.preventDefault(),u&&f(!o)},t=a=>{u&&C(l)};return s("li",{className:u?"terms-enabled":"",children:[e("span",{className:"terms-icon",dangerouslySetInnerHTML:{__html:y??""}}),s("span",{className:"terms-desc",children:[e("label",{id:`toc-item-${l}`,children:e(N,{markdown:S})}),o&&i&&e("div",{className:"terms-desc-content",children:e(N,{markdown:i})}),i&&e("div",{children:e(E,{className:"terms-show-desc highlight-link",href:"",onClick:I,children:o?"Show Less":"Show More"})})]}),s("span",{className:"terms-checkbox",children:[e("span",{role:"checkbox","aria-labelledby":`toc-item-${l}`,className:b?"terms-circle terms-checked":"terms-circle",onClick:t,children:e(_,{})}),"I agree"]})]})};function T(n){const{numLoadingItems:l}=n;return e(B,{children:P(l).map(h=>s("li",{"aria-busy":"true","aria-live":"polite","data-testid":"loading-terms-and-conditions",children:[e("span",{className:"terms-icon",children:e(L,{variant:"rectangular",height:"30px",width:"30px",sx:{margin:"auto"}})}),e("span",{className:"terms-desc",children:e(U,{numRows:5})}),e("span",{className:"terms-checkbox",children:e(L,{variant:"circular",height:"40px",width:"40px",sx:{margin:"auto"}})})]},h))})}try{T.displayName="LoadingItem",T.__docgenInfo={description:"",displayName:"LoadingItem",props:{numLoadingItems:{defaultValue:null,description:"",name:"numLoadingItems",required:!0,type:{name:"number"}}}}}catch{}try{V.displayName="TermsAndConditionsItem",V.__docgenInfo={description:"",displayName:"TermsAndConditionsItem",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"number"}},enabled:{defaultValue:null,description:"",name:"enabled",required:!0,type:{name:"boolean"}},checked:{defaultValue:null,description:"",name:"checked",required:!0,type:{name:"boolean"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"tcItem"}},termsAndConditionsTableID:{defaultValue:null,description:"",name:"termsAndConditionsTableID",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(id: number) => void"}}}}}catch{}const A=({termsAndConditionsTableID:n="syn51718002",termsAndConditionsTableVersion:l="4",onFormChange:h,hideLinkToFullTC:u=!1})=>{const[m,C]=r.useState([]),{data:d,isLoading:w}=H({entityId:n,query:{sql:`SELECT * FROM ${n}.${l} ORDER BY order asc`},partMask:j,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest"},{staleTime:1/0},!0);r.useEffect(()=>{if(d&&d.queryResult&&d.queryResult.queryResults){const{rows:t,headers:a}=d.queryResult.queryResults,p=a.findIndex(c=>c.name==="icon"),R=a.findIndex(c=>c.name==="label"),G=a.findIndex(c=>c.name==="description"),k=[];t.forEach(c=>{const{values:x}=c,F={iconFileHandleId:x[p]??"",label:x[R]??"",description:x[G]??""};k.push(F)}),C(k);const q=k.length;f(i(q)),g(i(q).fill(!0,0,1))}},[d]);const S="https://help.synapse.org/docs/Synapse-Governance.2004255211.html",i=t=>Array.from(Array(t).fill(!1));let y=!0;const[o,f]=r.useState([]),[b,g]=r.useState([]);r.useEffect(()=>(y&&v(),()=>{y=!1}),[b,o]);const v=()=>{const t=o.length>0&&!o.includes(!1);h(t)},I=t=>{const a=!o[t],p=o.length;a?(f(i(p).fill(!0,0,t+1)),t+2<=m.length&&g(i(p).fill(!0,0,t+2))):(f(i(p).fill(!0,0,t)),g(i(p).fill(!0,0,t+1)))};return s("section",{className:"terms-conditions",children:[e("h3",{className:"page-header",children:"Synapse Pledge"}),s("form",{children:[s("label",{children:["I affirm my commitment to all"," ",e(E,{target:"_blank",href:S,children:"Sage Governance policies"})," ","for responsible research and data handling (linked below), including:"]}),s("ul",{className:"term-list",children:[w&&e(T,{numLoadingItems:6}),m.length>0&&m.map((t,a)=>e(V,{item:t,id:a,checked:o[a],enabled:b[a],termsAndConditionsTableID:n,onChange:I},`tc-item-${a}`))]}),!u&&e("div",{className:"view-terms",children:e($,{variant:"contained",href:z,target:"_blank",children:"View Complete Terms and Conditions for Use"})})]})]})};try{A.displayName="TermsAndConditions",A.__docgenInfo={description:"",displayName:"TermsAndConditions",props:{onFormChange:{defaultValue:null,description:"",name:"onFormChange",required:!0,type:{name:"(formComplete: boolean) => void"}},termsAndConditionsTableID:{defaultValue:{value:"syn51718002"},description:"",name:"termsAndConditionsTableID",required:!1,type:{name:"string"}},termsAndConditionsTableVersion:{defaultValue:{value:"4"},description:"",name:"termsAndConditionsTableVersion",required:!1,type:{name:"string"}},hideLinkToFullTC:{defaultValue:{value:"false"},description:"",name:"hideLinkToFullTC",required:!1,type:{name:"boolean"}}}}}catch{}export{A as T};
//# sourceMappingURL=TermsAndConditions-e75c52f7.js.map
