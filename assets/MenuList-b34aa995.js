import{_ as H}from"./extends-98964cd2.js";import{_ as j}from"./objectWithoutPropertiesLoose-4f48578a.js";import{r as c}from"./index-f1f749bf.js";import"./index-1aacdabe.js";import{j as T}from"./jsx-runtime-ad672792.js";import{g as _}from"./getScrollbarSize-ac846fe6.js";import{o as E}from"./isHostComponent-fa76b8d9.js";import{L as A}from"./List-c3d2a3cc.js";import{a as N,u as O}from"./useForkRef-dd8a6e5c.js";const $=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function w(n,t,r){return n===t?n.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:n.firstChild}function I(n,t,r){return n===t?r?n.firstChild:n.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:n.lastChild}function M(n,t){if(t===void 0)return!0;let r=n.innerText;return r===void 0&&(r=n.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.indexOf(t.keys.join(""))===0}function h(n,t,r,b,p,y){let m=!1,l=p(n,t,t?r:!1);for(;l;){if(l===n.firstChild){if(m)return!1;m=!0}const d=b?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!M(l,y)||d)l=p(n,l,r);else return l.focus(),!0}return!1}const z=c.forwardRef(function(t,r){const{actions:b,autoFocus:p=!1,autoFocusItem:y=!1,children:m,className:l,disabledItemsFocusable:d=!1,disableListWrap:g=!1,onKeyDown:x,variant:k="selectedMenu"}=t,v=j(t,$),u=c.useRef(null),F=c.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});N(()=>{p&&u.current.focus()},[p]),c.useImperativeHandle(b,()=>({adjustStyleForScrollbar:(e,i)=>{const o=!u.current.style.width;if(e.clientHeight<u.current.clientHeight&&o){const f=`${_(E(e))}px`;u.current.style[i.direction==="rtl"?"paddingLeft":"paddingRight"]=f,u.current.style.width=`calc(100% + ${f})`}return u.current}}),[]);const L=e=>{const i=u.current,o=e.key,f=E(i).activeElement;if(o==="ArrowDown")e.preventDefault(),h(i,f,g,d,w);else if(o==="ArrowUp")e.preventDefault(),h(i,f,g,d,I);else if(o==="Home")e.preventDefault(),h(i,null,g,d,w);else if(o==="End")e.preventDefault(),h(i,null,g,d,I);else if(o.length===1){const s=F.current,C=o.toLowerCase(),D=performance.now();s.keys.length>0&&(D-s.lastTime>500?(s.keys=[],s.repeating=!0,s.previousKeyMatched=!0):s.repeating&&C!==s.keys[0]&&(s.repeating=!1)),s.lastTime=D,s.keys.push(C);const R=f&&!s.repeating&&M(f,s);s.previousKeyMatched&&(R||h(i,f,!1,d,w,s))?e.preventDefault():s.previousKeyMatched=!1}x&&x(e)},S=O(u,r);let a=-1;c.Children.forEach(m,(e,i)=>{c.isValidElement(e)&&(e.props.disabled||(k==="selectedMenu"&&e.props.selected||a===-1)&&(a=i),a===i&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(a+=1,a>=m.length&&(a=-1)))});const K=c.Children.map(m,(e,i)=>{if(i===a){const o={};return y&&(o.autoFocus=!0),e.props.tabIndex===void 0&&k==="selectedMenu"&&(o.tabIndex=0),c.cloneElement(e,o)}return e});return T(A,H({role:"menu",ref:S,className:l,onKeyDown:L,tabIndex:p?0:-1},v,{children:K}))}),X=z;export{X as M};
//# sourceMappingURL=MenuList-b34aa995.js.map
