import{G as c,q as a,r as E,P as i,E as s,b as y,U as T}from"./index-bd88158d.js";import{m as u,x as l,au as f,av as b}from"./SynapseClient-d7905674.js";const g="Synapse Storage";function k(e,t){switch(e.concreteType){case s:return{endpoint:e.endpointUrl,bucket:e.bucket,fileKey:e.fileKey};case i:case E:return{url:n(e,t)};case a:case c:return{location:n(e,t)};default:throw new Error(`Couldn't determine location name for file handle: ${JSON.stringify(e)}`)}}function n(e,t){if(e.concreteType===a&&e.storageLocationId===null)return g;switch(e.concreteType){case i:return e.filePath;case s:case a:case c:return t?L(t):e.concreteType===s?e.bucket:e.bucketName;case E:return e.externalURL;default:throw new Error(`Couldn't determine location name for file handle: ${JSON.stringify(e)}`)}}function U(e){let t;return e.entityType===y.FILE&&(t=e.fileHandles.filter(r=>r.id===e.entity.dataFileHandleId)[0]),t}function L(e){let t="";if(e)switch(e.concreteType){case"org.sagebionetworks.repo.model.file.S3UploadDestination":t=g;break;case"org.sagebionetworks.repo.model.file.ExternalUploadDestination":if(t=e.url,e.uploadType===T.SFTP){const r=t.lastIndexOf("/");r&&(t=t.substring(0,r))}break;case"org.sagebionetworks.repo.model.file.ExternalS3UploadDestination":t="s3://"+e.bucket+"/",e.baseKey!=null&&(t+=e.baseKey);break;case"org.sagebionetworks.repo.model.file.ExternalGoogleCloudUploadDestination":t="gs://"+e.bucket+"/",e.baseKey!=null&&(t+=e.baseKey);break;case"org.sagebionetworks.repo.model.file.ExternalObjectStoreUploadDestination":t=e.endpointUrl+"/"+e.bucket;break}return t}function N(e,t){const{accessToken:r,keyFactory:o}=u();return l(o.getDefaultUploadDestinationQueryKey(e),()=>f(e,r),{...t})}function O(e,t,r){const{accessToken:o,keyFactory:_}=u();return l(_.getUploadDestinationForStorageLocationQueryKey(e,t),()=>b(e,t,o),{...r})}export{n as a,N as b,k as c,L as d,U as g,O as u};
//# sourceMappingURL=useUploadDestination-417e5185.js.map
