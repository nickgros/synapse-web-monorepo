{"version":3,"file":"ShowDownloadV2-504a064f.js","sources":["../../src/components/DownloadCart/ShowDownloadV2.tsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { TOOLTIP_DELAY_SHOW } from '../SynapseTable/SynapseTableConstants'\nimport { useSynapseContext } from '../../utils/context/SynapseContext'\nimport { useErrorHandler } from 'react-error-boundary'\nimport { useGetDownloadListStatistics } from '../../synapse-queries/download/useDownloadList'\nimport IconSvg from '../IconSvg/IconSvg'\nimport { Tooltip } from '@mui/material'\n\nexport type ShowDownloadV2Props = {\n  to: string\n  className?: string\n}\n\n/**\n * Nav bar item, displayed when files have been added to the Download Cart.\n * This must be configured with the URL of a page dedicated to showing the Download Cart.\n */\nexport function ShowDownloadV2({ to, className = '' }: ShowDownloadV2Props) {\n  const { accessToken } = useSynapseContext()\n  const handleError = useErrorHandler()\n  const tooltipText = 'Click to view items in your download cart.'\n\n  const {\n    data,\n    isLoading,\n    isError,\n    error: newError,\n  } = useGetDownloadListStatistics()\n\n  useEffect(() => {\n    if (isError && newError && accessToken) {\n      handleError(newError)\n    }\n  }, [isError, newError, handleError, accessToken])\n\n  if (!accessToken || isLoading) {\n    return <></>\n  }\n\n  const size = data?.totalNumberOfFiles ?? 0\n  if (size === 0) {\n    return <></>\n  }\n  const content = (\n    <Tooltip\n      title={tooltipText}\n      placement=\"bottom\"\n      enterNextDelay={TOOLTIP_DELAY_SHOW}\n    >\n      <span>\n        <span className=\"SRC-primary-text-color\">\n          <IconSvg icon=\"cart\" />\n        </span>\n        <span className={`download-cart-size`}>{size}</span>\n      </span>\n    </Tooltip>\n  )\n  return (\n    <a\n      className={`Download-Link v2 ${className}`}\n      href={to}\n      rel=\"noopener noreferrer\"\n    >\n      {content}\n    </a>\n  )\n}\n\nexport default ShowDownloadV2\n"],"names":["ShowDownloadV2","to","className","accessToken","useSynapseContext","handleError","useErrorHandler","tooltipText","data","isLoading","isError","newError","useGetDownloadListStatistics","useEffect","jsx","Fragment","size","content","Tooltip","TOOLTIP_DELAY_SHOW","jsxs","IconSvg"],"mappings":"yVAiBO,SAAAA,EAAA,CAAA,GAAAC,EAAA,UAAAC,EAAA,EAAA,EAAA,CACL,KAAA,CAAA,YAAAC,GAAAC,IACAC,EAAAC,IACAC,EAAA,6CAEA,CAAM,KAAAC,EACJ,UAAAC,EACA,QAAAC,EACA,MAAAC,CACO,EAAAC,EAAA,EAST,GANAC,EAAAA,UAAA,IAAA,CACEH,GAAAC,GAAAR,GACEE,EAAAM,CAAA,CACF,EAAA,CAAAD,EAAAC,EAAAN,EAAAF,CAAA,CAAA,EAGF,CAAAA,GAAAM,EACE,OAAAK,EAAAC,EAAA,CAAA,CAAA,EAGF,MAAAC,GAAAR,GAAA,YAAAA,EAAA,qBAAA,EACA,GAAAQ,IAAA,EACE,OAAAF,EAAAC,EAAA,CAAA,CAAA,EAEF,MAAAE,EAAAH,EACEI,EAAC,CAAA,MAAAX,EACQ,UAAA,SACG,eAAAY,EACM,SAAAC,EAAA,OAAA,CAAA,SAAA,CAGdN,EAAA,OAAA,CAAA,UAAA,yBAAA,SAAAA,EAAAO,EAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,EAEAP,EAAA,OAAA,CAAA,UAAA,qBAAA,SAAAE,EAAA,CAC6C,EAAA,CAC/C,CAAA,EAGJ,OAAAF,EACE,IAAC,CAAA,UAAA,oBAAAZ,IACgC,KAAAD,EACzB,IAAA,sBACF,SAAAgB,CAEH,CAAA,CAGP;"}