import{l as c}from"./index-8a3c600e.js";import{g as w}from"./entityHandlers-a0e91b52.js";import{a as E,g as U}from"./userProfileHandlers-0412dbcf.js";import{g as A,B as P}from"./getEndpoint-ac94413e.js";import{g as B,a as M,b as $}from"./accessRequirementHandlers-08bf3f4e.js";import{g as v}from"./MockSubmission-09305ad4.js";import{g as F,a as x}from"./fileHandlers-2978ce65.js";import{g as V}from"./researchProjectHandlers-edff4158.js";import{a0 as C,a1 as _,a2 as m}from"./SynapseClient-a57981a2.js";import{m as K,a as D,b as g,M as N}from"./mock_user_profile-4c1267b7.js";import{f as r,p as k,m as W}from"./mock_file_handle-ac49ece2.js";import{t as q}from"./times-5a4c1d15.js";function G(e){return{id:String(r.number.int()),etag:r.string.uuid(),...e}}function L(e){return{id:String(r.number.int()),activeAuthors:K.map(t=>String(t.id)),createdBy:String(k().id),createdOn:r.date.anytime().toISOString(),etag:r.string.uuid(),isDeleted:!1,isEdited:!1,isPinned:!1,lastActivity:r.date.anytime().toISOString(),messageKey:`${r.number.int()}/${r.number.int()}/${r.string.uuid()}`,modifiedOn:r.date.anytime().toISOString(),numberOfReplies:r.number.int({max:500}),numberOfViews:r.number.int({max:5e3}),title:r.lorem.words({min:2,max:8}),...e}}const z="984321189",I=W.map(e=>G({projectId:e.id})),J=I.flatMap(e=>q(10).map(t=>L({forumId:e.id,projectId:e.projectId}))),l={id:"999",forumId:z,projectId:"123",title:"mockTitle1",createdOn:"2022-09-28",createdBy:D.ownerId,modifiedOn:"2022-09-28",etag:"xxx",messageKey:"xxx",numberOfViews:2,numberOfReplies:3,lastActivity:"2022-09-28",activeAuthors:[D.ownerId,g.ownerId],isEdited:!1,isDeleted:!1,isPinned:!1},Q={...l,id:"888",projectId:"12",title:"mockTitle2",createdBy:g.ownerId,numberOfViews:14,numberOfReplies:3};({...l,createdBy:g.ownerId,threadId:l.id});const h=[...J,l,Q];function X(e){return[c.rest.get(`${e}${C}/:id`,async(t,n,s)=>{let o=404,i={reason:`MSW could not find a mock forum object with ID ${t.params.id}`};const a=I.find(d=>d.id===t.params.id);return a&&(o=200,i=a),n(s.status(o),s.json(i))}),c.rest.get(`${e}${_}/:id`,async(t,n,s)=>{let o=404,i={reason:`MSW could not find a mock discussion thread bundle object with ID ${t.params.id}`};t.params.id==="messageUrl"&&(i={reason:"GET /thread/messageUrl is not yet implemented"});const a=h.find(d=>d.id===t.params.id);return a&&(o=200,i=a),n(s.status(o),s.json(i))})]}function j(e){return{subscriptionId:String(r.number.int({min:1e3,max:9999})),subscriberId:String(N),createdOn:r.date.anytime().toISOString(),...e}}const R=I.map(e=>j({objectId:e.id,objectType:m.FORUM})),S=h.map(e=>j({objectType:m.THREAD,objectId:e.id}));function Y(e){return[c.rest.get(`${e}/repo/v1/subscription/all`,async(t,n,s)=>{const o=t.url.searchParams.get("objectType"),i=t.url.searchParams.get("sortDirection"),a=t.url.searchParams.get("offset"),d=t.url.searchParams.get("limit");let u=[];o===m.FORUM?u=R:o===m.THREAD&&(u=S);const f=u.length;i&&(u=u.sort((O,H)=>{const y=new Date(H.createdOn)-new Date(O.createdOn);return i==="ASC"?y:-1*y}));let p=0,b;a&&(p=parseInt(a)),d&&(b=parseInt(d)),u=u.slice(p,p+b);let T={results:u,totalNumberOfResults:f};return n(s.status(200),s.json(T))}),c.rest.post(`${e}/repo/v1/subscription/list`,async(t,n,s)=>{const o=await t.json(),i=o.objectType;let a=[];i===m.FORUM?a=R:i===m.THREAD&&(a=S),a.filter(f=>o.idList.includes(f.subscriptionId));const d=a.length;let u={results:a,totalNumberOfResults:d};return n(s.status(200),s.json(u))})]}const Z=e=>[c.rest.options("*",async(t,n,s)=>n(s.status(200))),c.rest.get(`${e}/auth/v1/authenticatedOn`,async(t,n,s)=>n(s.status(200),s.json({authenticatedOn:new Date().toISOString()}))),...w(e),...E(e),U(e,!0,!0),...v(e),...B(e),...M(),...$(e),...F(e),...V(e),...x(e),...X(e),...Y(e)];Z(A(P.REPO_ENDPOINT));export{Z as g};
//# sourceMappingURL=handlers-9e46cc93.js.map
