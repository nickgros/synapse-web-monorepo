{"version":3,"file":"EntityLink-175294cb.js","sources":["../../src/lib/containers/EntityLink.tsx"],"sourcesContent":["import { Skeleton } from '@mui/material'\nimport React from 'react'\nimport {\n  convertToEntityType,\n  getEntityTypeFromHeader,\n} from '../utils/functions/EntityTypeUtils'\nimport { PRODUCTION_ENDPOINT_CONFIG } from '../utils/functions/getEndpoint'\nimport { useGetEntity } from '../utils/hooks/SynapseAPI/entity/useEntity'\nimport { Entity, EntityHeader } from '../utils/synapseTypes/'\nimport { EntityTypeIcon } from './EntityIcon'\nimport { ErrorBanner } from './error/ErrorBanner'\nimport ErrorChip from './error/ErrorChip'\n\ntype EntityLinkProps = {\n  entity: string | EntityHeader | Entity\n  versionNumber?: number\n  /** Whether the component should link to the entity page in Synapse. Default true */\n  link?: boolean\n  className?: string\n  /** Whether to display an icon identifying the entity type. Default true */\n  showIcon?: boolean\n  /** The field of the entity to display. Default is 'name' */\n  displayTextField?: keyof Entity\n}\n\nexport const EntityLink = (props: EntityLinkProps) => {\n  const {\n    entity: entityOrId,\n    className,\n    versionNumber,\n    displayTextField = 'name',\n    link = true,\n    showIcon = true,\n  } = props\n\n  let entityId = ''\n  if (typeof entityOrId === 'string') {\n    entityId = entityOrId\n  }\n\n  const { data: fetchedEntity, error } = useGetEntity(entityId, versionNumber, {\n    enabled: !!entityId && typeof entityOrId === 'string',\n  })\n\n  if (fetchedEntity || typeof entityOrId !== 'string') {\n    const entity = fetchedEntity ?? (entityOrId as Entity | EntityHeader)\n    let type\n    if ('concreteType' in entity) {\n      type = convertToEntityType(entity.concreteType)\n    } else {\n      type = getEntityTypeFromHeader(entity)\n    }\n\n    if (link) {\n      return (\n        <a\n          className={className}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={`${PRODUCTION_ENDPOINT_CONFIG.PORTAL}#!Synapse:${entity.id!}${\n            versionNumber ? `.${versionNumber}` : ''\n          }`}\n        >\n          {showIcon && (\n            <EntityTypeIcon type={type} style={{ marginRight: '6px' }} />\n          )}\n          {entity[displayTextField]}\n        </a>\n      )\n    } else {\n      return (\n        <p className={className}>\n          <EntityTypeIcon type={type} style={{ marginRight: '6px' }} />\n          {entity[displayTextField]}\n        </p>\n      )\n    }\n  } else if (error) {\n    if (entityId) {\n      return <ErrorChip chipText={entityId} error={error} />\n    }\n    return <ErrorBanner error={error} />\n  } else {\n    return <Skeleton variant=\"rectangular\" width=\"100\" />\n  }\n}\n"],"names":["EntityLink","props","entityOrId","className","versionNumber","displayTextField","link","showIcon","entityId","fetchedEntity","error","useGetEntity","entity","type","convertToEntityType","getEntityTypeFromHeader","jsxs","PRODUCTION_ENDPOINT_CONFIG","jsx","EntityTypeIcon","ErrorChip","ErrorBanner","Skeleton"],"mappings":"qVAyBO,MAAAA,EAAAC,GAAA,CACL,KAAA,CAAM,OAAAC,EACI,UAAAC,EACR,cAAAC,EACA,iBAAAC,EAAA,OACmB,KAAAC,EAAA,GACZ,SAAAC,EAAA,EACI,EAAAN,EAGb,IAAAO,EAAA,GACA,OAAAN,GAAA,WACEM,EAAAN,GAGF,KAAA,CAAA,KAAAO,EAAA,MAAAC,CAAA,EAAAC,EAAAH,EAAAJ,EAAA,CAA6E,QAAA,CAAA,CAAAI,GAAA,OAAAN,GAAA,QAC9B,CAAA,EAG/C,GAAAO,GAAA,OAAAP,GAAA,SAAA,CACE,MAAAU,EAAAH,GAAAP,EACA,IAAAW,EAOA,MANA,iBAAAD,EACEC,EAAAC,EAAAF,EAAA,YAAA,EAEAC,EAAAE,EAAAH,CAAA,EAGFN,EACEU,EACE,IAAC,CAAA,UAAAb,EACC,OAAA,SACO,IAAA,sBACH,KAAA,GAAAc,EAAA,mBAAAL,EAAA,KAAAR,EAAA,IAAAA,IAAA,KAEoC,SAAA,CAGvCG,GAAAW,EAAAC,EAAA,CAAA,KAAAN,EAAA,MAAA,CAAA,YAAA,KAAA,EAAA,EAC4DD,EAAAP,CAAA,CAErC,CAAA,CAAA,EAI5BW,EAAA,IAAA,CAAA,UAAAb,EAAA,SAAA,CAEIe,EAAAC,EAAA,CAAA,KAAAN,EAAA,MAAA,CAAA,YAAA,KAAA,EAAA,EAA2DD,EAAAP,CAAA,CACnC,CAAA,CAAA,CAG9B,KAAA,QAAAK,EAEAF,EACEU,EAAAE,EAAA,CAAA,SAAAZ,EAAA,MAAAE,CAAA,CAAA,EAEFQ,EAAAG,EAAA,CAAA,MAAAX,CAAA,CAAA,EAEAQ,EAAAI,EAAA,CAAA,QAAA,cAAA,MAAA,KAAA,CAAA,CAEJ"}