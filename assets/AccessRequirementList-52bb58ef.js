import{j as p,a as R,F as j}from"./jsx-runtime-ad672792.js";import{r as I,R as V}from"./index-f1f749bf.js";import{ag as Up,ah as ie,ai as Xv,aj as Yn,ak as Qv,al as jp,am as ec,an as Zv,ao as yr,ap as Kv,aq as Jv,ar as tc,as as ey,at as Ae,au as ty,av as Wp,E as ds,aw as ny,ax as Gp,ay as ry,az as hu,aA as qr,aB as Xn,aC as Yp,aD as ay,aE as Xp,aF as oy,aG as iy,aH as nc,aI as Qp,aJ as Zp,aK as Nn,aL as sy,aM as Pn,aN as Kp,aO as Jp,aP as eh,aQ as ly,aR as mu,aS as th,aT as cy,aU as uy,aV as dy,aW as nh,aX as fy,aY as py,aZ as rh,a_ as hy,a$ as my,b0 as ah,b1 as so,b2 as oh,b3 as gy,b4 as vy,b5 as yy,b6 as by,b7 as wy,b8 as Cy,b9 as Sy,ba as Ey,bb as _y,bc as xy}from"./SynapseContext-d9d41f69.js";import{P as Ue,g as Ny,B as Iy}from"./getEndpoint-5374ab4d.js";import{u as ih}from"./useGetInfoFromIds-c6504d1e.js";import{I as ue,H as Ty,S as ky,t as Oy}from"./IconSvg-44530777.js";import{S as Ry}from"./StandaloneLoginForm-4c040397.js";import{u as Ay,c as hn,a as et}from"./Clear-a9f76abf.js";import{B as ut}from"./Button-7d415009.js";import{g as sh,T as qy,M as Ly,h as Sa,i as Lr,j as Pr,k as rc,l as Py,m as Dy,n as ac,o as oc,B as lh,p as ic,q as sc,r as lc,S as cc,s as My,t as ch,O as fs,u as gu,G as Vy,F as $y,v as vu,c as Fy,d as By}from"./SynapseConstants-9d1f6e44.js";import{S as lo,l as uh}from"./LoadingScreen-ded2c742.js";import{u as zy,U as Dn,a as uc,g as Hy}from"./UserCard-80bc8aef.js";import{A as mn}from"./Alert-84d62a08.js";import{p as Uy,S as dh,D as jy}from"./RegularExpressions-bc0adf55.js";import{u as Qn}from"./react-intersection-observer.esm-8bf16175.js";import{u as fh}from"./useInfiniteQuery-507f7088.js";import{f as br}from"./DateFormatter-12ca11f2.js";import{d as Yt}from"./dayjs.min-e0adaab4.js";import{S as dc}from"./SkeletonTable-cc6b19d2.js";import{S as ps}from"./Skeleton-cff63b1c.js";import{T as Rt}from"./Typography-f5dd8748.js";import{E as yu}from"./EntityIcon-f23da3c2.js";import{c as co,g as Wy}from"./_commonjsHelpers-042e6b4d.js";import{c as uo}from"./_commonjs-dynamic-modules-302442b1.js";import{_ as Gy,a as Yy,b as Xy,k as Qy,c as Zy}from"./uniq-b503d6a4.js";import{r as ph,f as Ky}from"./index.browser-ac474deb.js";import{f as hh,_ as mh,a as Jy,b as eb,c as tb,d as nb,e as rb,g as ab,l as ob,s as ib,F as sb}from"./core.esm-d6052014.js";import{b as gn,r as lb,c as cb,a as ub,_ as db,k as fc,d as fb}from"./_baseIteratee-dd2a3782.js";import{b as Dr,D as pb,E as gh,l as hb,v as mb,m as vh,h as gb,i as yh,w as vb,k as yb,F as bb,C as bh,G as wb}from"./hasIn-6ae41e3d.js";import{i as Cb,u as Sb,p as Eb,f as _b,C as xb}from"./CustomSelectWidget-d08d4b60.js";import{i as Nb}from"./isString-b52675be.js";import{_ as Ib,a as Tb}from"./_baseUniq-7e37c67e.js";import{t as kb,r as Ob}from"./now-030ccb2b.js";import{m as Rb}from"./mapValues-1c647352.js";import{r as Ab}from"./index-96c5f47c.js";import{C as wh,d as Xt}from"./ToastMessage-306d2a68.js";import{B as He}from"./Button-e0234af7.js";import{d as qb,s as Lb}from"./union-0c9bb423.js";import{i as Pb}from"./isEqual-fb1c71a1.js";import{_ as fo}from"./objectWithoutPropertiesLoose-4f48578a.js";import{_ as Ee}from"./extends-98964cd2.js";import{g as pc,a as hc,s as Zt,x as Ot,u as mc,c as Ea,b as gc,j as Cn}from"./styled-8837a0b3.js";import{k as Ch,c as Sh}from"./emotion-react.browser.esm-a8a50fc7.js";import{c as Db,P as Mb}from"./factory-76e91d33.js";import{p as vn,g as vc,a as Vb}from"./sqlFunctions-838d033f.js";import{u as po}from"./useEntity-a144a0c2.js";import{T as _a,N as $b,I as bu}from"./SynapseTableConstants-942d2b0b.js";import{S as ko,Q as Zn,a as Kn,u as Mt,b as At,c as Fb,d as Bb,e as yc,N as xa,f as bc,g as zb,T as Eh,h as Hb,E as Ub,i as jb,j as Wb,k as _h,l as Gb,F as Yb,m as Xb,n as xh}from"./FacetNav-2b188222.js";import{r as Qb}from"./relativeTime-93b00284.js";import{u as wu}from"./use-deep-compare-effect.esm-2b920fea.js";import{u as Zb,a as Kb}from"./useDownloadList-5045ce6f.js";import{u as Nh,a as Jb,b as ew}from"./useGetQueryResultBundle-e8c55a35.js";import{M as Ke,a as tw,b as nw}from"./Modal-6ffa84ac.js";import{i as rw,r as aw,h as ow}from"./queryUtils-2a5692a0.js";import{C as re}from"./ColumnType-5116adf5.js";import{i as iw,a as sw,C as lw,b as cw}from"./QueryFilter-4b31080c.js";import{E as wc,I as ho,C as Cc,a as uw,S as dw}from"./ElementWithTooltip-739b3ae0.js";import{D as jt}from"./Dropdown-cc33f611.js";import{Q as fw}from"./QueryCount-04b99665.js";import{S as pw}from"./SvgIcon-93d86b25.js";import{c as ir}from"./cloneDeep-de653b9f.js";import{S as hw}from"./react-select.esm-f22ba201.js";import{I as mw}from"./IconList-fac20917.js";import{U as gw}from"./UserCardList-73dcb56e.js";import{u as Ih}from"./useAccessRequirements-6eca9c35.js";import{a as Sc,R as vw}from"./RestrictionInformation-4ed2591e.js";import{D as Mn}from"./DialogTitle-cd610631.js";import{S as Mr}from"./Stack-e5639b81.js";import{B as Vr}from"./Box-2e3c1244.js";import{I as $r}from"./IconButton-404fc885.js";import{D as Vn,a as mo,b as yw}from"./DialogContent-5fd82e31.js";import{S as De}from"./ManagedACTAccessRequirementStatus-9671fe8d.js";import{F as me}from"./Form-4a4de212.js";import{F as Oo}from"./FileUpload-50502315.js";import{U as bw}from"./UserSearchBox-2fafe3db.js";import{R as ww}from"./RadioGroup-2b4593e6.js";import{u as Th}from"./useTheme-c4678cf9.js";import{E as hs}from"./EntityLink-1d61bd54.js";import{C as Cw}from"./Checkbox-9c5dca81.js";import{B as Sw}from"./ButtonBase-26873d31.js";import{e as Yr}from"./_MapCache-c4e7294a.js";import{u as Ew,U as _w}from"./UserOrTeamBadge-20e49870.js";import{S as xw}from"./SynapseVideo-a717dc65.js";var Ec=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(Ec||{}),Nw=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(Nw||{}),_t=(e=>(e.GAIN_ACCESS="GAIN_ACCESS",e.RENEW_ACCESS="RENEW_ACCESS",e.REVOKE_ACCESS="REVOKE_ACCESS",e))(_t||{});const Iw="org.sagebionetworks.repo.model.file.GoogleCloudFileHandle",Tw="org.sagebionetworks.repo.model.file.S3FileHandle",_c=Up(Tw,Iw),kw="org.sagebionetworks.repo.model.file.ExternalFileHandle",Ow="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",Rw="org.sagebionetworks.repo.model.file.ProxyFileHandle",Aw=Up(Rw,Ow,kw),qw=e=>{const t=I.useRef();return I.useEffect(()=>{t.current=e}),t.current},Lw=e=>qw(e)!==e;function Pw(e){return pc("MuiCircularProgress",e)}hc("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Dw=["className","color","disableShrink","size","style","thickness","value","variant"];let go=e=>e,Cu,Su,Eu,_u;const $t=44,Mw=Ch(Cu||(Cu=go`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Vw=Ch(Su||(Su=go`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),$w=e=>{const{classes:t,variant:n,color:r,disableShrink:a}=e,o={root:["root",n,`color${Ot(r)}`],svg:["svg"],circle:["circle",`circle${Ot(n)}`,a&&"circleDisableShrink"]};return gc(o,Pw,t)},Fw=Zt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Ot(n.color)}`]]}})(({ownerState:e,theme:t})=>Ee({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Sh(Eu||(Eu=go`
      animation: ${0} 1.4s linear infinite;
    `),Mw)),Bw=Zt("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),zw=Zt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Ot(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>Ee({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Sh(_u||(_u=go`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Vw)),Hw=I.forwardRef(function(t,n){const r=mc({props:t,name:"MuiCircularProgress"}),{className:a,color:o="primary",disableShrink:i=!1,size:s=40,style:l,thickness:u=3.6,value:c=0,variant:d="indeterminate"}=r,f=fo(r,Dw),m=Ee({},r,{color:o,disableShrink:i,size:s,thickness:u,value:c,variant:d}),h=$w(m),g={},v={},S={};if(d==="determinate"){const _=2*Math.PI*(($t-u)/2);g.strokeDasharray=_.toFixed(3),S["aria-valuenow"]=Math.round(c),g.strokeDashoffset=`${((100-c)/100*_).toFixed(3)}px`,v.transform="rotate(-90deg)"}return p(Fw,Ee({className:Ea(h.root,a),style:Ee({width:s,height:s},v,l),ownerState:m,ref:n,role:"progressbar"},S,f,{children:p(Bw,{className:h.svg,ownerState:m,viewBox:`${$t/2} ${$t/2} ${$t} ${$t}`,children:p(zw,{className:h.circle,style:g,ownerState:m,cx:$t,cy:$t,r:($t-u)/2,fill:"none",strokeWidth:u})})}))}),Uw=Hw;function jw(e){return pc("MuiPagination",e)}hc("MuiPagination",["root","ul","outlined","text"]);const Ww=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Gw(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:a=1,disabled:o=!1,hideNextButton:i=!1,hidePrevButton:s=!1,onChange:l,page:u,showFirstButton:c=!1,showLastButton:d=!1,siblingCount:f=1}=e,m=fo(e,Ww),[h,g]=Ay({controlled:u,default:a,name:n,state:"page"}),v=(N,k)=>{u||g(k),l&&l(N,k)},S=(N,k)=>{const A=k-N+1;return Array.from({length:A},(q,L)=>N+L)},_=S(1,Math.min(t,r)),b=S(Math.max(r-t+1,t+1),r),C=Math.max(Math.min(h-f,r-t-f*2-1),t+2),w=Math.min(Math.max(h+f,t+f*2+2),b.length>0?b[0]-2:r-1),y=[...c?["first"]:[],...s?[]:["previous"],..._,...C>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...S(C,w),...w<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...b,...i?[]:["next"],...d?["last"]:[]],E=N=>{switch(N){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return r;default:return null}},x=y.map(N=>typeof N=="number"?{onClick:k=>{v(k,N)},type:"page",page:N,selected:N===h,disabled:o,"aria-current":N===h?"true":void 0}:{onClick:k=>{v(k,E(N))},type:N,page:E(N),selected:!1,disabled:o||N.indexOf("ellipsis")===-1&&(N==="next"||N==="last"?h>=r:h<=1)});return Ee({items:x},m)}function Yw(e){return pc("MuiPaginationItem",e)}const Xw=hc("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Ze=Xw,xu=hn(p("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Nu=hn(p("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Iu=hn(p("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Tu=hn(p("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Qw=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],kh=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Ot(n.size)}`],n.variant==="text"&&t[`text${Ot(n.color)}`],n.variant==="outlined"&&t[`outlined${Ot(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},Zw=e=>{const{classes:t,color:n,disabled:r,selected:a,size:o,shape:i,type:s,variant:l}=e,u={root:["root",`size${Ot(o)}`,l,i,n!=="standard"&&`${l}${Ot(n)}`,r&&"disabled",a&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return gc(u,Yw,t)},Kw=Zt("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:kh})(({theme:e,ownerState:t})=>Ee({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Ze.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),Jw=Zt(Sw,{name:"MuiPaginationItem",slot:"Root",overridesResolver:kh})(({theme:e,ownerState:t})=>Ee({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Ze.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ze.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ze.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Cn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Ze.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Cn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Ze.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>Ee({},t.variant==="text"&&{[`&.${Ze.selected}`]:Ee({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Ze.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Ze.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ze.selected}`]:Ee({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Cn(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:Cn(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Cn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ze.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Cn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Ze.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),e0=Zt("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>Ee({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),t0=I.forwardRef(function(t,n){const r=mc({props:t,name:"MuiPaginationItem"}),{className:a,color:o="standard",component:i,components:s={},disabled:l=!1,page:u,selected:c=!1,shape:d="circular",size:f="medium",slots:m={},type:h="page",variant:g="text"}=r,v=fo(r,Qw),S=Ee({},r,{color:o,disabled:l,selected:c,shape:d,size:f,type:h,variant:g}),_=Th(),b=Zw(S),w=(_.direction==="rtl"?{previous:m.next||s.next||Tu,next:m.previous||s.previous||Iu,last:m.first||s.first||xu,first:m.last||s.last||Nu}:{previous:m.previous||s.previous||Iu,next:m.next||s.next||Tu,first:m.first||s.first||xu,last:m.last||s.last||Nu})[h];return h==="start-ellipsis"||h==="end-ellipsis"?p(Kw,{ref:n,ownerState:S,className:Ea(b.root,a),children:"…"}):R(Jw,Ee({ref:n,ownerState:S,component:i,disabled:l,className:Ea(b.root,a)},v,{children:[h==="page"&&u,w?p(e0,{as:w,ownerState:S,className:b.icon}):null]}))}),n0=t0,r0=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],a0=e=>{const{classes:t,variant:n}=e;return gc({root:["root",n],ul:["ul"]},jw,t)},o0=Zt("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),i0=Zt("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function s0(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const l0=I.forwardRef(function(t,n){const r=mc({props:t,name:"MuiPagination"}),{boundaryCount:a=1,className:o,color:i="standard",count:s=1,defaultPage:l=1,disabled:u=!1,getItemAriaLabel:c=s0,hideNextButton:d=!1,hidePrevButton:f=!1,renderItem:m=x=>p(n0,Ee({},x)),shape:h="circular",showFirstButton:g=!1,showLastButton:v=!1,siblingCount:S=1,size:_="medium",variant:b="text"}=r,C=fo(r,r0),{items:w}=Gw(Ee({},r,{componentName:"Pagination"})),y=Ee({},r,{boundaryCount:a,color:i,count:s,defaultPage:l,disabled:u,getItemAriaLabel:c,hideNextButton:d,hidePrevButton:f,renderItem:m,shape:h,showFirstButton:g,showLastButton:v,siblingCount:S,size:_,variant:b}),E=a0(y);return p(o0,Ee({"aria-label":"pagination navigation",className:Ea(E.root,o),ownerState:y,ref:n},C,{children:p(i0,{className:E.ul,ownerState:y,children:w.map((x,N)=>p("li",{children:m(Ee({},x,{color:i,"aria-label":c(x.type,x.page,x.selected),shape:h,size:_,variant:b}))},N))})}))}),c0=l0,u0=hn(p("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckTwoTone"),d0=hn([p("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"},"0"),p("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"},"1")],"LockTwoTone"),f0=hn(p("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"WarningSharp");function p0(e,t){const{accessToken:n,keyFactory:r}=ie(),a={accessRequirementId:e};return fh(r.getApprovedSubmissionInfoQueryKey(a),async o=>await Xv({...a,nextPageToken:o.pageParam},n),{...t,getNextPageParam:o=>o.nextPageToken})}function Oh(e,t,n=sh,r){const{accessToken:a,keyFactory:o}=ie();return Yn(o.getEntityBundleQueryKey(e,t,n),()=>Qv(e,n,t,a),r)}function h0(e,t){const{accessToken:n,keyFactory:r}=ie();return Yn(r.getEntityChildrenQueryKey(e,!1),()=>jp(e,n),t)}function lq(e,t){const{accessToken:n,keyFactory:r}=ie();return fh(r.getEntityChildrenQueryKey(e,!0),async a=>await jp({...e,includeTotalChildCount:a.pageParam?!1:e.includeTotalChildCount,nextPageToken:a.pageParam},n,a.signal),{...t,getNextPageParam:a=>a.nextPageToken})}function m0(e,t){const{accessToken:n,keyFactory:r}=ie();return Yn(r.getEntityHeadersQueryKey(e),()=>ec(e,n),t)}function cq(e,t){const{accessToken:n,keyFactory:r}=ie();return Yn(r.getEntityHeaderQueryKey(e),()=>Zv(e,n),t)}function un({isCompleted:e}){return p("div",{"data-testid":`AccessApprovalCheckMark-${e}`,className:`check-mark-container ${e?"green":"orange"}`,children:e?p(u0,{}):p(d0,{})})}try{un.displayName="AccessApprovalCheckMark",un.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}}}catch{}var Na={},g0={get exports(){return Na},set exports(e){Na=e}},Se={},$n={},v0={get exports(){return $n},set exports(e){$n=e}},yn={};function Rh(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function y0(e,t,n){}function b0(e,t,n){}var w0=/javascript\s*\:/img;function C0(e,t){return w0.test(t)?"":t}yn.whiteList=Rh();yn.getDefaultWhiteList=Rh;yn.onAttr=y0;yn.onIgnoreAttr=b0;yn.safeAttrValue=C0;var S0={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Jn=S0;function E0(e,t){e=Jn.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,a=0,o=0,i="";function s(){if(!r){var c=Jn.trim(e.slice(a,o)),d=c.indexOf(":");if(d!==-1){var f=Jn.trim(c.slice(0,d)),m=Jn.trim(c.slice(d+1));if(f){var h=t(a,i.length,f,m,c);h&&(i+=h+"; ")}}}a=o+1}for(;o<n;o++){var l=e[o];if(l==="/"&&e[o+1]==="*"){var u=e.indexOf("*/",o+2);if(u===-1)break;o=u+1,a=o+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||s():l===`
`&&s()}return Jn.trim(i)}var _0=E0,Xr=yn,x0=_0;function ku(e){return e==null}function N0(e){var t={};for(var n in e)t[n]=e[n];return t}function Ah(e){e=N0(e||{}),e.whiteList=e.whiteList||Xr.whiteList,e.onAttr=e.onAttr||Xr.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Xr.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Xr.safeAttrValue,this.options=e}Ah.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,a=n.onAttr,o=n.onIgnoreAttr,i=n.safeAttrValue,s=x0(e,function(l,u,c,d,f){var m=r[c],h=!1;if(m===!0?h=m:typeof m=="function"?h=m(d):m instanceof RegExp&&(h=m.test(d)),h!==!0&&(h=!1),d=i(c,d),!!d){var g={position:u,sourcePosition:l,source:f,isWhite:h};if(h){var v=a(c,d,g);return ku(v)?c+":"+d:v}else{var v=o(c,d,g);if(!ku(v))return v}}});return s};var I0=Ah;(function(e,t){var n=yn,r=I0;function a(i,s){var l=new r(s);return l.process(i)}t=e.exports=a,t.FilterCSS=r;for(var o in n)t[o]=n[o];typeof window<"u"&&(window.filterCSS=e.exports)})(v0,$n);var xc={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},T0=$n.FilterCSS,k0=$n.getDefaultWhiteList,Ia=xc;function qh(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Lh=new T0;function O0(e,t,n){}function R0(e,t,n){}function A0(e,t,n){}function q0(e,t,n){}function Ph(e){return e.replace(P0,"&lt;").replace(D0,"&gt;")}function L0(e,t,n,r){if(n=Bh(n),t==="href"||t==="src"){if(n=Ia.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Qr.lastIndex=0,Qr.test(n))return""}else if(t==="style"){if(Ou.lastIndex=0,Ou.test(n)||(Ru.lastIndex=0,Ru.test(n)&&(Qr.lastIndex=0,Qr.test(n))))return"";r!==!1&&(r=r||Lh,n=r.process(n))}return n=zh(n),n}var P0=/</g,D0=/>/g,M0=/"/g,V0=/&quot;/g,$0=/&#([a-zA-Z0-9]*);?/gim,F0=/&colon;?/gim,B0=/&newline;?/gim,Qr=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Ou=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Ru=/u\s*r\s*l\s*\(.*/gi;function Dh(e){return e.replace(M0,"&quot;")}function Mh(e){return e.replace(V0,'"')}function Vh(e){return e.replace($0,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function $h(e){return e.replace(F0,":").replace(B0," ")}function Fh(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Ia.trim(t)}function Bh(e){return e=Mh(e),e=Vh(e),e=$h(e),e=Fh(e),e}function zh(e){return e=Dh(e),e=Ph(e),e}function z0(){return""}function H0(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(i){return n?!0:Ia.indexOf(e,i)!==-1}var a=[],o=!1;return{onIgnoreTag:function(i,s,l){if(r(i))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return a.push([o!==!1?o:l.position,c]),o=!1,u}else return o||(o=l.position),"[removed]";else return t(i,s,l)},remove:function(i){var s="",l=0;return Ia.forEach(a,function(u){s+=i.slice(l,u[0]),l=u[1]}),s+=i.slice(l),s}}}function U0(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var a=e.indexOf("-->",r);if(a===-1)break;n=a+3}return t}function j0(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Se.whiteList=qh();Se.getDefaultWhiteList=qh;Se.onTag=O0;Se.onIgnoreTag=R0;Se.onTagAttr=A0;Se.onIgnoreTagAttr=q0;Se.safeAttrValue=L0;Se.escapeHtml=Ph;Se.escapeQuote=Dh;Se.unescapeQuote=Mh;Se.escapeHtmlEntities=Vh;Se.escapeDangerHtml5Entities=$h;Se.clearNonPrintableCharacter=Fh;Se.friendlyAttrValue=Bh;Se.escapeAttrValue=zh;Se.onIgnoreTagStripAll=z0;Se.StripTagBody=H0;Se.stripCommentTag=U0;Se.stripBlankChar=j0;Se.cssFilter=Lh;Se.getDefaultCSSWhiteList=k0;var vo={},zt=xc;function W0(e){var t=zt.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=zt.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function G0(e){return e.slice(0,2)==="</"}function Y0(e,t,n){var r="",a=0,o=!1,i=!1,s=0,l=e.length,u="",c="";e:for(s=0;s<l;s++){var d=e.charAt(s);if(o===!1){if(d==="<"){o=s;continue}}else if(i===!1){if(d==="<"){r+=n(e.slice(a,s)),o=s,a=s;continue}if(d===">"||s===l-1){r+=n(e.slice(a,o)),c=e.slice(o,s+1),u=W0(c),r+=t(o,r.length,u,c,G0(c)),a=s+1,o=!1;continue}if(d==='"'||d==="'")for(var f=1,m=e.charAt(s-f);m.trim()===""||m==="=";){if(m==="="){i=d;continue e}m=e.charAt(s-++f)}}else if(d===i){i=!1;continue}}return a<l&&(r+=n(e.substr(a))),r}var X0=/[^a-zA-Z0-9\\_:.-]/gim;function Q0(e,t){var n=0,r=0,a=[],o=!1,i=e.length;function s(f,m){if(f=zt.trim(f),f=f.replace(X0,"").toLowerCase(),!(f.length<1)){var h=t(f,m||"");h&&a.push(h)}}for(var l=0;l<i;l++){var u=e.charAt(l),c,d;if(o===!1&&u==="="){o=e.slice(n,l),n=l+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:K0(e,l+1);continue}if(o!==!1&&l===r){if(d=e.indexOf(u,l+1),d===-1)break;c=zt.trim(e.slice(r+1,d)),s(o,c),o=!1,l=d,n=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),o===!1)if(d=Z0(e,l),d===-1){c=zt.trim(e.slice(n,l)),s(c),o=!1,n=l+1;continue}else{l=d-1;continue}else if(d=J0(e,l-1),d===-1){c=zt.trim(e.slice(n,l)),c=Au(c),s(o,c),o=!1,n=l+1;continue}else continue}return n<e.length&&(o===!1?s(e.slice(n)):s(o,Au(zt.trim(e.slice(n))))),zt.trim(a.join(" "))}function Z0(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function K0(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function J0(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function eC(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Au(e){return eC(e)?e.substr(1,e.length-2):e}vo.parseTag=Y0;vo.parseAttr=Q0;var tC=$n.FilterCSS,st=Se,Hh=vo,nC=Hh.parseTag,rC=Hh.parseAttr,ha=xc;function Zr(e){return e==null}function aC(e){var t=ha.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=ha.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=ha.trim(e.slice(0,-1))),{html:e,closing:n}}function oC(e){var t={};for(var n in e)t[n]=e[n];return t}function iC(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function Uh(e){e=oC(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=st.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=iC(e.whiteList||e.allowList):e.whiteList=st.whiteList,e.onTag=e.onTag||st.onTag,e.onTagAttr=e.onTagAttr||st.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||st.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||st.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||st.safeAttrValue,e.escapeHtml=e.escapeHtml||st.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new tC(e.css))}Uh.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,a=n.onTag,o=n.onIgnoreTag,i=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,u=n.escapeHtml,c=t.cssFilter;n.stripBlankChar&&(e=st.stripBlankChar(e)),n.allowCommentTag||(e=st.stripCommentTag(e));var d=!1;n.stripIgnoreTagBody&&(d=st.StripTagBody(n.stripIgnoreTagBody,o),o=d.onIgnoreTag);var f=nC(e,function(m,h,g,v,S){var _={sourcePosition:m,position:h,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(r,g)},b=a(g,v,_);if(!Zr(b))return b;if(_.isWhite){if(_.isClosing)return"</"+g+">";var C=aC(v),w=r[g],y=rC(C.html,function(E,x){var N=ha.indexOf(w,E)!==-1,k=i(g,E,x,N);return Zr(k)?N?(x=l(g,E,x,c),x?E+'="'+x+'"':E):(k=s(g,E,x,N),Zr(k)?void 0:k):k});return v="<"+g,y&&(v+=" "+y),C.closing&&(v+=" /"),v+=">",v}else return b=o(g,v,_),Zr(b)?u(v):b},u);return d&&(f=d.remove(f)),f};var sC=Uh;(function(e,t){var n=Se,r=vo,a=sC;function o(s,l){var u=new a(l);return u.process(s)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=a,function(){for(var s in n)t[s]=n[s];for(var l in r)t[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(g0,Na);const jh=Na,Wh={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function ms(e){let t="btn-wide ";const{align:n="",highlight:r=""}=e,a=n.toLowerCase();a==="left"&&(t+="floatLeft "),a==="right"&&(t+="floatright ");const o=r==="true"?"secondary":"light-secondary";return a==="center"?p("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:p(ut,{href:e.url,className:t,variant:o,children:e.text})}):p("span",{className:"bootstrap-4-backport",children:p(ut,{href:e.url,className:t,variant:o,children:e.text})})}try{ms.displayName="MarkdownButton",ms.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}}}catch{}async function lC(e,t,n){const r=new Set;try{let a=await yr(n,e,t);for(;Kv(a);){if(r.has(a.id))throw new Error("Link forms a cycle.");r.add(a.id),a=await yr(n,a.linksTo.targetId,a.linksTo.targetVersionNumber)}return a}catch(a){throw new Error(`${e} could not be resolved.
${a.message}`)}}function cC(e,t,n){const{accessToken:r}=ie();return Yn(["resolveLinkEntity",e,t],()=>lC(e,t,r),n)}function uC(e,t,n){const{accessToken:r,keyFactory:a}=ie();return Yn(a.getIsUserMemberOfTeamQueryKey(e,t),()=>Jv(e,t,r),n)}function dC(e){const{rawHtml:t,isLoading:n,isTrusted:r}=e;return I.useMemo(()=>{if(!n)return r?t:jh(t,Wh)},[n,r,t])}function gs(e){const{createdByUserId:t,rawHtml:n}=e,r=I.useRef(null),[a,o]=I.useState(100),{data:i,isLoading:s}=uC(qy,t),l=()=>{if(r!=null&&r.current&&(r!=null&&r.current.contentWindow)){let d=r.current.contentWindow.document.body.scrollHeight;d<450&&(d=450),(!a||Math.abs(d-a)>70)&&o(d+50)}};I.useEffect(()=>{setInterval(()=>{l()},500)},[n]);const c=dC({rawHtml:n,isLoading:s,isTrusted:!!i});return s?p(lo,{}):R(j,{children:[n!==c&&p(mn,{variant:"info",dismissible:!1,show:!0,transition:!1,children:"Limited rendering only."}),p("iframe",{ref:r,srcDoc:c,height:`${a}px`,style:{border:0,width:"100%"}})]})}try{gs.displayName="HtmlPreview",gs.__docgenInfo={description:"Renders raw HTML. Uses file handle data to determine if the content should be sanitized.",displayName:"HtmlPreview",props:{createdByUserId:{defaultValue:null,description:"",name:"createdByUserId",required:!0,type:{name:"string"}},rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}}}catch{}var Ce=(e=>(e.PLAINTEXT="PLAINTEXT",e.CODE="CODE",e.ZIP="ZIP",e.CSV="CSV",e.IMAGE="IMAGE",e.NONE="NONE",e.TAB="TAB",e.HTML="HTML",e.PDF="PDF",e.IPYNB="IPYNB",e.VIDEO="VIDEO",e.MARKDOWN="MARKDOWN",e.TIFF="TIFF",e))(Ce||{});const fC=30*Ly;function Ta(e){const{fileHandle:t,fileHandleAssociation:n,previewType:r}=e,a={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1},{data:o,isLoading:i}=zy(t,a,fC,{useErrorBoundary:!0});return i?p(lo,{}):r===Ce.HTML?p(gs,{rawHtml:o,createdByUserId:t.createdBy}):(r!==Ce.NONE&&console.warn(`Rendering a preview of type ${r} is not supported in Portals`),p(j,{}))}try{Ta.displayName="FileHandleContentRenderer",Ta.__docgenInfo={description:"Fetches the content for and renders the contents of a file handle.",displayName:"FileHandleContentRenderer",props:{fileHandle:{defaultValue:null,description:"The file handle whose contents should be downloaded and rendered",name:"fileHandle",required:!0,type:{name:"FileHandle"}},fileHandleAssociation:{defaultValue:null,description:"The association between the file handle and an object which will give the user permission to access the file data",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},previewType:{defaultValue:null,description:"Informs how to render the file data",name:"previewType",required:!0,type:{name:"enum",value:[{value:'"PLAINTEXT"'},{value:'"CODE"'},{value:'"ZIP"'},{value:'"CSV"'},{value:'"IMAGE"'},{value:'"NONE"'},{value:'"TAB"'},{value:'"HTML"'},{value:'"PDF"'},{value:'"IPYNB"'},{value:'"VIDEO"'},{value:'"MARKDOWN"'},{value:'"TIFF"'}]}}}}}catch{}const Gh=["image/bmp","image/pjpeg","image/jpeg","image/jpg","image/jpe","image/gif","image/png","image/svg+xml"],pC=[".mp4",".m4a",".m4p",".m4b",".m4r",".m4v"],hC=[".ogv",".ogg"],mC=[...pC,...hC,".webm"],gC=[".cwl",".wdl",".json",".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx"],vC=[".md",".markdown",".rmd"];function yC(e){const t=e.lastIndexOf(".");return t===-1?null:e.substring(t)}function bC(e){if(!_c(e))return Ce.NONE;const t=yC(e.fileName);return t&&mC.includes(t)?Ce.VIDEO:t===".ipynb"?Ce.IPYNB:Gh.includes(e.contentType)?Ce.IMAGE:e.contentType==="text/html"?Ce.HTML:e.contentType.toLowerCase().startsWith("application/pdf")?Ce.PDF:t&&gC.includes(t)?Ce.CODE:t&&vC.includes(t)?Ce.MARKDOWN:e.contentType==="image/tiff"?Ce.TIFF:Ce.NONE}function wC(e,t){const n=e.contentType;return _c(e)?Gh.includes(e.contentType)?Ce.IMAGE:n.toLowerCase().startsWith("text/")?n.toLowerCase()==="text/csv"?t.contentType==="application/zip"?Ce.ZIP:Ce.CSV:n.toLowerCase()==="text/tab-separated-values"?Ce.TAB:Ce.PLAINTEXT:n.toLowerCase().startsWith("application/pdf")?Ce.PDF:Ce.NONE:Ce.NONE}function vs(e){const{bundle:t}=e,{accessToken:n}=ie(),r=!!n;if(!tc(t.entity))throw new Error(`Entity ${t.entity.id} is not a FileEntity`);const a=t.entity.dataFileHandleId,o=t.fileHandles.find(s=>s.id===a);if(!o&&!r)return p(mn,{dismissible:!1,show:!0,variant:"danger",transition:!1,children:p(ey,{})});if(o){const s=bC(o);if(s!==Ce.NONE)return p(Ta,{fileHandle:o,fileHandleAssociation:{fileHandleId:a,associateObjectId:t.entity.id,associateObjectType:Ae.FileEntity},previewType:s})}const i=t.fileHandles.find(s=>_c(s)&&s.isPreview);if(i&&o){const s=wC(i,o);if(s!==Ce.NONE)return p(Ta,{fileHandle:i,fileHandleAssociation:{fileHandleId:i.id,associateObjectId:t.entity.id,associateObjectType:Ae.FileEntity},previewType:s})}throw new Error(`Could not render a preview for entity: ${t.entity.id}`)}try{vs.displayName="FileEntityPreview",vs.__docgenInfo={description:`Given an entity bundle that contains a FileEntity, render a preview of the file. The rendered preview will be determined based on the
content type and file name of the file handle(s) associated with the FileEntity.`,displayName:"FileEntityPreview",props:{bundle:{defaultValue:null,description:"An entity bundle containing a FileEntity, and its fileHandles",name:"bundle",required:!0,type:{name:"EntityBundle"}}}}}catch{}function ys(e){const{entityId:t,versionNumber:n}=e,{data:r,isLoading:a}=cC(t,n),o=r&&tc(r),{data:i,isLoading:s}=Oh(r==null?void 0:r.id,r==null?void 0:r.versionNumber,sh,{enabled:!!o,useErrorBoundary:!0});if(a||s)return p(lo,{});if(o)return p(vs,{bundle:i});throw new Error(`${t} is not a File and cannot be previewed.`)}try{ys.displayName="EntityPreview",ys.__docgenInfo={description:"Returns a preview of an entity. Currently only works for FileEntities, and Links that resolve to FileEntities.",displayName:"EntityPreview",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function bs(e){const t=Uy(e.entityId);if(t==null)throw new Error(`${e.entityId} is not a valid Synapse ID`);const n=parseInt(e.versionNumber??""),r=t.targetId,a=Number.isNaN(n)?t.targetVersionNumber:n;return p(ys,{entityId:r,versionNumber:a})}try{bs.displayName="MarkdownEntityPreview",bs.__docgenInfo={description:"",displayName:"MarkdownEntityPreview",props:{entityId:{defaultValue:null,description:'A Synapse Entity ID that may optionally contain a "dot" version, e.g. syn123 or syn123.2',name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"An optional Entity version number.",name:"versionNumber",required:!1,type:{name:"string"}}}}}catch{}const ws=({info:e})=>p(j,{children:e&&R("p",{className:"SubmissionInfoCard",children:[p("strong",{children:" Project Lead: "})," ",p("span",{children:e.projectLead})," ",p("br",{}),p("strong",{children:" Institution: "})," ",p("span",{children:e.institution})," ",p("br",{}),p("strong",{children:" Data Access Request Submitted By: "})," ",p(Dn,{ownerId:e.submittedBy,size:Sa})," ",p("br",{}),R("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",br(Yt(e.modifiedOn),"M/D/YYYY"),"):"]}),p(Ge,{markdown:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>R("div",{children:[p(Dn,{ownerId:t.userId,size:Sa})," ",t.type]},`${t.userId}-${t.type}`))]})}),ka=()=>R("p",{className:"SubmissionInfoCard",children:[p(dc,{numCols:1,numRows:4}),p(ps,{variant:"rectangular",width:"100%",height:80})]});try{ws.displayName="SubmissionInfoCard",ws.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}}}catch{}try{ka.displayName="LoadingSubmissionInfoCard",ka.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}}}catch{}const Cs=e=>{const{accessRequirementId:t}=e,{ref:n,inView:r}=Qn(),{data:a,status:o,isLoading:i,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:u}=p0(t,{useErrorBoundary:!0});I.useEffect(()=>{o==="success"&&!l&&s&&u&&r&&u()},[o,s,l,u,r]);const c=(a==null?void 0:a.pages.flatMap(d=>d.results))??[];return R(j,{children:[c.length>0&&R("div",{className:"IDUReport",children:[c.map(d=>R(V.Fragment,{children:[p(ws,{info:d}),p("hr",{})]},JSON.stringify(d))),p("div",{ref:n})]}),(i||l)&&R(j,{children:[p(ka,{}),p(ka,{})]})]})};try{Cs.displayName="IDUReport",Cs.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}}}catch{}function Ss(e){const{accessRestrictionId:t}=e;return p(Cs,{accessRequirementId:t})}try{Ss.displayName="MarkdownIDUReport",Ss.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}}}catch{}function CC(e){let t;const n=new Set,r=(u,c)=>{const d=typeof u=="function"?u(t):u;if(d!==t){const f=t;t=c?d:Object.assign({},t,d),n.forEach(m=>m(t,f))}},a=()=>t,o=(u,c=a,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(t);function m(){const h=c(t);if(!d(f,h)){const g=f;u(f=h,g)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:a,subscribe:(u,c,d)=>c||d?o(u,c,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return t=e(r,a,l),l}const SC=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),qu=SC?I.useEffect:I.useLayoutEffect;function EC(e){const t=typeof e=="function"?CC(e):e,n=(r=t.getState,a=Object.is)=>{const[,o]=I.useReducer(v=>v+1,0),i=t.getState(),s=I.useRef(i),l=I.useRef(r),u=I.useRef(a),c=I.useRef(!1),d=I.useRef();d.current===void 0&&(d.current=r(i));let f,m=!1;(s.current!==i||l.current!==r||u.current!==a||c.current)&&(f=r(i),m=!a(d.current,f)),qu(()=>{m&&(d.current=f),s.current=i,l.current=r,u.current=a,c.current=!1});const h=I.useRef(i);qu(()=>{const v=()=>{try{const _=t.getState(),b=l.current(_);u.current(d.current,b)||(s.current=_,d.current=b,o())}catch{c.current=!0,o()}},S=t.subscribe(v);return t.getState()!==h.current&&v(),S},[]);const g=m?f:d.current;return I.useDebugValue(g),g};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const a=r.length<=0;return{value:r.shift(),done:a}}}},n}function _C(){const e=I.createContext(void 0);return{Provider:({initialStore:a,createStore:o,children:i})=>{const s=I.useRef();return s.current||(a&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),o||(o=()=>a)),s.current=o()),I.createElement(e.Provider,{value:s.current},i)},useStore:(a,o=Object.is)=>{const i=I.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return i(a,o)},useStoreApi:()=>{const a=I.useContext(e);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return I.useMemo(()=>({getState:a.getState,setState:a.setState,subscribe:a.subscribe,destroy:a.destroy}),[a])}}}var xC={value:()=>{}};function yo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ma(n)}function ma(e){this._=e}function NC(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ma.prototype=yo.prototype={constructor:ma,on:function(e,t){var n=this._,r=NC(e+"",n),a,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((a=(e=r[o]).type)&&(a=IC(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(a=(e=r[o]).type)n[a]=Lu(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Lu(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ma(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,o;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};function IC(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function Lu(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=xC,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Es="http://www.w3.org/1999/xhtml";const Pu={svg:"http://www.w3.org/2000/svg",xhtml:Es,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Pu.hasOwnProperty(t)?{space:Pu[t],local:e}:e}function TC(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Es&&t.documentElement.namespaceURI===Es?t.createElement(e):t.createElementNS(n,e)}}function kC(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yh(e){var t=bo(e);return(t.local?kC:TC)(t)}function OC(){}function Nc(e){return e==null?OC:function(){return this.querySelector(e)}}function RC(e){typeof e!="function"&&(e=Nc(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=new Array(i),l,u,c=0;c<i;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new je(r,this._parents)}function AC(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qC(){return[]}function Xh(e){return e==null?qC:function(){return this.querySelectorAll(e)}}function LC(e){return function(){return AC(e.apply(this,arguments))}}function PC(e){typeof e=="function"?e=LC(e):e=Xh(e);for(var t=this._groups,n=t.length,r=[],a=[],o=0;o<n;++o)for(var i=t[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&(r.push(e.call(l,l.__data__,u,i)),a.push(l));return new je(r,a)}function Qh(e){return function(){return this.matches(e)}}function Zh(e){return function(t){return t.matches(e)}}var DC=Array.prototype.find;function MC(e){return function(){return DC.call(this.children,e)}}function VC(){return this.firstElementChild}function $C(e){return this.select(e==null?VC:MC(typeof e=="function"?e:Zh(e)))}var FC=Array.prototype.filter;function BC(){return Array.from(this.children)}function zC(e){return function(){return FC.call(this.children,e)}}function HC(e){return this.selectAll(e==null?BC:zC(typeof e=="function"?e:Zh(e)))}function UC(e){typeof e!="function"&&(e=Qh(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=[],l,u=0;u<i;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new je(r,this._parents)}function Kh(e){return new Array(e.length)}function jC(){return new je(this._enter||this._groups.map(Kh),this._parents)}function Oa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Oa.prototype={constructor:Oa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function WC(e){return function(){return e}}function GC(e,t,n,r,a,o){for(var i=0,s,l=t.length,u=o.length;i<u;++i)(s=t[i])?(s.__data__=o[i],r[i]=s):n[i]=new Oa(e,o[i]);for(;i<l;++i)(s=t[i])&&(a[i]=s)}function YC(e,t,n,r,a,o,i){var s,l,u=new Map,c=t.length,d=o.length,f=new Array(c),m;for(s=0;s<c;++s)(l=t[s])&&(f[s]=m=i.call(l,l.__data__,s,t)+"",u.has(m)?a[s]=l:u.set(m,l));for(s=0;s<d;++s)m=i.call(e,o[s],s,o)+"",(l=u.get(m))?(r[s]=l,l.__data__=o[s],u.delete(m)):n[s]=new Oa(e,o[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(a[s]=l)}function XC(e){return e.__data__}function QC(e,t){if(!arguments.length)return Array.from(this,XC);var n=t?YC:GC,r=this._parents,a=this._groups;typeof e!="function"&&(e=WC(e));for(var o=a.length,i=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=a[u],f=d.length,m=ZC(e.call(c,c&&c.__data__,u,r)),h=m.length,g=s[u]=new Array(h),v=i[u]=new Array(h),S=l[u]=new Array(f);n(c,d,g,v,S,m,t);for(var _=0,b=0,C,w;_<h;++_)if(C=g[_]){for(_>=b&&(b=_+1);!(w=v[b])&&++b<h;);C._next=w||null}}return i=new je(i,r),i._enter=s,i._exit=l,i}function ZC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KC(){return new je(this._exit||this._groups.map(Kh),this._parents)}function JC(e,t,n){var r=this.enter(),a=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?o.remove():n(o),r&&a?r.merge(a).order():a}function eS(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,o=r.length,i=Math.min(a,o),s=new Array(a),l=0;l<i;++l)for(var u=n[l],c=r[l],d=u.length,f=s[l]=new Array(d),m,h=0;h<d;++h)(m=u[h]||c[h])&&(f[h]=m);for(;l<a;++l)s[l]=n[l];return new je(s,this._parents)}function tS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,o=r[a],i;--a>=0;)(i=r[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function nS(e){e||(e=rS);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o){for(var i=n[o],s=i.length,l=a[o]=new Array(s),u,c=0;c<s;++c)(u=i[c])&&(l[c]=u);l.sort(t)}return new je(a,this._parents).order()}function rS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function aS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function oS(){return Array.from(this)}function iS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null}function sS(){let e=0;for(const t of this)++e;return e}function lS(){return!this.node()}function cS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],o=0,i=a.length,s;o<i;++o)(s=a[o])&&e.call(s,s.__data__,o,a);return this}function uS(e){return function(){this.removeAttribute(e)}}function dS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fS(e,t){return function(){this.setAttribute(e,t)}}function pS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function gS(e,t){var n=bo(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?dS:uS:typeof t=="function"?n.local?mS:hS:n.local?pS:fS)(n,t))}function Jh(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vS(e){return function(){this.style.removeProperty(e)}}function yS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function bS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function wS(e,t,n){return arguments.length>1?this.each((t==null?vS:typeof t=="function"?bS:yS)(e,t,n??"")):Fn(this.node(),e)}function Fn(e,t){return e.style.getPropertyValue(t)||Jh(e).getComputedStyle(e,null).getPropertyValue(t)}function CS(e){return function(){delete this[e]}}function SS(e,t){return function(){this[e]=t}}function ES(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function _S(e,t){return arguments.length>1?this.each((t==null?CS:typeof t=="function"?ES:SS)(e,t)):this.node()[e]}function em(e){return e.trim().split(/^|\s+/)}function Ic(e){return e.classList||new tm(e)}function tm(e){this._node=e,this._names=em(e.getAttribute("class")||"")}tm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function nm(e,t){for(var n=Ic(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function rm(e,t){for(var n=Ic(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function xS(e){return function(){nm(this,e)}}function NS(e){return function(){rm(this,e)}}function IS(e,t){return function(){(t.apply(this,arguments)?nm:rm)(this,e)}}function TS(e,t){var n=em(e+"");if(arguments.length<2){for(var r=Ic(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?IS:t?xS:NS)(n,t))}function kS(){this.textContent=""}function OS(e){return function(){this.textContent=e}}function RS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function AS(e){return arguments.length?this.each(e==null?kS:(typeof e=="function"?RS:OS)(e)):this.node().textContent}function qS(){this.innerHTML=""}function LS(e){return function(){this.innerHTML=e}}function PS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function DS(e){return arguments.length?this.each(e==null?qS:(typeof e=="function"?PS:LS)(e)):this.node().innerHTML}function MS(){this.nextSibling&&this.parentNode.appendChild(this)}function VS(){return this.each(MS)}function $S(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function FS(){return this.each($S)}function BS(e){var t=typeof e=="function"?e:Yh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zS(){return null}function HS(e,t){var n=typeof e=="function"?e:Yh(e),r=t==null?zS:typeof t=="function"?t:Nc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function US(){var e=this.parentNode;e&&e.removeChild(this)}function jS(){return this.each(US)}function WS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function GS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function YS(e){return this.select(e?GS:WS)}function XS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function QS(e){return function(t){e.call(this,t,this.__data__)}}function ZS(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function KS(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,o;n<a;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function JS(e,t,n){return function(){var r=this.__on,a,o=QS(t);if(r){for(var i=0,s=r.length;i<s;++i)if((a=r[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=n),a.value=t;return}}this.addEventListener(e.type,o,n),a={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(a):this.__on=[a]}}function eE(e,t,n){var r=ZS(e+""),a,o=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(a=0,c=s[l];a<o;++a)if((i=r[a]).type===c.type&&i.name===c.name)return c.value}return}for(s=t?JS:KS,a=0;a<o;++a)this.each(s(r[a],t,n));return this}function am(e,t,n){var r=Jh(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function tE(e,t){return function(){return am(this,e,t)}}function nE(e,t){return function(){return am(this,e,t.apply(this,arguments))}}function rE(e,t){return this.each((typeof t=="function"?nE:tE)(e,t))}function*aE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length,i;a<o;++a)(i=r[a])&&(yield i)}var om=[null];function je(e,t){this._groups=e,this._parents=t}function Fr(){return new je([[document.documentElement]],om)}function oE(){return this}je.prototype=Fr.prototype={constructor:je,select:RC,selectAll:PC,selectChild:$C,selectChildren:HC,filter:UC,data:QC,enter:jC,exit:KC,join:JC,merge:eS,selection:oE,order:tS,sort:nS,call:aS,nodes:oS,node:iS,size:sS,empty:lS,each:cS,attr:gS,style:wS,property:_S,classed:TS,text:AS,html:DS,raise:VS,lower:FS,append:BS,insert:HS,remove:jS,clone:YS,datum:XS,on:eE,dispatch:rE,[Symbol.iterator]:aE};function lt(e){return typeof e=="string"?new je([[document.querySelector(e)]],[document.documentElement]):new je([[e]],om)}function iE(e){let t;for(;t=e.sourceEvent;)e=t;return e}function mt(e,t){if(e=iE(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const sE={passive:!1},wr={capture:!0,passive:!1};function Ro(e){e.stopImmediatePropagation()}function On(e){e.preventDefault(),e.stopImmediatePropagation()}function im(e){var t=e.document.documentElement,n=lt(e).on("dragstart.drag",On,wr);"onselectstart"in t?n.on("selectstart.drag",On,wr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function sm(e,t){var n=e.document.documentElement,r=lt(e).on("dragstart.drag",null);t&&(r.on("click.drag",On,wr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Kr=e=>()=>e;function _s(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:o,x:i,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}_s.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function lE(e){return!e.ctrlKey&&!e.button}function cE(){return this.parentNode}function uE(e,t){return t??{x:e.x,y:e.y}}function dE(){return navigator.maxTouchPoints||"ontouchstart"in this}function fE(){var e=lE,t=cE,n=uE,r=dE,a={},o=yo("start","drag","end"),i=0,s,l,u,c,d=0;function f(C){C.on("mousedown.drag",m).filter(r).on("touchstart.drag",v).on("touchmove.drag",S,sE).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(C,w){if(!(c||!e.call(this,C,w))){var y=b(this,t.call(this,C,w),C,w,"mouse");y&&(lt(C.view).on("mousemove.drag",h,wr).on("mouseup.drag",g,wr),im(C.view),Ro(C),u=!1,s=C.clientX,l=C.clientY,y("start",C))}}function h(C){if(On(C),!u){var w=C.clientX-s,y=C.clientY-l;u=w*w+y*y>d}a.mouse("drag",C)}function g(C){lt(C.view).on("mousemove.drag mouseup.drag",null),sm(C.view,u),On(C),a.mouse("end",C)}function v(C,w){if(e.call(this,C,w)){var y=C.changedTouches,E=t.call(this,C,w),x=y.length,N,k;for(N=0;N<x;++N)(k=b(this,E,C,w,y[N].identifier,y[N]))&&(Ro(C),k("start",C,y[N]))}}function S(C){var w=C.changedTouches,y=w.length,E,x;for(E=0;E<y;++E)(x=a[w[E].identifier])&&(On(C),x("drag",C,w[E]))}function _(C){var w=C.changedTouches,y=w.length,E,x;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),E=0;E<y;++E)(x=a[w[E].identifier])&&(Ro(C),x("end",C,w[E]))}function b(C,w,y,E,x,N){var k=o.copy(),A=mt(N||y,w),q,L,T;if((T=n.call(C,new _s("beforestart",{sourceEvent:y,target:f,identifier:x,active:i,x:A[0],y:A[1],dx:0,dy:0,dispatch:k}),E))!=null)return q=T.x-A[0]||0,L=T.y-A[1]||0,function P(O,M,z){var B=A,F;switch(O){case"start":a[x]=P,F=i++;break;case"end":delete a[x],--i;case"drag":A=mt(z||M,w),F=i;break}k.call(O,C,new _s(O,{sourceEvent:M,subject:T,target:f,identifier:x,active:F,x:A[0]+q,y:A[1]+L,dx:A[0]-B[0],dy:A[1]-B[1],dispatch:k}),E)}}return f.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Kr(!!C),f):e},f.container=function(C){return arguments.length?(t=typeof C=="function"?C:Kr(C),f):t},f.subject=function(C){return arguments.length?(n=typeof C=="function"?C:Kr(C),f):n},f.touchable=function(C){return arguments.length?(r=typeof C=="function"?C:Kr(!!C),f):r},f.on=function(){var C=o.on.apply(o,arguments);return C===o?f:C},f.clickDistance=function(C){return arguments.length?(d=(C=+C)*C,f):Math.sqrt(d)},f}function Tc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Br(){}var Cr=.7,Ra=1/Cr,Rn="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pE=/^#([0-9a-f]{3,8})$/,hE=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),mE=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),gE=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${Sr}\\)$`),vE=new RegExp(`^rgba\\(${vt},${vt},${vt},${Sr}\\)$`),yE=new RegExp(`^hsl\\(${Sr},${vt},${vt}\\)$`),bE=new RegExp(`^hsla\\(${Sr},${vt},${vt},${Sr}\\)$`),Du={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tc(Br,Er,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Mu,formatHex:Mu,formatHex8:wE,formatHsl:CE,formatRgb:Vu,toString:Vu});function Mu(){return this.rgb().formatHex()}function wE(){return this.rgb().formatHex8()}function CE(){return cm(this).formatHsl()}function Vu(){return this.rgb().formatRgb()}function Er(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$u(t):n===3?new Me(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Jr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Jr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hE.exec(e))?new Me(t[1],t[2],t[3],1):(t=mE.exec(e))?new Me(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gE.exec(e))?Jr(t[1],t[2],t[3],t[4]):(t=vE.exec(e))?Jr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yE.exec(e))?zu(t[1],t[2]/100,t[3]/100,1):(t=bE.exec(e))?zu(t[1],t[2]/100,t[3]/100,t[4]):Du.hasOwnProperty(e)?$u(Du[e]):e==="transparent"?new Me(NaN,NaN,NaN,0):null}function $u(e){return new Me(e>>16&255,e>>8&255,e&255,1)}function Jr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Me(e,t,n,r)}function SE(e){return e instanceof Br||(e=Er(e)),e?(e=e.rgb(),new Me(e.r,e.g,e.b,e.opacity)):new Me}function xs(e,t,n,r){return arguments.length===1?SE(e):new Me(e,t,n,r??1)}function Me(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Tc(Me,xs,lm(Br,{brighter(e){return e=e==null?Ra:Math.pow(Ra,e),new Me(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new Me(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Me(nn(this.r),nn(this.g),nn(this.b),Aa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fu,formatHex:Fu,formatHex8:EE,formatRgb:Bu,toString:Bu}));function Fu(){return`#${en(this.r)}${en(this.g)}${en(this.b)}`}function EE(){return`#${en(this.r)}${en(this.g)}${en(this.b)}${en((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bu(){const e=Aa(this.opacity);return`${e===1?"rgb(":"rgba("}${nn(this.r)}, ${nn(this.g)}, ${nn(this.b)}${e===1?")":`, ${e})`}`}function Aa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function en(e){return e=nn(e),(e<16?"0":"")+e.toString(16)}function zu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ct(e,t,n,r)}function cm(e){if(e instanceof ct)return new ct(e.h,e.s,e.l,e.opacity);if(e instanceof Br||(e=Er(e)),!e)return new ct;if(e instanceof ct)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,l=(o+a)/2;return s?(t===o?i=(n-r)/s+(n<r)*6:n===o?i=(r-t)/s+2:i=(t-n)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new ct(i,s,l,e.opacity)}function _E(e,t,n,r){return arguments.length===1?cm(e):new ct(e,t,n,r??1)}function ct(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Tc(ct,_E,lm(Br,{brighter(e){return e=e==null?Ra:Math.pow(Ra,e),new ct(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new ct(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Me(Ao(e>=240?e-240:e+120,a,r),Ao(e,a,r),Ao(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new ct(Hu(this.h),ea(this.s),ea(this.l),Aa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Aa(this.opacity);return`${e===1?"hsl(":"hsla("}${Hu(this.h)}, ${ea(this.s)*100}%, ${ea(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hu(e){return e=(e||0)%360,e<0?e+360:e}function ea(e){return Math.max(0,Math.min(1,e||0))}function Ao(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const um=e=>()=>e;function xE(e,t){return function(n){return e+n*t}}function NE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function IE(e){return(e=+e)==1?dm:function(t,n){return n-t?NE(t,n,e):um(isNaN(t)?n:t)}}function dm(e,t){var n=t-e;return n?xE(e,n):um(isNaN(e)?t:e)}const Uu=function e(t){var n=IE(t);function r(a,o){var i=n((a=xs(a)).r,(o=xs(o)).r),s=n(a.g,o.g),l=n(a.b,o.b),u=dm(a.opacity,o.opacity);return function(c){return a.r=i(c),a.g=s(c),a.b=l(c),a.opacity=u(c),a+""}}return r.gamma=e,r}(1);function Ht(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ns=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qo=new RegExp(Ns.source,"g");function TE(e){return function(){return e}}function kE(e){return function(t){return e(t)+""}}function OE(e,t){var n=Ns.lastIndex=qo.lastIndex=0,r,a,o,i=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Ns.exec(e))&&(a=qo.exec(t));)(o=a.index)>n&&(o=t.slice(n,o),s[i]?s[i]+=o:s[++i]=o),(r=r[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,l.push({i,x:Ht(r,a)})),n=qo.lastIndex;return n<t.length&&(o=t.slice(n),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?kE(l[0].x):TE(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var ju=180/Math.PI,Is={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fm(e,t,n,r,a,o){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*ju,skewX:Math.atan(l)*ju,scaleX:i,scaleY:s}}var ta;function RE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Is:fm(t.a,t.b,t.c,t.d,t.e,t.f)}function AE(e){return e==null||(ta||(ta=document.createElementNS("http://www.w3.org/2000/svg","g")),ta.setAttribute("transform",e),!(e=ta.transform.baseVal.consolidate()))?Is:(e=e.matrix,fm(e.a,e.b,e.c,e.d,e.e,e.f))}function pm(e,t,n,r){function a(u){return u.length?u.pop()+" ":""}function o(u,c,d,f,m,h){if(u!==d||c!==f){var g=m.push("translate(",null,t,null,n);h.push({i:g-4,x:Ht(u,d)},{i:g-2,x:Ht(c,f)})}else(d||f)&&m.push("translate("+d+t+f+n)}function i(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(a(d)+"rotate(",null,r)-2,x:Ht(u,c)})):c&&d.push(a(d)+"rotate("+c+r)}function s(u,c,d,f){u!==c?f.push({i:d.push(a(d)+"skewX(",null,r)-2,x:Ht(u,c)}):c&&d.push(a(d)+"skewX("+c+r)}function l(u,c,d,f,m,h){if(u!==d||c!==f){var g=m.push(a(m)+"scale(",null,",",null,")");h.push({i:g-4,x:Ht(u,d)},{i:g-2,x:Ht(c,f)})}else(d!==1||f!==1)&&m.push(a(m)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,f),i(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(m){for(var h=-1,g=f.length,v;++h<g;)d[(v=f[h]).i]=v.x(m);return d.join("")}}}var qE=pm(RE,"px, ","px)","deg)"),LE=pm(AE,", ",")",")"),PE=1e-12;function Wu(e){return((e=Math.exp(e))+1/e)/2}function DE(e){return((e=Math.exp(e))-1/e)/2}function ME(e){return((e=Math.exp(2*e))-1)/(e+1)}const VE=function e(t,n,r){function a(o,i){var s=o[0],l=o[1],u=o[2],c=i[0],d=i[1],f=i[2],m=c-s,h=d-l,g=m*m+h*h,v,S;if(g<PE)S=Math.log(f/u)/t,v=function(E){return[s+E*m,l+E*h,u*Math.exp(t*E*S)]};else{var _=Math.sqrt(g),b=(f*f-u*u+r*g)/(2*u*n*_),C=(f*f-u*u-r*g)/(2*f*n*_),w=Math.log(Math.sqrt(b*b+1)-b),y=Math.log(Math.sqrt(C*C+1)-C);S=(y-w)/t,v=function(E){var x=E*S,N=Wu(w),k=u/(n*_)*(N*ME(t*x+w)-DE(w));return[s+k*m,l+k*h,u*N/Wu(t*x+w)]}}return v.duration=S*1e3*t/Math.SQRT2,v}return a.rho=function(o){var i=Math.max(.001,+o),s=i*i,l=s*s;return e(i,s,l)},a}(Math.SQRT2,2,4);var Bn=0,sr=0,er=0,hm=1e3,qa,lr,La=0,dn=0,wo=0,_r=typeof performance=="object"&&performance.now?performance:Date,mm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kc(){return dn||(mm($E),dn=_r.now()+wo)}function $E(){dn=0}function Pa(){this._call=this._time=this._next=null}Pa.prototype=gm.prototype={constructor:Pa,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?kc():+n)+(t==null?0:+t),!this._next&&lr!==this&&(lr?lr._next=this:qa=this,lr=this),this._call=e,this._time=n,Ts()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ts())}};function gm(e,t,n){var r=new Pa;return r.restart(e,t,n),r}function FE(){kc(),++Bn;for(var e=qa,t;e;)(t=dn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Bn}function Gu(){dn=(La=_r.now())+wo,Bn=sr=0;try{FE()}finally{Bn=0,zE(),dn=0}}function BE(){var e=_r.now(),t=e-La;t>hm&&(wo-=t,La=e)}function zE(){for(var e,t=qa,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qa=n);lr=e,Ts(r)}function Ts(e){if(!Bn){sr&&(sr=clearTimeout(sr));var t=e-dn;t>24?(e<1/0&&(sr=setTimeout(Gu,e-_r.now()-wo)),er&&(er=clearInterval(er))):(er||(La=_r.now(),er=setInterval(BE,hm)),Bn=1,mm(Gu))}}function Yu(e,t,n){var r=new Pa;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var HE=yo("start","end","cancel","interrupt"),UE=[],vm=0,Xu=1,ks=2,ga=3,Qu=4,Os=5,va=6;function Co(e,t,n,r,a,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;jE(e,n,{name:t,index:r,group:a,on:HE,tween:UE,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vm})}function Oc(e,t){var n=dt(e,t);if(n.state>vm)throw new Error("too late; already scheduled");return n}function wt(e,t){var n=dt(e,t);if(n.state>ga)throw new Error("too late; already running");return n}function dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function jE(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=gm(o,0,n.time);function o(u){n.state=Xu,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,d,f,m;if(n.state!==Xu)return l();for(c in r)if(m=r[c],m.name===n.name){if(m.state===ga)return Yu(i);m.state===Qu?(m.state=va,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[c]):+c<t&&(m.state=va,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[c])}if(Yu(function(){n.state===ga&&(n.state=Qu,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=ks,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ks){for(n.state=ga,a=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(m=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++d]=m);a.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Os,1),d=-1,f=a.length;++d<f;)a[d].call(e,c);n.state===Os&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=va,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function ya(e,t){var n=e.__transition,r,a,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}a=r.state>ks&&r.state<Os,r.state=va,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function WE(e){return this.each(function(){ya(this,e)})}function GE(e,t){var n,r;return function(){var a=wt(this,e),o=a.tween;if(o!==n){r=n=o;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}a.tween=r}}function YE(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var o=wt(this,e),i=o.tween;if(i!==r){a=(r=i).slice();for(var s={name:t,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=s;break}l===u&&a.push(s)}o.tween=a}}function XE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=dt(this.node(),n).tween,a=0,o=r.length,i;a<o;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((t==null?GE:YE)(n,e,t))}function Rc(e,t,n){var r=e._id;return e.each(function(){var a=wt(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return dt(a,r).value[t]}}function ym(e,t){var n;return(typeof t=="number"?Ht:t instanceof Er?Uu:(n=Er(t))?(t=n,Uu):OE)(e,t)}function QE(e){return function(){this.removeAttribute(e)}}function ZE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function KE(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function JE(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function e_(e,t,n){var r,a,o;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s)))}}function t_(e,t,n){var r,a,o;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s)))}}function n_(e,t){var n=bo(e),r=n==="transform"?LE:ym;return this.attrTween(e,typeof t=="function"?(n.local?t_:e_)(n,r,Rc(this,"attr."+e,t)):t==null?(n.local?ZE:QE)(n):(n.local?JE:KE)(n,r,t))}function r_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function a_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function o_(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&a_(e,o)),n}return a._value=t,a}function i_(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&r_(e,o)),n}return a._value=t,a}function s_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=bo(e);return this.tween(n,(r.local?o_:i_)(r,t))}function l_(e,t){return function(){Oc(this,e).delay=+t.apply(this,arguments)}}function c_(e,t){return t=+t,function(){Oc(this,e).delay=t}}function u_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?l_:c_)(t,e)):dt(this.node(),t).delay}function d_(e,t){return function(){wt(this,e).duration=+t.apply(this,arguments)}}function f_(e,t){return t=+t,function(){wt(this,e).duration=t}}function p_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?d_:f_)(t,e)):dt(this.node(),t).duration}function h_(e,t){if(typeof t!="function")throw new Error;return function(){wt(this,e).ease=t}}function m_(e){var t=this._id;return arguments.length?this.each(h_(t,e)):dt(this.node(),t).ease}function g_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wt(this,e).ease=n}}function v_(e){if(typeof e!="function")throw new Error;return this.each(g_(this._id,e))}function y_(e){typeof e!="function"&&(e=Qh(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=[],l,u=0;u<i;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new qt(r,this._parents,this._name,this._id)}function b_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),s=0;s<o;++s)for(var l=t[s],u=n[s],c=l.length,d=i[s]=new Array(c),f,m=0;m<c;++m)(f=l[m]||u[m])&&(d[m]=f);for(;s<r;++s)i[s]=t[s];return new qt(i,this._parents,this._name,this._id)}function w_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function C_(e,t,n){var r,a,o=w_(t)?Oc:wt;return function(){var i=o(this,e),s=i.on;s!==r&&(a=(r=s).copy()).on(t,n),i.on=a}}function S_(e,t){var n=this._id;return arguments.length<2?dt(this.node(),n).on.on(e):this.each(C_(n,e,t))}function E_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function __(){return this.on("end.remove",E_(this._id))}function x_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nc(e));for(var r=this._groups,a=r.length,o=new Array(a),i=0;i<a;++i)for(var s=r[i],l=s.length,u=o[i]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Co(u[f],t,n,f,u,dt(c,n)));return new qt(o,this._parents,t,n)}function N_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xh(e));for(var r=this._groups,a=r.length,o=[],i=[],s=0;s<a;++s)for(var l=r[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),m,h=dt(c,n),g=0,v=f.length;g<v;++g)(m=f[g])&&Co(m,t,n,g,f,h);o.push(f),i.push(c)}return new qt(o,i,t,n)}var I_=Fr.prototype.constructor;function T_(){return new I_(this._groups,this._parents)}function k_(e,t){var n,r,a;return function(){var o=Fn(this,e),i=(this.style.removeProperty(e),Fn(this,e));return o===i?null:o===n&&i===r?a:a=t(n=o,r=i)}}function bm(e){return function(){this.style.removeProperty(e)}}function O_(e,t,n){var r,a=n+"",o;return function(){var i=Fn(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}function R_(e,t,n){var r,a,o;return function(){var i=Fn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Fn(this,e))),i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s))}}function A_(e,t){var n,r,a,o="style."+t,i="end."+o,s;return function(){var l=wt(this,e),u=l.on,c=l.value[o]==null?s||(s=bm(t)):void 0;(u!==n||a!==c)&&(r=(n=u).copy()).on(i,a=c),l.on=r}}function q_(e,t,n){var r=(e+="")=="transform"?qE:ym;return t==null?this.styleTween(e,k_(e,r)).on("end.style."+e,bm(e)):typeof t=="function"?this.styleTween(e,R_(e,r,Rc(this,"style."+e,t))).each(A_(this._id,e)):this.styleTween(e,O_(e,r,t),n).on("end.style."+e,null)}function L_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function P_(e,t,n){var r,a;function o(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&L_(e,i,n)),r}return o._value=t,o}function D_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,P_(e,t,n??""))}function M_(e){return function(){this.textContent=e}}function V_(e){return function(){var t=e(this);this.textContent=t??""}}function $_(e){return this.tween("text",typeof e=="function"?V_(Rc(this,"text",e)):M_(e==null?"":e+""))}function F_(e){return function(t){this.textContent=e.call(this,t)}}function B_(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&F_(a)),t}return r._value=e,r}function z_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,B_(e))}function H_(){for(var e=this._name,t=this._id,n=wm(),r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],s=i.length,l,u=0;u<s;++u)if(l=i[u]){var c=dt(l,t);Co(l,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new qt(r,this._parents,e,n)}function U_(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(o,i){var s={value:i},l={value:function(){--a===0&&o()}};n.each(function(){var u=wt(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),a===0&&o()})}var j_=0;function qt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function wm(){return++j_}var St=Fr.prototype;qt.prototype={constructor:qt,select:x_,selectAll:N_,selectChild:St.selectChild,selectChildren:St.selectChildren,filter:y_,merge:b_,selection:T_,transition:H_,call:St.call,nodes:St.nodes,node:St.node,size:St.size,empty:St.empty,each:St.each,on:S_,attr:n_,attrTween:s_,style:q_,styleTween:D_,text:$_,textTween:z_,remove:__,tween:XE,delay:u_,duration:p_,ease:m_,easeVarying:v_,end:U_,[Symbol.iterator]:St[Symbol.iterator]};function W_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var G_={time:null,delay:0,duration:250,ease:W_};function Y_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function X_(e){var t,n;e instanceof qt?(t=e._id,e=e._name):(t=wm(),(n=G_).time=kc(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&Co(l,e,t,u,i,n||Y_(l,t));return new qt(r,this._parents,e,t)}Fr.prototype.interrupt=WE;Fr.prototype.transition=X_;const na=e=>()=>e;function Q_(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Nt(e,t,n){this.k=e,this.x=t,this.y=n}Nt.prototype={constructor:Nt,scale:function(e){return e===1?this:new Nt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rn=new Nt(1,0,0);Nt.prototype;function Lo(e){e.stopImmediatePropagation()}function tr(e){e.preventDefault(),e.stopImmediatePropagation()}function Z_(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function K_(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Zu(){return this.__zoom||rn}function J_(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ex(){return navigator.maxTouchPoints||"ontouchstart"in this}function tx(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function nx(){var e=Z_,t=K_,n=tx,r=J_,a=ex,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=VE,u=yo("start","zoom","end"),c,d,f,m=500,h=150,g=0,v=10;function S(T){T.property("__zoom",Zu).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",A).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(T,P,O,M){var z=T.selection?T.selection():T;z.property("__zoom",Zu),T!==z?w(T,P,O,M):z.interrupt().each(function(){y(this,arguments).event(M).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},S.scaleBy=function(T,P,O,M){S.scaleTo(T,function(){var z=this.__zoom.k,B=typeof P=="function"?P.apply(this,arguments):P;return z*B},O,M)},S.scaleTo=function(T,P,O,M){S.transform(T,function(){var z=t.apply(this,arguments),B=this.__zoom,F=O==null?C(z):typeof O=="function"?O.apply(this,arguments):O,W=B.invert(F),Q=typeof P=="function"?P.apply(this,arguments):P;return n(b(_(B,Q),F,W),z,i)},O,M)},S.translateBy=function(T,P,O,M){S.transform(T,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),i)},null,M)},S.translateTo=function(T,P,O,M,z){S.transform(T,function(){var B=t.apply(this,arguments),F=this.__zoom,W=M==null?C(B):typeof M=="function"?M.apply(this,arguments):M;return n(rn.translate(W[0],W[1]).scale(F.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof O=="function"?-O.apply(this,arguments):-O),B,i)},M,z)};function _(T,P){return P=Math.max(o[0],Math.min(o[1],P)),P===T.k?T:new Nt(P,T.x,T.y)}function b(T,P,O){var M=P[0]-O[0]*T.k,z=P[1]-O[1]*T.k;return M===T.x&&z===T.y?T:new Nt(T.k,M,z)}function C(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function w(T,P,O,M){T.on("start.zoom",function(){y(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(M).end()}).tween("zoom",function(){var z=this,B=arguments,F=y(z,B).event(M),W=t.apply(z,B),Q=O==null?C(W):typeof O=="function"?O.apply(z,B):O,D=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),$=z.__zoom,U=typeof P=="function"?P.apply(z,B):P,G=l($.invert(Q).concat(D/$.k),U.invert(Q).concat(D/U.k));return function(H){if(H===1)H=U;else{var X=G(H),K=D/X[2];H=new Nt(K,Q[0]-X[0]*K,Q[1]-X[1]*K)}F.zoom(null,H)}})}function y(T,P,O){return!O&&T.__zooming||new E(T,P)}function E(T,P){this.that=T,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,P),this.taps=0}E.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,P){return this.mouse&&T!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var P=lt(this.that).datum();u.call(T,this.that,new Q_(T,{sourceEvent:this.sourceEvent,target:S,type:T,transform:this.that.__zoom,dispatch:u}),P)}};function x(T,...P){if(!e.apply(this,arguments))return;var O=y(this,P).event(T),M=this.__zoom,z=Math.max(o[0],Math.min(o[1],M.k*Math.pow(2,r.apply(this,arguments)))),B=mt(T);if(O.wheel)(O.mouse[0][0]!==B[0]||O.mouse[0][1]!==B[1])&&(O.mouse[1]=M.invert(O.mouse[0]=B)),clearTimeout(O.wheel);else{if(M.k===z)return;O.mouse=[B,M.invert(B)],ya(this),O.start()}tr(T),O.wheel=setTimeout(F,h),O.zoom("mouse",n(b(_(M,z),O.mouse[0],O.mouse[1]),O.extent,i));function F(){O.wheel=null,O.end()}}function N(T,...P){if(f||!e.apply(this,arguments))return;var O=T.currentTarget,M=y(this,P,!0).event(T),z=lt(T.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",D,!0),B=mt(T,O),F=T.clientX,W=T.clientY;im(T.view),Lo(T),M.mouse=[B,this.__zoom.invert(B)],ya(this),M.start();function Q($){if(tr($),!M.moved){var U=$.clientX-F,G=$.clientY-W;M.moved=U*U+G*G>g}M.event($).zoom("mouse",n(b(M.that.__zoom,M.mouse[0]=mt($,O),M.mouse[1]),M.extent,i))}function D($){z.on("mousemove.zoom mouseup.zoom",null),sm($.view,M.moved),tr($),M.event($).end()}}function k(T,...P){if(e.apply(this,arguments)){var O=this.__zoom,M=mt(T.changedTouches?T.changedTouches[0]:T,this),z=O.invert(M),B=O.k*(T.shiftKey?.5:2),F=n(b(_(O,B),M,z),t.apply(this,P),i);tr(T),s>0?lt(this).transition().duration(s).call(w,F,M,T):lt(this).call(S.transform,F,M,T)}}function A(T,...P){if(e.apply(this,arguments)){var O=T.touches,M=O.length,z=y(this,P,T.changedTouches.length===M).event(T),B,F,W,Q;for(Lo(T),F=0;F<M;++F)W=O[F],Q=mt(W,this),Q=[Q,this.__zoom.invert(Q),W.identifier],z.touch0?!z.touch1&&z.touch0[2]!==Q[2]&&(z.touch1=Q,z.taps=0):(z.touch0=Q,B=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),B&&(z.taps<2&&(d=Q[0],c=setTimeout(function(){c=null},m)),ya(this),z.start())}}function q(T,...P){if(this.__zooming){var O=y(this,P).event(T),M=T.changedTouches,z=M.length,B,F,W,Q;for(tr(T),B=0;B<z;++B)F=M[B],W=mt(F,this),O.touch0&&O.touch0[2]===F.identifier?O.touch0[0]=W:O.touch1&&O.touch1[2]===F.identifier&&(O.touch1[0]=W);if(F=O.that.__zoom,O.touch1){var D=O.touch0[0],$=O.touch0[1],U=O.touch1[0],G=O.touch1[1],H=(H=U[0]-D[0])*H+(H=U[1]-D[1])*H,X=(X=G[0]-$[0])*X+(X=G[1]-$[1])*X;F=_(F,Math.sqrt(H/X)),W=[(D[0]+U[0])/2,(D[1]+U[1])/2],Q=[($[0]+G[0])/2,($[1]+G[1])/2]}else if(O.touch0)W=O.touch0[0],Q=O.touch0[1];else return;O.zoom("touch",n(b(F,W,Q),O.extent,i))}}function L(T,...P){if(this.__zooming){var O=y(this,P).event(T),M=T.changedTouches,z=M.length,B,F;for(Lo(T),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),B=0;B<z;++B)F=M[B],O.touch0&&O.touch0[2]===F.identifier?delete O.touch0:O.touch1&&O.touch1[2]===F.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(F=mt(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<v)){var W=lt(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return S.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:na(+T),S):r},S.filter=function(T){return arguments.length?(e=typeof T=="function"?T:na(!!T),S):e},S.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:na(!!T),S):a},S.extent=function(T){return arguments.length?(t=typeof T=="function"?T:na([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),S):t},S.scaleExtent=function(T){return arguments.length?(o[0]=+T[0],o[1]=+T[1],S):[o[0],o[1]]},S.translateExtent=function(T){return arguments.length?(i[0][0]=+T[0][0],i[1][0]=+T[1][0],i[0][1]=+T[0][1],i[1][1]=+T[1][1],S):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},S.constrain=function(T){return arguments.length?(n=T,S):n},S.duration=function(T){return arguments.length?(s=+T,S):s},S.interpolate=function(T){return arguments.length?(l=T,S):l},S.on=function(){var T=u.on.apply(u,arguments);return T===u?S:T},S.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,S):Math.sqrt(g)},S.tapDistance=function(T){return arguments.length?(v=+T,S):v},S}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rs(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cm(e,t){if(e){if(typeof e=="string")return Rs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rs(e,t)}}function rx(e){if(Array.isArray(e))return e}function ax(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,i,s;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(l){o=!0,s=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function ox(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(e,t){return rx(e)||ax(e,t)||Cm(e,t)||ox()}var zn;(function(e){e.Strict="strict",e.Loose="loose"})(zn||(zn={}));var Ku;(function(e){e.Lines="lines",e.Dots="dots"})(Ku||(Ku={}));var An;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(An||(An={}));var xt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(xt||(xt={}));var xr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(xr||(xr={}));var Z;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Z||(Z={}));var Ac=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},qn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},Sm=function(t,n){return{x:qn(t.x,n[0][0],n[1][0]),y:qn(t.y,n[0][1],n[1][1])}},Em=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},ix=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},Da=function(t){var n=t.x,r=t.y,a=t.width,o=t.height;return{x:n,y:r,x2:n+a,y2:r+o}},sx=function(t){var n=t.x,r=t.y,a=t.x2,o=t.y2;return{x:n,y:r,width:a-n,height:o-r}},_m=function(t){return!isNaN(t)&&isFinite(t)},ke=Symbol("internals");function Ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ju(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ju(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ed(e,t){var n=e.find(function(u){return u.id===t.parentNode});if(n){var r=t.position.x+t.width-n.width,a=t.position.y+t.height-n.height;if(r>0||a>0||t.position.x<0||t.position.y<0){var o,i;if(n.style=cr({},n.style)||{},n.style.width=(o=n.style.width)!==null&&o!==void 0?o:n.width,n.style.height=(i=n.style.height)!==null&&i!==void 0?i:n.height,r>0&&(n.style.width+=r),a>0&&(n.style.height+=a),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function xm(e,t){if(e.some(function(r){return r.type==="reset"}))return e.filter(function(r){return r.type==="reset"}).map(function(r){return r.item});var n=e.filter(function(r){return r.type==="add"}).map(function(r){return r.item});return t.reduce(function(r,a){var o=e.find(function(l){return l.id===a.id});if(o)switch(o.type){case"select":return r.push(cr(cr({},a),{},{selected:o.selected})),r;case"position":{var i=cr({},a);return typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&ed(r,i),r.push(i),r}case"dimensions":{var s=cr({},a);return typeof o.dimensions<"u"&&(s.width=o.dimensions.width,s.height=o.dimensions.height),s.expandParent&&ed(r,s),r.push(s),r}case"remove":return r}return r.push(a),r},n)}function Nm(e,t){return xm(e,t)}function lx(e,t){return xm(e,t)}var Ut=function(t,n){return{id:t,type:"select",selected:n}};function In(e,t){return e.reduce(function(n,r){var a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(Ut(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(Ut(r.id,!1))),n},[])}function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Im(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?td(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var nd=function(t,n,r){var a=n.querySelectorAll(t);if(!a||!a.length)return null;var o=Array.from(a),i=n.getBoundingClientRect();return o.map(function(s){var l=s.getBoundingClientRect();return Im({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-i.left)/r,y:(l.top-i.top)/r},Ac(s))})};function nr(e,t,n){return n===void 0?n:function(r){var a=t().nodeInternals.get(e);n(r,Im({},a))}}function Tm(e){var t=e.id,n=e.store,r=n.getState(),a=r.addSelectedNodes,o=r.unselectNodesAndEdges,i=r.multiSelectionActive,s=r.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&i&&o({nodes:[l]}):a([t])}function rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var cx=function(t){return"id"in t&&"source"in t&&"target"in t},ux=function(t){var n=t.source,r=t.sourceHandle,a=t.target,o=t.targetHandle;return"reactflow__edge-".concat(n).concat(r||"","-").concat(a).concat(o||"")},As=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var r=n?"".concat(n,"__"):"";return"".concat(r).concat(Object.keys(t).sort().map(function(a){return"".concat(a,"=").concat(t[a])}).join("&"))},dx=function(t,n){return n.some(function(r){return r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)})},fx=function(t,n){if(!t.source||!t.target)return n;var r;return cx(t)?r=pr({},t):r=pr(pr({},t),{},{id:ux(t)}),dx(r,n)?n:n.concat(r)},km=function(t,n,r,a){var o=t.x,i=t.y,s=le(n,3),l=s[0],u=s[1],c=s[2],d=le(a,2),f=d[0],m=d[1],h={x:(o-l)/c,y:(i-u)/c};return r?{x:f*Math.round(h.x/f),y:m*Math.round(h.y/m)}:h},qc=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(r,a){var o=a.positionAbsolute,i=a.position,s=a.width,l=a.height;return ix(r,Da({x:o?o.x:i.x,y:o?o.y:i.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return sx(n)},Om=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],a=le(r,3),o=a[0],i=a[1],s=a[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=Da({x:(n.x-o)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s}),d=[];return t.forEach(function(f){var m=f.positionAbsolute,h=f.width,g=f.height,v=f.selectable,S=v===void 0?!0:v;if(u&&!S)return!1;var _=Da(pr(pr({},m),{},{width:h||0,height:g||0})),b=Math.max(0,Math.min(c.x2,_.x2)-Math.max(c.x,_.x)),C=Math.max(0,Math.min(c.y2,_.y2)-Math.max(c.y,_.y)),w=Math.ceil(b*C),y=typeof h>"u"||typeof g>"u"||h===null||g===null,E=l&&w>0,x=(h||0)*(g||0),N=y||E||w>=x;N&&d.push(f)}),d},Lc=function(t,n){var r=t.map(function(a){return a.id});return n.filter(function(a){return r.includes(a.source)||r.includes(a.target)})},Rm=function(t,n,r,a,o){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),l=r/(t.height*(1+i)),u=Math.min(s,l),c=qn(u,a,o),d=t.x+t.width/2,f=t.y+t.height/2,m=n/2-d*c,h=r/2-f*c;return[m,h,c]},Jt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ad(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ad(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Am(e,t,n,r){var a,o,i,s,l,u,c,d,f,m,h,g;if(!e.parentNode)return r;var v=t.get(e.parentNode);return Am(v,t,n,{x:((a=r.x)!==null&&a!==void 0?a:0)+((o=(i=v.position)===null||i===void 0?void 0:i.x)!==null&&o!==void 0?o:0),y:((s=r.y)!==null&&s!==void 0?s:0)+((l=(u=v.position)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0),z:((c=(d=v[ke])===null||d===void 0?void 0:d.z)!==null&&c!==void 0?c:0)>((f=r.z)!==null&&f!==void 0?f:0)?(m=(h=v[ke])===null||h===void 0?void 0:h.z)!==null&&m!==void 0?m:0:(g=r.z)!==null&&g!==void 0?g:0})}function Po(e,t){var n=new Map,r={};return e.forEach(function(a){var o,i=_m(a.zIndex)?a.zIndex:a.selected?1e3:0,s=t.get(a.id),l=Tn(Tn({width:s==null?void 0:s.width,height:s==null?void 0:s.height},a),{},{positionAbsolute:{x:a.position.x,y:a.position.y}});a.parentNode&&(l.parentNode=a.parentNode,r[a.parentNode]=!0),Object.defineProperty(l,ke,{enumerable:!1,value:{handleBounds:s==null||(o=s[ke])===null||o===void 0?void 0:o.handleBounds,z:i}}),n.set(a.id,l)}),n.forEach(function(a){if(a.parentNode&&!n.has(a.parentNode))throw new Error("Parent node ".concat(a.parentNode," not found"));if(a.parentNode||r[a.id]){var o,i,s=Am(a,n,r,Tn(Tn({},a.position),{},{z:(o=(i=a[ke])===null||i===void 0?void 0:i.z)!==null&&o!==void 0?o:0})),l=s.x,u=s.y,c=s.z;a.positionAbsolute={x:l,y:u},a[ke].z=c,r[a.id]&&(a[ke].isParent=!0)}}),n}function qm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),r=n.nodeInternals,a=n.width,o=n.height,i=n.minZoom,s=n.maxZoom,l=n.d3Zoom,u=n.d3Selection,c=n.fitViewOnInitDone,d=n.fitViewOnInit;if((t.initial&&!c&&d||!t.initial)&&l&&u){var f=Array.from(r.values()).filter(function(x){return t.includeHiddenNodes?x.width&&x.height:!x.hidden}),m=f.every(function(x){return x.width&&x.height});if(f.length>0&&m){var h,g,v,S=qc(f),_=Rm(S,a,o,(h=t.minZoom)!==null&&h!==void 0?h:i,(g=t.maxZoom)!==null&&g!==void 0?g:s,(v=t.padding)!==null&&v!==void 0?v:.1),b=le(_,3),C=b[0],w=b[1],y=b[2],E=rn.translate(C,w).scale(y);return typeof t.duration=="number"&&t.duration>0?l.transform(Jt(u,t.duration),E):l.transform(u,E),!0}}return!1}function px(e,t){return e.forEach(function(n){var r=t.get(n.id);if(r){var a;t.set(r.id,Tn(Tn({},r),{},(a={},fe(a,ke,r[ke]),fe(a,"selected",n.selected),a)))}}),new Map(t)}function hx(e,t){return t.map(function(n){var r=e.find(function(a){return a.id===n.id});return r&&(n.selected=r.selected),n})}function ra(e){var t=e.changedNodes,n=e.changedEdges,r=e.get,a=e.set,o=r(),i=o.nodeInternals,s=o.edges,l=o.onNodesChange,u=o.onEdgesChange,c=o.hasDefaultNodes,d=o.hasDefaultEdges;t!=null&&t.length&&(c&&a({nodeInternals:px(t,i)}),l==null||l(t)),n!=null&&n.length&&(d&&a({edges:hx(n,s)}),u==null||u(n))}var qs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],od={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:qs,nodeExtent:qs,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:zn.Strict,domNode:null,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.17",connectionStartHandle:null,connectOnClick:!0};function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?id(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Pc=_C(),Lm=Pc.Provider,Ne=Pc.useStore,Le=Pc.useStoreApi,Pm=function(){return EC(function(t,n){return pt(pt({},od),{},{setNodes:function(a){t({nodeInternals:Po(a,n().nodeInternals)})},setEdges:function(a){var o=n(),i=o.defaultEdgeOptions,s=i===void 0?{}:i;t({edges:a.map(function(l){return pt(pt({},s),l)})})},setDefaultNodesAndEdges:function(a,o){var i=typeof a<"u",s=typeof o<"u",l=i?Po(a,new Map):new Map,u=s?o:[];t({nodeInternals:l,edges:u,hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:function(a){var o=n(),i=o.onNodesChange,s=o.nodeInternals,l=o.fitViewOnInit,u=o.fitViewOnInitDone,c=o.fitViewOnInitOptions,d=o.domNode,f=d==null?void 0:d.querySelector(".react-flow__viewport");if(f){var m=window.getComputedStyle(f),h=new window.DOMMatrixReadOnly(m.transform),g=h.m22,v=a.reduce(function(_,b){var C=s.get(b.id);if(C){var w=Ac(b.nodeElement),y=!!(w.width&&w.height&&(C.width!==w.width||C.height!==w.height||b.forceUpdate));y&&(s.set(C.id,pt(pt({},C),{},fe({},ke,pt(pt({},C[ke]),{},{handleBounds:{source:nd(".source",b.nodeElement,g),target:nd(".target",b.nodeElement,g)}})),w)),_.push({id:C.id,type:"dimensions",dimensions:w}))}return _},[]),S=u||l&&!u&&qm(n,pt({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:S}),(v==null?void 0:v.length)>0&&(i==null||i(v))}},updateNodePositions:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,u=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var d=a.map(function(h){var g={id:h.id,type:"position",dragging:i};return o&&(g.positionAbsolute=h.positionAbsolute,g.position=h.position),g});if(d!=null&&d.length){if(c){var f=Nm(d,Array.from(u.values())),m=Po(f,u);t({nodeInternals:m})}l==null||l(d)}}},addSelectedNodes:function(a){var o=n(),i=o.multiSelectionActive,s=o.nodeInternals,l=o.edges,u,c=null;i?u=a.map(function(d){return Ut(d,!0)}):(u=In(Array.from(s.values()),a),c=In(l,[])),ra({changedNodes:u,changedEdges:c,get:n,set:t})},addSelectedEdges:function(a){var o=n(),i=o.multiSelectionActive,s=o.edges,l=o.nodeInternals,u,c=null;i?u=a.map(function(d){return Ut(d,!0)}):(u=In(s,a),c=In(Array.from(l.values()),[])),ra({changedNodes:c,changedEdges:u,get:n,set:t})},unselectNodesAndEdges:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.nodes,i=a.edges,s=n(),l=s.nodeInternals,u=s.edges,c=o||Array.from(l.values()),d=i||u,f=c.map(function(h){return h.selected=!1,Ut(h.id,!1)}),m=d.map(function(h){return Ut(h.id,!1)});ra({changedNodes:f,changedEdges:m,get:n,set:t})},setMinZoom:function(a){var o=n(),i=o.d3Zoom,s=o.maxZoom;i==null||i.scaleExtent([a,s]),t({minZoom:a})},setMaxZoom:function(a){var o=n(),i=o.d3Zoom,s=o.minZoom;i==null||i.scaleExtent([s,a]),t({maxZoom:a})},setTranslateExtent:function(a){var o=n(),i=o.d3Zoom;i==null||i.translateExtent(a),t({translateExtent:a})},resetSelectedElements:function(){var a=n(),o=a.nodeInternals,i=a.edges,s=Array.from(o.values()),l=s.filter(function(c){return c.selected}).map(function(c){return Ut(c.id,!1)}),u=i.filter(function(c){return c.selected}).map(function(c){return Ut(c.id,!1)});ra({changedNodes:l,changedEdges:u,get:n,set:t})},setNodeExtent:function(a){var o=n(),i=o.nodeInternals;i.forEach(function(s){s.positionAbsolute=Sm(s.position,a)}),t({nodeExtent:a,nodeInternals:new Map(i)})},reset:function(){return t(pt({},od))}})})};function rt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=rt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function We(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function mx(e){if(Array.isArray(e))return Rs(e)}function gx(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vx(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function an(e){return mx(e)||gx(e)||Cm(e)||vx()}var yx={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},viewportInitialized:!1},bx=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},wx=function(){var t=Le(),n=Ne(bx,We),r=n.d3Zoom,a=n.d3Selection,o=I.useMemo(function(){return a&&r?{zoomIn:function(s){return r.scaleBy(Jt(a,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return r.scaleBy(Jt(a,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return r.scaleTo(Jt(a,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var u,c,d,f=le(t.getState().transform,3),m=f[0],h=f[1],g=f[2],v=rn.translate((u=s.x)!==null&&u!==void 0?u:m,(c=s.y)!==null&&c!==void 0?c:h).scale((d=s.zoom)!==null&&d!==void 0?d:g);r.transform(Jt(a,l==null?void 0:l.duration),v)},getViewport:function(){var s=le(t.getState().transform,3),l=s[0],u=s[1],c=s[2];return{x:l,y:u,zoom:c}},fitView:function(s){return qm(t.getState,s)},setCenter:function(s,l,u){var c=t.getState(),d=c.width,f=c.height,m=c.maxZoom,h=typeof(u==null?void 0:u.zoom)<"u"?u.zoom:m,g=d/2-s*h,v=f/2-l*h,S=rn.translate(g,v).scale(h);r.transform(Jt(a,u==null?void 0:u.duration),S)},fitBounds:function(s,l){var u,c=t.getState(),d=c.width,f=c.height,m=c.minZoom,h=c.maxZoom,g=Rm(s,d,f,m,h,(u=l==null?void 0:l.padding)!==null&&u!==void 0?u:.1),v=le(g,3),S=v[0],_=v[1],b=v[2],C=rn.translate(S,_).scale(b);r.transform(Jt(a,l==null?void 0:l.duration),C)},project:function(s){var l=t.getState(),u=l.transform,c=l.snapToGrid,d=l.snapGrid;return km(s,u,c,d)},viewportInitialized:!0}:yx},[r,a]);return o};function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dc(){var e=wx(),t=Le(),n=I.useCallback(function(){var d=t.getState(),f=d.nodeInternals,m=Array.from(f.values());return m.map(function(h){return Sn({},h)})},[]),r=I.useCallback(function(d){var f=t.getState(),m=f.nodeInternals;return m.get(d)},[]),a=I.useCallback(function(){var d=t.getState(),f=d.edges,m=f===void 0?[]:f;return m.map(function(h){return Sn({},h)})},[]),o=I.useCallback(function(d){var f=t.getState(),m=f.edges,h=m===void 0?[]:m;return h.find(function(g){return g.id===d})},[]),i=I.useCallback(function(d){var f=t.getState(),m=f.nodeInternals,h=f.setNodes,g=f.hasDefaultNodes,v=f.onNodesChange,S=Array.from(m.values()),_=typeof d=="function"?d(S):d;if(g)h(_);else if(v){var b=_.length===0?S.map(function(C){return{type:"remove",id:C.id}}):_.map(function(C){return{item:C,type:"reset"}});v(b)}},[]),s=I.useCallback(function(d){var f=t.getState(),m=f.edges,h=m===void 0?[]:m,g=f.setEdges,v=f.hasDefaultEdges,S=f.onEdgesChange,_=typeof d=="function"?d(h):d;if(v)g(_);else if(S){var b=_.length===0?h.map(function(C){return{type:"remove",id:C.id}}):_.map(function(C){return{item:C,type:"reset"}});S(b)}},[]),l=I.useCallback(function(d){var f=Array.isArray(d)?d:[d],m=t.getState(),h=m.nodeInternals,g=m.setNodes,v=m.hasDefaultNodes,S=m.onNodesChange;if(v){var _=Array.from(h.values()),b=[].concat(_,an(f));g(b)}else if(S){var C=f.map(function(w){return{item:w,type:"add"}});S(C)}},[]),u=I.useCallback(function(d){var f=Array.isArray(d)?d:[d],m=t.getState(),h=m.edges,g=h===void 0?[]:h,v=m.setEdges,S=m.hasDefaultEdges,_=m.onEdgesChange;if(S)v([].concat(an(g),an(f)));else if(_){var b=f.map(function(C){return{item:C,type:"add"}});_(b)}},[]),c=I.useCallback(function(){var d=t.getState(),f=d.nodeInternals,m=d.edges,h=m===void 0?[]:m,g=d.transform,v=Array.from(f.values()),S=le(g,3),_=S[0],b=S[1],C=S[2];return{nodes:v.map(function(w){return Sn({},w)}),edges:h.map(function(w){return Sn({},w)}),viewport:{x:_,y:b,zoom:C}}},[]);return I.useMemo(function(){return Sn(Sn({},e),{},{getNodes:n,getNode:r,getEdges:a,getEdge:o,setNodes:i,setEdges:s,addNodes:l,addEdges:u,toObject:c})},[e,n,r,a,o,i,s,l,u,c])}function Cx(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function So(e,t){if(e==null)return{};var n=Cx(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Sx(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ex(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function _x(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function xx(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Nx(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}var Ix=["children","className"];function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ld(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var aa=function(t){var n=t.children,r=t.className,a=So(t,Ix);return V.createElement("button",Tx({type:"button",className:rt(["react-flow__controls-button",r])},a),n)},kx=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Dm=function(t){var n=t.style,r=t.showZoom,a=r===void 0?!0:r,o=t.showFitView,i=o===void 0?!0:o,s=t.showInteractive,l=s===void 0?!0:s,u=t.fitViewOptions,c=t.onZoomIn,d=t.onZoomOut,f=t.onFitView,m=t.onInteractiveChange,h=t.className,g=t.children,v=Le(),S=I.useState(!1),_=le(S,2),b=_[0],C=_[1],w=Ne(kx),y=Dc(),E=y.zoomIn,x=y.zoomOut,N=y.fitView;if(I.useEffect(function(){C(!0)},[]),!b)return null;var k=function(){E==null||E(),c==null||c()},A=function(){x==null||x(),d==null||d()},q=function(){N==null||N(u),f==null||f()},L=function(){v.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),m==null||m(!w)};return V.createElement("div",{className:rt(["react-flow__controls",h]),style:n},a&&V.createElement(V.Fragment,null,V.createElement(aa,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in"},V.createElement(Sx,null)),V.createElement(aa,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out"},V.createElement(Ex,null))),i&&V.createElement(aa,{className:"react-flow__controls-fitview",onClick:q,title:"fit view","aria-label":"fit view"},V.createElement(_x,null)),l&&V.createElement(aa,{className:"react-flow__controls-interactive",onClick:L,title:"toggle interactivity","aria-label":"toggle interactivity"},w?V.createElement(Nx,null):V.createElement(xx,null)),g)};Dm.displayName="Controls";var Ox=I.memo(Dm),Rx=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function Ax(e){var t=e.proOptions,n=e.position,r=n===void 0?"bottom-right":n;if(t!=null&&t.account&&Rx.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var a="".concat(r).split("-");return V.createElement("div",{className:rt(["react-flow__attribution"].concat(an(a))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer"},"React Flow"))}var qx=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Lx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Px=function(t){var n=t.x,r=t.y,a=t.label,o=t.labelStyle,i=o===void 0?{}:o,s=t.labelShowBg,l=s===void 0?!0:s,u=t.labelBgStyle,c=u===void 0?{}:u,d=t.labelBgPadding,f=d===void 0?[2,4]:d,m=t.labelBgBorderRadius,h=m===void 0?2:m,g=t.children,v=t.className,S=So(t,qx),_=I.useRef(null),b=I.useState({x:0,y:0,width:0,height:0}),C=le(b,2),w=C[0],y=C[1],E=rt(["react-flow__edge-textwrapper",v]);return I.useEffect(function(){if(_.current){var x=_.current.getBBox();y({x:x.x,y:x.y,width:x.width,height:x.height})}},[a]),typeof a>"u"||!a?null:V.createElement("g",Lx({transform:"translate(".concat(n-w.width/2," ").concat(r-w.height/2,")"),className:E},S),l&&V.createElement("rect",{width:w.width+2*f[0],x:-f[0],y:-f[1],height:w.height+2*f[1],className:"react-flow__edge-textbg",style:c,rx:h,ry:h}),V.createElement("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:_,style:i},a),g)},Dx=I.memo(Px),Eo=function(e){var t=e.path,n=e.centerX,r=e.centerY,a=e.label,o=e.labelStyle,i=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,u=e.labelBgBorderRadius,c=e.style,d=e.markerEnd,f=e.markerStart,m=a?V.createElement(Dx,{x:n,y:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null;return V.createElement(V.Fragment,null,V.createElement("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:d,markerStart:f}),m)};function Ma(e){var t=e.pos,n=e.x1,r=e.y1,a=e.x2,o=e.y2,i,s;switch(t){case Z.Left:case Z.Right:i=.5*(n+a),s=r;break;case Z.Top:case Z.Bottom:i=n,s=.5*(r+o);break}return[i,s]}function Mm(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Z.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Z.Top:s,u=Ma({pos:a,x1:t,y1:n,x2:o,y2:i}),c=le(u,2),d=c[0],f=c[1],m=Ma({pos:l,x1:o,y1:i,x2:t,y2:n}),h=le(m,2),g=h[0],v=h[1];return"M".concat(t,",").concat(n," C").concat(d,",").concat(f," ").concat(g,",").concat(v," ").concat(o,",").concat(i)}function Mx(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Z.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Z.Top:s,u=Ma({pos:a,x1:t,y1:n,x2:o,y2:i}),c=le(u,2),d=c[0],f=c[1],m=Ma({pos:l,x1:o,y1:i,x2:t,y2:n}),h=le(m,2),g=h[0],v=h[1],S=t*.125+d*.375+g*.375+o*.125,_=n*.125+f*.375+v*.375+i*.125,b=Math.abs(S-t),C=Math.abs(_-n);return[S,_,b,C]}var Vm=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.sourcePosition,i=o===void 0?Z.Bottom:o,s=e.targetPosition,l=s===void 0?Z.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,m=e.labelBgPadding,h=e.labelBgBorderRadius,g=e.style,v=e.markerEnd,S=e.markerStart,_={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:a,targetPosition:l},b=Mm(_),C=Mx(_),w=le(C,2),y=w[0],E=w[1];return V.createElement(Eo,{path:b,centerX:y,centerY:E,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:v,markerStart:S})});function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var dd=[Z.Left,Z.Right],$m=function(t){var n=t.sourceX,r=t.sourceY,a=t.targetX,o=t.targetY,i=t.sourcePosition,s=i===void 0?Z.Bottom:i,l=t.targetPosition,u=l===void 0?Z.Top:l,c=dd.includes(s),d=dd.includes(u),f=c&&!d||d&&!c;if(f){var m=c?Math.abs(a-n):0,h=n>a?n-m:n+m,g=c?0:Math.abs(o-r),v=r<o?r+g:r-g;return[h,v,m,g]}var S=Math.abs(a-n)/2,_=a<n?a+S:a-S,b=Math.abs(o-r)/2,C=o<r?o+b:o-b;return[_,C,S,b]};function rr(e,t,n){return n===void 0?n:function(r){var a=t().edges.find(function(o){return o.id===e});n(r,Vx({},a))}}var Do=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},Mo=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},Vo=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},$o=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},Fo=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},Bo=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},zo=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Ho=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function Ls(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Z.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Z.Top:s,u=e.borderRadius,c=u===void 0?5:u,d=e.centerX,f=e.centerY,m=$m({sourceX:t,sourceY:n,targetX:o,targetY:i}),h=le(m,4),g=h[0],v=h[1],S=h[2],_=h[3],b=Math.min(c,Math.abs(o-t)),C=Math.min(c,Math.abs(i-n)),w=Math.min(b,C,S,_),y=[Z.Left,Z.Right],E=typeof d<"u"?d:g,x=typeof f<"u"?f:v,N=null,k=null;return t<=o?(N=n<=i?Do(t,x,w):Bo(t,x,w),k=n<=i?Ho(o,x,w):$o(o,x,w)):(N=n<i?Vo(t,x,w):zo(t,x,w),k=n<i?Fo(o,x,w):Mo(o,x,w)),y.includes(a)&&y.includes(l)?t<=o?(N=n<=i?Ho(E,n,w):$o(E,n,w),k=n<=i?Do(E,i,w):Bo(E,i,w)):(a===Z.Right&&l===Z.Left||a===Z.Left&&l===Z.Right||a===Z.Left&&l===Z.Left)&&(N=n<=i?Fo(E,n,w):Mo(E,n,w),k=n<=i?Vo(E,i,w):zo(E,i,w)):y.includes(a)&&!y.includes(l)?(t<=o?N=n<=i?Ho(o,n,w):$o(o,n,w):N=n<=i?Fo(o,n,w):Mo(o,n,w),k=""):!y.includes(a)&&y.includes(l)&&(t<=o?N=n<=i?Do(t,i,w):Bo(t,i,w):N=n<=i?Vo(t,i,w):zo(t,i,w),k=""),"M ".concat(t,",").concat(n).concat(N).concat(k,"L ").concat(o,",").concat(i)}var Mc=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.sourcePosition,m=f===void 0?Z.Bottom:f,h=e.targetPosition,g=h===void 0?Z.Top:h,v=e.markerEnd,S=e.markerStart,_=e.borderRadius,b=_===void 0?5:_,C=$m({sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:m,targetPosition:g}),w=le(C,2),y=w[0],E=w[1],x=Ls({sourceX:t,sourceY:n,sourcePosition:m,targetX:r,targetY:a,targetPosition:g,borderRadius:b});return V.createElement(Eo,{path:x,centerX:y,centerY:E,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:v,markerStart:S})});function fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fm=I.memo(function(e){return V.createElement(Mc,pd(pd({},e),{},{borderRadius:0}))}),Bm=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.markerEnd,m=e.markerStart,h=Math.abs(a-n)/2,g=a<n?a+h:a-h,v=Math.abs(r-t)/2,S=r<t?r+v:r-v,_="M ".concat(t,",").concat(n,"L ").concat(r,",").concat(a);return V.createElement(Eo,{path:_,centerX:S,centerY:g,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:f,markerStart:m})});function oa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Va(e){var t=e.pos,n=e.x1,r=e.y1,a=e.x2,o=e.y2,i=e.c,s,l;switch(t){case Z.Left:s=n-oa(n-a,i),l=r;break;case Z.Right:s=n+oa(a-n,i),l=r;break;case Z.Top:s=n,l=r-oa(r-o,i);break;case Z.Bottom:s=n,l=r+oa(o-r,i);break}return[s,l]}function zm(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Z.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Z.Top:s,u=e.curvature,c=u===void 0?.25:u,d=Va({pos:a,x1:t,y1:n,x2:o,y2:i,c}),f=le(d,2),m=f[0],h=f[1],g=Va({pos:l,x1:o,y1:i,x2:t,y2:n,c}),v=le(g,2),S=v[0],_=v[1];return"M".concat(t,",").concat(n," C").concat(m,",").concat(h," ").concat(S,",").concat(_," ").concat(o,",").concat(i)}function $x(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Z.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Z.Top:s,u=e.curvature,c=u===void 0?.25:u,d=Va({pos:a,x1:t,y1:n,x2:o,y2:i,c}),f=le(d,2),m=f[0],h=f[1],g=Va({pos:l,x1:o,y1:i,x2:t,y2:n,c}),v=le(g,2),S=v[0],_=v[1],b=t*.125+m*.375+S*.375+o*.125,C=n*.125+h*.375+_*.375+i*.125,w=Math.abs(b-t),y=Math.abs(C-n);return[b,C,w,y]}var Ps=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.sourcePosition,i=o===void 0?Z.Bottom:o,s=e.targetPosition,l=s===void 0?Z.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,m=e.labelBgPadding,h=e.labelBgBorderRadius,g=e.style,v=e.markerEnd,S=e.markerStart,_=e.curvature,b={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:a,targetPosition:l,curvature:_},C=zm(b),w=$x(b),y=le(w,2),E=y[0],x=y[1];return V.createElement(Eo,{path:C,centerX:E,centerY:x,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:v,markerStart:S})}),Vc=I.createContext(null),Fx=Vc.Provider;Vc.Consumer;function Ds(e,t,n,r,a,o,i){var s=i.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,u=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||u)){c.isHoveringHandle=!0;var d=s.getAttribute("data-nodeid"),f=s.getAttribute("data-handleid"),m=n?{source:d,sourceHandle:f,target:r,targetHandle:a}:{source:r,sourceHandle:a,target:d,targetHandle:f};c.connection=m;var h=t===zn.Strict?n&&u||!n&&l:!0;h&&(c.isValid=o(m))}return c}function Uo(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Hm(e){var t=e.event,n=e.handleId,r=e.nodeId,a=e.onConnect,o=e.isTarget,i=e.getState,s=e.setState,l=e.isValidConnection,u=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,d=t.target.closest(".react-flow"),f=Em(t.target);if(!f)return;var m=f.elementFromPoint(t.clientX,t.clientY),h=m==null?void 0:m.classList.contains("target"),g=m==null?void 0:m.classList.contains("source");if(!d||!h&&!g&&!u)return;var v=i(),S=v.onConnectStart,_=v.connectionMode,b=u||(h?"target":"source"),C=d.getBoundingClientRect(),w;s({connectionPosition:{x:t.clientX-C.left,y:t.clientY-C.top},connectionNodeId:r,connectionHandleId:n,connectionHandleType:b}),S==null||S(t,{nodeId:r,handleId:n,handleType:b});function y(x){s({connectionPosition:{x:x.clientX-C.left,y:x.clientY-C.top}});var N=Ds(x,_,o,r,n,l,f),k=N.connection,A=N.elementBelow,q=N.isValid,L=N.isHoveringHandle;if(!L)return Uo(w);k.source!==k.target&&A&&(Uo(w),w=A,A.classList.add("react-flow__handle-connecting"),A.classList.toggle("react-flow__handle-valid",q))}function E(x){var N=i(),k=N.onConnectStop,A=N.onConnectEnd,q=Ds(x,_,o,r,n,l,f),L=q.connection,T=q.isValid;k==null||k(x),T&&(a==null||a(L)),A==null||A(x),u&&c&&c(x),Uo(w),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),f.removeEventListener("mousemove",y),f.removeEventListener("mouseup",E)}f.addEventListener("mousemove",y),f.addEventListener("mouseup",E)}var Bx=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function hd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var zx=function(){return!0},Hx=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},Um=I.forwardRef(function(e,t){var n=e.type,r=n===void 0?"source":n,a=e.position,o=a===void 0?Z.Top:a,i=e.isValidConnection,s=i===void 0?zx:i,l=e.isConnectable,u=l===void 0?!0:l,c=e.id,d=e.onConnect,f=e.children,m=e.className,h=e.onMouseDown,g=So(e,Bx),v=Le(),S=I.useContext(Vc),_=Ne(Hx,We),b=_.connectionStartHandle,C=_.connectOnClick,w=c||null,y=r==="target",E=function(A){var q=v.getState(),L=q.defaultEdgeOptions,T=q.onConnect,P=q.hasDefaultEdges,O=jo(jo({},L),A);if(P){var M=v.getState(),z=M.edges;v.setState({edges:fx(O,z)})}T==null||T(O),d==null||d(O)},x=function(A){A.button===0&&Hm({event:A,handleId:w,nodeId:S,onConnect:E,isTarget:y,getState:v.getState,setState:v.setState,isValidConnection:s}),h==null||h(A)},N=function(A){var q=v.getState(),L=q.onClickConnectStart,T=q.onClickConnectStop,P=q.onClickConnectEnd,O=q.connectionMode;if(!b){L==null||L(A,{nodeId:S,handleId:w,handleType:r}),v.setState({connectionStartHandle:{nodeId:S,type:r,handleId:w}});return}var M=Em(A.target),z=Ds(A,O,b.type==="target",b.nodeId,b.handleId||null,s,M),B=z.connection,F=z.isValid;T==null||T(A),F&&E(B),P==null||P(A),v.setState({connectionStartHandle:null})};return V.createElement("div",jo({"data-handleid":w,"data-nodeid":S,"data-handlepos":o,className:rt(["react-flow__handle","react-flow__handle-".concat(o),"nodrag",m,{source:!y,target:y,connectable:u,connecting:(b==null?void 0:b.nodeId)===S&&(b==null?void 0:b.handleId)===w&&(b==null?void 0:b.type)===r}]),onMouseDown:x,onClick:C?N:void 0,ref:t},g),f)});Um.displayName="Handle";var $a=I.memo(Um),jm=function(t){var n=t.data,r=t.isConnectable,a=t.targetPosition,o=a===void 0?Z.Top:a,i=t.sourcePosition,s=i===void 0?Z.Bottom:i;return V.createElement(V.Fragment,null,V.createElement($a,{type:"target",position:o,isConnectable:r}),n==null?void 0:n.label,V.createElement($a,{type:"source",position:s,isConnectable:r}))};jm.displayName="DefaultNode";var Ms=I.memo(jm),Wm=function(t){var n=t.data,r=t.isConnectable,a=t.sourcePosition,o=a===void 0?Z.Bottom:a;return V.createElement(V.Fragment,null,n==null?void 0:n.label,V.createElement($a,{type:"source",position:o,isConnectable:r}))};Wm.displayName="InputNode";var Gm=I.memo(Wm),Ym=function(t){var n=t.data,r=t.isConnectable,a=t.targetPosition,o=a===void 0?Z.Top:a;return V.createElement(V.Fragment,null,V.createElement($a,{type:"target",position:o,isConnectable:r}),n==null?void 0:n.label)};Ym.displayName="OutputNode";var Xm=I.memo(Ym),Ux=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},jx=function(t,n){var r=t.selectedNodes.map(function(s){return s.id}),a=n.selectedNodes.map(function(s){return s.id}),o=t.selectedEdges.map(function(s){return s.id}),i=n.selectedEdges.map(function(s){return s.id});return We(r,a)&&We(o,i)};function Wx(e){var t=e.onSelectionChange,n=Ne(Ux,jx),r=n.selectedNodes,a=n.selectedEdges;return I.useEffect(function(){t({nodes:r,edges:a})},[r,a]),null}var Gx=I.memo(Wx),Yx=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function Ft(e,t){I.useEffect(function(){typeof e<"u"&&t(e)},[e])}function ve(e,t,n){I.useEffect(function(){typeof t<"u"&&n(fe({},e,t))},[t])}var Xx=function(t){var n=t.nodes,r=t.edges,a=t.defaultNodes,o=t.defaultEdges,i=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,u=t.onConnectEnd,c=t.onClickConnectStart,d=t.onClickConnectStop,f=t.onClickConnectEnd,m=t.nodesDraggable,h=t.nodesConnectable,g=t.minZoom,v=t.maxZoom,S=t.nodeExtent,_=t.onNodesChange,b=t.onEdgesChange,C=t.elementsSelectable,w=t.connectionMode,y=t.snapGrid,E=t.snapToGrid,x=t.translateExtent,N=t.connectOnClick,k=t.defaultEdgeOptions,A=t.fitView,q=t.fitViewOptions,L=t.onNodesDelete,T=t.onEdgesDelete,P=t.onNodeDrag,O=t.onNodeDragStart,M=t.onNodeDragStop,z=t.onSelectionDrag,B=t.onSelectionDragStart,F=t.onSelectionDragStop,W=Ne(Yx,We),Q=W.setNodes,D=W.setEdges,$=W.setDefaultNodesAndEdges,U=W.setMinZoom,G=W.setMaxZoom,H=W.setTranslateExtent,X=W.setNodeExtent,K=W.reset,Y=Le();return I.useEffect(function(){return $(a,o),function(){K()}},[]),ve("defaultEdgeOptions",k,Y.setState),ve("connectionMode",w,Y.setState),ve("onConnect",i,Y.setState),ve("onConnectStart",s,Y.setState),ve("onConnectStop",l,Y.setState),ve("onConnectEnd",u,Y.setState),ve("onClickConnectStart",c,Y.setState),ve("onClickConnectStop",d,Y.setState),ve("onClickConnectEnd",f,Y.setState),ve("nodesDraggable",m,Y.setState),ve("nodesConnectable",h,Y.setState),ve("elementsSelectable",C,Y.setState),ve("snapToGrid",E,Y.setState),ve("snapGrid",y,Y.setState),ve("onNodesChange",_,Y.setState),ve("onEdgesChange",b,Y.setState),ve("connectOnClick",N,Y.setState),ve("fitViewOnInit",A,Y.setState),ve("fitViewOnInitOptions",q,Y.setState),ve("onNodesDelete",L,Y.setState),ve("onEdgesDelete",T,Y.setState),ve("onNodeDrag",P,Y.setState),ve("onNodeDragStart",O,Y.setState),ve("onNodeDragStop",M,Y.setState),ve("onSelectionDrag",z,Y.setState),ve("onSelectionDragStart",B,Y.setState),ve("onSelectionDragStop",F,Y.setState),Ft(n,Q),Ft(r,D),Ft(a,Q),Ft(o,D),Ft(g,U),Ft(v,G),Ft(x,H),Ft(S,X),null},Qx=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",Zx=Qx,Kx=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",Jx=Kx,e1=function(t,n,r){return r===Z.Left?t-n:r===Z.Right?t+n:t},t1=function(t,n,r){return r===Z.Top?t-n:r===Z.Bottom?t+n:t},md=function(t){var n=t.className,r=t.position,a=t.centerX,o=t.centerY,i=t.radius,s=i===void 0?10:i;return V.createElement("circle",{className:rt(["react-flow__edgeupdater",n]),cx:e1(a,s,r),cy:t1(o,s,r),r:s,stroke:"transparent",fill:"transparent"})},En=function(e){var t=function(r){var a=r.id,o=r.className,i=r.type,s=r.data,l=r.onClick,u=r.onEdgeDoubleClick,c=r.selected,d=r.animated,f=r.label,m=r.labelStyle,h=r.labelShowBg,g=r.labelBgStyle,v=r.labelBgPadding,S=r.labelBgBorderRadius,_=r.style,b=r.source,C=r.target,w=r.sourceX,y=r.sourceY,E=r.targetX,x=r.targetY,N=r.sourcePosition,k=r.targetPosition,A=r.elementsSelectable,q=r.hidden,L=r.sourceHandleId,T=r.targetHandleId,P=r.onContextMenu,O=r.onMouseEnter,M=r.onMouseMove,z=r.onMouseLeave,B=r.edgeUpdaterRadius,F=r.onEdgeUpdate,W=r.onEdgeUpdateStart,Q=r.onEdgeUpdateEnd,D=r.markerEnd,$=r.markerStart,U=r.rfId,G=I.useState(!1),H=le(G,2),X=H[0],K=H[1],Y=Le(),pe=function(xe){var se=Y.getState(),Qe=se.edges,Te=se.addSelectedEdges,it=Qe.find(function(Ct){return Ct.id===a});A&&(Y.setState({nodesSelectionActive:!1}),Te([a])),l==null||l(xe,it)},ce=rr(a,Y.getState,u),be=rr(a,Y.getState,P),we=rr(a,Y.getState,O),Ie=rr(a,Y.getState,M),Re=rr(a,Y.getState,z),Oe=function(xe,se){var Qe=se?C:b,Te=(se?T:L)||null,it=se?"target":"source",Ct=function(){return!0},Io=se,wn=Y.getState().edges.find(function(Vt){return Vt.id===a});W==null||W(xe,wn,it);var To=Q?function(Vt){return Q(Vt,wn,it)}:void 0,jr=function(Wr){return F==null?void 0:F(wn,Wr)};Hm({event:xe,handleId:Te,nodeId:Qe,onConnect:jr,isTarget:Io,getState:Y.getState,setState:Y.setState,isValidConnection:Ct,elementEdgeUpdaterType:it,onEdgeUpdateEnd:To})},Pe=function(xe){return Oe(xe,!0)},Ye=function(xe){return Oe(xe,!1)},ge=function(){return K(!0)},_e=function(){return K(!1)},Xe=I.useMemo(function(){return"url(#".concat(As($,U),")")},[$,U]),ne=I.useMemo(function(){return"url(#".concat(As(D,U),")")},[D,U]);if(q)return null;var oe=!A&&!l,te=typeof F<"u",he=rt(["react-flow__edge","react-flow__edge-".concat(i),o,{selected:c,animated:d,inactive:oe,updating:X}]);return V.createElement("g",{className:he,onClick:pe,onDoubleClick:ce,onContextMenu:be,onMouseEnter:we,onMouseMove:Ie,onMouseLeave:Re},V.createElement(e,{id:a,source:b,target:C,selected:c,animated:d,label:f,labelStyle:m,labelShowBg:h,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:S,data:s,style:_,sourceX:w,sourceY:y,targetX:E,targetY:x,sourcePosition:N,targetPosition:k,sourceHandleId:L,targetHandleId:T,markerStart:Xe,markerEnd:ne,"data-testid":"rf__edge-".concat(a)}),te&&V.createElement("g",{onMouseDown:Pe,onMouseEnter:ge,onMouseOut:_e},V.createElement(md,{position:N,centerX:w,centerY:y,radius:B})),te&&V.createElement("g",{onMouseDown:Ye,onMouseEnter:ge,onMouseOut:_e},V.createElement(md,{position:k,centerX:E,centerY:x,radius:B})))};return t.displayName="EdgeWrapper",I.memo(t)};function gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n1(e){var t={default:En(e.default||Ps),straight:En(e.bezier||Bm),step:En(e.step||Fm),smoothstep:En(e.step||Mc),simplebezier:En(e.simplebezier||Vm)},n={},r=Object.keys(e).filter(function(a){return!["default","bezier"].includes(a)}).reduce(function(a,o){return a[o]=En(e[o]||Ps),a},n);return vd(vd({},t),r)}function yd(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=((n==null?void 0:n.x)||0)+t.x,a=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case Z.Top:return{x:r+o/2,y:a};case Z.Right:return{x:r+o,y:a+i/2};case Z.Bottom:return{x:r+o/2,y:a+i};case Z.Left:return{x:r,y:a+i/2}}}function bd(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var r1=function(t,n,r,a,o,i){var s=yd(r,t,n),l=yd(i,a,o);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function a1(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,a=e.sourceHeight,o=e.targetWidth,i=e.targetHeight,s=e.width,l=e.height,u=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+o),y2:Math.max(t.y+a,n.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var d=Da({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),f=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),m=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y)),h=Math.ceil(f*m);return h>0}function wd(e,t){var n,r,a,o,i,s=e.get(t),l=(s==null||(n=s[ke])===null||n===void 0?void 0:n.handleBounds)||null,u=!s||!l||!s.width||!s.height||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.x)>"u"||typeof((a=s.positionAbsolute)===null||a===void 0?void 0:a.y)>"u";return[{x:(s==null||(o=s.positionAbsolute)===null||o===void 0?void 0:o.x)||0,y:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!u]}var o1=typeof document<"u"?document:null,Fa=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:o1},n=I.useState(!1),r=le(n,2),a=r[0],o=r[1],i=I.useRef(new Set([])),s=I.useMemo(function(){if(e!==null){var d=Array.isArray(e)?e:[e],f=d.filter(function(h){return typeof h=="string"}).map(function(h){return h.split("+")}),m=f.reduce(function(h,g){return h.concat.apply(h,an(g))},[]);return[f,m]}return[[],[]]},[e]),l=le(s,2),u=l[0],c=l[1];return I.useEffect(function(){if(e!==null){var d,f,m=function(S){if(Ed(S))return!1;var _=Sd(S.code,c);i.current.add(S[_]),Cd(u,i.current,!1)&&(S.preventDefault(),o(!0))},h=function(S){if(Ed(S))return!1;var _=Sd(S.code,c);Cd(u,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(S[_])},g=function(){i.current.clear(),o(!1)};return t==null||(d=t.target)===null||d===void 0||d.addEventListener("keydown",m),t==null||(f=t.target)===null||f===void 0||f.addEventListener("keyup",h),window.addEventListener("blur",g),function(){var v,S;t==null||(v=t.target)===null||v===void 0||v.removeEventListener("keydown",m),t==null||(S=t.target)===null||S===void 0||S.removeEventListener("keyup",h),window.removeEventListener("blur",g)}}},[e,o]),a};function Cd(e,t,n){return e.filter(function(r){return n||r.length===t.size}).some(function(r){return r.every(function(a){return t.has(a)})})}function Sd(e,t){return t.includes(e)?"code":"key"}function Ed(e){var t,n=((t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))}var i1=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},s1=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=Le(),a=Ne(i1,We),o=a.onNodesChange,i=a.onEdgesChange,s=Fa(t),l=Fa(n);I.useEffect(function(){var u=r.getState(),c=u.nodeInternals,d=u.edges,f=u.hasDefaultNodes,m=u.hasDefaultEdges,h=u.onNodesDelete,g=u.onEdgesDelete,v=Array.from(c.values()),S=v.reduce(function(x,N){return(!N.selected&&N.parentNode&&x.find(function(k){return k.id===N.parentNode})||N.selected)&&x.push(N),x},[]),_=d.filter(function(x){return x.selected});if(s&&(S||_)){var b=Lc(S,d),C=[].concat(an(_),an(b)),w=C.reduce(function(x,N){return x.includes(N.id)||x.push(N.id),x},[]);if((m||f)&&(m&&r.setState({edges:d.filter(function(x){return!w.includes(x.id)})}),f&&(S.forEach(function(x){c.delete(x.id)}),r.setState({nodeInternals:new Map(c)}))),w.length>0&&(g==null||g(C),i)){var y=w.map(function(x){return{id:x,type:"remove"}});i(y)}if(S.length>0&&(h==null||h(S),o)){var E=S.map(function(x){return{id:x.id,type:"remove"}});o(E)}r.setState({nodesSelectionActive:!1})}},[s,o,i]),I.useEffect(function(){r.setState({multiSelectionActive:l})},[l])};function l1(e){var t=Le();I.useEffect(function(){var n,r=function(){if(e.current){var o=Ac(e.current);t.setState({width:o.width||500,height:o.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var c1=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},Wo=function(t){return{x:t.x,y:t.y,zoom:t.k}},ia=function(t,n){return t.target.closest(".".concat(n))},u1=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},d1=function(t){var n=t.onMove,r=t.onMoveStart,a=t.onMoveEnd,o=t.zoomOnScroll,i=o===void 0?!0:o,s=t.zoomOnPinch,l=s===void 0?!0:s,u=t.panOnScroll,c=u===void 0?!1:u,d=t.panOnScrollSpeed,f=d===void 0?.5:d,m=t.panOnScrollMode,h=m===void 0?An.Free:m,g=t.zoomOnDoubleClick,v=g===void 0?!0:g,S=t.selectionKeyPressed,_=t.elementsSelectable,b=t.panOnDrag,C=b===void 0?!0:b,w=t.translateExtent,y=t.minZoom,E=t.maxZoom,x=t.defaultZoom,N=x===void 0?1:x,k=t.defaultPosition,A=k===void 0?[0,0]:k,q=t.zoomActivationKeyCode,L=t.preventScrolling,T=L===void 0?!0:L,P=t.children,O=t.noWheelClassName,M=t.noPanClassName,z=Le(),B=I.useRef(!1),F=I.useRef(null),W=I.useRef({x:0,y:0,zoom:0}),Q=Ne(u1,We),D=Q.d3Zoom,$=Q.d3Selection,U=Q.d3ZoomHandler,G=Fa(q);return l1(F),I.useEffect(function(){if(F.current){var H,X=nx().scaleExtent([y,E]).translateExtent(w),K=lt(F.current).call(X),Y=qn(A[0],w[0][0],w[1][0]),pe=qn(A[1],w[0][1],w[1][1]),ce=qn(N,y,E),be=rn.translate(Y,pe).scale(ce);X.transform(K,be),z.setState({d3Zoom:X,d3Selection:K,d3ZoomHandler:K.on("wheel.zoom"),transform:[Y,pe,ce],domNode:(H=K.node())===null||H===void 0?void 0:H.closest(".react-flow")})}},[]),I.useEffect(function(){$&&D&&(c&&!G?$.on("wheel",function(H){if(ia(H,O))return!1;H.preventDefault(),H.stopImmediatePropagation();var X=$.property("__zoom").k||1;if(H.ctrlKey&&l){var K=mt(H),Y=-H.deltaY*(H.deltaMode===1?.05:H.deltaMode?1:.002)*10,pe=X*Math.pow(2,Y);D.scaleTo($,pe,K);return}var ce=H.deltaMode===1?20:1,be=h===An.Vertical?0:H.deltaX*ce,we=h===An.Horizontal?0:H.deltaY*ce;D.translateBy($,-(be/X)*f,-(we/X)*f)}).on("wheel.zoom",null):typeof U<"u"&&$.on("wheel",function(H){if(!T||ia(H,O))return null;H.preventDefault()}).on("wheel.zoom",U))},[c,h,$,D,U,G,l,T,O]),I.useEffect(function(){D&&(S&&!B.current?D.on("zoom",null):S||D.on("zoom",function(H){if(z.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),n){var X=Wo(H.transform);n(H.sourceEvent,X)}}))},[S,D,n]),I.useEffect(function(){D&&D.on("start",function(H){if(B.current=!0,r){var X=Wo(H.transform);W.current=X,r(H.sourceEvent,X)}})},[D,r]),I.useEffect(function(){D&&D.on("end",function(H){if(B.current=!1,a&&c1(W.current,H.transform)){var X=Wo(H.transform);W.current=X,a(H.sourceEvent,X)}})},[D,a]),I.useEffect(function(){D&&D.filter(function(H){var X=G||i,K=l&&H.ctrlKey;return!C&&!X&&!c&&!v&&!l||S||!v&&H.type==="dblclick"||ia(H,O)&&H.type==="wheel"||ia(H,M)&&H.type!=="wheel"||!l&&H.ctrlKey&&H.type==="wheel"||!X&&!c&&!K&&H.type==="wheel"||!C&&(H.type==="mousedown"||H.type==="touchstart")?!1:(!H.ctrlKey||H.type==="wheel")&&!H.button})},[D,i,l,c,v,C,S,_,G]),V.createElement("div",{className:"react-flow__renderer react-flow__container",ref:F},P)};function _d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_d(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nd(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var f1=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Id={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},p1=I.memo(function(e){var t=e.selectionKeyPressed,n=Le(),r=I.useRef(0),a=I.useRef(0),o=I.useRef(),i=I.useState(Id),s=le(i,2),l=s[0],u=s[1],c=Ne(f1,We),d=c.userSelectionActive,f=c.elementsSelectable,m=d||t;if(!f||!m)return null;var h=function(){u(Id),n.setState({userSelectionActive:!1}),r.current=0,a.current=0},g=function(C){var w=C.target.closest(".react-flow");o.current=w.getBoundingClientRect();var y=Nd(C,o.current);u({width:0,height:0,startX:y.x,startY:y.y,x:y.x,y:y.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},v=function(C){var w,y;if(!(!t||!l.draw||!o.current)){var E=Nd(C,o.current),x=(w=l.startX)!==null&&w!==void 0?w:0,N=(y=l.startY)!==null&&y!==void 0?y:0,k=xd(xd({},l),{},{x:E.x<x?E.x:x,y:E.y<N?E.y:N,width:Math.abs(E.x-x),height:Math.abs(E.y-N)}),A=n.getState(),q=A.nodeInternals,L=A.edges,T=A.transform,P=A.onNodesChange,O=A.onEdgesChange,M=Array.from(q.values()),z=Om(q,k,T,!1,!0),B=Lc(z,L).map(function(D){return D.id}),F=z.map(function(D){return D.id});if(r.current!==F.length){r.current=F.length;var W=In(M,F);W.length&&(P==null||P(W))}if(a.current!==B.length){a.current=B.length;var Q=In(L,B);Q.length&&(O==null||O(Q))}u(k)}},S=function(){n.setState({nodesSelectionActive:r.current>0}),h()},_=function(){n.setState({nodesSelectionActive:!1}),h()};return V.createElement("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:g,onMouseMove:v,onMouseUp:S,onMouseLeave:_},l.draw&&V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}}))});function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Td(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qm(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:Qm(n,t):!1}function Od(e,t,n){var r=e;do{var a;if((a=r)!==null&&a!==void 0&&a.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function h1(e,t,n){return Array.from(e.values()).filter(function(r){return(r.selected||r.id===n)&&(!r.parentNode||!Qm(r,e))}).map(function(r){var a,o,i,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((a=(o=r.positionAbsolute)===null||o===void 0?void 0:o.x)!==null&&a!==void 0?a:0),y:t.y-((i=(s=r.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function m1(e,t,n,r,a,o){var i=le(r,2),s=i[0],l=i[1],u=e.extent||o,c={x:t.x-e.distance.x,y:t.y-e.distance.y};if(n&&(c.x=s*Math.round(c.x/s),c.y=l*Math.round(c.y/l)),e.extent==="parent")if(e.parentNode&&e.width&&e.height){var d=a.get(e.parentNode);u=d!=null&&d.positionAbsolute&&d!==null&&d!==void 0&&d.width&&d!==null&&d!==void 0&&d.height?[[d.positionAbsolute.x,d.positionAbsolute.y],[d.positionAbsolute.x+d.width-e.width,d.positionAbsolute.y+d.height-e.height]]:u}else u=o;else if(e.extent&&e.parentNode){var f,m,h,g,v=a.get(e.parentNode),S=(f=v==null||(m=v.positionAbsolute)===null||m===void 0?void 0:m.x)!==null&&f!==void 0?f:0,_=(h=v==null||(g=v.positionAbsolute)===null||g===void 0?void 0:g.y)!==null&&h!==void 0?h:0;u=[[e.extent[0][0]+S,e.extent[0][1]+_],[e.extent[1][0]+S,e.extent[1][1]+_]]}var b={x:0,y:0};if(e.parentNode){var C,w,y,E,x=a.get(e.parentNode);b={x:(C=x==null||(w=x.positionAbsolute)===null||w===void 0?void 0:w.x)!==null&&C!==void 0?C:0,y:(y=x==null||(E=x.positionAbsolute)===null||E===void 0?void 0:E.y)!==null&&y!==void 0?y:0}}return e.positionAbsolute=u?Sm(c,u):c,e.position={x:e.positionAbsolute.x-b.x,y:e.positionAbsolute.y-b.y},e}function Go(e){var t=e.nodeId,n=e.dragItems,r=e.nodeInternals,a=n.map(function(o){var i=r.get(o.id);return kd(kd({},i),{},{position:o.position,positionAbsolute:o.positionAbsolute})});return[t?a.find(function(o){return o.id===t}):a[0],a]}function Yo(e){return function(t,n,r){return e==null?void 0:e(t,r)}}function Zm(e){var t=e.nodeRef,n=e.disabled,r=n===void 0?!1:n,a=e.noDragClassName,o=e.handleSelector,i=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,u=I.useState(!1),c=le(u,2),d=c[0],f=c[1],m=Le(),h=I.useRef(),g=I.useRef({x:null,y:null}),v=I.useCallback(function(S){var _=S.sourceEvent,b=m.getState(),C=b.transform,w=b.snapGrid,y=b.snapToGrid,E=_.touches?_.touches[0].clientX:_.clientX,x=_.touches?_.touches[0].clientY:_.clientY,N=km({x:E,y:x},C,y,w);return N},[]);return I.useEffect(function(){if(t!=null&&t.current){var S=lt(t.current);if(r)S.on(".drag",null);else{var _=fE().on("start",function(b){var C=m.getState(),w=C.nodeInternals,y=C.multiSelectionActive,E=C.unselectNodesAndEdges,x=C.onNodeDragStart,N=C.onSelectionDragStart,k=i?x:Yo(N);if(!l&&!y&&i){var A;(A=w.get(i))!==null&&A!==void 0&&A.selected||E()}i&&s&&l&&Tm({id:i,store:m});var q=v(b);if(g.current=q,h.current=h1(w,q,i),k&&h.current){var L=Go({nodeId:i,dragItems:h.current,nodeInternals:w}),T=le(L,2),P=T[0],O=T[1];k(b.sourceEvent,P,O)}}).on("drag",function(b){var C=m.getState(),w=C.updateNodePositions,y=C.snapToGrid,E=C.snapGrid,x=C.nodeInternals,N=C.nodeExtent,k=C.onNodeDrag,A=C.onSelectionDrag,q=v(b);if((g.current.x!==q.x||g.current.y!==q.y)&&h.current){g.current=q,h.current=h.current.map(function(z){return m1(z,q,y,E,x,N)});var L=i?k:Yo(A);if(w(h.current,!0,!0),f(!0),L){var T=Go({nodeId:i,dragItems:h.current,nodeInternals:x}),P=le(T,2),O=P[0],M=P[1];L(b.sourceEvent,O,M)}}b.on("end",function(z){if(f(!1),h.current){var B=m.getState(),F=B.updateNodePositions,W=B.nodeInternals,Q=B.onNodeDragStop,D=B.onSelectionDragStop,$=i?Q:Yo(D);if(F(h.current,!1,!1),$){var U=Go({nodeId:i,dragItems:h.current,nodeInternals:W}),G=le(U,2),H=G[0],X=G[1];$(z.sourceEvent,H,X)}}})}).filter(function(b){var C=b.target,w=!b.button&&(!a||!Od(C,".".concat(a),t))&&(!o||Od(C,o,t));return w});return S.call(_),function(){S.on(".drag",null)}}}},[t,r,a,o,s,m,i,l,v]),d}function Rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function g1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var v1=function(t){return g1({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},qc(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},y1=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(r){return r.selected});return qc(n)};function b1(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,r=Le(),a=Ne(v1,We),o=a.transformString,i=a.userSelectionActive,s=Ne(y1,We),l=s.width,u=s.height,c=s.x,d=s.y,f=I.useRef(null);if(Zm({nodeRef:f}),i||!l||!u)return null;var m=t?function(h){var g=Array.from(r.getState().nodeInternals.values()).filter(function(v){return v.selected});t(h,g)}:void 0;return V.createElement("div",{className:rt(["react-flow__nodesselection","react-flow__container",n]),style:{transform:o}},V.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,style:{width:l,height:u,top:d,left:c}}))}var w1=I.memo(b1),C1=function(t){return t.nodesSelectionActive},Km=function(t){var n=t.children,r=t.onPaneClick,a=t.onPaneContextMenu,o=t.onPaneScroll,i=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,u=t.onMoveEnd,c=t.selectionKeyCode,d=t.multiSelectionKeyCode,f=t.zoomActivationKeyCode,m=t.elementsSelectable,h=t.zoomOnScroll,g=t.zoomOnPinch,v=t.panOnScroll,S=t.panOnScrollSpeed,_=t.panOnScrollMode,b=t.zoomOnDoubleClick,C=t.panOnDrag,w=t.translateExtent,y=t.minZoom,E=t.maxZoom,x=t.defaultZoom,N=t.defaultPosition,k=t.preventScrolling,A=t.onSelectionContextMenu,q=t.noWheelClassName,L=t.noPanClassName,T=Le(),P=Ne(C1),O=Fa(c);s1({deleteKeyCode:i,multiSelectionKeyCode:d});var M=function(W){r==null||r(W),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},z=a?function(F){return a(F)}:void 0,B=o?function(F){return o(F)}:void 0;return V.createElement(d1,{onMove:s,onMoveStart:l,onMoveEnd:u,selectionKeyPressed:O,elementsSelectable:m,zoomOnScroll:h,zoomOnPinch:g,panOnScroll:v,panOnScrollSpeed:S,panOnScrollMode:_,zoomOnDoubleClick:b,panOnDrag:C,translateExtent:w,minZoom:y,maxZoom:E,defaultZoom:x,defaultPosition:N,zoomActivationKeyCode:f,preventScrolling:k,noWheelClassName:q,noPanClassName:L},n,V.createElement(p1,{selectionKeyPressed:O}),P&&V.createElement(w1,{onSelectionContextMenu:A,noPanClassName:L}),V.createElement("div",{className:"react-flow__pane react-flow__container",onClick:M,onContextMenu:z,onWheel:B}))};Km.displayName="FlowRenderer";var S1=I.memo(Km);function E1(e){var t=Ne(I.useCallback(function(n){return e?Om(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var _1=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},Jm=function(t){var n=Ne(_1,We),r=n.nodesDraggable,a=n.nodesConnectable,o=n.elementsSelectable,i=n.updateNodeDimensions,s=E1(t.onlyRenderVisibleElements),l=I.useRef(),u=I.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(d){var f=d.map(function(m){return{id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}});i(f)});return l.current=c,c},[]);return I.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),V.createElement("div",{className:"react-flow__nodes react-flow__container"},s.map(function(c){var d,f,m,h,g,v,S,_=c.type||"default";t.nodeTypes[_]||(_="default");var b=t.nodeTypes[_]||t.nodeTypes.default,C=!!(c.draggable||r&&typeof c.draggable>"u"),w=!!(c.selectable||o&&typeof c.selectable>"u"),y=!!(c.connectable||a&&typeof c.connectable>"u");return V.createElement(b,{key:c.id,id:c.id,className:c.className,style:c.style,type:_,data:c.data,sourcePosition:c.sourcePosition||Z.Bottom,targetPosition:c.targetPosition||Z.Top,hidden:c.hidden,xPos:(d=(f=c.positionAbsolute)===null||f===void 0?void 0:f.x)!==null&&d!==void 0?d:0,yPos:(m=(h=c.positionAbsolute)===null||h===void 0?void 0:h.y)!==null&&m!==void 0?m:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:C,isSelectable:w,isConnectable:y,resizeObserver:u,dragHandle:c.dragHandle,zIndex:(g=(v=c[ke])===null||v===void 0?void 0:v.z)!==null&&g!==void 0?g:0,isParent:!!((S=c[ke])!==null&&S!==void 0&&S.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height})}))};Jm.displayName="NodeRenderer";var x1=I.memo(Jm),_n;function Ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ad(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ad(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var N1=(_n={},fe(_n,Z.Left,Z.Right),fe(_n,Z.Right,Z.Left),fe(_n,Z.Top,Z.Bottom),fe(_n,Z.Bottom,Z.Top),_n),I1=function(e){var t,n,r,a,o,i=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,u=e.connectionLineType,c=u===void 0?xt.Bezier:u,d=e.isConnectable,f=e.CustomConnectionLineComponent,m=Ne(I.useCallback(function(B){return{fromNode:B.nodeInternals.get(i),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2]}},[i]),We),h=m.fromNode,g=m.handleId,v=m.toX,S=m.toY,_=h==null||(t=h[ke])===null||t===void 0?void 0:t.handleBounds;if(!h||!d||!(_!=null&&_[s]))return null;var b=_[s],C=g?b.find(function(B){return B.id===g}):b[0],w=C?C.x+C.width/2:((n=h==null?void 0:h.width)!==null&&n!==void 0?n:0)/2,y=C?C.y+C.height/2:(r=h==null?void 0:h.height)!==null&&r!==void 0?r:0,E=((h==null||(a=h.positionAbsolute)===null||a===void 0?void 0:a.x)||0)+w,x=((h==null||(o=h.positionAbsolute)===null||o===void 0?void 0:o.y)||0)+y,N=C==null?void 0:C.position;if(!N)return null;var k=N1[N],A,q,L,T,P,O;switch(s){case"source":A=E,q=x,L=N,T=v,P=S,O=k;break;case"target":A=v,q=S,L=k,T=E,P=x,O=N;break}if(f)return V.createElement("g",{className:"react-flow__connection"},V.createElement(f,{connectionLineType:c,connectionLineStyle:l,fromNode:h,fromHandle:C,fromX:E,fromY:x,toX:v,toY:S,fromPosition:N,toPosition:k,sourcePosition:L,targetPosition:O,sourceNode:h,sourceHandle:C,targetX:T,targetY:P,sourceX:A,sourceY:q}));var M="",z={sourceX:A,sourceY:q,sourcePosition:L,targetX:T,targetY:P,targetPosition:O};return c===xt.Bezier?M=zm(z):c===xt.Step?M=Ls(qd(qd({},z),{},{borderRadius:0})):c===xt.SmoothStep?M=Ls(z):c===xt.SimpleBezier?M=Mm(z):M="M".concat(A,",").concat(q," ").concat(T,",").concat(P),V.createElement("g",{className:"react-flow__connection"},V.createElement("path",{d:M,className:"react-flow__connection-path",style:l}))};function Vs(e){return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(e)}var sa,T1=function(t){var n=t.color,r=n===void 0?"none":n,a=t.strokeWidth,o=a===void 0?1:a;return V.createElement("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,fill:"none",points:"-5,-4 0,0 -5,4"})},k1=function(t){var n=t.color,r=n===void 0?"none":n,a=t.strokeWidth,o=a===void 0?1:a;return V.createElement("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,fill:r,points:"-5,-4 0,0 -5,4 -5,-4"})},Ld=(sa={},fe(sa,xr.Arrow,T1),fe(sa,xr.ArrowClosed,k1),sa);function O1(e){var t=I.useMemo(function(){var n=Ld.hasOwnProperty(e);return n?Ld[e]:function(){return null}},[e]);return t}function Pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function R1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var A1=function(t){var n=t.id,r=t.type,a=t.color,o=t.width,i=o===void 0?12.5:o,s=t.height,l=s===void 0?12.5:s,u=t.markerUnits,c=u===void 0?"strokeWidth":u,d=t.strokeWidth,f=t.orient,m=f===void 0?"auto":f,h=O1(r);return V.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:m,refX:"0",refY:"0"},V.createElement(h,{color:a,strokeWidth:d}))},q1=function(t){var n=t.defaultColor,r=t.rfId;return function(a){var o=[];return a.edges.reduce(function(i,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&Vs(l)==="object"){var u=As(l,r);o.includes(u)||(i.push(R1({id:u,color:l.color||n},l)),o.push(u))}}),i},[]).sort(function(i,s){return i.id.localeCompare(s.id)})}},eg=function(t){var n=t.defaultColor,r=t.rfId,a=Ne(I.useCallback(q1({defaultColor:n,rfId:r}),[n,r]),function(o,i){return!(o.length!==i.length||o.some(function(s,l){return s.id!==i[l].id}))});return V.createElement("defs",null,a.map(function(o){return V.createElement(A1,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})}))};eg.displayName="MarkerDefinitions";var L1=I.memo(eg),P1=[{level:0,isMaxLevel:!0,edges:[]}];function D1(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=-1,a=e.reduce(function(i,s){var l=_m(s.zIndex),u=l?s.zIndex:0;if(n){var c,d,f,m;u=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(d=c[ke])===null||d===void 0?void 0:d.z)||0,((f=t.get(s.target))===null||f===void 0||(m=f[ke])===null||m===void 0?void 0:m.z)||0)}return i[u]?i[u].push(s):i[u]=[s],r=u>r?u:r,i},{}),o=Object.entries(a).map(function(i){var s=le(i,2),l=s[0],u=s[1],c=+l;return{edges:u,level:c,isMaxLevel:c===r}});return o.length===0?P1:o}function M1(e,t,n){var r=Ne(I.useCallback(function(a){return e?a.edges.filter(function(o){var i=t.get(o.source),s=t.get(o.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&a1({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:a.width,height:a.height,transform:a.transform})}):a.edges},[e,t]));return D1(r,t,n)}var V1=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},tg=function(t){var n=Ne(V1,We),r=n.connectionNodeId,a=n.connectionHandleType,o=n.nodesConnectable,i=n.elementsSelectable,s=n.width,l=n.height,u=n.connectionMode,c=n.nodeInternals,d=M1(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var f=t.connectionLineType,m=t.defaultMarkerColor,h=t.connectionLineStyle,g=t.connectionLineComponent,v=t.connectionLineContainerStyle,S=r&&a;return V.createElement(V.Fragment,null,d.map(function(_){var b=_.level,C=_.edges,w=_.isMaxLevel;return V.createElement("svg",{key:b,style:{zIndex:b},width:s,height:l,className:"react-flow__edges react-flow__container"},w&&V.createElement(L1,{defaultColor:m,rfId:t.rfId}),V.createElement("g",null,C.map(function(y){var E=wd(c,y.source),x=le(E,3),N=x[0],k=x[1],A=x[2],q=wd(c,y.target),L=le(q,3),T=L[0],P=L[1],O=L[2];if(!A||!O)return null;var M=y.type||"default";t.edgeTypes[M]||(console.warn('[React Flow]: Edge type "'.concat(M,'" not found. Using fallback type "default". Help: https://reactflow.dev/error#300')),M="default");var z=t.edgeTypes[M]||t.edgeTypes.default,B=u===zn.Strict?P.target:P.target||P.source,F=bd(k.source,y.sourceHandle||null),W=bd(B,y.targetHandle||null),Q=(F==null?void 0:F.position)||Z.Bottom,D=(W==null?void 0:W.position)||Z.Top;if(!F||!W)return null;var $=r1(N,F,Q,T,W,D),U=$.sourceX,G=$.sourceY,H=$.targetX,X=$.targetY;return V.createElement(z,{key:y.id,id:y.id,className:rt([y.className,t.noPanClassName]),type:M,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:U,sourceY:G,targetX:H,targetY:X,sourcePosition:Q,targetPosition:D,elementsSelectable:i,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId})})))}),S&&V.createElement("svg",{style:v,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement(I1,{connectionNodeId:r,connectionHandleType:a,connectionLineStyle:h,connectionLineType:f,isConnectable:o,CustomConnectionLineComponent:g})))};tg.displayName="EdgeRenderer";var $1=I.memo(tg),F1=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function B1(e){var t=e.children,n=Ne(F1);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}function z1(e){var t=Dc(),n=I.useRef(!1);I.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var ng=function(t){var n=t.nodeTypes,r=t.edgeTypes,a=t.onMove,o=t.onMoveStart,i=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,u=t.onEdgeClick,c=t.onNodeDoubleClick,d=t.onEdgeDoubleClick,f=t.onNodeMouseEnter,m=t.onNodeMouseMove,h=t.onNodeMouseLeave,g=t.onNodeContextMenu,v=t.onSelectionContextMenu,S=t.connectionLineType,_=t.connectionLineStyle,b=t.connectionLineComponent,C=t.connectionLineContainerStyle,w=t.selectionKeyCode,y=t.multiSelectionKeyCode,E=t.zoomActivationKeyCode,x=t.deleteKeyCode,N=t.onlyRenderVisibleElements,k=t.elementsSelectable,A=t.selectNodesOnDrag,q=t.translateExtent,L=t.minZoom,T=t.maxZoom,P=t.defaultZoom,O=t.defaultPosition,M=t.preventScrolling,z=t.defaultMarkerColor,B=t.zoomOnScroll,F=t.zoomOnPinch,W=t.panOnScroll,Q=t.panOnScrollSpeed,D=t.panOnScrollMode,$=t.zoomOnDoubleClick,U=t.panOnDrag,G=t.onPaneClick,H=t.onPaneScroll,X=t.onPaneContextMenu,K=t.onEdgeUpdate,Y=t.onEdgeContextMenu,pe=t.onEdgeMouseEnter,ce=t.onEdgeMouseMove,be=t.onEdgeMouseLeave,we=t.edgeUpdaterRadius,Ie=t.onEdgeUpdateStart,Re=t.onEdgeUpdateEnd,Oe=t.noDragClassName,Pe=t.noWheelClassName,Ye=t.noPanClassName,ge=t.elevateEdgesOnSelect,_e=t.id;return z1(s),V.createElement(S1,{onPaneClick:G,onPaneContextMenu:X,onPaneScroll:H,deleteKeyCode:x,selectionKeyCode:w,multiSelectionKeyCode:y,zoomActivationKeyCode:E,elementsSelectable:k,onMove:a,onMoveStart:o,onMoveEnd:i,zoomOnScroll:B,zoomOnPinch:F,zoomOnDoubleClick:$,panOnScroll:W,panOnScrollSpeed:Q,panOnScrollMode:D,panOnDrag:U,translateExtent:q,minZoom:L,maxZoom:T,defaultZoom:P,defaultPosition:O,onSelectionContextMenu:v,preventScrolling:M,noDragClassName:Oe,noWheelClassName:Pe,noPanClassName:Ye},V.createElement(B1,null,V.createElement($1,{edgeTypes:r,onEdgeClick:u,onEdgeDoubleClick:d,connectionLineType:S,connectionLineStyle:_,connectionLineComponent:b,connectionLineContainerStyle:C,onEdgeUpdate:K,onlyRenderVisibleElements:N,onEdgeContextMenu:Y,onEdgeMouseEnter:pe,onEdgeMouseMove:ce,onEdgeMouseLeave:be,onEdgeUpdateStart:Ie,onEdgeUpdateEnd:Re,edgeUpdaterRadius:we,defaultMarkerColor:z,noPanClassName:Ye,elevateEdgesOnSelect:!!ge,rfId:_e}),V.createElement(x1,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:m,onNodeMouseLeave:h,onNodeContextMenu:g,selectNodesOnDrag:A,onlyRenderVisibleElements:N,noPanClassName:Ye,noDragClassName:Oe})))};ng.displayName="GraphView";var H1=I.memo(ng),rg=function(){return null};rg.displayName="GroupNode";function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ar=function(e){var t=function(r){var a=r.id,o=r.type,i=r.data,s=r.xPos,l=r.yPos,u=r.selected,c=r.onClick,d=r.onMouseEnter,f=r.onMouseMove,m=r.onMouseLeave,h=r.onContextMenu,g=r.onDoubleClick,v=r.style,S=r.className,_=r.isDraggable,b=r.isSelectable,C=r.isConnectable,w=r.selectNodesOnDrag,y=r.sourcePosition,E=r.targetPosition,x=r.hidden,N=r.resizeObserver,k=r.dragHandle,A=r.zIndex,q=r.isParent,L=r.noPanClassName,T=r.noDragClassName,P=r.initialized,O=Le(),M=I.useRef(null),z=I.useRef(y),B=I.useRef(E),F=I.useRef(o),W=b||_||c||d||f||m,Q=nr(a,O.getState,d),D=nr(a,O.getState,f),$=nr(a,O.getState,m),U=nr(a,O.getState,h),G=nr(a,O.getState,g),H=function(Y){if(b&&(!w||!_)&&Tm({id:a,store:O}),c){var pe=O.getState().nodeInternals.get(a);c(Y,Md({},pe))}};I.useEffect(function(){if(M.current&&!x){var K=M.current;return N==null||N.observe(K),function(){return N==null?void 0:N.unobserve(K)}}},[x]),I.useEffect(function(){var K=F.current!==o,Y=z.current!==y,pe=B.current!==E;M.current&&(K||Y||pe)&&(K&&(F.current=o),Y&&(z.current=y),pe&&(B.current=E),O.getState().updateNodeDimensions([{id:a,nodeElement:M.current,forceUpdate:!0}]))},[a,o,y,E]);var X=Zm({nodeRef:M,disabled:x||!_,noDragClassName:T,handleSelector:k,nodeId:a,isSelectable:b,selectNodesOnDrag:w});return x?null:V.createElement("div",{className:rt(["react-flow__node","react-flow__node-".concat(o),L,S,{selected:u,selectable:b,parent:q}]),ref:M,style:Md({zIndex:A,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:W?"all":"none",visibility:P?"visible":"hidden"},v),onMouseEnter:Q,onMouseMove:D,onMouseLeave:$,onContextMenu:U,onClick:H,onDoubleClick:G,"data-testid":"rf__node-".concat(a),"data-id":a},V.createElement(Fx,{value:a},V.createElement(e,{id:a,data:i,type:o,xPos:s,yPos:l,selected:u,isConnectable:C,sourcePosition:y,targetPosition:E,dragging:X,dragHandle:k,zIndex:A})))};return t.displayName="NodeWrapper",I.memo(t)};function Vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U1(e){var t={input:ar(e.input||Gm),default:ar(e.default||Ms),output:ar(e.output||Xm),group:ar(e.group||rg)},n={},r=Object.keys(e).filter(function(a){return!["input","default","output","group"].includes(a)}).reduce(function(a,o){return a[o]=ar(e[o]||Ms),a},n);return $d($d({},t),r)}function Fd(e,t){I.useRef(null);var n=I.useMemo(function(){return t(e)},[e]);return n}function Bd(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var ag=function(t){var n=t.children,r=!0;try{Le()}catch{r=!1}return r?V.createElement(V.Fragment,null,n):V.createElement(Lm,{createStore:Pm},n)};ag.displayName="ReactFlowWrapper";var j1=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}Bd(Zx),Bd(Jx);var W1={input:Gm,default:Ms,output:Xm},G1={default:Ps,straight:Bm,step:Fm,smoothstep:Mc,simplebezier:Vm},Y1=[15,15],X1=[0,0],og=I.forwardRef(function(e,t){var n=e.nodes,r=e.edges,a=e.defaultNodes,o=e.defaultEdges,i=e.className,s=e.nodeTypes,l=s===void 0?W1:s,u=e.edgeTypes,c=u===void 0?G1:u,d=e.onNodeClick,f=e.onEdgeClick,m=e.onInit,h=e.onMove,g=e.onMoveStart,v=e.onMoveEnd,S=e.onConnect,_=e.onConnectStart,b=e.onConnectStop,C=e.onConnectEnd,w=e.onClickConnectStart,y=e.onClickConnectStop,E=e.onClickConnectEnd,x=e.onNodeMouseEnter,N=e.onNodeMouseMove,k=e.onNodeMouseLeave,A=e.onNodeContextMenu,q=e.onNodeDoubleClick,L=e.onNodeDragStart,T=e.onNodeDrag,P=e.onNodeDragStop,O=e.onNodesDelete,M=e.onEdgesDelete,z=e.onSelectionChange,B=e.onSelectionDragStart,F=e.onSelectionDrag,W=e.onSelectionDragStop,Q=e.onSelectionContextMenu,D=e.connectionMode,$=D===void 0?zn.Strict:D,U=e.connectionLineType,G=U===void 0?xt.Bezier:U,H=e.connectionLineStyle,X=e.connectionLineComponent,K=e.connectionLineContainerStyle,Y=e.deleteKeyCode,pe=Y===void 0?"Backspace":Y,ce=e.selectionKeyCode,be=ce===void 0?"Shift":ce,we=e.multiSelectionKeyCode,Ie=we===void 0?"Meta":we,Re=e.zoomActivationKeyCode,Oe=Re===void 0?"Meta":Re,Pe=e.snapToGrid,Ye=Pe===void 0?!1:Pe,ge=e.snapGrid,_e=ge===void 0?Y1:ge,Xe=e.onlyRenderVisibleElements,ne=Xe===void 0?!1:Xe,oe=e.selectNodesOnDrag,te=oe===void 0?!0:oe,he=e.nodesDraggable,J=e.nodesConnectable,xe=e.elementsSelectable,se=e.minZoom,Qe=se===void 0?.5:se,Te=e.maxZoom,it=Te===void 0?2:Te,Ct=e.defaultZoom,Io=Ct===void 0?1:Ct,wn=e.defaultPosition,To=wn===void 0?X1:wn,jr=e.translateExtent,Vt=jr===void 0?qs:jr,Wr=e.preventScrolling,fv=Wr===void 0?!0:Wr,pv=e.nodeExtent,Jc=e.defaultMarkerColor,hv=Jc===void 0?"#b1b1b7":Jc,eu=e.zoomOnScroll,mv=eu===void 0?!0:eu,tu=e.zoomOnPinch,gv=tu===void 0?!0:tu,nu=e.panOnScroll,vv=nu===void 0?!1:nu,ru=e.panOnScrollSpeed,yv=ru===void 0?.5:ru,au=e.panOnScrollMode,bv=au===void 0?An.Free:au,ou=e.zoomOnDoubleClick,wv=ou===void 0?!0:ou,iu=e.panOnDrag,Cv=iu===void 0?!0:iu,Sv=e.onPaneClick,Ev=e.onPaneScroll,_v=e.onPaneContextMenu,xv=e.children,Nv=e.onEdgeUpdate,Iv=e.onEdgeContextMenu,Tv=e.onEdgeDoubleClick,kv=e.onEdgeMouseEnter,Ov=e.onEdgeMouseMove,Rv=e.onEdgeMouseLeave,Av=e.onEdgeUpdateStart,qv=e.onEdgeUpdateEnd,su=e.edgeUpdaterRadius,Lv=su===void 0?10:su,Pv=e.onNodesChange,Dv=e.onEdgesChange,lu=e.noDragClassName,Mv=lu===void 0?"nodrag":lu,cu=e.noWheelClassName,Vv=cu===void 0?"nowheel":cu,uu=e.noPanClassName,$v=uu===void 0?"nopan":uu,du=e.fitView,Fv=du===void 0?!1:du,Bv=e.fitViewOptions,fu=e.connectOnClick,zv=fu===void 0?!0:fu,Hv=e.attributionPosition,Uv=e.proOptions,jv=e.defaultEdgeOptions,pu=e.elevateEdgesOnSelect,Wv=pu===void 0?!1:pu,Gr=So(e,j1),Gv=Fd(l,U1),Yv=Fd(c,n1);return V.createElement("div",Hd(Hd({},Gr),{},{ref:t,className:rt(["react-flow",i])}),V.createElement(ag,null,V.createElement(H1,{onInit:m,onMove:h,onMoveStart:g,onMoveEnd:v,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:x,onNodeMouseMove:N,onNodeMouseLeave:k,onNodeContextMenu:A,onNodeDoubleClick:q,nodeTypes:Gv,edgeTypes:Yv,connectionLineType:G,connectionLineStyle:H,connectionLineComponent:X,connectionLineContainerStyle:K,selectionKeyCode:be,deleteKeyCode:pe,multiSelectionKeyCode:Ie,zoomActivationKeyCode:Oe,onlyRenderVisibleElements:ne,selectNodesOnDrag:te,translateExtent:Vt,minZoom:Qe,maxZoom:it,defaultZoom:Io,defaultPosition:To,preventScrolling:fv,zoomOnScroll:mv,zoomOnPinch:gv,zoomOnDoubleClick:wv,panOnScroll:vv,panOnScrollSpeed:yv,panOnScrollMode:bv,panOnDrag:Cv,onPaneClick:Sv,onPaneScroll:Ev,onPaneContextMenu:_v,onSelectionContextMenu:Q,onEdgeUpdate:Nv,onEdgeContextMenu:Iv,onEdgeDoubleClick:Tv,onEdgeMouseEnter:kv,onEdgeMouseMove:Ov,onEdgeMouseLeave:Rv,onEdgeUpdateStart:Av,onEdgeUpdateEnd:qv,edgeUpdaterRadius:Lv,defaultMarkerColor:hv,noDragClassName:Mv,noWheelClassName:Vv,noPanClassName:$v,elevateEdgesOnSelect:Wv,id:Gr==null?void 0:Gr.id}),V.createElement(Xx,{nodes:n,edges:r,defaultNodes:a,defaultEdges:o,onConnect:S,onConnectStart:_,onConnectStop:b,onConnectEnd:C,onClickConnectStart:w,onClickConnectStop:y,onClickConnectEnd:E,nodesDraggable:he,nodesConnectable:J,elementsSelectable:xe,minZoom:Qe,maxZoom:it,nodeExtent:pv,onNodesChange:Pv,onEdgesChange:Dv,snapToGrid:Ye,snapGrid:_e,connectionMode:$,translateExtent:Vt,connectOnClick:zv,defaultEdgeOptions:jv,fitView:Fv,fitViewOptions:Bv,onNodesDelete:O,onEdgesDelete:M,onNodeDragStart:L,onNodeDrag:T,onNodeDragStop:P,onSelectionDrag:F,onSelectionDragStart:B,onSelectionDragStop:W}),z&&V.createElement(Gx,{onSelectionChange:z}),xv,V.createElement(Ax,{proOptions:Uv,position:Hv})))});og.displayName="ReactFlow";var ig=function(t){var n=t.children;return V.createElement(Lm,{createStore:Pm},n)};ig.displayName="ReactFlowProvider";function sg(e){return function(t){var n=I.useState(t),r=le(n,2),a=r[0],o=r[1],i=I.useCallback(function(s){return o(function(l){return e(s,l)})},[]);return[a,o,i]}}var Q1=sg(Nm),Z1=sg(lx);const $s=e=>{const{data:t}=ty(e.modifiedBy),n=br(Yt(e.modifiedOn)),{name:r,description:a}=e;return I.useMemo(()=>R(j,{children:[r&&p(et,{title:r,placement:"top",enterNextDelay:200,children:p("span",{children:p(Rt,{variant:"smallText1",className:"name",children:r})})}),a&&p(et,{title:a,placement:"top",enterNextDelay:200,children:p("span",{children:p(Rt,{variant:"smallText1",className:"description",children:a})})}),t&&p(uc,{userProfile:t}),p("div",{children:n})]}),[r,a,t,n])};try{$s.displayName="ActivityNodeLabel",$s.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}}}catch{}const K1=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),Fs=e=>{const{entityHeader:t}=e;if(t){const n=Wp(t==null?void 0:t.type);if(n==ds.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const a=t.name.slice(r);if(K1.has(a.toLowerCase()))return p(ue,{icon:"code"})}}else return p(yu,{type:n,includeTooltip:!1})}return p(yu,{type:ds.FILE,includeTooltip:!1})};try{Fs.displayName="ProvenanceEntityIcon",Fs.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}}}catch{}const Bs=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return I.useMemo(()=>R(j,{children:[p("div",{children:p(Fs,{entityHeader:e})}),R(j,{children:[p("div",{children:p(et,{title:e.name,placement:"top",enterNextDelay:300,children:p("a",{href:`${Ue.PORTAL}#!Synapse:${n}`,children:e.name})})}),ny(Wp(e.type))&&R("div",{children:[R("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&p("div",{children:"(old version)"})]})]})]}),[e,n])};try{Bs.displayName="EntityNodeLabel",Bs.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}}}catch{}var zs={},J1={get exports(){return zs},set exports(e){zs=e}};(function(e,t){(function(n,r){typeof uo=="function"?e.exports=r():n.pluralize=r()})(co,function(){var n=[],r=[],a={},o={},i={};function s(g){return typeof g=="string"?new RegExp("^"+g+"$","i"):g}function l(g,v){return g===v?v:g===g.toLowerCase()?v.toLowerCase():g===g.toUpperCase()?v.toUpperCase():g[0]===g[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function u(g,v){return g.replace(/\$(\d{1,2})/g,function(S,_){return v[_]||""})}function c(g,v){return g.replace(v[0],function(S,_){var b=u(v[1],arguments);return l(S===""?g[_-1]:S,b)})}function d(g,v,S){if(!g.length||a.hasOwnProperty(g))return v;for(var _=S.length;_--;){var b=S[_];if(b[0].test(v))return c(v,b)}return v}function f(g,v,S){return function(_){var b=_.toLowerCase();return v.hasOwnProperty(b)?l(_,b):g.hasOwnProperty(b)?l(_,g[b]):d(b,_,S)}}function m(g,v,S,_){return function(b){var C=b.toLowerCase();return v.hasOwnProperty(C)?!0:g.hasOwnProperty(C)?!1:d(C,C,S)===C}}function h(g,v,S){var _=v===1?h.singular(g):h.plural(g);return(S?v+" ":"")+_}return h.plural=f(i,o,n),h.isPlural=m(i,o,n),h.singular=f(o,i,r),h.isSingular=m(o,i,r),h.addPluralRule=function(g,v){n.push([s(g),v])},h.addSingularRule=function(g,v){r.push([s(g),v])},h.addUncountableRule=function(g){if(typeof g=="string"){a[g.toLowerCase()]=!0;return}h.addPluralRule(g,"$0"),h.addSingularRule(g,"$0")},h.addIrregularRule=function(g,v){v=v.toLowerCase(),g=g.toLowerCase(),i[g]=v,o[v]=g},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(g){return h.addIrregularRule(g[0],g[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(g){return h.addPluralRule(g[0],g[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(g){return h.addSingularRule(g[0],g[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(J1);const eN=zs,Hs=e=>{const{itemCount:t}=e;return I.useMemo(()=>p(j,{children:R("a",{children:["Show ",t," ",eN("item",t),"…"]})}),[t])};try{Hs.displayName="ExpandGraphNodeLabel",Hs.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}}}catch{}const tN=/^(.+?\.)?github\.com$/,nN=/^(.+?\.)?githubusercontent\.com$/,Us=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:a}=r;return(a.match(tN)||a.match(nN))&&(n="github"),p(ue,{icon:n})};try{Us.displayName="ProvenanceExternalIcon",Us.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const js=e=>I.useMemo(()=>R(j,{children:[p("div",{children:p(Us,{url:e.url})}),p(et,{title:e.name,placement:"top",enterNextDelay:300,children:p("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{js.displayName="ExternalGraphNodeLabel",js.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}}}catch{}var Xo,Ud;function rN(){if(Ud)return Xo;Ud=1;var e=Gy,t=4;function n(r){return e(r,t)}return Xo=n,Xo}var Ba={},aN={get exports(){return Ba},set exports(e){Ba=e}},jd;function lg(){return jd||(jd=1,function(e){e.exports=hh}(aN)),Ba}var Qo,Wd;function oN(){if(Wd)return Qo;Wd=1;var e=mh;function t(n,r){var a=[];return e(n,function(o,i,s){r(o,i,s)&&a.push(o)}),a}return Qo=t,Qo}var Zo,Gd;function cg(){if(Gd)return Zo;Gd=1;var e=lb(),t=oN(),n=gn,r=Dr;function a(o,i){var s=r(o)?e:t;return s(o,n(i))}return Zo=a,Zo}var Ko,Yd;function iN(){if(Yd)return Ko;Yd=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,a){return r!=null&&t.call(r,a)}return Ko=n,Ko}var Jo,Xd;function ug(){if(Xd)return Jo;Xd=1;var e=iN(),t=pb;function n(r,a){return r!=null&&t(r,a,e)}return Jo=n,Jo}var ei,Qd;function dg(){if(Qd)return ei;Qd=1;function e(t){return t===void 0}return ei=e,ei}var ti,Zd;function fg(){if(Zd)return ti;Zd=1;var e=gh,t=gn,n=Jy,r=Dr;function a(o,i){var s=r(o)?e:n;return s(o,t(i))}return ti=a,ti}var ni,Kd;function sN(){if(Kd)return ni;Kd=1;function e(t,n,r,a){var o=-1,i=t==null?0:t.length;for(a&&i&&(r=t[++o]);++o<i;)r=n(r,t[o],o,t);return r}return ni=e,ni}var ri,Jd;function lN(){if(Jd)return ri;Jd=1;function e(t,n,r,a,o){return o(t,function(i,s,l){r=a?(a=!1,i):n(r,i,s,l)}),r}return ri=e,ri}var ai,ef;function pg(){if(ef)return ai;ef=1;var e=sN(),t=mh,n=gn,r=lN(),a=Dr;function o(i,s,l){var u=a(i)?e:r,c=arguments.length<3;return u(i,n(s),l,c,t)}return ai=o,ai}var oi,tf;function cN(){if(tf)return oi;tf=1;var e=cb,t=e("length");return oi=t,oi}var ii,nf;function uN(){if(nf)return ii;nf=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,o="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+a+o+"]");function l(u){return s.test(u)}return ii=l,ii}var si,rf;function dN(){if(rf)return si;rf=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,o="\\ufe0e\\ufe0f",i="["+e+"]",s="["+a+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",h=u+"?",g="["+o+"]?",v="(?:"+m+"(?:"+[c,d,f].join("|")+")"+g+h+")*",S=g+h+v,_="(?:"+[c+s+"?",s,d,f,i].join("|")+")",b=RegExp(l+"(?="+l+")|"+_+S,"g");function C(w){for(var y=b.lastIndex=0;b.test(w);)++y;return y}return si=C,si}var li,af;function fN(){if(af)return li;af=1;var e=cN(),t=uN(),n=dN();function r(a){return t(a)?n(a):e(a)}return li=r,li}var ci,of;function pN(){if(of)return ci;of=1;var e=hb,t=mb,n=vh,r=Nb,a=fN(),o="[object Map]",i="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?a(l):l.length;var u=t(l);return u==o||u==i?l.size:e(l).length}return ci=s,ci}var ui,sf;function hN(){if(sf)return ui;sf=1;var e=Yy,t=Xy,n=ub,r=gn,a=db,o=Dr,i=gb,s=yh,l=vb,u=yb;function c(d,f,m){var h=o(d),g=h||i(d)||u(d);if(f=r(f),m==null){var v=d&&d.constructor;g?m=h?new v:[]:l(d)?m=s(v)?t(a(d)):{}:m={}}return(g?e:n)(d,function(S,_,b){return f(m,S,_,b)}),m}return ui=c,ui}var di,lf;function mN(){if(lf)return di;lf=1;var e=gh;function t(n,r){return e(r,function(a){return n[a]})}return di=t,di}var fi,cf;function hg(){if(cf)return fi;cf=1;var e=mN(),t=fc;function n(r){return r==null?[]:e(r,t(r))}return fi=n,fi}var pi,uf;function at(){if(uf)return pi;uf=1;var e;if(typeof uo=="function")try{e={clone:rN(),constant:ph(),each:lg(),filter:cg(),has:ug(),isArray:Dr,isEmpty:Cb,isFunction:yh,isUndefined:dg(),keys:fc,map:fg(),reduce:pg(),size:pN(),transform:hN(),union:Sb,values:hg()}}catch{}return e||(e=window._),pi=e,pi}var hi,df;function $c(){if(df)return hi;df=1;var e=at();hi=a;var t="\0",n="\0",r="";function a(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(c){return this._label=c,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},a.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},a.prototype.setNodes=function(c,d){var f=arguments,m=this;return e.each(c,function(h){f.length>1?m.setNode(h,d):m.setNode(h)}),this},a.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},a.prototype.node=function(c){return this._nodes[c]},a.prototype.hasNode=function(c){return e.has(this._nodes,c)},a.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},a.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},a.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},a.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},a.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},a.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},a.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},a.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},a.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},a.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(g,v){c(v)&&d.setNode(v,g)}),e.each(this._edgeObjs,function(g){d.hasNode(g.v)&&d.hasNode(g.w)&&d.setEdge(g,f.edge(g))});var m={};function h(g){var v=f.parent(g);return v===void 0||d.hasNode(v)?(m[g]=v,v):v in m?m[v]:h(v)}return this._isCompound&&e.each(d.nodes(),function(g){d.setParent(g,h(g))}),d},a.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(c,d){var f=this,m=arguments;return e.reduce(c,function(h,g){return m.length>1?f.setEdge(h,g,d):f.setEdge(h,g),g}),this},a.prototype.setEdge=function(){var c,d,f,m,h=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,d=g.w,f=g.name,arguments.length===2&&(m=arguments[1],h=!0)):(c=g,d=arguments[1],f=arguments[3],arguments.length>2&&(m=arguments[2],h=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var v=s(this._isDirected,c,d,f);if(e.has(this._edgeLabels,v))return h&&(this._edgeLabels[v]=m),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[v]=h?m:this._defaultEdgeLabelFn(c,d,f);var S=l(this._isDirected,c,d,f);return c=S.v,d=S.w,Object.freeze(S),this._edgeObjs[v]=S,o(this._preds[d],c),o(this._sucs[c],d),this._in[d][v]=S,this._out[c][v]=S,this._edgeCount++,this},a.prototype.edge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return this._edgeLabels[m]},a.prototype.hasEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return e.has(this._edgeLabels,m)},a.prototype.removeEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f),h=this._edgeObjs[m];return h&&(c=h.v,d=h.w,delete this._edgeLabels[m],delete this._edgeObjs[m],i(this._preds[d],c),i(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},a.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var m=e.values(f);return d?e.filter(m,function(h){return h.v===d}):m}},a.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var m=e.values(f);return d?e.filter(m,function(h){return h.w===d}):m}},a.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function o(c,d){c[d]?c[d]++:c[d]=1}function i(c,d){--c[d]||delete c[d]}function s(c,d,f,m){var h=""+d,g=""+f;if(!c&&h>g){var v=h;h=g,g=v}return h+r+g+r+(e.isUndefined(m)?t:m)}function l(c,d,f,m){var h=""+d,g=""+f;if(!c&&h>g){var v=h;h=g,g=v}var S={v:h,w:g};return m&&(S.name=m),S}function u(c,d){return s(c,d.v,d.w,d.name)}return hi}var mi,ff;function gN(){return ff||(ff=1,mi="2.1.8"),mi}var gi,pf;function vN(){return pf||(pf=1,gi={Graph:$c(),version:gN()}),gi}var vi,hf;function yN(){if(hf)return vi;hf=1;var e=at(),t=$c();vi={write:n,read:o};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:a(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var l=i.node(s),u=i.parent(s),c={v:s};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function a(i){return e.map(i.edges(),function(s){var l=i.edge(s),u={v:s.v,w:s.w};return e.isUndefined(s.name)||(u.name=s.name),e.isUndefined(l)||(u.value=l),u})}function o(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(i.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return vi}var yi,mf;function bN(){if(mf)return yi;mf=1;var e=at();yi=t;function t(n){var r={},a=[],o;function i(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){o=[],i(s),o.length&&a.push(o)}),a}return yi}var bi,gf;function mg(){if(gf)return bi;gf=1;var e=at();bi=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var o=this._arr,i=o.length;return a[n]=i,o.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var a=this._keyIndices[n];if(r>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+r);this._arr[a].priority=r,this._decrease(a)},t.prototype._heapify=function(n){var r=this._arr,a=2*n,o=a+1,i=n;a<r.length&&(i=r[a].priority<r[i].priority?a:i,o<r.length&&(i=r[o].priority<r[i].priority?o:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,a=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<a));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var a=this._arr,o=this._keyIndices,i=a[n],s=a[r];a[n]=s,a[r]=i,o[s.key]=n,o[i.key]=r},bi}var wi,vf;function gg(){if(vf)return wi;vf=1;var e=at(),t=mg();wi=r;var n=e.constant(1);function r(o,i,s,l){return a(o,String(i),s||n,l||function(u){return o.outEdges(u)})}function a(o,i,s,l){var u={},c=new t,d,f,m=function(h){var g=h.v!==d?h.v:h.w,v=u[g],S=s(h),_=f.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+S);_<v.distance&&(v.distance=_,v.predecessor=d,c.decrease(g,_))};for(o.nodes().forEach(function(h){var g=h===i?0:Number.POSITIVE_INFINITY;u[h]={distance:g},c.add(h,g)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return wi}var Ci,yf;function wN(){if(yf)return Ci;yf=1;var e=gg(),t=at();Ci=n;function n(r,a,o){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,a,o)},{})}return Ci}var Si,bf;function vg(){if(bf)return Si;bf=1;var e=at();Si=t;function t(n){var r=0,a=[],o={},i=[];function s(l){var u=o[l]={onStack:!0,lowlink:r,index:r++};if(a.push(l),n.successors(l).forEach(function(f){e.has(o,f)?o[f].onStack&&(u.lowlink=Math.min(u.lowlink,o[f].index)):(s(f),u.lowlink=Math.min(u.lowlink,o[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=a.pop(),o[d].onStack=!1,c.push(d);while(l!==d);i.push(c)}}return n.nodes().forEach(function(l){e.has(o,l)||s(l)}),i}return Si}var Ei,wf;function CN(){if(wf)return Ei;wf=1;var e=at(),t=vg();Ei=n;function n(r){return e.filter(t(r),function(a){return a.length>1||a.length===1&&r.hasEdge(a[0],a[0])})}return Ei}var _i,Cf;function SN(){if(Cf)return _i;Cf=1;var e=at();_i=n;var t=e.constant(1);function n(a,o,i){return r(a,o||t,i||function(s){return a.outEdges(s)})}function r(a,o,i){var s={},l=a.nodes();return l.forEach(function(u){s[u]={},s[u][u]={distance:0},l.forEach(function(c){u!==c&&(s[u][c]={distance:Number.POSITIVE_INFINITY})}),i(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=o(c);s[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=s[u];l.forEach(function(d){var f=s[d];l.forEach(function(m){var h=f[u],g=c[m],v=f[m],S=h.distance+g.distance;S<v.distance&&(v.distance=S,v.predecessor=g.predecessor)})})}),s}return _i}var xi,Sf;function yg(){if(Sf)return xi;Sf=1;var e=at();xi=t,t.CycleException=n;function t(r){var a={},o={},i=[];function s(l){if(e.has(o,l))throw new n;e.has(a,l)||(o[l]=!0,a[l]=!0,e.each(r.predecessors(l),s),delete o[l],i.push(l))}if(e.each(r.sinks(),s),e.size(a)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,xi}var Ni,Ef;function EN(){if(Ef)return Ni;Ef=1;var e=yg();Ni=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Ni}var Ii,_f;function bg(){if(_f)return Ii;_f=1;var e=at();Ii=t;function t(r,a,o){e.isArray(a)||(a=[a]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return e.each(a,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,o==="post",l,i,s)}),s}function n(r,a,o,i,s,l){e.has(i,a)||(i[a]=!0,o||l.push(a),e.each(s(a),function(u){n(r,u,o,i,s,l)}),o&&l.push(a))}return Ii}var Ti,xf;function _N(){if(xf)return Ti;xf=1;var e=bg();Ti=t;function t(n,r){return e(n,r,"post")}return Ti}var ki,Nf;function xN(){if(Nf)return ki;Nf=1;var e=bg();ki=t;function t(n,r){return e(n,r,"pre")}return ki}var Oi,If;function NN(){if(If)return Oi;If=1;var e=at(),t=$c(),n=mg();Oi=r;function r(a,o){var i=new t,s={},l=new n,u;function c(f){var m=f.v===u?f.w:f.v,h=l.priority(m);if(h!==void 0){var g=o(f);g<h&&(s[m]=u,l.decrease(m,g))}}if(a.nodeCount()===0)return i;e.each(a.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),i.setNode(f)}),l.decrease(a.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(s,u))i.setEdge(u,s[u]);else{if(d)throw new Error("Input graph is not connected: "+a);d=!0}a.nodeEdges(u).forEach(c)}return i}return Oi}var Ri,Tf;function IN(){return Tf||(Tf=1,Ri={components:bN(),dijkstra:gg(),dijkstraAll:wN(),findCycles:CN(),floydWarshall:SN(),isAcyclic:EN(),postorder:_N(),preorder:xN(),prim:NN(),tarjan:vg(),topsort:yg()}),Ri}var Ai,kf;function TN(){if(kf)return Ai;kf=1;var e=vN();return Ai={Graph:e.Graph,json:yN(),alg:IN(),version:e.version},Ai}var za;if(typeof uo=="function")try{za=TN()}catch{}za||(za=window.graphlib);var ft=za,qi,Of;function kN(){if(Of)return qi;Of=1;var e=gn,t=vh,n=fc;function r(a){return function(o,i,s){var l=Object(o);if(!t(o)){var u=e(i);o=n(o),i=function(d){return u(l[d],d,l)}}var c=a(o,i,s);return c>-1?l[u?o[c]:c]:void 0}}return qi=r,qi}var Li,Rf;function wg(){if(Rf)return Li;Rf=1;var e=kb,t=1/0,n=17976931348623157e292;function r(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var o=a<0?-1:1;return o*n}return a===a?a:0}return Li=r,Li}var Pi,Af;function ON(){if(Af)return Pi;Af=1;var e=wg();function t(n){var r=e(n),a=r%1;return r===r?a?r-a:r:0}return Pi=t,Pi}var Di,qf;function RN(){if(qf)return Di;qf=1;var e=Ib,t=gn,n=ON(),r=Math.max;function a(o,i,s){var l=o==null?0:o.length;if(!l)return-1;var u=s==null?0:n(s);return u<0&&(u=r(l+u,0)),e(o,t(i),u)}return Di=a,Di}var Mi,Lf;function AN(){if(Lf)return Mi;Lf=1;var e=kN(),t=RN(),n=e(t);return Mi=n,Mi}var Vi,Pf;function qN(){if(Pf)return Vi;Pf=1;var e=fb,t=eb,n=Qy;function r(a,o){return a==null?a:e(a,t(o),n)}return Vi=r,Vi}var $i,Df;function Fc(){if(Df)return $i;Df=1;var e=bb;function t(n,r,a){for(var o=-1,i=n.length;++o<i;){var s=n[o],l=r(s);if(l!=null&&(u===void 0?l===l&&!e(l):a(l,u)))var u=l,c=s}return c}return $i=t,$i}var Fi,Mf;function LN(){if(Mf)return Fi;Mf=1;function e(t,n){return t>n}return Fi=e,Fi}var Bi,Vf;function PN(){if(Vf)return Bi;Vf=1;var e=Fc(),t=LN(),n=bh;function r(a){return a&&a.length?e(a,n,t):void 0}return Bi=r,Bi}var zi,$f;function DN(){if($f)return zi;$f=1;var e=nb,t=tb,n=t(function(r,a,o){e(r,a,o)});return zi=n,zi}var Hi,Ff;function Cg(){if(Ff)return Hi;Ff=1;function e(t,n){return t<n}return Hi=e,Hi}var Ui,Bf;function MN(){if(Bf)return Ui;Bf=1;var e=Fc(),t=Cg(),n=bh;function r(a){return a&&a.length?e(a,n,t):void 0}return Ui=r,Ui}var ji,zf;function VN(){if(zf)return ji;zf=1;var e=Fc(),t=gn,n=Cg();function r(a,o){return a&&a.length?e(a,t(o),n):void 0}return ji=r,ji}var Wi,Hf;function $N(){if(Hf)return Wi;Hf=1;var e=Math.ceil,t=Math.max;function n(r,a,o,i){for(var s=-1,l=t(e((a-r)/(o||1)),0),u=Array(l);l--;)u[i?l:++s]=r,r+=o;return u}return Wi=n,Wi}var Gi,Uf;function FN(){if(Uf)return Gi;Uf=1;var e=$N(),t=rb,n=wg();function r(a){return function(o,i,s){return s&&typeof s!="number"&&t(o,i,s)&&(i=s=void 0),o=n(o),i===void 0?(i=o,o=0):i=n(i),s=s===void 0?o<i?1:-1:n(s),e(o,i,s,a)}}return Gi=r,Gi}var Yi,jf;function BN(){if(jf)return Yi;jf=1;var e=FN(),t=e();return Yi=t,Yi}var Xi,Wf;function zN(){if(Wf)return Xi;Wf=1;var e=wb,t=0;function n(r){var a=++t;return e(r)+a}return Xi=n,Xi}var Qi,Gf;function HN(){if(Gf)return Qi;Gf=1;function e(t,n,r){for(var a=-1,o=t.length,i=n.length,s={};++a<o;){var l=a<i?n[a]:void 0;r(s,t[a],l)}return s}return Qi=e,Qi}var Zi,Yf;function UN(){if(Yf)return Zi;Yf=1;var e=Tb,t=HN();function n(r,a){return t(r||[],a||[],e)}return Zi=n,Zi}var Ha;if(typeof uo=="function")try{Ha={cloneDeep:Zy,constant:ph(),defaults:ab,each:lg(),filter:cg(),find:AN(),flatten:Ky,forEach:hh,forIn:qN(),has:ug(),isUndefined:dg(),last:ob,map:fg(),mapValues:Rb,max:PN(),merge:DN(),min:MN(),minBy:VN(),now:Ob(),pick:Eb,range:BN(),reduce:pg(),sortBy:ib,uniqueId:zN(),values:hg(),zipObject:UN()}}catch{}Ha||(Ha=window._);var ye=Ha,jN=_o;function _o(){var e={};e._next=e._prev=e,this._sentinel=e}_o.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Sg(t),t};_o.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Sg(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};_o.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,WN)),n=n._prev;return"["+e.join(", ")+"]"};function Sg(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function WN(e,t){if(e!=="_next"&&e!=="_prev")return t}var It=ye,GN=ft.Graph,YN=jN,XN=ZN,QN=It.constant(1);function ZN(e,t){if(e.nodeCount()<=1)return[];var n=JN(e,t||QN),r=KN(n.graph,n.buckets,n.zeroIdx);return It.flatten(It.map(r,function(a){return e.outEdges(a.v,a.w)}),!0)}function KN(e,t,n){for(var r=[],a=t[t.length-1],o=t[0],i;e.nodeCount();){for(;i=o.dequeue();)Ki(e,t,n,i);for(;i=a.dequeue();)Ki(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(Ki(e,t,n,i,!0));break}}}return r}function Ki(e,t,n,r,a){var o=a?[]:void 0;return It.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),l=e.node(i.v);a&&o.push({v:i.v,w:i.w}),l.out-=s,Ws(t,n,l)}),It.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),l=i.w,u=e.node(l);u.in-=s,Ws(t,n,u)}),e.removeNode(r.v),o}function JN(e,t){var n=new GN,r=0,a=0;It.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),It.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,u=t(s),c=l+u;n.setEdge(s.v,s.w,c),a=Math.max(a,n.node(s.v).out+=u),r=Math.max(r,n.node(s.w).in+=u)});var o=It.range(a+r+3).map(function(){return new YN}),i=r+1;return It.forEach(n.nodes(),function(s){Ws(o,i,n.node(s))}),{graph:n,buckets:o,zeroIdx:i}}function Ws(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var tn=ye,eI=XN,tI={run:nI,undo:aI};function nI(e){var t=e.graph().acyclicer==="greedy"?eI(e,n(e)):rI(e);tn.forEach(t,function(r){var a=e.edge(r);e.removeEdge(r),a.forwardName=r.name,a.reversed=!0,e.setEdge(r.w,r.v,a,tn.uniqueId("rev"))});function n(r){return function(a){return r.edge(a).weight}}}function rI(e){var t=[],n={},r={};function a(o){tn.has(r,o)||(r[o]=!0,n[o]=!0,tn.forEach(e.outEdges(o),function(i){tn.has(n,i.w)?t.push(i):a(i.w)}),delete n[o])}return tn.forEach(e.nodes(),a),t}function aI(e){tn.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var de=ye,Eg=ft.Graph,Fe={addDummyNode:_g,simplify:oI,asNonCompoundGraph:iI,successorWeights:sI,predecessorWeights:lI,intersectRect:cI,buildLayerMatrix:uI,normalizeRanks:dI,removeEmptyRanks:fI,addBorderNode:pI,maxRank:xg,partition:hI,time:mI,notime:gI};function _g(e,t,n,r){var a;do a=de.uniqueId(r);while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function oI(e){var t=new Eg().setGraph(e.graph());return de.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},a=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+a.weight,minlen:Math.max(r.minlen,a.minlen)})}),t}function iI(e){var t=new Eg({multigraph:e.isMultigraph()}).setGraph(e.graph());return de.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function sI(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.outEdges(n),function(a){r[a.w]=(r[a.w]||0)+e.edge(a).weight}),r});return de.zipObject(e.nodes(),t)}function lI(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.inEdges(n),function(a){r[a.v]=(r[a.v]||0)+e.edge(a).weight}),r});return de.zipObject(e.nodes(),t)}function cI(e,t){var n=e.x,r=e.y,a=t.x-n,o=t.y-r,i=e.width/2,s=e.height/2;if(!a&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(o)*i>Math.abs(a)*s?(o<0&&(s=-s),l=s*a/o,u=s):(a<0&&(i=-i),l=i,u=i*o/a),{x:n+l,y:r+u}}function uI(e){var t=de.map(de.range(xg(e)+1),function(){return[]});return de.forEach(e.nodes(),function(n){var r=e.node(n),a=r.rank;de.isUndefined(a)||(t[a][r.order]=n)}),t}function dI(e){var t=de.min(de.map(e.nodes(),function(n){return e.node(n).rank}));de.forEach(e.nodes(),function(n){var r=e.node(n);de.has(r,"rank")&&(r.rank-=t)})}function fI(e){var t=de.min(de.map(e.nodes(),function(o){return e.node(o).rank})),n=[];de.forEach(e.nodes(),function(o){var i=e.node(o).rank-t;n[i]||(n[i]=[]),n[i].push(o)});var r=0,a=e.graph().nodeRankFactor;de.forEach(n,function(o,i){de.isUndefined(o)&&i%a!==0?--r:r&&de.forEach(o,function(s){e.node(s).rank+=r})})}function pI(e,t,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),_g(e,"border",a,t)}function xg(e){return de.max(de.map(e.nodes(),function(t){var n=e.node(t).rank;if(!de.isUndefined(n))return n}))}function hI(e,t){var n={lhs:[],rhs:[]};return de.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function mI(e,t){var n=de.now();try{return t()}finally{console.log(e+" time: "+(de.now()-n)+"ms")}}function gI(e,t){return t()}var Ng=ye,vI=Fe,yI={run:bI,undo:CI};function bI(e){e.graph().dummyChains=[],Ng.forEach(e.edges(),function(t){wI(e,t)})}function wI(e,t){var n=t.v,r=e.node(n).rank,a=t.w,o=e.node(a).rank,i=t.name,s=e.edge(t),l=s.labelRank;if(o!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<o;++d,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},u=vI.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,u,{weight:s.weight},i),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,a,{weight:s.weight},i)}}function CI(e){Ng.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,a;for(e.setEdge(n.edgeObj,r);n.dummy;)a=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=a,n=e.node(t)})}var la=ye,xo={longestPath:SI,slack:EI};function SI(e){var t={};function n(r){var a=e.node(r);if(la.has(t,r))return a.rank;t[r]=!0;var o=la.min(la.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),a.rank=o}la.forEach(e.sources(),n)}function EI(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Ua=ye,_I=ft.Graph,ja=xo.slack,Ig=xI;function xI(e){var t=new _I({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var a,o;NI(t,e)<r;)a=II(t,e),o=t.hasNode(a.v)?ja(e,a):-ja(e,a),TI(t,e,o);return t}function NI(e,t){function n(r){Ua.forEach(t.nodeEdges(r),function(a){var o=a.v,i=r===o?a.w:o;!e.hasNode(i)&&!ja(t,a)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return Ua.forEach(e.nodes(),n),e.nodeCount()}function II(e,t){return Ua.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return ja(t,n)})}function TI(e,t,n){Ua.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Lt=ye,kI=Ig,OI=xo.slack,RI=xo.longestPath,AI=ft.alg.preorder,qI=ft.alg.postorder,LI=Fe.simplify,PI=bn;bn.initLowLimValues=zc;bn.initCutValues=Bc;bn.calcCutValue=Tg;bn.leaveEdge=Og;bn.enterEdge=Rg;bn.exchangeEdges=Ag;function bn(e){e=LI(e),RI(e);var t=kI(e);zc(t),Bc(t,e);for(var n,r;n=Og(t);)r=Rg(t,e,n),Ag(t,e,n,r)}function Bc(e,t){var n=qI(e,e.nodes());n=n.slice(0,n.length-1),Lt.forEach(n,function(r){DI(e,t,r)})}function DI(e,t,n){var r=e.node(n),a=r.parent;e.edge(n,a).cutvalue=Tg(e,t,n)}function Tg(e,t,n){var r=e.node(n),a=r.parent,o=!0,i=t.edge(n,a),s=0;return i||(o=!1,i=t.edge(a,n)),s=i.weight,Lt.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==a){var d=u===o,f=t.edge(l).weight;if(s+=d?f:-f,VI(e,n,c)){var m=e.edge(n,c).cutvalue;s+=d?-m:m}}}),s}function zc(e,t){arguments.length<2&&(t=e.nodes()[0]),kg(e,{},1,t)}function kg(e,t,n,r,a){var o=n,i=e.node(r);return t[r]=!0,Lt.forEach(e.neighbors(r),function(s){Lt.has(t,s)||(n=kg(e,t,n,s,r))}),i.low=o,i.lim=n++,a?i.parent=a:delete i.parent,n}function Og(e){return Lt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Rg(e,t,n){var r=n.v,a=n.w;t.hasEdge(r,a)||(r=n.w,a=n.v);var o=e.node(r),i=e.node(a),s=o,l=!1;o.lim>i.lim&&(s=i,l=!0);var u=Lt.filter(t.edges(),function(c){return l===Xf(e,e.node(c.v),s)&&l!==Xf(e,e.node(c.w),s)});return Lt.minBy(u,function(c){return OI(t,c)})}function Ag(e,t,n,r){var a=n.v,o=n.w;e.removeEdge(a,o),e.setEdge(r.v,r.w,{}),zc(e),Bc(e,t),MI(e,t)}function MI(e,t){var n=Lt.find(e.nodes(),function(a){return!t.node(a).parent}),r=AI(e,n);r=r.slice(1),Lt.forEach(r,function(a){var o=e.node(a).parent,i=t.edge(a,o),s=!1;i||(i=t.edge(o,a),s=!0),t.node(a).rank=t.node(o).rank+(s?i.minlen:-i.minlen)})}function VI(e,t,n){return e.hasEdge(t,n)}function Xf(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var $I=xo,qg=$I.longestPath,FI=Ig,BI=PI,zI=HI;function HI(e){switch(e.graph().ranker){case"network-simplex":Qf(e);break;case"tight-tree":jI(e);break;case"longest-path":UI(e);break;default:Qf(e)}}var UI=qg;function jI(e){qg(e),FI(e)}function Qf(e){BI(e)}var Gs=ye,WI=GI;function GI(e){var t=XI(e);Gs.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),a=r.edgeObj,o=YI(e,t,a.v,a.w),i=o.path,s=o.lca,l=0,u=i[l],c=!0;n!==a.w;){if(r=e.node(n),c){for(;(u=i[l])!==s&&e.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<i.length-1&&e.node(u=i[l+1]).minRank<=r.rank;)l++;u=i[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function YI(e,t,n,r){var a=[],o=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),a.push(l);while(l&&(t[l].low>i||s>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)o.push(l);return{path:a.concat(o.reverse()),lca:u}}function XI(e){var t={},n=0;function r(a){var o=n;Gs.forEach(e.children(a),r),t[a]={low:o,lim:n++}}return Gs.forEach(e.children(),r),t}var Tt=ye,Ys=Fe,QI={run:ZI,cleanup:eT};function ZI(e){var t=Ys.addDummyNode(e,"root",{},"_root"),n=KI(e),r=Tt.max(Tt.values(n))-1,a=2*r+1;e.graph().nestingRoot=t,Tt.forEach(e.edges(),function(i){e.edge(i).minlen*=a});var o=JI(e)+1;Tt.forEach(e.children(),function(i){Lg(e,t,a,o,r,n,i)}),e.graph().nodeRankFactor=a}function Lg(e,t,n,r,a,o,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var l=Ys.addBorderNode(e,"_bt"),u=Ys.addBorderNode(e,"_bb"),c=e.node(i);e.setParent(l,i),c.borderTop=l,e.setParent(u,i),c.borderBottom=u,Tt.forEach(s,function(d){Lg(e,t,n,r,a,o,d);var f=e.node(d),m=f.borderTop?f.borderTop:d,h=f.borderBottom?f.borderBottom:d,g=f.borderTop?r:2*r,v=m!==h?1:a-o[i]+1;e.setEdge(l,m,{weight:g,minlen:v,nestingEdge:!0}),e.setEdge(h,u,{weight:g,minlen:v,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,l,{weight:0,minlen:a+o[i]})}function KI(e){var t={};function n(r,a){var o=e.children(r);o&&o.length&&Tt.forEach(o,function(i){n(i,a+1)}),t[r]=a}return Tt.forEach(e.children(),function(r){n(r,1)}),t}function JI(e){return Tt.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function eT(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Tt.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Ji=ye,tT=Fe,nT=rT;function rT(e){function t(n){var r=e.children(n),a=e.node(n);if(r.length&&Ji.forEach(r,t),Ji.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,i=a.maxRank+1;o<i;++o)Zf(e,"borderLeft","_bl",n,a,o),Zf(e,"borderRight","_br",n,a,o)}}Ji.forEach(e.children(),t)}function Zf(e,t,n,r,a,o){var i={width:0,height:0,rank:o,borderType:t},s=a[t][o-1],l=tT.addDummyNode(e,"border",i,n);a[t][o]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}var gt=ye,aT={adjust:oT,undo:iT};function oT(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Pg(e)}function iT(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&sT(e),(t==="lr"||t==="rl")&&(lT(e),Pg(e))}function Pg(e){gt.forEach(e.nodes(),function(t){Kf(e.node(t))}),gt.forEach(e.edges(),function(t){Kf(e.edge(t))})}function Kf(e){var t=e.width;e.width=e.height,e.height=t}function sT(e){gt.forEach(e.nodes(),function(t){es(e.node(t))}),gt.forEach(e.edges(),function(t){var n=e.edge(t);gt.forEach(n.points,es),gt.has(n,"y")&&es(n)})}function es(e){e.y=-e.y}function lT(e){gt.forEach(e.nodes(),function(t){ts(e.node(t))}),gt.forEach(e.edges(),function(t){var n=e.edge(t);gt.forEach(n.points,ts),gt.has(n,"x")&&ts(n)})}function ts(e){var t=e.x;e.x=e.y,e.y=t}var Et=ye,cT=uT;function uT(e){var t={},n=Et.filter(e.nodes(),function(s){return!e.children(s).length}),r=Et.max(Et.map(n,function(s){return e.node(s).rank})),a=Et.map(Et.range(r+1),function(){return[]});function o(s){if(!Et.has(t,s)){t[s]=!0;var l=e.node(s);a[l.rank].push(s),Et.forEach(e.successors(s),o)}}var i=Et.sortBy(n,function(s){return e.node(s).rank});return Et.forEach(i,o),a}var Bt=ye,dT=fT;function fT(e,t){for(var n=0,r=1;r<t.length;++r)n+=pT(e,t[r-1],t[r]);return n}function pT(e,t,n){for(var r=Bt.zipObject(n,Bt.map(n,function(u,c){return c})),a=Bt.flatten(Bt.map(t,function(u){return Bt.sortBy(Bt.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var i=2*o-1;o-=1;var s=Bt.map(new Array(i),function(){return 0}),l=0;return Bt.forEach(a.forEach(function(u){var c=u.pos+o;s[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=u.weight;l+=u.weight*d})),l}var Jf=ye,hT=mT;function mT(e,t){return Jf.map(t,function(n){var r=e.inEdges(n);if(r.length){var a=Jf.reduce(r,function(o,i){var s=e.edge(i),l=e.node(i.v);return{sum:o.sum+s.weight*l.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:n}})}var Be=ye,gT=vT;function vT(e,t){var n={};Be.forEach(e,function(a,o){var i=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};Be.isUndefined(a.barycenter)||(i.barycenter=a.barycenter,i.weight=a.weight)}),Be.forEach(t.edges(),function(a){var o=n[a.v],i=n[a.w];!Be.isUndefined(o)&&!Be.isUndefined(i)&&(i.indegree++,o.out.push(n[a.w]))});var r=Be.filter(n,function(a){return!a.indegree});return yT(r)}function yT(e){var t=[];function n(o){return function(i){i.merged||(Be.isUndefined(i.barycenter)||Be.isUndefined(o.barycenter)||i.barycenter>=o.barycenter)&&bT(o,i)}}function r(o){return function(i){i.in.push(o),--i.indegree===0&&e.push(i)}}for(;e.length;){var a=e.pop();t.push(a),Be.forEach(a.in.reverse(),n(a)),Be.forEach(a.out,r(a))}return Be.map(Be.filter(t,function(o){return!o.merged}),function(o){return Be.pick(o,["vs","i","barycenter","weight"])})}function bT(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var ur=ye,wT=Fe,CT=ST;function ST(e,t){var n=wT.partition(e,function(c){return ur.has(c,"barycenter")}),r=n.lhs,a=ur.sortBy(n.rhs,function(c){return-c.i}),o=[],i=0,s=0,l=0;r.sort(ET(!!t)),l=ep(o,a,l),ur.forEach(r,function(c){l+=c.vs.length,o.push(c.vs),i+=c.barycenter*c.weight,s+=c.weight,l=ep(o,a,l)});var u={vs:ur.flatten(o,!0)};return s&&(u.barycenter=i/s,u.weight=s),u}function ep(e,t,n){for(var r;t.length&&(r=ur.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function ET(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Wt=ye,_T=hT,xT=gT,NT=CT,IT=Dg;function Dg(e,t,n,r){var a=e.children(t),o=e.node(t),i=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,l={};i&&(a=Wt.filter(a,function(h){return h!==i&&h!==s}));var u=_T(e,a);Wt.forEach(u,function(h){if(e.children(h.v).length){var g=Dg(e,h.v,n,r);l[h.v]=g,Wt.has(g,"barycenter")&&kT(h,g)}});var c=xT(u,n);TT(c,l);var d=NT(c,r);if(i&&(d.vs=Wt.flatten([i,d.vs,s],!0),e.predecessors(i).length)){var f=e.node(e.predecessors(i)[0]),m=e.node(e.predecessors(s)[0]);Wt.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+m.order)/(d.weight+2),d.weight+=2}return d}function TT(e,t){Wt.forEach(e,function(n){n.vs=Wt.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function kT(e,t){Wt.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var dr=ye,OT=ft.Graph,RT=AT;function AT(e,t,n){var r=qT(e),a=new OT({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return e.node(o)});return dr.forEach(e.nodes(),function(o){var i=e.node(o),s=e.parent(o);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(a.setNode(o),a.setParent(o,s||r),dr.forEach(e[n](o),function(l){var u=l.v===o?l.w:l.v,c=a.edge(u,o),d=dr.isUndefined(c)?0:c.weight;a.setEdge(u,o,{weight:e.edge(l).weight+d})}),dr.has(i,"minRank")&&a.setNode(o,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),a}function qT(e){for(var t;e.hasNode(t=dr.uniqueId("_root")););return t}var LT=ye,PT=DT;function DT(e,t,n){var r={},a;LT.forEach(n,function(o){for(var i=e.parent(o),s,l;i;){if(s=e.parent(i),s?(l=r[s],r[s]=i):(l=a,a=i),l&&l!==i){t.setEdge(l,i);return}i=s}})}var Gt=ye,MT=cT,VT=dT,$T=IT,FT=RT,BT=PT,zT=ft.Graph,tp=Fe,HT=UT;function UT(e){var t=tp.maxRank(e),n=np(e,Gt.range(1,t+1),"inEdges"),r=np(e,Gt.range(t-1,-1,-1),"outEdges"),a=MT(e);rp(e,a);for(var o=Number.POSITIVE_INFINITY,i,s=0,l=0;l<4;++s,++l){jT(s%2?n:r,s%4>=2),a=tp.buildLayerMatrix(e);var u=VT(e,a);u<o&&(l=0,i=Gt.cloneDeep(a),o=u)}rp(e,i)}function np(e,t,n){return Gt.map(t,function(r){return FT(e,r,n)})}function jT(e,t){var n=new zT;Gt.forEach(e,function(r){var a=r.graph().root,o=$T(r,a,n,t);Gt.forEach(o.vs,function(i,s){r.node(i).order=s}),BT(r,n,o.vs)})}function rp(e,t){Gt.forEach(t,function(n){Gt.forEach(n,function(r,a){e.node(r).order=a})})}var ee=ye,WT=ft.Graph,GT=Fe,YT={positionX:ZT,findType1Conflicts:Mg,findType2Conflicts:Vg,addConflict:Hc,hasConflict:$g,verticalAlignment:Fg,horizontalCompaction:Bg,alignCoordinates:Hg,findSmallestWidthAlignment:zg,balance:Ug};function Mg(e,t){var n={};function r(a,o){var i=0,s=0,l=a.length,u=ee.last(o);return ee.forEach(o,function(c,d){var f=XT(e,c),m=f?e.node(f).order:l;(f||c===u)&&(ee.forEach(o.slice(s,d+1),function(h){ee.forEach(e.predecessors(h),function(g){var v=e.node(g),S=v.order;(S<i||m<S)&&!(v.dummy&&e.node(h).dummy)&&Hc(n,g,h)})}),s=d+1,i=m)}),o}return ee.reduce(t,r),n}function Vg(e,t){var n={};function r(o,i,s,l,u){var c;ee.forEach(ee.range(i,s),function(d){c=o[d],e.node(c).dummy&&ee.forEach(e.predecessors(c),function(f){var m=e.node(f);m.dummy&&(m.order<l||m.order>u)&&Hc(n,f,c)})})}function a(o,i){var s=-1,l,u=0;return ee.forEach(i,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,r(i,u,d,s,l),u=d,s=l)}r(i,u,i.length,l,o.length)}),i}return ee.reduce(t,a),n}function XT(e,t){if(e.node(t).dummy)return ee.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Hc(e,t,n){if(t>n){var r=t;t=n,n=r}var a=e[t];a||(e[t]=a={}),a[n]=!0}function $g(e,t,n){if(t>n){var r=t;t=n,n=r}return ee.has(e[t],n)}function Fg(e,t,n,r){var a={},o={},i={};return ee.forEach(t,function(s){ee.forEach(s,function(l,u){a[l]=l,o[l]=l,i[l]=u})}),ee.forEach(t,function(s){var l=-1;ee.forEach(s,function(u){var c=r(u);if(c.length){c=ee.sortBy(c,function(g){return i[g]});for(var d=(c.length-1)/2,f=Math.floor(d),m=Math.ceil(d);f<=m;++f){var h=c[f];o[u]===u&&l<i[h]&&!$g(n,u,h)&&(o[h]=u,o[u]=a[u]=a[h],l=i[h])}}})}),{root:a,align:o}}function Bg(e,t,n,r,a){var o={},i=QT(e,t,n,a),s=a?"borderLeft":"borderRight";function l(d,f){for(var m=i.nodes(),h=m.pop(),g={};h;)g[h]?d(h):(g[h]=!0,m.push(h),m=m.concat(f(h))),h=m.pop()}function u(d){o[d]=i.inEdges(d).reduce(function(f,m){return Math.max(f,o[m.v]+i.edge(m))},0)}function c(d){var f=i.outEdges(d).reduce(function(h,g){return Math.min(h,o[g.w]-i.edge(g))},Number.POSITIVE_INFINITY),m=e.node(d);f!==Number.POSITIVE_INFINITY&&m.borderType!==s&&(o[d]=Math.max(o[d],f))}return l(u,i.predecessors.bind(i)),l(c,i.successors.bind(i)),ee.forEach(r,function(d){o[d]=o[n[d]]}),o}function QT(e,t,n,r){var a=new WT,o=e.graph(),i=KT(o.nodesep,o.edgesep,r);return ee.forEach(t,function(s){var l;ee.forEach(s,function(u){var c=n[u];if(a.setNode(c),l){var d=n[l],f=a.edge(d,c);a.setEdge(d,c,Math.max(i(e,u,l),f||0))}l=u})}),a}function zg(e,t){return ee.minBy(ee.values(t),function(n){var r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return ee.forIn(n,function(o,i){var s=JT(e,i)/2;r=Math.max(o+s,r),a=Math.min(o-s,a)}),r-a})}function Hg(e,t){var n=ee.values(t),r=ee.min(n),a=ee.max(n);ee.forEach(["u","d"],function(o){ee.forEach(["l","r"],function(i){var s=o+i,l=e[s],u;if(l!==t){var c=ee.values(l);u=i==="l"?r-ee.min(c):a-ee.max(c),u&&(e[s]=ee.mapValues(l,function(d){return d+u}))}})})}function Ug(e,t){return ee.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var a=ee.sortBy(ee.map(e,r));return(a[1]+a[2])/2})}function ZT(e){var t=GT.buildLayerMatrix(e),n=ee.merge(Mg(e,t),Vg(e,t)),r={},a;ee.forEach(["u","d"],function(i){a=i==="u"?t:ee.values(t).reverse(),ee.forEach(["l","r"],function(s){s==="r"&&(a=ee.map(a,function(d){return ee.values(d).reverse()}));var l=(i==="u"?e.predecessors:e.successors).bind(e),u=Fg(e,a,n,l),c=Bg(e,a,u.root,u.align,s==="r");s==="r"&&(c=ee.mapValues(c,function(d){return-d})),r[i+s]=c})});var o=zg(e,r);return Hg(r,o),Ug(r,e.graph().align)}function KT(e,t,n){return function(r,a,o){var i=r.node(a),s=r.node(o),l=0,u;if(l+=i.width/2,ee.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":u=-i.width/2;break;case"r":u=i.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(i.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,ee.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function JT(e,t){return e.node(t).width}var fr=ye,jg=Fe,ek=YT.positionX,tk=nk;function nk(e){e=jg.asNonCompoundGraph(e),rk(e),fr.forEach(ek(e),function(t,n){e.node(n).x=t})}function rk(e){var t=jg.buildLayerMatrix(e),n=e.graph().ranksep,r=0;fr.forEach(t,function(a){var o=fr.max(fr.map(a,function(i){return e.node(i).height}));fr.forEach(a,function(i){e.node(i).y=r+o/2}),r+=o+n})}var ae=ye,ap=tI,op=yI,ak=zI,ok=Fe.normalizeRanks,ik=WI,sk=Fe.removeEmptyRanks,ip=QI,lk=nT,sp=aT,ck=HT,uk=tk,Qt=Fe,dk=ft.Graph,fk=pk;function pk(e,t){var n=t&&t.debugTiming?Qt.time:Qt.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return _k(e)});n("  runLayout",function(){hk(r,n)}),n("  updateInputGraph",function(){mk(e,r)})})}function hk(e,t){t("    makeSpaceForEdgeLabels",function(){xk(e)}),t("    removeSelfEdges",function(){Lk(e)}),t("    acyclic",function(){ap.run(e)}),t("    nestingGraph.run",function(){ip.run(e)}),t("    rank",function(){ak(Qt.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){Nk(e)}),t("    removeEmptyRanks",function(){sk(e)}),t("    nestingGraph.cleanup",function(){ip.cleanup(e)}),t("    normalizeRanks",function(){ok(e)}),t("    assignRankMinMax",function(){Ik(e)}),t("    removeEdgeLabelProxies",function(){Tk(e)}),t("    normalize.run",function(){op.run(e)}),t("    parentDummyChains",function(){ik(e)}),t("    addBorderSegments",function(){lk(e)}),t("    order",function(){ck(e)}),t("    insertSelfEdges",function(){Pk(e)}),t("    adjustCoordinateSystem",function(){sp.adjust(e)}),t("    position",function(){uk(e)}),t("    positionSelfEdges",function(){Dk(e)}),t("    removeBorderNodes",function(){qk(e)}),t("    normalize.undo",function(){op.undo(e)}),t("    fixupEdgeLabelCoords",function(){Rk(e)}),t("    undoCoordinateSystem",function(){sp.undo(e)}),t("    translateGraph",function(){kk(e)}),t("    assignNodeIntersects",function(){Ok(e)}),t("    reversePoints",function(){Ak(e)}),t("    acyclic.undo",function(){ap.undo(e)})}function mk(e,t){ae.forEach(e.nodes(),function(n){var r=e.node(n),a=t.node(n);r&&(r.x=a.x,r.y=a.y,t.children(n).length&&(r.width=a.width,r.height=a.height))}),ae.forEach(e.edges(),function(n){var r=e.edge(n),a=t.edge(n);r.points=a.points,ae.has(a,"x")&&(r.x=a.x,r.y=a.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var gk=["nodesep","edgesep","ranksep","marginx","marginy"],vk={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},yk=["acyclicer","ranker","rankdir","align"],bk=["width","height"],wk={width:0,height:0},Ck=["minlen","weight","width","height","labeloffset"],Sk={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ek=["labelpos"];function _k(e){var t=new dk({multigraph:!0,compound:!0}),n=rs(e.graph());return t.setGraph(ae.merge({},vk,ns(n,gk),ae.pick(n,yk))),ae.forEach(e.nodes(),function(r){var a=rs(e.node(r));t.setNode(r,ae.defaults(ns(a,bk),wk)),t.setParent(r,e.parent(r))}),ae.forEach(e.edges(),function(r){var a=rs(e.edge(r));t.setEdge(r,ae.merge({},Sk,ns(a,Ck),ae.pick(a,Ek)))}),t}function xk(e){var t=e.graph();t.ranksep/=2,ae.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function Nk(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),a=e.node(t.w),o={rank:(a.rank-r.rank)/2+r.rank,e:t};Qt.addDummyNode(e,"edge-proxy",o,"_ep")}})}function Ik(e){var t=0;ae.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ae.max(t,r.maxRank))}),e.graph().maxRank=t}function Tk(e){ae.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function kk(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,a=0,o=e.graph(),i=o.marginx||0,s=o.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,m=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-m/2),a=Math.max(a,d+m/2)}ae.forEach(e.nodes(),function(u){l(e.node(u))}),ae.forEach(e.edges(),function(u){var c=e.edge(u);ae.has(c,"x")&&l(c)}),t-=i,r-=s,ae.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),ae.forEach(e.edges(),function(u){var c=e.edge(u);ae.forEach(c.points,function(d){d.x-=t,d.y-=r}),ae.has(c,"x")&&(c.x-=t),ae.has(c,"y")&&(c.y-=r)}),o.width=n-t+i,o.height=a-r+s}function Ok(e){ae.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),a=e.node(t.w),o,i;n.points?(o=n.points[0],i=n.points[n.points.length-1]):(n.points=[],o=a,i=r),n.points.unshift(Qt.intersectRect(r,o)),n.points.push(Qt.intersectRect(a,i))})}function Rk(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);if(ae.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Ak(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function qk(e){ae.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),a=e.node(n.borderBottom),o=e.node(ae.last(n.borderLeft)),i=e.node(ae.last(n.borderRight));n.width=Math.abs(i.x-o.x),n.height=Math.abs(a.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),ae.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function Lk(e){ae.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Pk(e){var t=Qt.buildLayerMatrix(e);ae.forEach(t,function(n){var r=0;ae.forEach(n,function(a,o){var i=e.node(a);i.order=o+r,ae.forEach(i.selfEdges,function(s){Qt.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:o+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function Dk(e){ae.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),a=r.x+r.width/2,o=r.y,i=n.x-a,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:a+2*i/3,y:o-s},{x:a+5*i/6,y:o-s},{x:a+i,y:o},{x:a+5*i/6,y:o+s},{x:a+2*i/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function ns(e,t){return ae.mapValues(ae.pick(e,t),Number)}function rs(e){var t={};return ae.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var ca=ye,Mk=Fe,Vk=ft.Graph,$k={debugOrdering:Fk};function Fk(e){var t=Mk.buildLayerMatrix(e),n=new Vk({compound:!0,multigraph:!0}).setGraph({});return ca.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),ca.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),ca.forEach(t,function(r,a){var o="layer"+a;n.setNode(o,{rank:"same"}),ca.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var Bk="0.8.5",Wg={graphlib:ft,layout:fk,debug:$k,util:{time:Fe.time,notime:Fe.notime},version:Bk},lp=function(t){return t.reduce(function(n,r){var a=r[0],o=r[1];return n[a]=o,n},{})},cp=typeof window<"u"&&window.document&&window.document.createElement?I.useLayoutEffect:I.useEffect,Ve="top",tt="bottom",nt="right",$e="left",Uc="auto",zr=[Ve,tt,nt,$e],Hn="start",Nr="end",zk="clippingParents",Gg="viewport",or="popper",Hk="reference",up=zr.reduce(function(e,t){return e.concat([t+"-"+Hn,t+"-"+Nr])},[]),Yg=[].concat(zr,[Uc]).reduce(function(e,t){return e.concat([t,t+"-"+Hn,t+"-"+Nr])},[]),Uk="beforeRead",jk="read",Wk="afterRead",Gk="beforeMain",Yk="main",Xk="afterMain",Qk="beforeWrite",Zk="write",Kk="afterWrite",Jk=[Uk,jk,Wk,Gk,Yk,Xk,Qk,Zk,Kk];function bt(e){return e?(e.nodeName||"").toLowerCase():null}function ot(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function fn(e){var t=ot(e).Element;return e instanceof t||e instanceof Element}function Je(e){var t=ot(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function jc(e){if(typeof ShadowRoot>"u")return!1;var t=ot(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function eO(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},a=t.attributes[n]||{},o=t.elements[n];!Je(o)||!bt(o)||(Object.assign(o.style,r),Object.keys(a).forEach(function(i){var s=a[i];s===!1?o.removeAttribute(i):o.setAttribute(i,s===!0?"":s)}))})}function tO(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var a=t.elements[r],o=t.attributes[r]||{},i=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=i.reduce(function(l,u){return l[u]="",l},{});!Je(a)||!bt(a)||(Object.assign(a.style,s),Object.keys(o).forEach(function(l){a.removeAttribute(l)}))})}}const nO={name:"applyStyles",enabled:!0,phase:"write",fn:eO,effect:tO,requires:["computeStyles"]};function yt(e){return e.split("-")[0]}var on=Math.max,Wa=Math.min,Un=Math.round;function Xs(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Xg(){return!/^((?!chrome|android).)*safari/i.test(Xs())}function jn(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),a=1,o=1;t&&Je(e)&&(a=e.offsetWidth>0&&Un(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Un(r.height)/e.offsetHeight||1);var i=fn(e)?ot(e):window,s=i.visualViewport,l=!Xg()&&n,u=(r.left+(l&&s?s.offsetLeft:0))/a,c=(r.top+(l&&s?s.offsetTop:0))/o,d=r.width/a,f=r.height/o;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function Wc(e){var t=jn(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Qg(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&jc(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Pt(e){return ot(e).getComputedStyle(e)}function rO(e){return["table","td","th"].indexOf(bt(e))>=0}function Kt(e){return((fn(e)?e.ownerDocument:e.document)||window.document).documentElement}function No(e){return bt(e)==="html"?e:e.assignedSlot||e.parentNode||(jc(e)?e.host:null)||Kt(e)}function dp(e){return!Je(e)||Pt(e).position==="fixed"?null:e.offsetParent}function aO(e){var t=/firefox/i.test(Xs()),n=/Trident/i.test(Xs());if(n&&Je(e)){var r=Pt(e);if(r.position==="fixed")return null}var a=No(e);for(jc(a)&&(a=a.host);Je(a)&&["html","body"].indexOf(bt(a))<0;){var o=Pt(a);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return a;a=a.parentNode}return null}function Hr(e){for(var t=ot(e),n=dp(e);n&&rO(n)&&Pt(n).position==="static";)n=dp(n);return n&&(bt(n)==="html"||bt(n)==="body"&&Pt(n).position==="static")?t:n||aO(e)||t}function Gc(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function hr(e,t,n){return on(e,Wa(t,n))}function oO(e,t,n){var r=hr(e,t,n);return r>n?n:r}function Zg(){return{top:0,right:0,bottom:0,left:0}}function Kg(e){return Object.assign({},Zg(),e)}function Jg(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var iO=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Kg(typeof t!="number"?t:Jg(t,zr))};function sO(e){var t,n=e.state,r=e.name,a=e.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,s=yt(n.placement),l=Gc(s),u=[$e,nt].indexOf(s)>=0,c=u?"height":"width";if(!(!o||!i)){var d=iO(a.padding,n),f=Wc(o),m=l==="y"?Ve:$e,h=l==="y"?tt:nt,g=n.rects.reference[c]+n.rects.reference[l]-i[l]-n.rects.popper[c],v=i[l]-n.rects.reference[l],S=Hr(o),_=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,b=g/2-v/2,C=d[m],w=_-f[c]-d[h],y=_/2-f[c]/2+b,E=hr(C,y,w),x=l;n.modifiersData[r]=(t={},t[x]=E,t.centerOffset=E-y,t)}}function lO(e){var t=e.state,n=e.options,r=n.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||Qg(t.elements.popper,a)&&(t.elements.arrow=a))}const cO={name:"arrow",enabled:!0,phase:"main",fn:sO,effect:lO,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Wn(e){return e.split("-")[1]}var uO={top:"auto",right:"auto",bottom:"auto",left:"auto"};function dO(e){var t=e.x,n=e.y,r=window,a=r.devicePixelRatio||1;return{x:Un(t*a)/a||0,y:Un(n*a)/a||0}}function fp(e){var t,n=e.popper,r=e.popperRect,a=e.placement,o=e.variation,i=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=i.x,m=f===void 0?0:f,h=i.y,g=h===void 0?0:h,v=typeof c=="function"?c({x:m,y:g}):{x:m,y:g};m=v.x,g=v.y;var S=i.hasOwnProperty("x"),_=i.hasOwnProperty("y"),b=$e,C=Ve,w=window;if(u){var y=Hr(n),E="clientHeight",x="clientWidth";if(y===ot(n)&&(y=Kt(n),Pt(y).position!=="static"&&s==="absolute"&&(E="scrollHeight",x="scrollWidth")),y=y,a===Ve||(a===$e||a===nt)&&o===Nr){C=tt;var N=d&&y===w&&w.visualViewport?w.visualViewport.height:y[E];g-=N-r.height,g*=l?1:-1}if(a===$e||(a===Ve||a===tt)&&o===Nr){b=nt;var k=d&&y===w&&w.visualViewport?w.visualViewport.width:y[x];m-=k-r.width,m*=l?1:-1}}var A=Object.assign({position:s},u&&uO),q=c===!0?dO({x:m,y:g}):{x:m,y:g};if(m=q.x,g=q.y,l){var L;return Object.assign({},A,(L={},L[C]=_?"0":"",L[b]=S?"0":"",L.transform=(w.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",L))}return Object.assign({},A,(t={},t[C]=_?g+"px":"",t[b]=S?m+"px":"",t.transform="",t))}function fO(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=r===void 0?!0:r,o=n.adaptive,i=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:yt(t.placement),variation:Wn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,fp(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,fp(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const pO={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:fO,data:{}};var ua={passive:!0};function hO(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,o=a===void 0?!0:a,i=r.resize,s=i===void 0?!0:i,l=ot(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,ua)}),s&&l.addEventListener("resize",n.update,ua),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,ua)}),s&&l.removeEventListener("resize",n.update,ua)}}const mO={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hO,data:{}};var gO={left:"right",right:"left",bottom:"top",top:"bottom"};function ba(e){return e.replace(/left|right|bottom|top/g,function(t){return gO[t]})}var vO={start:"end",end:"start"};function pp(e){return e.replace(/start|end/g,function(t){return vO[t]})}function Yc(e){var t=ot(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Xc(e){return jn(Kt(e)).left+Yc(e).scrollLeft}function yO(e,t){var n=ot(e),r=Kt(e),a=n.visualViewport,o=r.clientWidth,i=r.clientHeight,s=0,l=0;if(a){o=a.width,i=a.height;var u=Xg();(u||!u&&t==="fixed")&&(s=a.offsetLeft,l=a.offsetTop)}return{width:o,height:i,x:s+Xc(e),y:l}}function bO(e){var t,n=Kt(e),r=Yc(e),a=(t=e.ownerDocument)==null?void 0:t.body,o=on(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),i=on(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-r.scrollLeft+Xc(e),l=-r.scrollTop;return Pt(a||n).direction==="rtl"&&(s+=on(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:i,x:s,y:l}}function Qc(e){var t=Pt(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function ev(e){return["html","body","#document"].indexOf(bt(e))>=0?e.ownerDocument.body:Je(e)&&Qc(e)?e:ev(No(e))}function mr(e,t){var n;t===void 0&&(t=[]);var r=ev(e),a=r===((n=e.ownerDocument)==null?void 0:n.body),o=ot(r),i=a?[o].concat(o.visualViewport||[],Qc(r)?r:[]):r,s=t.concat(i);return a?s:s.concat(mr(No(i)))}function Qs(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wO(e,t){var n=jn(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function hp(e,t,n){return t===Gg?Qs(yO(e,n)):fn(t)?wO(t,n):Qs(bO(Kt(e)))}function CO(e){var t=mr(No(e)),n=["absolute","fixed"].indexOf(Pt(e).position)>=0,r=n&&Je(e)?Hr(e):e;return fn(r)?t.filter(function(a){return fn(a)&&Qg(a,r)&&bt(a)!=="body"}):[]}function SO(e,t,n,r){var a=t==="clippingParents"?CO(e):[].concat(t),o=[].concat(a,[n]),i=o[0],s=o.reduce(function(l,u){var c=hp(e,u,r);return l.top=on(c.top,l.top),l.right=Wa(c.right,l.right),l.bottom=Wa(c.bottom,l.bottom),l.left=on(c.left,l.left),l},hp(e,i,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function tv(e){var t=e.reference,n=e.element,r=e.placement,a=r?yt(r):null,o=r?Wn(r):null,i=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(a){case Ve:l={x:i,y:t.y-n.height};break;case tt:l={x:i,y:t.y+t.height};break;case nt:l={x:t.x+t.width,y:s};break;case $e:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var u=a?Gc(a):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case Hn:l[u]=l[u]-(t[c]/2-n[c]/2);break;case Nr:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function Ir(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=r===void 0?e.placement:r,o=n.strategy,i=o===void 0?e.strategy:o,s=n.boundary,l=s===void 0?zk:s,u=n.rootBoundary,c=u===void 0?Gg:u,d=n.elementContext,f=d===void 0?or:d,m=n.altBoundary,h=m===void 0?!1:m,g=n.padding,v=g===void 0?0:g,S=Kg(typeof v!="number"?v:Jg(v,zr)),_=f===or?Hk:or,b=e.rects.popper,C=e.elements[h?_:f],w=SO(fn(C)?C:C.contextElement||Kt(e.elements.popper),l,c,i),y=jn(e.elements.reference),E=tv({reference:y,element:b,strategy:"absolute",placement:a}),x=Qs(Object.assign({},b,E)),N=f===or?x:y,k={top:w.top-N.top+S.top,bottom:N.bottom-w.bottom+S.bottom,left:w.left-N.left+S.left,right:N.right-w.right+S.right},A=e.modifiersData.offset;if(f===or&&A){var q=A[a];Object.keys(k).forEach(function(L){var T=[nt,tt].indexOf(L)>=0?1:-1,P=[Ve,tt].indexOf(L)>=0?"y":"x";k[L]+=q[P]*T})}return k}function EO(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=n.boundary,o=n.rootBoundary,i=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Yg:l,c=Wn(r),d=c?s?up:up.filter(function(h){return Wn(h)===c}):zr,f=d.filter(function(h){return u.indexOf(h)>=0});f.length===0&&(f=d);var m=f.reduce(function(h,g){return h[g]=Ir(e,{placement:g,boundary:a,rootBoundary:o,padding:i})[yt(g)],h},{});return Object.keys(m).sort(function(h,g){return m[h]-m[g]})}function _O(e){if(yt(e)===Uc)return[];var t=ba(e);return[pp(e),t,pp(t)]}function xO(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,o=a===void 0?!0:a,i=n.altAxis,s=i===void 0?!0:i,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,m=n.flipVariations,h=m===void 0?!0:m,g=n.allowedAutoPlacements,v=t.options.placement,S=yt(v),_=S===v,b=l||(_||!h?[ba(v)]:_O(v)),C=[v].concat(b).reduce(function($,U){return $.concat(yt(U)===Uc?EO(t,{placement:U,boundary:c,rootBoundary:d,padding:u,flipVariations:h,allowedAutoPlacements:g}):U)},[]),w=t.rects.reference,y=t.rects.popper,E=new Map,x=!0,N=C[0],k=0;k<C.length;k++){var A=C[k],q=yt(A),L=Wn(A)===Hn,T=[Ve,tt].indexOf(q)>=0,P=T?"width":"height",O=Ir(t,{placement:A,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),M=T?L?nt:$e:L?tt:Ve;w[P]>y[P]&&(M=ba(M));var z=ba(M),B=[];if(o&&B.push(O[q]<=0),s&&B.push(O[M]<=0,O[z]<=0),B.every(function($){return $})){N=A,x=!1;break}E.set(A,B)}if(x)for(var F=h?3:1,W=function(U){var G=C.find(function(H){var X=E.get(H);if(X)return X.slice(0,U).every(function(K){return K})});if(G)return N=G,"break"},Q=F;Q>0;Q--){var D=W(Q);if(D==="break")break}t.placement!==N&&(t.modifiersData[r]._skip=!0,t.placement=N,t.reset=!0)}}const NO={name:"flip",enabled:!0,phase:"main",fn:xO,requiresIfExists:["offset"],data:{_skip:!1}};function mp(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function gp(e){return[Ve,nt,tt,$e].some(function(t){return e[t]>=0})}function IO(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,i=Ir(t,{elementContext:"reference"}),s=Ir(t,{altBoundary:!0}),l=mp(i,r),u=mp(s,a,o),c=gp(l),d=gp(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const TO={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:IO};function kO(e,t,n){var r=yt(e),a=[$e,Ve].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,i=o[0],s=o[1];return i=i||0,s=(s||0)*a,[$e,nt].indexOf(r)>=0?{x:s,y:i}:{x:i,y:s}}function OO(e){var t=e.state,n=e.options,r=e.name,a=n.offset,o=a===void 0?[0,0]:a,i=Yg.reduce(function(c,d){return c[d]=kO(d,t.rects,o),c},{}),s=i[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=i}const RO={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:OO};function AO(e){var t=e.state,n=e.name;t.modifiersData[n]=tv({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const qO={name:"popperOffsets",enabled:!0,phase:"read",fn:AO,data:{}};function LO(e){return e==="x"?"y":"x"}function PO(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,o=a===void 0?!0:a,i=n.altAxis,s=i===void 0?!1:i,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,m=f===void 0?!0:f,h=n.tetherOffset,g=h===void 0?0:h,v=Ir(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),S=yt(t.placement),_=Wn(t.placement),b=!_,C=Gc(S),w=LO(C),y=t.modifiersData.popperOffsets,E=t.rects.reference,x=t.rects.popper,N=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,k=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,q={x:0,y:0};if(y){if(o){var L,T=C==="y"?Ve:$e,P=C==="y"?tt:nt,O=C==="y"?"height":"width",M=y[C],z=M+v[T],B=M-v[P],F=m?-x[O]/2:0,W=_===Hn?E[O]:x[O],Q=_===Hn?-x[O]:-E[O],D=t.elements.arrow,$=m&&D?Wc(D):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Zg(),G=U[T],H=U[P],X=hr(0,E[O],$[O]),K=b?E[O]/2-F-X-G-k.mainAxis:W-X-G-k.mainAxis,Y=b?-E[O]/2+F+X+H+k.mainAxis:Q+X+H+k.mainAxis,pe=t.elements.arrow&&Hr(t.elements.arrow),ce=pe?C==="y"?pe.clientTop||0:pe.clientLeft||0:0,be=(L=A==null?void 0:A[C])!=null?L:0,we=M+K-be-ce,Ie=M+Y-be,Re=hr(m?Wa(z,we):z,M,m?on(B,Ie):B);y[C]=Re,q[C]=Re-M}if(s){var Oe,Pe=C==="x"?Ve:$e,Ye=C==="x"?tt:nt,ge=y[w],_e=w==="y"?"height":"width",Xe=ge+v[Pe],ne=ge-v[Ye],oe=[Ve,$e].indexOf(S)!==-1,te=(Oe=A==null?void 0:A[w])!=null?Oe:0,he=oe?Xe:ge-E[_e]-x[_e]-te+k.altAxis,J=oe?ge+E[_e]+x[_e]-te-k.altAxis:ne,xe=m&&oe?oO(he,ge,J):hr(m?he:Xe,ge,m?J:ne);y[w]=xe,q[w]=xe-ge}t.modifiersData[r]=q}}const DO={name:"preventOverflow",enabled:!0,phase:"main",fn:PO,requiresIfExists:["offset"]};function MO(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function VO(e){return e===ot(e)||!Je(e)?Yc(e):MO(e)}function $O(e){var t=e.getBoundingClientRect(),n=Un(t.width)/e.offsetWidth||1,r=Un(t.height)/e.offsetHeight||1;return n!==1||r!==1}function FO(e,t,n){n===void 0&&(n=!1);var r=Je(t),a=Je(t)&&$O(t),o=Kt(t),i=jn(e,a,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((bt(t)!=="body"||Qc(o))&&(s=VO(t)),Je(t)?(l=jn(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Xc(o))),{x:i.left+s.scrollLeft-l.x,y:i.top+s.scrollTop-l.y,width:i.width,height:i.height}}function BO(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function a(o){n.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&a(l)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||a(o)}),r}function zO(e){var t=BO(e);return Jk.reduce(function(n,r){return n.concat(t.filter(function(a){return a.phase===r}))},[])}function HO(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function UO(e){var t=e.reduce(function(n,r){var a=n[r.name];return n[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var vp={placement:"bottom",modifiers:[],strategy:"absolute"};function yp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function jO(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,a=t.defaultOptions,o=a===void 0?vp:a;return function(s,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},vp,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(S){var _=typeof S=="function"?S(c.options):S;g(),c.options=Object.assign({},o,c.options,_),c.scrollParents={reference:fn(s)?mr(s):s.contextElement?mr(s.contextElement):[],popper:mr(l)};var b=zO(UO([].concat(r,c.options.modifiers)));return c.orderedModifiers=b.filter(function(C){return C.enabled}),h(),m.update()},forceUpdate:function(){if(!f){var S=c.elements,_=S.reference,b=S.popper;if(yp(_,b)){c.rects={reference:FO(_,Hr(b),c.options.strategy==="fixed"),popper:Wc(b)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(k){return c.modifiersData[k.name]=Object.assign({},k.data)});for(var C=0;C<c.orderedModifiers.length;C++){if(c.reset===!0){c.reset=!1,C=-1;continue}var w=c.orderedModifiers[C],y=w.fn,E=w.options,x=E===void 0?{}:E,N=w.name;typeof y=="function"&&(c=y({state:c,options:x,name:N,instance:m})||c)}}}},update:HO(function(){return new Promise(function(v){m.forceUpdate(),v(c)})}),destroy:function(){g(),f=!0}};if(!yp(s,l))return m;m.setOptions(u).then(function(v){!f&&u.onFirstUpdate&&u.onFirstUpdate(v)});function h(){c.orderedModifiers.forEach(function(v){var S=v.name,_=v.options,b=_===void 0?{}:_,C=v.effect;if(typeof C=="function"){var w=C({state:c,name:S,instance:m,options:b}),y=function(){};d.push(w||y)}})}function g(){d.forEach(function(v){return v()}),d=[]}return m}}var WO=[mO,qO,pO,nO,RO,NO,DO,cO,TO],GO=jO({defaultModifiers:WO}),YO=typeof Element<"u",XO=typeof Map=="function",QO=typeof Set=="function",ZO=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function wa(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!wa(e[r],t[r]))return!1;return!0}var o;if(XO&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!wa(r.value[1],t.get(r.value[0])))return!1;return!0}if(QO&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(ZO&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;if(YO&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((a[r]==="_owner"||a[r]==="__v"||a[r]==="__o")&&e.$$typeof)&&!wa(e[a[r]],t[a[r]]))return!1;return!0}return e!==e&&t!==t}var KO=function(t,n){try{return wa(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},JO=[],eR=function(t,n,r){r===void 0&&(r={});var a=I.useRef(null),o={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||JO},i=I.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],l=i[1],u=I.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(m){var h=m.state,g=Object.keys(h.elements);Ab.flushSync(function(){l({styles:lp(g.map(function(v){return[v,h.styles[v]||{}]})),attributes:lp(g.map(function(v){return[v,h.attributes[v]]}))})})},requires:["computeStyles"]}},[]),c=I.useMemo(function(){var f={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[u,{name:"applyStyles",enabled:!1}])};return KO(a.current,f)?a.current||f:(a.current=f,f)},[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,u]),d=I.useRef();return cp(function(){d.current&&d.current.setOptions(c)},[c]),cp(function(){if(!(t==null||n==null)){var f=r.createPopper||GO,m=f(t,n,c);return d.current=m,function(){m.destroy(),d.current=null}}},[t,n,r.createPopper]),{state:d.current?d.current.state:null,styles:s.styles,attributes:s.attributes,update:d.current?d.current.update:null,forceUpdate:d.current?d.current.forceUpdate:null}};const Zs=({children:e,contentProps:t,placement:n,showCloseButton:r=!0,actionButton:a,strategy:o,style:i})=>{n=n??"bottom-start";const[s,l]=I.useState(!1),[u,c]=I.useState(null),[d,f]=I.useState(null),[m,h]=I.useState(null),{styles:g,attributes:v}=eR(u,d,{placement:n,strategy:o,modifiers:[{name:"arrow",options:{element:m}},{name:"offset",options:{offset:[0,10]}}]}),S=p(wh,{in:s,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:R("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...i,...g.popper},ref:f,...v.popper,children:[p(Rt,{variant:"body1",children:p(Ge,{...t})}),R("div",{className:"TooltipButtonContainer",children:[a&&p(He,{color:"primary",variant:"contained",onClick:()=>{a.onClick(),a.closePopoverOnClick&&l(!1)},children:a.content}),r&&p(He,{variant:"outlined",onClick:()=>l(!1),children:"Close"})]}),p("div",{className:"arrow","data-popper-arrow":!0,ref:h,style:g.arrow})]})});return R(j,{children:[p("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>l(_=>!_),ref:c,children:e}),S]})};try{Zs.displayName="MarkdownPopover",Zs.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}}}catch{}const pn=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:r=!0,className:a=""})=>p(j,{children:p(Zs,{contentProps:{markdown:e},placement:n,actionButton:t?{content:p(j,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),variant:"primary"}:void 0,showCloseButton:r,strategy:"fixed",style:{maxWidth:"350px"},children:p(Ty,{className:`HelpButton ${a}`})})});try{pn.displayName="HelpPopover",pn.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const tR=()=>R(j,{children:[p(Rt,{variant:"smallText1",className:"description",children:"Undefined"}),p(pn,{placement:"top",markdownText:`Provenance tracks the relationship 
          between data, code and analytical results.`,helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),Ks=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return I.useMemo(()=>R(j,{children:[p("div",{children:p(ue,{icon:"fileOutlined"})}),p("span",{children:n})]}),[n])};try{Ks.displayName="EntityPlaceholderNodeLabel",Ks.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var qe=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(qe||{});const Ga=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=p(Bs,{...n});break;case"EntityPlaceholderNode":r=p(Ks,{...n});break;case"ExternalNode":r=p(js,{...n});break;case"ActivityNode":r=p($s,{...n});break;case"ExpandNode":r=p(Hs,{...n});break;case"UndefinedNode":r=p(tR,{});break;default:r=R("p",{children:["Unrecognized node type: ",t]});break}const a={label:r,props:n,type:t};return{id:Dt(e),position:{x:100,y:100},data:a,connectable:!1,draggable:!1,className:`${t}`}},nv=(e,t)=>{const n=Dt(e),r=Dt(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:xt.SimpleBezier,markerEnd:{type:xr.ArrowClosed}}},Dt=e=>{const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${n.versionNumber??"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${n.targetVersionNumber??"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${n.entityHeader.versionNumber??"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${n.versionNumber??"latest"}`}},xn=new Wg.graphlib.Graph;xn.setDefaultEdgeLabel(()=>({}));const bp=e=>e.data.type=="ExpandNode"?30:100,wp=e=>e.data.type=="ExpandNode"?30:172,nR=(e,t,n)=>{const r=n==="LR";return xn.setGraph({rankdir:n}),e.forEach(a=>{xn.setNode(a.id,{width:wp(a),height:bp(a)})}),t.forEach(a=>{xn.setEdge(a.source,a.target)}),Wg.layout(xn),e.forEach(a=>{const o=xn.node(a.id);return a.targetPosition=r?Z.Left:Z.Top,a.sourcePosition=r?Z.Right:Z.Bottom,a.position={x:o.x-wp(a)/2,y:o.y-bp(a)/2},a}),{nodes:e,edges:t}},Cp=(e,t)=>qb(e,t,Pb).length==0;try{Ga.displayName="getProvenanceNode",Ga.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}try{Dt.displayName="getNodeId",Dt.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}const rR="org.sagebionetworks.repo.model.provenance.UsedEntity",Sp=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(a=>t.id==a.id&&t.versionNumber==a.versionNumber))!==void 0},rv=(e,t)=>t.find(r=>r.id===Dt(e))===void 0,aR=(e,t)=>{const n={type:qe.ENTITY,data:e};return t.find(r=>r.id===Dt(n))},oR=(e,t,n)=>n.find(a=>a.source===Dt(e)&&a.target===Dt(t))===void 0,Ur=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:a}=e;rv(t,r)&&r.push(Ga(t)),oR(t,n,a)&&a.push(nv(t,n))},iR=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:a}=e,o={type:qe.ACTIVITY,data:t},i={type:qe.ENTITY,data:n};Ur({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},sR=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:a}=e,o={type:qe.EXPAND,data:{itemCount:n,entityHeader:t}},i={type:qe.ENTITY,data:t};Ur({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},lR=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:qe.ENTITY_PLACEHOLDER,data:t},i={type:qe.ACTIVITY,data:n};Ur({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},cR=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,a={type:qe.UNDEFINED,data:t},o={type:qe.ENTITY,data:t};Ur({newNodeProps:a,existingNodeProps:o,nodesCopy:n,edgesCopy:r})},uR=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:qe.ACTIVITY,data:n},i={type:qe.EXTERNAL,data:t};Ur({newNodeProps:i,existingNodeProps:o,nodesCopy:r,edgesCopy:a})},dR=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:qe.ENTITY,data:t};if(rv(o,r)&&(r.push(Ga(o)),n)){const i={type:qe.ACTIVITY,data:n};a.push(nv(o,i))}},as=400,os=.85,fR=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:a=[],onNodesChangedListener:o,onEdgesChangedListener:i}=e,{accessToken:s}=ie(),[l,u]=V.useState(r),[c,d]=V.useState(a),[f,m,h]=Q1([]),[g,v,S]=Z1([]),[_,b]=I.useState(),C=ry(),{data:w,isSuccess:y}=m0(t,{useErrorBoundary:!0});if(y&&w&&w.totalNumberOfResults==0){const P=t.map(O=>O.targetId).join(",");C(`Unable to load provenance for the given Synapse IDs: ${P}`)}const E=w==null?void 0:w.results,[x,N]=V.useState(!1),k=Dc(),A=I.useCallback((P,O)=>{b(O)},[]),q=I.useCallback(async P=>{var F;const{entityHeader:O,nodesCopy:M,edgesCopy:z,usedInActivity:B}=P;dR({entityHeader:O,activity:B,nodesCopy:M,edgesCopy:z});try{const W=await hu(O.id,O.versionNumber,s);(!Sp({entityHeader:O,rootEntityHeaders:E})||W.used&&W.used.length>=as)&&sR({entityHeader:O,itemCount:(F=W.used)==null?void 0:F.length,nodesCopy:M,edgesCopy:z})}catch(W){console.error(W),Sp({entityHeader:O,rootEntityHeaders:E})&&cR({entityHeader:O,nodesCopy:M,edgesCopy:z})}},[s,E]);I.useEffect(()=>{!x&&f.length>0&&setTimeout(()=>{if(E){const P=aR(E[0],f);if(P){const O=k.getZoom(),M=O>os?os:O;k==null||k.setCenter(P.position.x+150,P.position.y-30,{zoom:M,duration:0})}N(!0)}})},[x,f,k,E]);const L=I.useCallback(async P=>{const{entityHeader:O,nodesCopy:M,edgesCopy:z}=P;try{const B=await hu(O.id,O.versionNumber,s);if(iR({activity:B,entityHeader:O,nodesCopy:M,edgesCopy:z}),B.used&&B.used.length<as){const F=[];B.used.forEach(U=>{U.concreteType==rR?F.push(U.reference):uR({usedURL:U,activity:B,nodesCopy:M,edgesCopy:z})});const W=await ec(F,s),{results:Q}=W;F.filter(U=>Q.find(G=>G.id==U.targetId)==null).forEach(U=>{lR({ref:U,activity:B,nodesCopy:M,edgesCopy:z})});const $=[];Q.forEach(U=>{$.push(q({entityHeader:U,nodesCopy:M,edgesCopy:z,usedInActivity:B}))}),await Promise.allSettled($)}}catch(B){console.error(B)}},[s,q]);I.useEffect(()=>{if(E&&l.length==0){const P=[...l],O=[...c],M=[];E.forEach(z=>{const B=q({entityHeader:z,nodesCopy:P,edgesCopy:O});M.push(B);const F=L({entityHeader:z,nodesCopy:P,edgesCopy:O});M.push(F)}),Promise.allSettled(M).finally(()=>{u(P),d(O)})}},[q,C,L,E,t,c,l]),I.useEffect(()=>{const P=_==null?void 0:_.data;if(_&&(P==null?void 0:P.type)==qe.EXPAND){const O=P.props;if(O.itemCount>as){Xt("Web visualization does not support expanding this many items at this time.","danger");return}else{P.label=p(Uw,{size:30});const M=l.filter(F=>F.id!=_.id),z=Lc([_],c)[0],B=c.filter(F=>F!=z);L({entityHeader:O.entityHeader,nodesCopy:M,edgesCopy:B}).finally(()=>{u(M),d(B)})}b(void 0)}},[_,l,c,L]),I.useEffect(()=>{const{nodes:P,edges:O}=nR(l,c,"TB");Cp(P,f)||(m(P),o&&o(P)),Cp(O,g)||(v(O),i&&i(O))},[l,c,f,g,m,v,x,k,t,o,i]);const T=I.useCallback(P=>{P&&typeof P.deltaX<"u"&&typeof P.deltaY<"u"&&window.scrollTo(window.scrollX+P.deltaX,window.scrollY+P.deltaY)},[]);return p("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:p(og,{defaultZoom:os,nodes:f,edges:g,onNodeClick:A,onNodesChange:h,onEdgesChange:S,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:T,children:p(Ox,{})})})},Js=e=>p(Gp,{children:p(ig,{children:p(fR,{...e})})});try{Js.displayName="ProvenanceGraph",Js.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}}}catch{}function el(e){const{entityList:t,displayHeightPx:n}=e,r=t.split(",").map(o=>{const i=o.split("/version/");return{targetId:i[0],targetVersionNumber:i.length>1?parseInt(i[1]):void 0}}),a=n?`${n}px`:void 0;return p(Js,{entityRefs:r,containerHeight:a})}try{el.displayName="MarkdownProvenanceGraph",el.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}}}catch{}class Tr extends I.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&yr(this.context.accessToken,t).then(n=>{const r=[{associateObjectId:t,associateObjectType:Ae.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(r,n.dataFileHandleId)})}getSynapseFiles(t,n){Xn({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(a=>{const{preSignedURL:o}=a.requestedFiles.filter(i=>i.fileHandleId===n)[0];this.setState({preSignedURL:o})}).catch(a=>{console.error("Error on getting image ",a)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:r}=n.filter(o=>o.fileName===t)[0],a=[{associateObjectId:this.props.wikiId,associateObjectType:Ae.WikiAttachment,fileHandleId:r}];this.getSynapseFiles(a,r)}}render(){const{params:t}=this.props,{align:n="",altText:r="synapse image"}=t;let a="auto";t.scale&&t.scale!=="100"&&(a=`${Number(t.scale)}%`);const o=n.toLowerCase();let i="";o==="left"&&(i="floatLeft"),o==="right"&&(i="floatright"),o==="center"&&(i="align-center");const s={width:a,height:a};return this.state.preSignedURL?p(I.Fragment,{children:p("img",{alt:r,className:"img-fluid  "+i,src:this.state.preSignedURL,style:s})}):null}}Tr.contextType=qr;try{Tr.displayName="SynapseImage",Tr.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}}}catch{}const kr=V.createContext(void 0),tl=({children:e,wikiContext:t})=>p(kr.Provider,{value:t,children:e}),Ep=kr.Consumer;function av(){return I.useContext(kr)??{}}try{kr.displayName="SynapseWikiContext",kr.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}}}catch{}try{tl.displayName="SynapseWikiContextProvider",tl.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}}}catch{}try{Ep.displayName="SynapseWikiContextConsumer",Ep.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}}}catch{}function nl(e){const{wikiId:t,wikiPage:n,fileHandles:r}=av();return e.fileName?r?p(Tr,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:r.list}):p(j,{}):e.synapseId?p(Tr,{params:e,synapseId:e.synapseId}):p(j,{})}try{nl.displayName="MarkdownSynapseImage",nl.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}}}catch{}const pR=Db(Mb);class Ya extends I.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Lr,entityId:vn(t),query:{sql:t}};Yp(n,this.context.accessToken).then(r=>{this.setState({isLoaded:!0,queryData:r})}).catch(r=>{console.log("Error on full table query ",r)})}showPlot(){var m,h;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:r,type:a,xaxistype:o,showlegend:i}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),u={showlegend:i,title:t};n&&(u.xaxis={title:n}),o&&(u.xaxis={...u.xaxis,xaxistype:o.toLowerCase()}),r&&(u.yaxis={title:r});const c=[],d=l?"v":"h",f=((m=s.queryData.queryResult)==null?void 0:m.queryResults.headers)??[];for(let g=0;g<f.length-1;g+=1)c[g]={orientation:d,name:f[g+1].name,type:a.toLowerCase(),x:[],y:[]};for(const g of((h=s.queryData.queryResult)==null?void 0:h.queryResults.rows)??[])for(let v=1;v<g.values.length;v+=1){const S=g.values;c[v-1].x.push(S[0]),c[v-1].y.push(S[v])}return p(pR,{layout:u,data:c})}render(){return this.state.isLoaded?this.showPlot():null}}Ya.contextType=qr;try{Ya.displayName="SynapsePlot",Ya.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}}}catch{}function rl(e){const{ownerId:t,wikiId:n,wikiPage:r}=av();return p(Ya,{ownerId:t,wikiId:n||(r==null?void 0:r.id),widgetparamsMapped:e})}try{rl.displayName="MarkdownSynapsePlot",rl.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}}}catch{}const hR=200,_p="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",xp="ESTIMATED_DOWNLOAD_SPEED",mR="syn12600511",gR=e=>new Promise((t,n)=>{const r=localStorage.getItem(_p),a=localStorage.getItem(xp);if(r&&a&&new Date().getTime()<Number(r)){t(Number(a));return}yr(e,mR).then(o=>{const i=o,l={includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:i.id,associateObjectType:Ae.FileEntity,fileHandleId:i.dataFileHandleId}]};Xn(l,e).then(u=>{const c=u.requestedFiles[0].preSignedURL,d=u.requestedFiles[0].fileHandle,f=new Date().getTime();return ay(d,c).then(()=>{const m=d.contentSize/((new Date().getTime()-f-hR)/1e3),h=new Date().getTime();localStorage.setItem(_p,(h+1e3*60*5).toString()),localStorage.setItem(xp,m.toString()),t(m)})})}).catch(o=>n(o))});var al={},vR={get exports(){return al},set exports(e){al=e}};(function(e,t){(function(n,r){e.exports=r()})(co,function(){var n,r,a=1e3,o=6e4,i=36e5,s=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,c=2592e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f={years:u,months:c,days:s,hours:i,minutes:o,seconds:a,milliseconds:1,weeks:6048e5},m=function(w){return w instanceof C},h=function(w,y,E){return new C(w,E,y.$l)},g=function(w){return r.p(w)+"s"},v=function(w){return w<0},S=function(w){return v(w)?Math.ceil(w):Math.floor(w)},_=function(w){return Math.abs(w)},b=function(w,y){return w?v(w)?{negative:!0,format:""+_(w)+y}:{negative:!1,format:""+w+y}:{negative:!1,format:""}},C=function(){function w(E,x,N){var k=this;if(this.$d={},this.$l=N,E===void 0&&(this.$ms=0,this.parseFromMilliseconds()),x)return h(E*f[g(x)],this);if(typeof E=="number")return this.$ms=E,this.parseFromMilliseconds(),this;if(typeof E=="object")return Object.keys(E).forEach(function(L){k.$d[g(L)]=E[L]}),this.calMilliseconds(),this;if(typeof E=="string"){var A=E.match(d);if(A){var q=A.slice(2).map(function(L){return L!=null?Number(L):0});return this.$d.years=q[0],this.$d.months=q[1],this.$d.weeks=q[2],this.$d.days=q[3],this.$d.hours=q[4],this.$d.minutes=q[5],this.$d.seconds=q[6],this.calMilliseconds(),this}}return this}var y=w.prototype;return y.calMilliseconds=function(){var E=this;this.$ms=Object.keys(this.$d).reduce(function(x,N){return x+(E.$d[N]||0)*f[N]},0)},y.parseFromMilliseconds=function(){var E=this.$ms;this.$d.years=S(E/u),E%=u,this.$d.months=S(E/c),E%=c,this.$d.days=S(E/s),E%=s,this.$d.hours=S(E/i),E%=i,this.$d.minutes=S(E/o),E%=o,this.$d.seconds=S(E/a),E%=a,this.$d.milliseconds=E},y.toISOString=function(){var E=b(this.$d.years,"Y"),x=b(this.$d.months,"M"),N=+this.$d.days||0;this.$d.weeks&&(N+=7*this.$d.weeks);var k=b(N,"D"),A=b(this.$d.hours,"H"),q=b(this.$d.minutes,"M"),L=this.$d.seconds||0;this.$d.milliseconds&&(L+=this.$d.milliseconds/1e3);var T=b(L,"S"),P=E.negative||x.negative||k.negative||A.negative||q.negative||T.negative,O=A.format||q.format||T.format?"T":"",M=(P?"-":"")+"P"+E.format+x.format+k.format+O+A.format+q.format+T.format;return M==="P"||M==="-P"?"P0D":M},y.toJSON=function(){return this.toISOString()},y.format=function(E){var x=E||"YYYY-MM-DDTHH:mm:ss",N={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return x.replace(l,function(k,A){return A||String(N[k])})},y.as=function(E){return this.$ms/f[g(E)]},y.get=function(E){var x=this.$ms,N=g(E);return N==="milliseconds"?x%=1e3:x=N==="weeks"?S(x/f[N]):this.$d[N],x===0?0:x},y.add=function(E,x,N){var k;return k=x?E*f[g(x)]:m(E)?E.$ms:h(E,this).$ms,h(this.$ms+k*(N?-1:1),this)},y.subtract=function(E,x){return this.add(E,x,!0)},y.locale=function(E){var x=this.clone();return x.$l=E,x},y.clone=function(){return h(this.$ms,this)},y.humanize=function(E){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!E)},y.milliseconds=function(){return this.get("milliseconds")},y.asMilliseconds=function(){return this.as("milliseconds")},y.seconds=function(){return this.get("seconds")},y.asSeconds=function(){return this.as("seconds")},y.minutes=function(){return this.get("minutes")},y.asMinutes=function(){return this.as("minutes")},y.hours=function(){return this.get("hours")},y.asHours=function(){return this.as("hours")},y.days=function(){return this.get("days")},y.asDays=function(){return this.as("days")},y.weeks=function(){return this.get("weeks")},y.asWeeks=function(){return this.as("weeks")},y.months=function(){return this.get("months")},y.asMonths=function(){return this.as("months")},y.years=function(){return this.get("years")},y.asYears=function(){return this.as("years")},w}();return function(w,y,E){n=E,r=E().$utils(),E.duration=function(k,A){var q=E.locale();return h(k,{$l:q},A)},E.isDuration=m;var x=y.prototype.add,N=y.prototype.subtract;y.prototype.add=function(k,A){return m(k)&&(k=k.asMilliseconds()),x.bind(this)(k,A)},y.prototype.subtract=function(k,A){return m(k)&&(k=k.asMilliseconds()),N.bind(this)(k,A)}}})})(vR);const yR=al;Yt.extend(yR);Yt.extend(Qb);function ol(e){const{numFiles:t,numBytes:n}=e,{accessToken:r}=ie(),[a,o]=I.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:i,downloadSpeed:s}=a;I.useEffect(()=>{r&&gR(r).then(h=>{o({isLoading:!1,downloadSpeed:h})})},[r]);const l=i||s===0||!n?0:n/s,u=l===0,c=u?"":Yt.duration({seconds:l}).humanize(),d=t===0,f=d?"SRC-inactive":"SRC-primary-text-color",m=u?"SRC-inactive":"SRC-primary-text-color";return R("span",{className:"download-details-container",children:[R("span",{children:[p("span",{className:f,children:p(ue,{icon:"file"})}),d?p(ko,{width:50}):R(j,{children:[" ",t," files "]})]}),n&&p(et,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:_a,placement:"top",children:R("span",{"data-testid":"numBytesUI",children:[p("span",{className:m,children:p(ue,{icon:"database"})}),u?p(ko,{width:50}):Xp(n)]})}),n&&p(et,{title:"This is an estimate of how long package download will take.",enterNextDelay:_a,placement:"top",children:R("span",{"data-testid":"downloadTimeEstimateUI",children:[p("span",{className:m,children:p(ue,{icon:"clock"})}),i&&t>0?p(ko,{width:50}):c]})})]})}try{ol.displayName="DownloadDetails",ol.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}}}catch{}async function bR(e,t,n,r,a){try{const o={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:r};return await iy(o,e),Xt("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:a}}),t(),[0,""]}catch(o){return Xt(o.reason,"danger"),t(),[0,""]}}const gr={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:R(j,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",p("br",{}),"If you don’t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:R(j,{children:["Please ",p(oy,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},wR=e=>{switch(e.status){case 0:case 1:return R("div",{children:[p("span",{className:"spinner white"}),p("span",{className:"spinner__text",children:gr[e.status].infoText})]});case 4:return p(j,{children:gr[e.status].infoText});case 2:case 3:return R(j,{children:[p(ol,{numFiles:e.fileCount,numBytes:e.fileSize}),p("span",{className:"download-confirmation-infoText",children:gr[e.status].infoText})]});default:return p(j,{})}},il=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:r,topLevelControlsState:a})=>{const{accessToken:o,downloadCartPageUrl:i}=ie(),{showDownloadConfirmation:s=!0}=a??{},[l,u]=I.useState(o?0:4),[c,d]=I.useState(0),[f,m]=I.useState(),{data:h,refetch:g}=Zb(),v=e(),[S,_]=I.useState(!1),b=I.useCallback((q,L,T)=>{if(o&&T){const P=T.totalNumberOfFiles>0,O=q??0;u(P?3:2),d(O),m(L)}},[o]),{data:C,isSuccess:w}=h0({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[ds.FILE]});wu(()=>{w&&C&&h&&b(C.totalChildCount,C.sumFileSizesBytes,h)},[b,t,w,C,h]);const y=Pr|rc,E={...v,partMask:y},{data:x}=Nh(E);wu(()=>{var q,L;if(x&&h){const T=(q=x.sumFileSizes)==null?void 0:q.greaterThan;b(x.queryCount,T||(L=x.sumFileSizes)==null?void 0:L.sumFileSizesBytes,h)}},[b,v,x,h]);const N=n?()=>n():()=>{r&&r(q=>({...q,showDownloadConfirmation:!1}))},k=async()=>{if(!o)u(4);else{u(1);const T=(await bR(o,N,v,t,()=>_(!0)))[0];u(T),g()}};S&&(window.location.href=i);const A=a==null?void 0:a.showFacetFilter;return p(j,{children:R(mn,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${gr[l].className} ${s?"":"hidden"}
          ${A?Zn:Kn}
        `,children:[p(wR,{status:l,fileCount:c,fileSize:f}),R("div",{className:"download-confirmation-action",children:[l!==1&&p("button",{className:"btn btn-link",onClick:N,children:gr[l].closeText}),(l===2||l===3)&&p("button",{type:"button",className:"btn btn-primary",onClick:()=>{k()},children:"Add"})]})]})})};try{il.displayName="DownloadConfirmation",il.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}}}catch{}const is=3,Xa=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Mt(),{topLevelControlsState:{showSearchBar:a,showFacetFilter:o}}=At(),[i,s]=I.useState(""),l=I.useRef(null),u=d=>{var f;if(d.preventDefault(),i.trim().length<is)(f=l.current)==null||f.setCustomValidity(`Search term must have a minimum of ${is} characters`);else{const m=r(),{additionalFilters:h=[]}=m.query,g={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:i};if(h.find(S=>S.concreteType==g.concreteType&&S.searchExpression==g.searchExpression))return;h.push(g),m.query.additionalFilters=h,n(m),s("")}},c=d=>{var f;(f=l.current)==null||f.setCustomValidity(""),s(d.currentTarget.value)};return p("div",{className:`QueryWrapperSearchInput ${o?Zn:Kn}`,children:p(nc,{in:a,timeout:{enter:300,exit:300},children:R("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[R("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:u,children:[p("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:p(ue,{icon:"search"})}),p("input",{ref:l,minLength:is,onChange:c,placeholder:"Enter Search Terms",value:i,type:"text"}),i.length>0&&p("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:p(ue,{icon:"close"})})]}),p("div",{className:"QueryWrapperSearchInput__helppopover",children:p(pn,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{Xa.displayName="FullTextSearch",Xa.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}const sl="First line is the columns names.",ll="Include row metadata (Row Id and Row Version).",Qa="Comma Separated Values (CSV)",Np="Tab Separated Values (TSV)",CR={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:Qa,title:Qa},{const:Np,title:Np}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[sl,ll]},uniqueItems:!0}}},SR={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},ER={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},_R={},xR=[CR,ER],NR=[SR,_R];class Gn extends I.Component{constructor(t){super(t),this.handleSubmit=n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()},this.handleDownloadSetup=n=>{this.setState({isLoading:!0});const{formData:r}=n,a=r["File Type"],o=r.Contents,{queryBundleRequest:i,getLastQueryRequest:s}=this.props,l=a===Qa?",":"	",u=o.includes(sl),c=o.includes(ll),d=i??s(),f=d.query.sql,m={sql:f,entityId:vn(f),selectedFacets:d.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:u,includeRowIdAndRowVersion:c,csvTableDescriptor:{separator:l},additionalFilters:d.query.additionalFilters};Qp(m,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})},this.onDownload=()=>{const{data:n}=this.state;Zp(n.resultsFileHandleId,this.context.accessToken).then(r=>{window.location.href=r,this.props.onClose()})},this.handleChange=n=>{const{formData:r}=n;this.setState({formData:r})},this.state={isLoading:!1,step:0,formData:{"File Type":Qa,Contents:[sl,ll]}}}render(){const t={position:"absolute",top:10,right:10,zIndex:10},n={height:50,width:50,backgroundSize:50};return p(Ke,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:R(Ke.Body,{children:[p("button",{style:t,onClick:this.props.onClose,children:p(ue,{icon:"close"})}),R(sb,{schema:xR[this.state.step],uiSchema:NR[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&p("div",{className:"SRC-centerAndJustifyContent",children:R("div",{className:"SRC-center-text",children:[p("p",{children:" Creating the File "}),p("div",{style:n,className:"spinner"}),p("p",{children:" Loading... "})]})}),R("div",{style:{textAlign:"right"},children:[p(ut,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),p(ut,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}Gn.contextType=qr;try{Gn.displayName="ModalDownload",Gn.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}}}catch{}function Za(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:r,lockedColumn:a,componentIndex:o,shouldDeepLink:i}=e,[s,l]=I.useState(void 0),{entityId:u,versionNumber:c,getInitQueryRequest:d,getLastQueryRequest:f,setQuery:m,resetQuery:h,removeQueryFilter:g,removeValueFromQueryFilter:v,removeSelectedFacet:S,removeValueFromSelectedFacet:_}=Fb({initQueryRequest:t,componentIndex:o,shouldDeepLink:i,onQueryChange:n}),b=I.useMemo(()=>f(),[f]),{data:C,hasNextPage:w,fetchPreviousPage:y,fetchNextPage:E,isFetchingNextPage:x,isLoading:N,error:k,isPreviousData:A}=Jb(b,{keepPreviousData:!0},l),q=N||A,{data:L}=po(u,c),[T,P]=I.useState(0);async function O(){if(!w)throw new Error("Called appendNextPageToResults when there is no next page");await E(),P("ALL")}async function M(){if(!w)throw new Error("Called goToNextPage when there is no next page");if(T==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await E(),P(T+1)}const z=T!=="ALL"&&T>0;async function B(){if(T==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!z)throw new Error("Called goToNextPage when there is no next page");await y(),P(T-1)}const F=I.useMemo(()=>{var X,K,Y;if(!(C==null||C.pages.length===0||C.pages[0].responseBody==null))return T==="ALL"?{...C==null?void 0:C.pages[0].responseBody,queryResult:{...(X=C==null?void 0:C.pages[0].responseBody)==null?void 0:X.queryResult,queryResults:{...(Y=(K=C==null?void 0:C.pages[0].responseBody)==null?void 0:K.queryResult)==null?void 0:Y.queryResults,rows:C.pages.flatMap(pe=>{var ce;return(ce=pe.responseBody.queryResult)==null?void 0:ce.queryResults.rows})??[]}}}:C==null?void 0:C.pages[T].responseBody},[T,C]);I.useEffect(()=>{F&&r&&r(JSON.stringify(F))},[F,r]);const W=F?rw(F.facets,F.selectColumns):!0,Q=I.useMemo(()=>aw(F,a),[F,a]),D=I.useMemo(()=>{const X=f();return ow(X.query,a)},[f,a]),$=I.useCallback(X=>{var K;return((K=F==null?void 0:F.columnModels)==null?void 0:K.find(Y=>Y.name===X))??null},[F==null?void 0:F.columnModels]),U={data:Q,isLoadingNewPage:x,hasNextPage:!!w,hasPreviousPage:z,isLoadingNewBundle:q,getLastQueryRequest:f,getInitQueryRequest:d,error:k,entity:L,executeQueryRequest:m,isFacetsAvailable:W,asyncJobStatus:s,appendNextPageToResults:O,goToNextPage:M,goToPreviousPage:B,hasResettableFilters:D,resetQuery:h,removeQueryFilter:g,removeValueFromQueryFilter:v,removeSelectedFacet:S,removeValueFromSelectedFacet:_,lockedColumn:a,getColumnModel:$},{children:G}=e;return p(Bb,{queryContext:U,children:p("div",{className:`SRC-wrapper ${q||x?"SRC-logo-cursor":""} ${W?"has-facets":""}`,children:G})})}try{Za.displayName="InfiniteQueryWrapper",Za.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}}}catch{}class Ka extends V.Component{constructor(t){super(t),this.handleClickOutsideForm=n=>{var r,a;!((r=this.searchFormRef.current)!=null&&r.contains(n==null?void 0:n.target))&&!((a=this.radioFormRef.current)!=null&&a.contains(n==null?void 0:n.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))},this.search=n=>{var f,m,h,g,v,S;n.preventDefault();const{searchText:r}=this.state;let{columnName:a}=this.state;const{searchable:o,lockedColumn:i}=this.props;if(a==="")if(o)a=o.filter(_=>_!==(i==null?void 0:i.columnName))[0];else{const _=(h=(m=(f=this.props.queryContext)==null?void 0:f.data)==null?void 0:m.columnModels)==null?void 0:h.filter(b=>b.name!==(i==null?void 0:i.columnName)).filter(b=>this.isSupportedColumn(b));a=(_==null?void 0:_[0].name)??""}this.setState({show:!1});const{executeQueryRequest:s,getLastQueryRequest:l}=this.props.queryContext,u=l(),{additionalFilters:c=[]}=u.query,d=c.findIndex(_=>!!(iw(_)||sw(_)&&_.columnName===a));if(d===-1){const _=(S=(v=(g=this.props.queryContext)==null?void 0:g.data)==null?void 0:v.columnModels)==null?void 0:S.filter(b=>b.name===a)[0];if(_!=null&&_.columnType.endsWith("_LIST")){const b={columnName:a,function:lw.HAS_LIKE,values:[`%${r}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};c.push(b)}else{const b={columnName:a,operator:cw.LIKE,values:[`%${r}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};c.push(b)}}else c[d].values.push(`%${r}%`);u.query.additionalFilters=c,s(u)},this.handleChange=n=>{this.setState({searchText:n.currentTarget.value})},this.isSupportedColumn=n=>{switch(n==null?void 0:n.columnType){case re.FILEHANDLEID:case re.ENTITYID:case re.DATE:case re.DATE_LIST:case re.USERID:return!1;default:return!0}},this.isSupportedColumnAndInProps=n=>{if(this.isSupportedColumn(n)){const{searchable:r}=this.props;return r==null?void 0:r.some(a=>a===(n==null?void 0:n.name))}return!1},this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:this.props.defaultColumn??""},this.searchFormRef=V.createRef(),this.radioFormRef=V.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(t){var n,r,a,o,i;!((n=t.queryVisualizationContext)!=null&&n.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)!=null&&r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(i=(o=(a=this.searchFormRef)==null?void 0:a.current)==null?void 0:o.querySelector("input"))==null||i.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var d;const{searchable:t,lockedColumn:n,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:a,getColumnDisplayName:o}}=this.props,{searchText:i,show:s,columnName:l}=this.state;let u=[];t?u=t.map(f=>{var m;return(m=r==null?void 0:r.columnModels)==null?void 0:m.find(h=>h.name===f)}).filter(this.isSupportedColumnAndInProps).map(f=>f.name):r!=null&&r.columnModels&&(u=(d=r.columnModels)==null?void 0:d.filter(this.isSupportedColumn).map(f=>f.name)),u.length&&(n!=null&&n.columnName)&&(u=u.filter(f=>f!==(n==null?void 0:n.columnName)));const c=a==null?void 0:a.showFacetFilter;return R("div",{className:`QueryWrapperSearchInput ${c?Zn:Kn}`,children:[p(nc,{in:a==null?void 0:a.showSearchBar,children:R("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[p("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:p(ue,{icon:"search"})}),p("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:i,type:"text"}),this.state.searchText.length>0&&p("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:p(ue,{icon:"close"})})]})}),p("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:p(wh,{in:s,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:R("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[p("p",{className:"deemphasized",children:p("i",{children:" Search In Field: "})}),u.map((f,m)=>{const h=o(f);return p("div",{className:"radio",children:p("label",{children:R("span",{children:[p("input",{id:f,type:"radio",value:f,checked:l===""&&m===0||l===f,onClick:()=>{var v,S,_;(_=(S=(v=this.searchFormRef)==null?void 0:v.current)==null?void 0:S.querySelector("input"))==null||_.focus(),this.setState({columnName:f})}}),p("span",{children:h})]})})},`search-field-${f}-${m}`)})]})})})]})}}try{Ka.displayName="Search",Ka.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}}}catch{}const IR="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",TR="https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries",Ja=({helpMessage:e=IR,helpUrl:t=TR})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Mt(),{topLevelControlsState:{showSqlEditor:a,showFacetFilter:o}}=At(),[i,s]=I.useState(""),l=I.useRef(null);I.useEffect(()=>{var d;if(a){const f=r().query.sql;s(f),(d=l.current)==null||d.focus()}},[a,r]);const u=d=>{d.preventDefault();const f=r();f.query.sql=i,f.query.offset=0,f.query.additionalFilters=[],f.query.selectedFacets=[],n(f)},c=d=>{var f;(f=l.current)==null||f.setCustomValidity(""),s(d.currentTarget.value)};return p("div",{className:`QueryWrapperSqlEditorInput ${o?Zn:Kn}`,children:p(nc,{in:a,timeout:{enter:300,exit:300},children:R("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[R("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:u,children:[p(ky,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),p("input",{ref:l,onChange:c,placeholder:"Enter Query",value:i,type:"text"})]}),p("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:p(pn,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{Ja.displayName="SqlEditor",Ja.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}const cl=e=>R(Ke,{animation:!1,show:!0,onHide:()=>e.onHide(),backdrop:"static",children:[p(Ke.Header,{closeButton:!0,children:p("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),R(tw,{children:[p("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),R("p",{children:["To find out more see ",p("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),p("span",{children:" and "}),p("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),R(nw,{children:[p(ut,{variant:"secondary",onClick:()=>e.onHide(),children:"CANCEL"}),p(ut,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>e.onHide(),children:"Sign in"})]})]});try{cl.displayName="DownloadLoginModal",cl.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const ul=({show:e,title:t,onClose:n,pythonNotes:r,pythonCode:a,rNotes:o,rCode:i,cliNotes:s,cliCode:l,helpMarkdown:u,helpUrl:c})=>{let d;l?d="Command Line":a?d="Python":d="R";const[f,m]=I.useState(d),h=R("p",{children:["Installation instructions are available at our"," ",p("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return R(Ke,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:e,onHide:n,size:"lg",children:[p(Ke.Header,{closeButton:!0,children:R(Ke.Title,{children:[t," ",u&&p(pn,{markdownText:u,helpUrl:c})]})}),R(Ke.Body,{children:[R("div",{className:"Tabs",children:[l&&p("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("Command Line")},"aria-selected":f==="Command Line",children:"Command Line"}),i&&p("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("R")},"aria-selected":f==="R",children:"R"}),a&&p("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("Python")},"aria-selected":f==="Python",children:"Python"})]}),R("div",{className:"TabContent",children:[f==="Command Line"&&R(j,{children:[p("p",{children:s}),h,R("pre",{children:[" ",l," "]})]}),f==="R"&&R(j,{children:[p("p",{children:o}),h,p("pre",{children:i})]}),f==="Python"&&R(j,{children:[p("p",{children:r}),h,p("pre",{children:a})]})]})]}),p(Ke.Footer,{children:p(ut,{variant:"primary",onClick:n,children:"OK"})})]})};try{ul.displayName="ProgrammaticInstructionsModal",ul.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}function dl({queryBundleRequest:e,onHide:t}){var d;const[n,r]=I.useState("..."),{data:a,isLoading:o,isPreviousData:i}=ew({...e,partMask:Py},{keepPreviousData:!0,useErrorBoundary:!0}),s=(d=a==null?void 0:a.responseBody)==null?void 0:d.combinedSql,l=o||i;I.useEffect(()=>{if(s&&!l){const f=s.toUpperCase().indexOf("FROM SYN"),m=`SELECT * ${s.substring(f)}`;r(m)}},[s,l]);const u=I.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),c=I.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return p(ul,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:p(j,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${u}"`,rNotes:R(j,{children:["This R code will download file annotations only. Use"," ",R("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${c}")
read.table(query$filepath, sep = ",")`,pythonNotes:R(j,{children:["This Python code will download file annotations only. Use"," ",p("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${c}")
query.asDataFrame()`})}try{dl.displayName="ProgrammaticOptions",dl.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const kR="Add To Download Cart",fl=e=>{const{accessToken:t}=ie(),{entity:n,data:r,getLastQueryRequest:a}=Mt(),o=a(),[i,s]=I.useState(!1),[l,u]=I.useState(!1),[c,d]=I.useState(!1),{onDownloadFiles:f,darkTheme:m=!0}=e,h=n&&(Nn(n)&&sy(n)||Pn(n)),g=n&&Pn(n)&&n.isLatestVersion;return R(I.Fragment,{children:[R(jt,{as:"span",children:[p(wc,{tooltipText:"Download Options",size:"lg",darkTheme:m,icon:"download"}),R(jt.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[p(jt.Item,{onClick:()=>{u(!0)},children:"Export Table"}),h&&p(et,{title:g?"A draft version of a dataset cannot be added to the Download Cart":null,placement:"left",enterNextDelay:300,describeChild:!0,children:p(jt.Item,{role:"button",className:g?"ignoreLink":void 0,disabled:g,style:g?{pointerEvents:"auto"}:{},onClick:()=>t?f():s(!0),children:kR})}),p(et,{title:g?"A draft version of a dataset cannot be downloaded programmatically":null,placement:"left",enterNextDelay:300,describeChild:!0,children:p(jt.Item,{className:g?"ignoreLink":void 0,disabled:g,style:g?{pointerEvents:"auto"}:{},onClick:()=>d(!0),children:"Programmatic Options"})})]})]}),i&&p(cl,{showModal:i,onHide:()=>s(!1)}),l&&p(Gn,{onClose:()=>u(!1),queryBundleRequest:o}),c&&r&&p(dl,{onHide:()=>d(!1),queryBundleRequest:o})]})};try{fl.displayName="DownloadOptions",fl.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const OR="addAndRemoveColumns",pl=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:r,darkTheme:a}=e,{getColumnDisplayName:o}=At(),[i,s]=I.useState(!1),l=(u,c,d)=>{d.source==="rootClose"?s(!1):s(!0)};return R(jt,{as:"span",onToggle:(u,c,d)=>l(u,c,d),show:i,drop:"down",children:[p(wc,{tooltipText:"Show/Hide Columns",icon:a?"columnsdark":"columns",darkTheme:a}),p(jt.Menu,{id:`${OR}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(u=>{const{name:c}=u,d=n.includes(c),f={width:"11px",marginRight:"10px",visibility:d?void 0:"hidden"},m=d?"SRC-primary-text-color":"";return R(jt.Item,{onClick:()=>r(c),children:[p("span",{className:m,style:f,children:p(ue,{icon:"check",sx:{width:"14px"}})}),o(c)]},c)})})]})};try{pl.displayName="ColumnSelection",pl.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const RR="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",AR="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",hl=({entity:e})=>{var a;const t=e&&Pn(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:Pr},{data:r}=Nh(n,{enabled:t});if(t&&r&&e){const o=r.queryCount,i=((a=e.items)==null?void 0:a.length)??0;if(o===i)return p(j,{});const s=i-o;let l="";return e.isLatestVersion?l=RR:l=AR,R(Rt,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[p(f0,{className:"SRC-color-warning",style:{fontSize:"16px"}}),s.toLocaleString()+" Unavailable",p(pn,{className:"SRC-margin-left-5",markdownText:l,placement:"right"})]})}else return p(j,{})};try{hl.displayName="MissingQueryResultsWarning",hl.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function qR(e,t){const{accessToken:n}=ie(),r=",",a=!0,o=!1,i=e.query.sql;return async()=>{try{const l=`SELECT CONCAT('drs://repo-prod.prod.sagebase.org/syn', id, '.', currentVersion) AS drs_uri, name as file_name, ${t==null?void 0:t.map(m=>m.name).join(",")} FROM ${i.slice(i.toLowerCase().indexOf("from")+4+1)}`,u={sql:l,entityId:vn(l),selectedFacets:e.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:a,includeRowIdAndRowVersion:o,csvTableDescriptor:{separator:r},additionalFilters:e.query.additionalFilters},c=await Qp(u,n),d=await Zp(c.resultsFileHandleId,n),f=`https://synapse-vayu.sbgenomics.com/import-redirect/drs/csv/?URL=${encodeURIComponent(d)}`;window.open(f,"_blank")}catch(s){Xt(s.reason,"danger")}}}const ml=e=>R(pw,{...e,height:20,viewBox:"0 0 828 828",children:[p("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.861 124.107C429.221 125.451 426.3 126.325 423.211 126.618L415.557 269.363C425.193 272.363 432.244 281.226 432.538 291.777L546.545 306.978C547.637 304.478 549.14 302.198 550.968 300.223L431.861 124.107ZM440.166 117.167L559.852 294.141C562.599 293.058 565.591 292.463 568.722 292.463C570.453 292.463 572.141 292.645 573.769 292.99L610.725 206.16C604.806 201.75 600.973 194.698 600.973 186.75C600.973 185.26 601.107 183.801 601.365 182.386L441.299 115.545C440.943 116.102 440.565 116.643 440.166 117.167ZM592.91 316.651C592.91 308.875 589.241 301.955 583.538 297.53L620.577 210.504C622.062 210.789 623.594 210.938 625.161 210.938C626.63 210.938 628.069 210.807 629.466 210.556L731.473 433.838C730.391 434.8 729.396 435.857 728.5 436.997L590.583 327.017C592.076 323.875 592.91 320.361 592.91 316.651ZM583.917 335.473C581.689 337.273 579.135 338.687 576.358 339.61L583.089 517.099C590.244 517.108 596.671 520.225 601.094 525.171L724.074 457.849C723.597 455.954 723.344 453.97 723.344 451.927C723.344 450.256 723.513 448.625 723.836 447.049L583.917 335.473ZM728.974 467.442L606.306 534.593C606.917 536.719 607.244 538.965 607.244 541.287C607.244 548.415 604.161 554.822 599.256 559.249L641.245 621.527C643.538 620.712 645.991 620.232 648.544 620.149L730.593 469.194C730.025 468.637 729.485 468.052 728.974 467.442ZM583.056 565.476C585.404 565.476 587.675 565.141 589.822 564.517L632.158 627.31C631.966 627.503 631.778 627.699 631.594 627.899L410.195 538.521L559.218 545.414C561.176 556.807 571.104 565.476 583.056 565.476ZM398.804 545.534C396.287 548.348 393.122 550.569 389.543 551.963L409.137 701.286C417.873 701.562 425.441 706.471 429.464 713.637L625.468 648.181C625.267 646.925 625.162 645.637 625.162 644.324C625.162 641.892 625.521 639.543 626.189 637.329L398.804 545.534ZM562.043 339.906C563.203 340.239 564.398 340.487 565.622 340.643L572.407 519.563C566.319 522.552 561.672 528.026 559.786 534.662L404.882 527.497C404.474 522.293 402.419 517.552 399.238 513.794L562.043 339.906ZM410.775 316.532C419.563 315.66 426.967 310.086 430.436 302.36L544.551 317.575C544.802 324.26 547.766 330.252 552.374 334.479L390.572 507.295C390.475 507.252 390.377 507.209 390.279 507.167C390.238 507.15 390.198 507.133 390.158 507.116L390.076 507.082C390.033 507.064 389.99 507.046 389.947 507.028L389.865 506.995L389.777 506.959L410.775 316.532ZM379.129 505.281L400.089 315.201C392.761 312.535 387.086 306.428 385.018 298.835L257.588 294.164C256.151 297.414 254.02 300.287 251.382 302.596L371.2 507.193C373.659 506.132 376.329 505.468 379.129 505.281ZM259.627 283.465L384.573 288.044C386.438 277.936 394.588 270.031 404.819 268.531L412.502 125.228C410.883 124.629 409.345 123.86 407.91 122.945L256.526 272.5C258.369 275.76 259.478 279.489 259.627 283.465ZM362.471 513.594L241.899 307.711C240.201 308.179 238.428 308.466 236.602 308.551L212.287 436.373C220.668 440.173 226.498 448.613 226.498 458.415C226.498 459.246 226.456 460.068 226.374 460.879L359.809 517.332C360.578 516.001 361.471 514.75 362.471 513.594ZM398.548 703.346L378.889 553.531C372.829 553.065 367.395 550.367 363.407 546.257L210.476 626.279C210.993 628.246 211.268 630.31 211.268 632.439C211.268 633.973 211.125 635.474 210.852 636.929L387.408 713.365C389.959 708.957 393.861 705.428 398.548 703.346ZM205.482 616.74L357.805 537.036C357.01 534.64 356.58 532.077 356.58 529.415C356.58 528.832 356.601 528.255 356.641 527.683L222.907 471.103C219.186 477.13 212.894 481.402 205.56 482.387L197.048 610.394C200.309 611.871 203.185 614.051 205.482 616.74ZM178.121 458.415C178.121 469.164 185.133 478.276 194.832 481.425L186.398 608.26C184.797 608.304 183.234 608.504 181.725 608.845L94.2764 412.358C95.9686 411.18 97.5031 409.79 98.8419 408.229L179.06 451.717C178.449 453.844 178.121 456.091 178.121 458.415ZM184.274 442.296C188.584 437.476 194.798 434.395 201.734 434.233L226.002 306.661C217.341 302.979 211.268 294.394 211.268 284.389C211.268 275.81 215.734 268.274 222.469 263.98L194.346 201.663C193.431 201.768 192.501 201.822 191.558 201.822C189.935 201.822 188.349 201.662 186.816 201.357L94.3034 372.649C100.563 377.021 104.658 384.279 104.658 392.494C104.658 394.639 104.379 396.719 103.855 398.699L184.274 442.296ZM235.456 260.201C234.505 260.201 233.567 260.256 232.644 260.363L204.526 198.055C211.271 193.763 215.746 186.221 215.746 177.633C215.746 177.057 215.726 176.486 215.687 175.92L399.494 113.808C399.759 114.312 400.042 114.805 400.341 115.286L249.271 264.532C245.355 261.802 240.592 260.201 235.456 260.201ZM172.016 613.512C166.455 617.944 162.891 624.775 162.891 632.439C162.891 645.798 173.72 656.628 187.079 656.628C195.062 656.628 202.141 652.761 206.547 646.798L384.232 723.723C384.191 724.297 384.17 724.877 384.17 725.462C384.17 738.821 395 749.651 408.359 749.651C421.718 749.651 432.547 738.821 432.547 725.462C432.547 724.963 432.532 724.466 432.502 723.974L629.521 658.179C633.894 664.427 641.145 668.513 649.351 668.513C662.71 668.513 673.539 657.683 673.539 644.324C673.539 634.62 667.825 626.25 659.577 622.397L739.776 474.845C742.211 475.669 744.82 476.115 747.533 476.115C760.891 476.115 771.721 465.286 771.721 451.927C771.721 438.568 760.891 427.738 747.533 427.738C745.247 427.738 743.036 428.055 740.94 428.648L639.371 206.326C645.418 201.929 649.35 194.799 649.35 186.75C649.35 173.391 638.52 162.561 625.161 162.561C617.133 162.561 610.018 166.472 605.618 172.493L444.924 105.391C445.034 104.455 445.09 103.503 445.09 102.538C445.09 89.179 434.26 78.3494 420.901 78.3494C407.543 78.3494 396.713 89.179 396.713 102.538C396.713 102.819 396.718 103.099 396.727 103.378L212.553 165.614C208.382 158.343 200.542 153.445 191.558 153.445C178.199 153.445 167.369 164.274 167.369 177.633C167.369 185.513 171.137 192.513 176.97 196.93L84.2531 368.6C83.0204 368.406 81.7569 368.306 80.4698 368.306C67.1108 368.306 56.2812 379.135 56.2812 392.494C56.2812 405.853 67.1108 416.683 80.4698 416.683C81.7672 416.683 83.0407 416.581 84.2827 416.384L172.016 613.512Z",fill:"url(#paint0_linear_271_30503)"}),p("defs",{children:R("linearGradient",{id:"paint0_linear_271_30503",x1:"163.941",y1:"159.14",x2:"682.43",y2:"676.053",gradientUnits:"userSpaceOnUse",children:[p("stop",{stopColor:"#9E5AA4"}),p("stop",{offset:"0.526649",stopColor:"#7387C2"}),p("stop",{offset:"1",stopColor:"#11AADE"})]})})]});try{ml.displayName="Cavatica",ml.__docgenInfo={description:"",displayName:"Cavatica",props:{children:{defaultValue:null,description:"Node passed into the SVG element.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"(Partial<SvgIconClasses> & Partial<ClassNameMap<never>>)"}},color:{defaultValue:{value:"'inherit'"},description:`The color of the component.
It supports both default and custom theme colors, which can be added as shown in the
[palette customization guide](https://mui.com/material-ui/customization/palette/#adding-new-colors).
You can use the \`htmlColor\` prop to apply a color attribute to the SVG element.`,name:"color",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"action"'},{value:'"disabled"'},{value:'"inherit"'},{value:'"info"'},{value:'"success"'},{value:'"warning"'},{value:'"primary"'},{value:'"secondary"'}]}},fontSize:{defaultValue:{value:"'medium'"},description:"The fontSize applied to the icon. Defaults to 24px, but can be configure to inherit font size.",name:"fontSize",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"inherit"'},{value:'"medium"'},{value:'"large"'}]}},htmlColor:{defaultValue:null,description:"Applies a color attribute to the SVG element.",name:"htmlColor",required:!1,type:{name:"string"}},inheritViewBox:{defaultValue:{value:"false"},description:"If `true`, the root node will inherit the custom `component`'s viewBox and the `viewBox`\nprop will be ignored.\nUseful when you want to reference a custom `component` and have `SvgIcon` pass that\n`component`'s viewBox to the root node.",name:"inheritViewBox",required:!1,type:{name:"boolean"}},shapeRendering:{defaultValue:null,description:`The shape-rendering attribute. The behavior of the different options is described on the
[MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering).
If you are having issues with blurry icons you should investigate this prop.`,name:"shapeRendering",required:!1,type:{name:"string"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},titleAccess:{defaultValue:null,description:`Provides a human-readable title for the element that contains it.
https://www.w3.org/TR/SVG-access/#Equivalent`,name:"titleAccess",required:!1,type:{name:"string"}},viewBox:{defaultValue:{value:"'0 0 24 24'"},description:`Allows you to redefine what the coordinates without units mean inside an SVG element.
For example, if the SVG element is 500 (width) by 200 (height),
and you pass viewBox="0 0 50 20",
this means that the coordinates inside the SVG will go from the top left corner (0,0)
to bottom right (50,20) and each unit will be worth 10px.`,name:"viewBox",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: SVGSVGElement | null) => void) | RefObject<SVGSVGElement> | null"}}}}}catch{}const LR=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:Dy,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],eo=e=>{var A;const{name:t,showColumnSelection:n=!1,hideDownload:r=!1,hideVisualizationsControl:a=!1,hideFacetFilterControl:o=!1,hideQueryCount:i=!1,hideSqlEditorControl:s=!0,customControls:l,showExportToCavatica:u=!1}=e,{data:c,entity:d,executeQueryRequest:f,getLastQueryRequest:m,getInitQueryRequest:h,lockedColumn:g}=Mt(),v=qR(m(),(A=c==null?void 0:c.queryResult)==null?void 0:A.queryResults.headers),{topLevelControlsState:S,setTopLevelControlsState:_,columnsToShowInTable:b,selectedRowIndices:C,setColumnsToShowInTable:w}=At(),y=q=>{const L={[q]:!S[q]};q==="showSearchBar"&&(L.showDownloadConfirmation=!1),q==="showDownloadConfirmation"&&(L.showSearchBar=!1),_(T=>({...T,...L}))},E=()=>{f(m())},x=I.useMemo(()=>{const q=h();return{sql:q.query.sql,selectedFacets:(q.query.selectedFacets??[]).filter(L=>L.columnName===(g==null?void 0:g.columnName)),additionalFilters:(q.query.additionalFilters??[]).filter(L=>"columnName"in L?L.columnName===(g==null?void 0:g.columnName):!0)}},[h,g==null?void 0:g.columnName]),N=q=>{let L=ir(b);L.includes(q)?L=L.filter(T=>T!==q):L.push(q),w(L)},k=S==null?void 0:S.showFacetFilter;return p("div",{className:`TopLevelControls ${k?Zn:Kn}`,"data-testid":"TopLevelControls",children:R("div",{children:[R("div",{className:"TopLevelControls__querycount",children:[t&&R(j,{children:[R(Rt,{variant:"sectionTitle",role:"heading",children:[t," ",!i&&p(fw,{query:x,parens:!0})]}),!i&&d&&p(hl,{entity:d})]}),!o&&R("a",{onClick:()=>y("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[p(ho,{type:S.showFacetFilter?"close":"filter"}),R("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[S.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),R("div",{className:"TopLevelControls__actions",children:[l&&l.map(q=>R("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${q.classNames??""}`,style:{marginRight:"5px"},type:"button",onClick:()=>q.onClick({data:c,selectedRowIndices:C,refresh:E}),children:[q.icon," ",q.buttonText]},q.buttonText)),u&&R(He,{variant:"text",onClick:()=>{v()},children:[p(ml,{sx:{mr:1}})," Send to Cavatica"]}),LR.map(q=>{const{key:L,icon:T,tooltipText:P}=q;return L==="showDownloadConfirmation"&&r||L==="showFacetVisualization"&&a||L==="showSqlEditor"&&s?p(V.Fragment,{},L):L==="showDownloadConfirmation"?p(fl,{darkTheme:!0,onDownloadFiles:()=>y(L)},L):p(wc,{tooltipText:P,callbackFn:()=>y(L),darkTheme:!0,icon:T},L)}),n&&p(pl,{headers:c==null?void 0:c.selectColumns,isColumnSelected:b,toggleColumnSelection:N,darkTheme:!0})]})]})})};try{eo.displayName="TopLevelControls",eo.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}}}}}catch{}const gl=({sortConfig:e})=>{const{defaultColumn:t,defaultDirection:n,sortableColumns:r}=e,a=Mt(),{getLastQueryRequest:o,executeQueryRequest:i}=a,{getColumnDisplayName:s}=At(),[l,u]=I.useState(t),[c,d]=I.useState(n),f=r.map(h=>({value:h,label:s(h)})),m=h=>{const g=o();let v="ASC";h===l&&(v=c==="ASC"?"DESC":"ASC");const S=h?[{column:h,direction:v}]:void 0;g.query.sort=S,i(g),u(h),d(v)};return R("div",{className:"QuerySortSelector bootstrap-4-backport",children:[p(Rt,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),p(hw,{className:"react-select-container SRC-inlineBlock",value:_b(l,f),options:f,onChange:h=>m(h==null?void 0:h.value),components:{Control:xb},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{gl.displayName="QuerySortSelector",gl.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}}}catch{}var kt=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(kt||{});const Ip=e=>{const t=vn(e.sql),n=vc(e.searchParams,e.sqlOperator),{sortConfig:r,columnAliases:a}=e,o=r?[{column:r.defaultColumn,direction:r.defaultDirection}]:void 0,i={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:t,query:{sql:e.sql,limit:e.limit??ac,sort:o,additionalFilters:n},partMask:Lr|Pr|oc|lh|ic|sc|rc|lc};return p(Za,{...e,initQueryRequest:i,children:R(yc,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:a,noContentPlaceholderType:e.noContentPlaceholderType??xa.STATIC,children:[r&&p(gl,{sortConfig:r}),p(ro,{...e}),p(bc,{children:s=>p(Kp,{error:s==null?void 0:s.error})})]})})};try{Ip.displayName="CardContainerLogic",Ip.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}}}catch{}const vl=({type:e,title:t,subTitle:n="",description:r,values:a,secondaryLabelLimit:o,isAlignToLeftNav:i,descriptionConfig:s,href:l,target:u,rgbIndex:c,icon:d})=>{const f=document.querySelector('meta[name="description"]'),[m]=I.useState(document.title),[h]=I.useState(f?f.getAttribute("content"):"");return I.useEffect(()=>(t&&document.title!==t&&(document.title=t),(r||n)&&(f==null||f.setAttribute("content",r||n)),function(){document.title=m,f==null||f.setAttribute("content",h)})),p("div",{className:`SRC-portalCard SRC-portalCardHeader ${i?"isAlignToLeftNav":""}`,children:p("div",{className:"container-fluid container-full-width",children:p("div",{className:"row",children:p("div",{className:"col-md-offset-1 col-md-10",children:R("div",{className:"SRC-portalCardMain",children:[d,R("div",{style:{width:"100%"},children:[R("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[p("div",{className:"SRC-type",children:e}),p("div",{children:p("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?p("a",{target:u,href:l,className:"highlight-link",children:t}):R("span",{children:[" ",t," "]})})}),n&&R("div",{className:"SRC-author",children:[" ",n," "]}),r&&p("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?p(Ge,{markdown:r}):r})]}),p("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),p("div",{className:"SRC-cardContent",children:a&&p(Cc,{isHeader:!0,secondaryLabelLimit:o,values:a})})]})]})})})})})};try{vl.displayName="HeaderCard",vl.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}}}catch{}const yl=e=>{var u;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:r=!1,displayValue:a}=e,{accessToken:o}=ie(),[i,s]=I.useState();I.useEffect(()=>{a===void 0&&(async()=>s(await Xn({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},o)))()},[o,a,t]);let l;return i&&(l=(u=i.requestedFiles[0].fileHandle)==null?void 0:u.fileName),R("button",{onClick:()=>{o&&t&&Jp(t.fileHandleId,o,t.associateObjectType,t.associateObjectId,r).then(c=>{window.open(c,"_blank")}).catch(c=>{console.error("Error on retrieving file handle url ",c)})},className:`SRC-primary-text-color ${cc}`,type:"button",style:{padding:0},children:[a??l??t.fileHandleId,n&&p(ue,{icon:"download"})]})};try{yl.displayName="FileHandleLink",yl.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}}}catch{}const bl=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:r}}=e,{accessToken:a}=ie(),[o,i]=I.useState(),{ref:s,inView:l}=Qn({triggerOnce:!0,rootMargin:"500px 0px"});return I.useEffect(()=>{(()=>{t&&n&&r&&l&&Jp(t,a,r,n,!1).then(c=>{i(c)}).catch(c=>{console.error("Error on retrieving file handle url ",c)})})()},[l,t,n,a,r]),p("span",{ref:s,children:o&&p("img",{src:o,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{bl.displayName="ImageFileHandle",bl.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}}}catch{}const Zc=400,PR="SRC-short-description",DR="SRC-long-description",wl=e=>{let t="";const n=e.split(" ");let r=0;for(;t.length<Zc&&r<n.length;)t+=`${n[r]} `,r+=1;return t=t.trim(),{previewText:t}},MR=(e,t,n)=>{let r;return e&&t&&(eh(e)?r={fileHandleId:t,associateObjectId:(e==null?void 0:e.id)??"",associateObjectType:Ae.TableEntity}:n&&(r={fileHandleId:t,associateObjectId:n,associateObjectType:Ae.FileEntity})),r},sn=({columnName:e,value:t,selectColumns:n,columnModels:r})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const a=(n==null?void 0:n.find(i=>i.name===e))||(r==null?void 0:r.find(i=>i.name===e));if(a==null?void 0:a.columnType.endsWith("_LIST")){let i=t,s;try{return s=JSON.parse(i),i=s.join(", "),{strList:s,str:i,columnModelType:a==null?void 0:a.columnType}}catch(l){console.error("Could not parse multivalue string ",i," caught err ",l)}}return{str:t,columnModelType:a==null?void 0:a.columnType}},VR=(e,t,n)=>(t==null?void 0:t.findIndex(r=>r.name===e))||(n==null?void 0:n.findIndex(r=>r.name===e)),Cl=e=>{const{synapseId:t,version:n}=e;return R("span",{children:[n,"  ",p("a",{target:kt.NEW_WINDOW,rel:"noopener noreferrer",href:`${Ue.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},to=e=>{const{value:t,columnName:n,labelLink:r,selectColumns:a,columnModels:o,isHeader:i,className:s,rowData:l,rowId:u}=e;if(!t)return p("p",{children:t});const{strList:c,str:d,columnModelType:f}=sn({columnName:n,value:t,selectColumns:a,columnModels:o});if(!d)return p("p",{children:d});let m=s;const h={};if(i&&(m=s==null?void 0:s.concat(" ","SRC-lightLink")),f===re.USERID_LIST&&c)return p("p",{children:c.map((v,S)=>R(V.Fragment,{children:[p(Dn,{ownerId:v,size:Sa,className:m}),S<c.length-1&&",  "]},v))});if(f===re.USERID&&d)return p(Dn,{ownerId:d,size:Sa,className:m});if(!r)return d.match(dh)?p("a",{target:kt.NEW_WINDOW,rel:"noopener noreferrer",href:`${Ue.PORTAL}#!Synapse:${d}`,className:m,children:d}):p("p",{children:d});let g;if(r.isMarkdown)c?g=p("p",{children:c.map((v,S)=>R(V.Fragment,{children:[p(Ge,{renderInline:!0,markdown:v},v),S<c.length-1&&",  "]},v))}):g=p(Ge,{renderInline:!0,markdown:t});else{const v=c||d.split(",");let S;if("target"in r&&(S=r.target),"linkColumnName"in r){const _=VR(r.linkColumnName,a,o);if(_==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),g=p(j,{children:t});else{const b=l[_];ly(b)?g=p(j,{children:t}):g=p("p",{children:v.map((C,w)=>R(V.Fragment,{children:[p("a",{href:b??void 0,target:S??kt.NEW_WINDOW,rel:"noopener noreferrer",className:m,style:h,children:C},C),w<v.length-1&&p("span",{style:{marginRight:4},children:", "})]},C))})}}else g=p("p",{children:v.map((_,b)=>{const{baseURL:C,URLColumnName:w,wrapValueWithParens:y}=r,E=r.overrideValueWithRowID?`syn${u}`:_,x=y?`(${E})`:E,N=`/${C}?${w}=${x}`;return R(V.Fragment,{children:[p("a",{href:N,className:m,style:h,target:S??kt.CURRENT_WINDOW,children:_},_),b<v.length-1&&p("span",{style:{marginRight:4},children:", "})]},_)})})}return r.tooltipText?p(et,{title:r.tooltipText,enterNextDelay:300,children:p("span",{children:g})}):g};function $R(e,t,n,r){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:a,URLColumnName:o,overrideLinkURLColumnName:i,overrideValueWithRowID:s}=e;if(i&&n[i]){const u=n[i],c=t[u];if(c)return c}const l=n[a];if(l===void 0)console.error(`Could not find match for data: ${t} with columnName ${a}`);else{const u=s?`syn${r}`:t[l];if(u)return`/${e.baseURL}?${o}=${u}`}}}function Tp(e,t,n,r,a){e=e.trim();let o=e,i=kt.CURRENT_WINDOW;e.match(dh)?o=`${Ue.PORTAL}#!Synapse:${e}`:e.match(jy)?(i=kt.NEW_WINDOW,o=`https://dx.doi.org/${e}`):t?t&&(o=$R(t,n,r,a)??"",o.includes("/DetailsPage")&&(i=kt.NEW_WINDOW)):i=kt.NEW_WINDOW;const s=(t==null?void 0:t.target)??i;return{href:o,target:s}}function Sl(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:a}=e;let o=t;a!=null&&a.isMarkdown&&(o=p(Ge,{markdown:o}));const i=n||(a==null?void 0:a.showFullDescriptionByDefault);return p("div",{className:i?"":"SRC-hidden",children:p("span",{"data-search-handle":r,className:`SRC-font-size-base ${DR}`,children:o})})}function El(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:a,toggleShowMore:o}=e;return a!=null&&a.showFullDescriptionByDefault?p(j,{}):R("div",{className:n?"SRC-hidden":"",children:[p("span",{"data-search-handle":r,className:`SRC-font-size-base ${PR} SRC-short-description`,children:wl(t).previewText}),t.length>=Zc&&p("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:o,children:"...Show More"})]})}class no extends V.Component{constructor(t){super(t),this.getCutoff=n=>{let r="";const a=n.split(" ");let o=0;for(;r.length<Zc&&o<a.length;)r+=`${a[o]} `,o+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:n,target:r,titleSearchHandle:a,title:o})=>n?p("a",{"data-search-handle":a,target:r,href:n,className:"highlight-link",children:o}):R("span",{"data-search-handle":a,children:[" ",o," "]}),this.state={hasClickedShowMore:!1}}render(){var pe;const{schema:t,data:n,rowId:r,genericCardSchema:a,secondaryLabelLimit:o,selectColumns:i,columnModels:s,iconOptions:l,useTypeColumnForIcon:u=!1,isHeader:c=!1,titleLinkConfig:d,ctaLinkConfig:f,labelLinkConfig:m,descriptionConfig:h,rgbIndex:g,columnIconOptions:v,queryContext:{entity:S},queryVisualizationContext:{getColumnDisplayName:_}}=this.props,b=a,{hasClickedShowMore:C}=this.state,{link:w="",type:y}=b,E=n[t[b.title]];let x=b.subTitle&&n[t[b.subTitle]];x=(b==null?void 0:b.subTitle)&&sn({value:x,columnName:b==null?void 0:b.subTitle,selectColumns:i,columnModels:s}).str;const N=n[t[b.description||""]],k=n[t[b.icon||""]],A=n[t[b.dataTypeIconNames||""]],q=n[t[b.imageFileHandleColumnName||""]],L=s==null?void 0:s.find(ce=>b.link===ce.name),T=L==null?void 0:L.columnType,P=n[t[w]]||"",{href:O,target:M}=Tp(P,d,n,t,r),z=[],{secondaryLabels:B=[]}=b,F=S&&!eh(S);for(let ce=0;ce<B.length;ce+=1){const be=B[ce];let we=n[t[be]],Ie;if(we){if(F&&be==="currentVersion"){const Oe=n[t.id];we=Cl({synapseId:Oe,version:we}),Ie="Version"}else{const Oe=m==null?void 0:m.find(Pe=>Pe.matchColumnName===be);we=p(to,{value:we,columnName:be,labelLink:Oe,isHeader:c,selectColumns:i,columnModels:s,rowData:n}),Ie=_(be)}const Re=[Ie,we,be];z.push(Re)}}const Q=MR(S,q||P,n[t.id]),D=z.length>0,$={marginTop:c?"0px":void 0,marginBottom:c?"0px":void 0,paddingBottom:D||q?void 0:"15px"},U=R(j,{children:[!u&&q&&p("div",{className:"SRC-imageThumbnail",style:{padding:b.thumbnailRequiresPadding?"21px":void 0},children:Q&&p(bl,{fileHandleAssociation:Q})}),!u&&!q&&p("div",{className:"SRC-cardThumbnail",children:p(ho,{iconOptions:l,value:k,type:y})}),u&&p("div",{className:"SRC-cardThumbnail",children:p(ue,{icon:Oy[n[t.type]]})})]});if(c)return p(vl,{descriptionConfig:h,title:E,subTitle:x,description:N,type:y,icon:U,values:z,href:O,target:M,isAlignToLeftNav:!0,secondaryLabelLimit:o,rgbIndex:g});const G=_(b.title),H=_(b.subTitle),X=_(b.description);let K,Y;if(f){const ce=n[t[f.link]]||"",{href:be,target:we}=Tp(ce,void 0,n,t,r);K=be,Y=we}return R("div",{style:$,className:"SRC-portalCard",children:[R("div",{className:"SRC-portalCardMain",children:[U,R("div",{className:"SRC-cardContent",children:[p("div",{className:"SRC-type",children:y}),((pe=v==null?void 0:v.columns)==null?void 0:pe.dataType)&&(A==null?void 0:A.length)&&p("div",{style:{marginTop:"20px"},children:p(mw,{iconConfigs:v.columns.dataType,iconNames:JSON.parse(A),useBackground:!0,useTheme:!0})}),p("div",{children:p("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!d&&T===re.FILEHANDLEID&&Q?p(yl,{fileHandleAssociation:Q,showDownloadIcon:y!==My,displayValue:E}):this.renderTitle({href:O,target:M,titleSearchHandle:G,title:E})})}),x&&p("div",{"data-search-handle":H,className:"SRC-author",children:x}),N&&p(El,{description:N,hasClickedShowMore:C,descriptionSubTitle:X,descriptionConfig:h,toggleShowMore:this.toggleShowMore}),N&&p(Sl,{description:N,hasClickedShowMore:C,descriptionSubTitle:X,descriptionConfig:h}),f&&K&&Y&&p("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:p("a",{target:Y,rel:"noopener noreferrer",href:K,children:f.text})})]})]}),D&&p(Cc,{isHeader:!1,secondaryLabelLimit:o,values:z,columnIconOptions:v,className:`${q?"hasImage":"hasIcon"}`})]})}}no.contextType=qr;try{Sl.displayName="LongDescription",Sl.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}}}catch{}try{El.displayName="ShortDescription",El.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}}}catch{}try{wl.displayName="getCutoff",wl.__docgenInfo={description:"",displayName:"getCutoff",props:{}}}catch{}try{sn.displayName="getValueOrMultiValue",sn.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}try{Cl.displayName="VersionLabel",Cl.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}}}catch{}try{to.displayName="SynapseCardLabel",to.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}}}}}catch{}try{no.displayName="GenericCard",no.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}}}catch{}class Or extends I.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(`${Ue.PORTAL}#!Synapse:${n}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n,selectColumns:r,columnModels:a}=this.props,o=t[n.datasetName],i=t[n.summary],s=sn({columnName:"tumorType",value:t[n.tumorType],selectColumns:r,columnModels:a}).str,l=sn({columnName:"diseaseFocus",value:t[n.diseaseFocus],selectColumns:r,columnModels:a}).str,u=t[n.id],c=t[n.fundingAgency],d=t[n.fileCount],f=Xp(t[n.fileSize]),m=[["FUNDER",sn({columnName:"fundingAgency",value:c,selectColumns:r,columnModels:a}).str],["SIZE",f],["FILES",d]];return R("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[R("div",{className:"SRC-cardThumbnail",children:[p(ho,{type:ch}),p("div",{children:f})]}),R("div",{className:"SRC-cardContent SRC-dataset",children:[p("div",{className:"SRC-type",children:"Dataset "}),p("div",{children:p("h3",{children:p("a",{target:"_self",href:`${Ue.PORTAL}#!Synapse:${u}`,children:o})})}),R("div",{className:"SRC-description-dataset",children:[p("p",{className:"SRC-description-text",children:i}),p("div",{className:"SRC-cardAction bootstrap-4-backport",children:p(ut,{className:"SRC-datasetButton",onClick:this.handleLinkClick(u),variant:"secondary",children:"Download Dataset"})})]}),p("div",{className:"SRC-cardAnnotations",children:p(uw,{chips:[s,l]})})]}),p(Cc,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:m})]})}}try{Or.displayName="Dataset",Or.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}class _l extends I.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(n,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n}=this.props,r=t[n.organizationName],a=t[n.organizationPath],o=t[n.summary],i=t[n.website],s=t[n.logo];let l=i.replace("https://","");l=l.replace("http://",""),l.charAt(l.length-1)==="/"&&(l=l.substring(0,l.length-1));const u=window.location.hash.substring(1)===a,c={};let d;return u?c.paddingBottom="42px":d=p("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:p(ut,{className:"btn-wide",href:a,variant:"secondary",children:"View Funded Research"})}),R("div",{className:"SRC-portalCard SRC-typeFunder ",style:c,children:[R("div",{className:"SRC-cardContent",children:[p("div",{className:"SRC-type",children:"Organization"}),s&&p("div",{className:"SRC-cardThumbnail",children:p("img",{alt:"funder logo",className:"SRC-logo",src:s})}),p("div",{children:R("h3",{children:[u&&r,!u&&p("a",{href:a,children:r})]})}),p("div",{className:"SRC-website",children:p("a",{rel:"noopener noreferrer",target:"_blank",href:i,children:l})}),p("div",{className:"SRC-description",children:o})]}),d]})}}try{_l.displayName="Funder",_l.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}try{Or.displayName="Dataset",Or.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}const xl=({data:e,schema:t})=>{const n=e[t.submitterName],r=e[t.submitterUserId],a=e[t.time],o=e[t.timeUnits],i=e[t.text],s=e[t.tag];return R("div",{className:"SRC-portalCard ObservationCard",children:[R("div",{className:"ObservationCard__submitter",children:[!r&&p("div",{children:n}),r&&p(Dn,{size:"SMALL USER CARD",ownerId:r})]}),a&&R("div",{className:"ObservationCard__time",children:[p(ue,{icon:"time"}),R("span",{children:[`${a} ${o}`,Number(a)>1?"s":""]})]}),p("div",{className:"ObservationCard__text",children:p(dw,{summary:i})}),p("div",{className:"ObservationCard__tags",children:s&&p("span",{className:"SRC-tag",children:s})})]})},Nl=()=>R("div",{className:"SRC-portalCard ObservationCard",children:[p("div",{className:"ObservationCard__submitter",children:p("span",{children:p(ps,{width:"100px"})})}),p("div",{className:"ObservationCard__time",children:p(ue,{icon:"time"})}),p("div",{className:"ObservationCard__text",children:p(dc,{numCols:1,numRows:4})}),p("div",{className:"ObservationCard__tags",children:p(ps,{width:"80px"})})]});try{xl.displayName="ObservationCard",xl.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}}}catch{}try{Nl.displayName="LoadingObservationCard",Nl.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}}}catch{}function FR(e){const{propsToPass:t,type:n}=e;switch(n){case ch:return p(Or,{...t});case $y:return p(_l,{...t});case Vy:return p(no,{...t});case fs:return p(xl,{...t});default:return p("div",{})}}const ro=e=>{const{isHeader:t=!1,unitDescription:n,type:r,isLoading:a,secondaryLabelLimit:o=3,title:i,...s}=e,l=zb(),{NoContentPlaceholder:u}=At(),{data:c,appendNextPageToResults:d,hasNextPage:f}=l,m=At(),h=c!=null&&c.queryResult.queryResults.tableId?[c==null?void 0:c.queryResult.queryResults.tableId]:[],g=ih({ids:h,type:"ENTITY_HEADER"});if(c){if(c&&c.queryResult.queryResults.rows.length===0)return p(u,{})}else return R("div",{children:[a&&r===fs&&p(Nl,{}),a&&r!==fs&&uh]});const v={};c.queryResult.queryResults.headers.forEach((b,C)=>{v[b.name]=C});const S=f&&p("div",{className:"SRC-viewMore bootstrap-4-backport",children:p(ut,{variant:"secondary",className:"btn-wide",onClick:()=>{d()},children:"View More"})});let _;if(r===gu){const b=c.queryResult.queryResults.headers.findIndex(w=>w.columnType===re.USERID);if(b===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const C=c.queryResult.queryResults.rows.map(w=>w.values[b]);_=p(gw,{data:c,list:C,size:gu})}else{const b=c.queryResult.queryResults.rows;_=b.length?b.map((C,w)=>{const E={key:JSON.stringify(C.values),type:r,schema:v,isHeader:t,secondaryLabelLimit:o,rowId:C.rowId,data:C.values,selectColumns:c.selectColumns,columnModels:c.columnModels,tableEntityConcreteType:g[0]&&g[0].type,tableId:c==null?void 0:c.queryResult.queryResults.tableId,queryContext:l,queryVisualizationContext:m,...s};return p(FR,{propsToPass:E,type:r},C.rowId??w)}):p(j,{})}return R("div",{role:"list",children:[i&&p("h2",{className:"SRC-card-overview-title",children:i}),!i&&n&&p(Eh,{frontText:"Displaying"}),_,S]})};try{ro.displayName="CardContainer",ro.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}}}catch{}var Il={},BR={get exports(){return Il},set exports(e){Il=e}};(function(e,t){(function(r,a){e.exports=a()})(co,()=>(()=>{var n={887:i=>{i.exports=function(l){for(var u=5381,c=l.length;c;)u=33*u^l.charCodeAt(--c);return u>>>0}}},r={};function a(i){var s=r[i];if(s!==void 0)return s.exports;var l=r[i]={exports:{}};return n[i](l,l.exports,a),l.exports}a.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return a.d(s,{a:s}),s},a.d=(i,s)=>{for(var l in s)a.o(s,l)&&!a.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:s[l]})},a.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var o={};return(()=>{a.r(o),a.d(o,{default:()=>v});var i=a(887),s=a.n(i);function l(S){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},l(S)}function u(S,_){for(var b=0;b<_.length;b++){var C=_[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,m(C.key),C)}}function c(S,_,b){return _&&u(S.prototype,_),b&&u(S,b),Object.defineProperty(S,"prototype",{writable:!1}),S}function d(S,_){if(!(S instanceof _))throw new TypeError("Cannot call a class as a function")}function f(S,_,b){return(_=m(_))in S?Object.defineProperty(S,_,{value:b,enumerable:!0,configurable:!0,writable:!0}):S[_]=b,S}function m(S){var _=function(C,w){if(l(C)!=="object"||C===null)return C;var y=C[Symbol.toPrimitive];if(y!==void 0){var E=y.call(C,w||"default");if(l(E)!=="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(C)}(S,"string");return l(_)==="symbol"?_:String(_)}var h,g=(h=0,function(){return h++}),v=c(function S(_){var b=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d(this,S),f(this,"ID","id"),f(this,"PX","px"),f(this,"RESIZABLE","grip-resizable"),f(this,"FLEX","grip-flex"),f(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),f(this,"reset",function(w){return b.init(w)}),f(this,"onResize",function(){var w=b.tb;if(w.classList.remove(b.RESIZABLE),w.opt.fixed){w.tableWidth=Number(window.getComputedStyle(w).width.replace(/px/,"")).valueOf();for(var y=0,E=0;E<w.columnCnt;E++)y+=w.columns[E].w;for(var x=0;x<w.columnCnt;x++)w.columns[x].style.width=Math.round(1e3*w.columns[x].w/y)/10+"%",w.columns[x].locked=!0,w.opt.currentWidths[x]=Number(window.getComputedStyle(w.columns[x]).width.replace(/px/,"")).valueOf()}else b.applyBounds(),w.opt.resizeMode==="flex"&&w.opt.serialize&&b.serializeStore();w.classList.add(b.RESIZABLE),b.syncGrips()}),f(this,"onGripMouseDown",function(w){var y=w.target.parentNode.data,E=b.tb,x=E.grips[y.i],N=w.touches;if(x.ox=N?N[0].pageX:w.pageX,x.l=x.offsetLeft,x.x=x.l,b.createStyle(document.querySelector("head"),"*{cursor:"+E.opt.dragCursor+"!important}"),document.addEventListener("touchmove",b.onGripDrag),document.addEventListener("mousemove",b.onGripDrag),document.addEventListener("touchend",b.onGripDragOver),document.addEventListener("mouseup",b.onGripDragOver),x.classList.add(E.opt.draggingClass),b.grip=x,E.columns[y.i].locked)for(var k,A=0;A<E.columnCnt;A++)(k=E.columns[A]).locked=!1,k.w=Number(window.getComputedStyle(k).width.replace(/px/,"")).valueOf();w.preventDefault()}),f(this,"onGripDrag",function(w){var y=b.grip;if(y){var E=y.t,x=w.touches,N=(x?x[0].pageX:w.pageX)-y.ox+y.l,k=E.opt.minWidth,A=y.i,q=1.5*E.cellSpace+k+E.borderSpace,L=A===E.columnCnt-1,T=A?E.grips[A-1].offsetLeft+E.cellSpace+k:q,P=E.opt.fixed?A===E.columnCnt-1?E.tableWidth-q:E.grips[A+1].offsetLeft-E.cellSpace-k:1/0;if(N=Math.max(T,Math.min(P,N)),y.x=N,y.style.left=N+b.PX,L&&(y.w=E.columns[A].w+N-y.l),E.opt.liveDrag){L?(E.columns[A].style.width=y.w+b.PX,!E.opt.fixed&&E.opt.overflow?E.style.minWidth=E.tableWidth+N-y.l+b.PX:E.tableWidth=Number(window.getComputedStyle(E).width.replace(/px/,"")).valueOf()):b.syncCols(E,A,!1,E.opt),b.syncGrips();var O=E.opt.onDrag;O&&O(w)}w.preventDefault()}}),f(this,"onGripDragOver",function(w){var y=b.grip;document.removeEventListener("touchend",b.onGripDragOver),document.removeEventListener("mouseup",b.onGripDragOver),document.removeEventListener("touchmove",b.onGripDrag),document.removeEventListener("mousemove",b.onGripDrag);var E=document.querySelector("head").lastChild;if(E.parentNode.removeChild(E),y){if(y.classList.remove(y.t.opt.draggingClass),y.x-y.l!=0){var x=y.t,N=x.opt.onResize,k=y.i;if(k===x.columnCnt-1){var A=x.columns[k];A.style.width=y.w+b.PX,A.w=y.w}else b.syncCols(x,k,!0,x.opt);x.opt.fixed||b.applyBounds(),b.syncGrips(),N&&N(w),x.opt.serialize&&b.serializeStore()}b.grip=null}}),f(this,"init",function(w){if(w.disable)return b.destroy();var y=b.tb,E=y.getAttribute(b.ID)||b.RESIZABLE+g();if(!y.matches("table")||y.extended&&!w.partialRefresh)return null;var x=document.querySelector("head");if(b.createStyle(x," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),w.hoverCursor&&w.hoverCursor!=="col-resize"){var N=".grip-handle .grip-resizable:hover{cursor:"+w.hoverCursor+"!important}";b.createStyle(x,N)}y.setAttribute(b.ID,E);var k=y.opt;y.opt=b.extendOptions(w);var A=b.getTableHeaders(y);if(b.extendTable(A),w.remoteTable&&w.remoteTable.matches("table")){var q=b.getTableHeaders(y.opt.remoteTable);A.length===q.length?b.extendRemoteTable(y.opt.remoteTable,q,y):console.warn("column count for remote table did not match")}return k}),f(this,"applyBounds",function(){var w=b.tb,y=w.columns.map(function(E){return window.getComputedStyle(E).width});w.style.width=window.getComputedStyle(w).width,w.tableWidth=Number(w.style.width.replace(/px/,"")).valueOf(),w.classList.remove(b.FLEX),w.columns.forEach(function(E,x){E.style.width=y[x];var N=Number(y[x].replace(/px/,"")).valueOf();E.w=N,w.opt.currentWidths[x]=N}),w.classList.add(b.FLEX)}),f(this,"serializeStore",function(){var w=b.store,y=b.tb;w[y.getAttribute(b.ID)]="";for(var E=0,x=0;x<y.columns.length;x++){var N=window.getComputedStyle(y.columns[x]).width.replace(/px/,"");w[y.getAttribute(b.ID)]+=N+";",E+=Number(N).valueOf()}w[y.getAttribute(b.ID)]+=E.toString(),y.opt.fixed||(w[y.getAttribute(b.ID)]+=";"+window.getComputedStyle(y).width.replace(/px/,""))}),f(this,"syncGrips",function(){var w=b.tb;w.gripContainer.style.width=w.tableWidth+b.PX;for(var y=0;y<w.columnCnt;y++){var E=w.columns[y],x=E.getBoundingClientRect(),N=w.getBoundingClientRect();w.grips[y].style.left=x.left-N.left+E.offsetWidth+w.cellSpace/2+b.PX,w.grips[y].style.height=(w.opt.headerOnly?w.columns[0].offsetHeight:w.offsetHeight)+b.PX}}),f(this,"destroy",function(){var w=b.tb,y=w.getAttribute(b.ID);return y?(b.store[y]="",w.classList.remove(b.RESIZABLE),w.classList.remove(b.FLEX),w.remote&&(w.remote.classList.remove(b.RESIZABLE),w.remote.classList.remove(b.FLEX)),w.gripContainer&&w.gripContainer.parentNode&&w.gripContainer.parentNode.removeChild(w.gripContainer),delete w.extended,w.opt):null}),f(this,"createStyle",function(w,y){var E=s()(y).toString(),x=w.querySelectorAll("style"),N=Array.from(x).filter(function(A){return A.gripid===E});if(!N.length){var k=document.createElement("style");k.type="text/css",k.gripid=E,k.styleSheet?k.styleSheet.cssText=y:k.appendChild(document.createTextNode(y)),w.appendChild(k)}}),f(this,"extendOptions",function(w){var y=Object.assign({},S.DEFAULTS,w);switch(y.fixed=!0,y.overflow=!1,y.resizeMode){case"flex":y.fixed=!1;break;case"overflow":y.fixed=!1,y.overflow=!0}return y}),f(this,"getTableHeaders",function(w){var y="#"+w.id,E=Array.from(w.querySelectorAll(y+">thead>tr:nth-of-type(1)>th"));return(E=E.concat(Array.from(w.querySelectorAll(y+">thead>tr:nth-of-type(1)>td")))).length||(E=(E=(E=(E=Array.from(w.querySelectorAll(y+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(w.querySelectorAll(y+">tr:nth-of-type(1)>th")))).concat(Array.from(w.querySelectorAll(y+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(w.querySelectorAll(y+">tr:nth-of-type(1)>td")))),b.filterInvisible(E,!1)}),f(this,"filterInvisible",function(w,y){return w.filter(function(E){var x=y?-1:E.offsetWidth,N=y?-1:E.offsetHeight;return!(x===0&&N===0||E.style&&E.style.display&&window.getComputedStyle(E).display==="none")})}),f(this,"extendTable",function(w){var y=b.tb;y.opt.removePadding&&y.classList.add("grip-padding"),y.classList.add(b.RESIZABLE),y.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),y.grips=[],y.columns=[],y.tableWidth=Number(window.getComputedStyle(y).width.replace(/px/,"")).valueOf(),y.gripContainer=y.previousElementSibling,y.opt.marginLeft&&(y.gripContainer.style.marginLeft=y.opt.marginLeft),y.opt.marginRight&&(y.gripContainer.style.marginRight=y.opt.marginRight),y.cellSpace=parseInt(b.legacyIE?y.cellSpacing||y.currentStyle.borderSpacing:window.getComputedStyle(y).borderSpacing.split(" ")[0].replace(/px/,""))||2,y.borderSpace=parseInt(b.legacyIE?y.border||y.currentStyle.borderLeftWidth:window.getComputedStyle(y).borderLeftWidth.replace(/px/,""))||1,y.extended=!0,b.createGrips(w)}),f(this,"extendRemoteTable",function(w,y,E){E.opt.removePadding&&w.classList.add("grip-padding"),w.classList.add(b.RESIZABLE),w.getAttribute(b.ID)||w.setAttribute(b.ID,E.getAttribute(b.ID)+"remote"),w.columns=[],y.forEach(function(N,k){var A=y[k];A.w=E.columns[k].w,A.style.width=A.w+b.PX,A.removeAttribute("width"),w.columns.push(A)}),w.tableWidth=E.tableWidth,w.cellSpace=E.cellSpace,w.borderSpace=E.borderSpace;var x=Array.from(w.querySelectorAll("col"));w.columnGrp=b.filterInvisible(x,!0),w.columnGrp.forEach(function(N,k){N.removeAttribute("width"),N.style.width=E.columnGrp[k].style.width}),E.remote=w}),f(this,"createGrips",function(w){var y=b.tb;y.columnGrp=b.filterInvisible(Array.from(y.querySelectorAll("col")),!0),y.columnGrp.forEach(function(N){N.removeAttribute("width")}),y.columnCnt=w.length;var E=!1;b.store[y.getAttribute(b.ID)]&&(b.deserializeStore(w),E=!0),w.forEach(function(N,k){var A=w[k],q=y.opt.disabledColumns.indexOf(k)!==-1;b.createDiv(y.gripContainer,"grip-handle");var L=y.gripContainer.lastChild;!q&&y.opt.gripInnerHtml&&(L.innerHTML=y.opt.gripInnerHtml),b.createDiv(L,b.RESIZABLE),k===y.columnCnt-1&&(L.classList.add("grip-lastgrip"),y.opt.fixed&&(L.innerHTML="")),L.addEventListener("touchstart",b.onGripMouseDown,{capture:!0,passive:!0}),L.addEventListener("mousedown",b.onGripMouseDown,!0),q?L.classList.add("grip-disabledgrip"):(L.classList.remove("grip-disabledgrip"),L.addEventListener("touchstart",b.onGripMouseDown,{capture:!0,passive:!0}),L.addEventListener("mousedown",b.onGripMouseDown,!0)),L.t=y,L.i=k,y.opt.widths[k]?A.w=y.opt.widths[k]:A.w=E?Number(A.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(A).width.replace(/px/,"")).valueOf(),y.opt.currentWidths[k]=A.w,A.style.width=A.w+b.PX,A.removeAttribute("width"),L.data={i:k,t:y.getAttribute(b.ID),last:k===y.columnCnt-1},y.grips.push(L),y.columns.push(A)});var x=Array.from(y.querySelectorAll("td"));x.concat(Array.from(y.querySelectorAll("th"))),(x=(x=x.filter(function(N){for(var k=0;k<w.length;k++)if(w[k]===N)return!1;return!0})).filter(function(N){return!(N.querySelectorAll("table th").length||N.querySelectorAll("table td").length)})).forEach(function(N){N.removeAttribute("width")}),y.opt.fixed||(y.removeAttribute("width"),y.classList.add(b.FLEX)),b.syncGrips()}),f(this,"deserializeStore",function(w){var y=b.tb;if(y.columnGrp.forEach(function(k){k.removeAttribute("width")}),y.opt.flush)b.store[y.getAttribute(b.ID)]="";else{var E=b.store[y.getAttribute(b.ID)].split(";"),x=E[y.columnCnt+1];!y.opt.fixed&&x&&(y.style.width=x+b.PX,y.opt.overflow&&(y.style.minWidth=x+b.PX,y.tableWidth=Number(x).valueOf()));for(var N=0;N<y.columnCnt;N++)w[N].style.width=E[N]+b.PX,y.columnGrp[N]&&(y.columnGrp[N].style.width=100*Number(E[N]).valueOf()/Number(E[y.columnCnt]).valueOf()+"%")}}),f(this,"createDiv",function(w,y,E){var x=document.createElement("div");x.classList.add(y),E&&(x.innerHTML=E),w.appendChild(x)}),f(this,"syncCols",function(w,y,E,x){var N=w.remote,k=b.grip.x-b.grip.l,A=w.columns[y],q=w.columns[y+1];if(A&&q){var L=A.w+k,T=q.w-k,P=L+b.PX;if(A.style.width=P,w.columnGrp[y]&&w.columnGrp[y].style.width&&(w.columnGrp[y].style.width=P),N&&(N.columns[y].style.width=P,N.columnGrp[y]&&N.columnGrp[y].style.width&&(N.columnGrp[y].style.width=P)),x.fixed){var O=T+b.PX;q.style.width=O,w.columnGrp[y+1]&&w.columnGrp[y+1].style.width&&(w.columnGrp[y+1].style.width=O),N&&(N.columns[y+1].style.width=O,N.columnGrp[y+1]&&N.columnGrp[y+1].style.width&&(N.columnGrp[y+1].style.width=O))}else x.overflow&&(w.style.minWidth=w.tableWidth+k+b.PX);E&&(A.w=L,q.w=x.fixed?T:q.w,N&&(N.columns[y].w=L,N.columns[y+1].w=x.fixed?T:q.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=_,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(C)});v.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],currentWidths:[],serialize:!0,onDrag:null,onResize:null}})(),o})())})(BR);const zR=Wy(Il),Tl=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:r}=ie(),a=!!r,{data:o}=po(t,n),{mutate:i}=Kb({onSuccess:()=>{Xt(`${(o==null?void 0:o.name)??t} was successfully added to your Download Cart.`,"success")},onError:s=>{Xt(`Unable to add the file to your Download Cart. ${s.reason}`,"danger")}});return a?p(j,{children:p(et,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:p("a",{"data-testid":"AddToDownloadListV2",onClick:()=>{i({entityId:t,entityVersionNumber:n})},className:"ignoreLink",children:p(ue,{icon:"addToCart"})})})}):p(j,{})};try{Tl.displayName="AddToDownloadListV2",Tl.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var ao={},HR={get exports(){return ao},set exports(e){ao=e}};(function(e,t){(function(n,r){var a="1.0.33",o="",i="?",s="function",l="undefined",u="object",c="string",d="major",f="model",m="name",h="type",g="vendor",v="version",S="architecture",_="console",b="mobile",C="tablet",w="smarttv",y="wearable",E="embedded",x=350,N="Amazon",k="Apple",A="ASUS",q="BlackBerry",L="Browser",T="Chrome",P="Edge",O="Firefox",M="Google",z="Huawei",B="LG",F="Microsoft",W="Motorola",Q="Opera",D="Samsung",$="Sharp",U="Sony",G="Xiaomi",H="Zebra",X="Facebook",K=function(ne,oe){var te={};for(var he in ne)oe[he]&&oe[he].length%2===0?te[he]=oe[he].concat(ne[he]):te[he]=ne[he];return te},Y=function(ne){for(var oe={},te=0;te<ne.length;te++)oe[ne[te].toUpperCase()]=ne[te];return oe},pe=function(ne,oe){return typeof ne===c?ce(oe).indexOf(ce(ne))!==-1:!1},ce=function(ne){return ne.toLowerCase()},be=function(ne){return typeof ne===c?ne.replace(/[^\d\.]/g,o).split(".")[0]:r},we=function(ne,oe){if(typeof ne===c)return ne=ne.replace(/^\s\s*/,o),typeof oe===l?ne:ne.substring(0,x)},Ie=function(ne,oe){for(var te=0,he,J,xe,se,Qe,Te;te<oe.length&&!Qe;){var it=oe[te],Ct=oe[te+1];for(he=J=0;he<it.length&&!Qe;)if(Qe=it[he++].exec(ne),Qe)for(xe=0;xe<Ct.length;xe++)Te=Qe[++J],se=Ct[xe],typeof se===u&&se.length>0?se.length===2?typeof se[1]==s?this[se[0]]=se[1].call(this,Te):this[se[0]]=se[1]:se.length===3?typeof se[1]===s&&!(se[1].exec&&se[1].test)?this[se[0]]=Te?se[1].call(this,Te,se[2]):r:this[se[0]]=Te?Te.replace(se[1],se[2]):r:se.length===4&&(this[se[0]]=Te?se[3].call(this,Te.replace(se[1],se[2])):r):this[se]=Te||r;te+=2}},Re=function(ne,oe){for(var te in oe)if(typeof oe[te]===u&&oe[te].length>0){for(var he=0;he<oe[te].length;he++)if(pe(oe[te][he],ne))return te===i?r:te}else if(pe(oe[te],ne))return te===i?r:te;return ne},Oe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Pe={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ye={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,v],[/opios[\/ ]+([\w\.]+)/i],[v,[m,Q+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[m,Q]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[m,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[v,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+L],v],[/\bfocus\/([\w\.]+)/i],[v,[m,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[m,Q+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[m,Q+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[m,"MIUI "+L]],[/fxios\/([-\w\.]+)/i],[v,[m,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+L]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+L],v],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,X],v],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[m,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,T+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[m,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[v,Re,Oe]],[/(webkit|khtml)\/([\w\.]+)/i],[m,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[m,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,v],[/(cobalt)\/([\w\.]+)/i],[m,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,ce]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,o,ce]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,ce]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[g,D],[h,C]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[g,D],[h,b]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[g,k],[h,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[g,k],[h,C]],[/(macintosh);/i],[f,[g,k]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[g,z],[h,C]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[g,z],[h,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[g,G],[h,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[g,G],[h,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[g,"OPPO"],[h,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[g,"Vivo"],[h,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[g,"Realme"],[h,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[g,W],[h,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[g,W],[h,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[g,B],[h,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[g,B],[h,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[g,"Lenovo"],[h,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[g,"Nokia"],[h,b]],[/(pixel c)\b/i],[f,[g,M],[h,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[g,M],[h,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[g,U],[h,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[g,U],[h,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[g,"OnePlus"],[h,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[g,N],[h,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[g,N],[h,b]],[/(playbook);[-\w\),; ]+(rim)/i],[f,g,[h,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[g,q],[h,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[g,A],[h,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[g,A],[h,b]],[/(nexus 9)/i],[f,[g,"HTC"],[h,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[f,/_/g," "],[h,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[g,"Acer"],[h,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[g,"Meizu"],[h,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[g,$],[h,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,f,[h,b]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,f,[h,C]],[/(surface duo)/i],[f,[g,F],[h,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[g,"Fairphone"],[h,b]],[/(u304aa)/i],[f,[g,"AT&T"],[h,b]],[/\bsie-(\w*)/i],[f,[g,"Siemens"],[h,b]],[/\b(rct\w+) b/i],[f,[g,"RCA"],[h,C]],[/\b(venue[\d ]{2,7}) b/i],[f,[g,"Dell"],[h,C]],[/\b(q(?:mv|ta)\w+) b/i],[f,[g,"Verizon"],[h,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[g,"Barnes & Noble"],[h,C]],[/\b(tm\d{3}\w+) b/i],[f,[g,"NuVision"],[h,C]],[/\b(k88) b/i],[f,[g,"ZTE"],[h,C]],[/\b(nx\d{3}j) b/i],[f,[g,"ZTE"],[h,b]],[/\b(gen\d{3}) b.+49h/i],[f,[g,"Swiss"],[h,b]],[/\b(zur\d{3}) b/i],[f,[g,"Swiss"],[h,C]],[/\b((zeki)?tb.*\b) b/i],[f,[g,"Zeki"],[h,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],f,[h,C]],[/\b(ns-?\w{0,9}) b/i],[f,[g,"Insignia"],[h,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[g,"NextBook"],[h,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],f,[h,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],f,[h,b]],[/\b(ph-1) /i],[f,[g,"Essential"],[h,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[g,"Envizen"],[h,C]],[/\b(trio[-\w\. ]+) b/i],[f,[g,"MachSpeed"],[h,C]],[/\btu_(1491) b/i],[f,[g,"Rotor"],[h,C]],[/(shield[\w ]+) b/i],[f,[g,"Nvidia"],[h,C]],[/(sprint) (\w+)/i],[g,f,[h,b]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[g,F],[h,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[g,H],[h,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[g,H],[h,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,f,[h,_]],[/droid.+; (shield) bui/i],[f,[g,"Nvidia"],[h,_]],[/(playstation [345portablevi]+)/i],[f,[g,U],[h,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[g,F],[h,_]],[/smart-tv.+(samsung)/i],[g,[h,w]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[g,D],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,B],[h,w]],[/(apple) ?tv/i],[g,[f,k+" TV"],[h,w]],[/crkey/i],[[f,T+"cast"],[g,M],[h,w]],[/droid.+aft(\w)( bui|\))/i],[f,[g,N],[h,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[g,$],[h,w]],[/(bravia[\w ]+)( bui|\))/i],[f,[g,U],[h,w]],[/(mitv-\w{5}) bui/i],[f,[g,G],[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[g,we],[f,we],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/((pebble))app/i],[g,f,[h,y]],[/droid.+; (glass) \d/i],[f,[g,M],[h,y]],[/droid.+; (wt63?0{2,3})\)/i],[f,[g,H],[h,y]],[/(quest( 2)?)/i],[f,[g,X],[h,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[h,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[h,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,b]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[m,P+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[v,Re,Pe]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[v,Re,Pe]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,v],[/\(bb(10);/i],[v,[m,q]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[m,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[m,T+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],v],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,v],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,v]]},ge=function(ne,oe){if(typeof ne===u&&(oe=ne,ne=r),!(this instanceof ge))return new ge(ne,oe).getResult();var te=ne||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:o),he=oe?K(Ye,oe):Ye;return this.getBrowser=function(){var J={};return J[m]=r,J[v]=r,Ie.call(J,te,he.browser),J.major=be(J.version),J},this.getCPU=function(){var J={};return J[S]=r,Ie.call(J,te,he.cpu),J},this.getDevice=function(){var J={};return J[g]=r,J[f]=r,J[h]=r,Ie.call(J,te,he.device),J},this.getEngine=function(){var J={};return J[m]=r,J[v]=r,Ie.call(J,te,he.engine),J},this.getOS=function(){var J={};return J[m]=r,J[v]=r,Ie.call(J,te,he.os),J},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return te},this.setUA=function(J){return te=typeof J===c&&J.length>x?we(J,x):J,this},this.setUA(te),this};ge.VERSION=a,ge.BROWSER=Y([m,v,d]),ge.CPU=Y([S]),ge.DEVICE=Y([f,g,h,_,b,w,C,y,E]),ge.ENGINE=ge.OS=Y([m,v]),e.exports&&(t=e.exports=ge),t.UAParser=ge;var _e=typeof n!==l&&(n.jQuery||n.Zepto);if(_e&&!_e.ua){var Xe=new ge;_e.ua=Xe.getResult(),_e.ua.get=function(){return Xe.getUA()},_e.ua.set=function(ne){Xe.setUA(ne);var oe=Xe.getResult();for(var te in oe)_e.ua[te]=oe[te]}}})(typeof window=="object"?window:co)})(HR,ao);const oo=e=>{const{accessToken:t}=ie(),{associatedObjectId:n,entityVersionNumber:r,associatedObjectType:a,fileHandleId:o,displayFileName:i,onClickCallback:s}=e,{ref:l,inView:u}=Qn(),[c,d]=I.useState(!1),[f,m]=I.useState(!1),[h,g]=I.useState(),[v,S]=I.useState(),[_,b]=I.useState("");let C=!0;I.useEffect(()=>(C&&u&&x(),()=>{C=!1}),[t,u]);const w=async()=>{let k;const q=new ao.UAParser().getBrowser().name=="Safari";let L=null;q&&(L=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),L.document.body.innerHTML="Downloading file on Safari...");try{a===Ae.TableEntity?k=(await E(!0)).requestedFiles[0].preSignedURL:k=(await mu(h,t,!1,!0)).preSignedURL}catch(T){console.log("Fail to get file download link: ",T)}k?(q&&L?(L.location=k,setTimeout(()=>{L&&L.close()},1e4)):window.open(k),s&&s(c)):(L==null||L.close(),console.log("Fail to get file download link"))},y=k=>k&&!k.isPreview?(m(!0),!0):(m(!1),!1),E=(k=!1)=>Xn({includeFileHandles:!0,includePreSignedURLs:k,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:a,fileHandleId:o}]},t),x=()=>yr(t,n,r).then(async k=>{if(Object.hasOwn(k,"dataFileHandleId"))return g(k),mu(k,t,!0).then(A=>{const q=A.fileHandle;q&&y(q)&&Aw(q)&&(d(!0),S(q.externalURL))}).catch(A=>{console.log("Error on getFileEntityFileHandle = ",A)});if(a===Ae.TableEntity){const q=(await E()).requestedFiles[0].fileHandle;i&&q&&y(q)&&b(q.fileName)}return Promise.resolve()}).catch(k=>{console.log("Error on getEntity = ",k)});return p(et,{title:c?"Navigate to external link":"Download this file individually",enterNextDelay:_a,placement:"left",children:p("span",{ref:l,children:(()=>c?p("button",{className:"btn-download-icon",onClick:()=>{s&&s(c)},children:p("a",{className:"ignoreLink",rel:"noreferrer",href:v,target:"_blank",children:p(ue,{icon:"openInNewWindow"})})}):f?R("button",{className:"btn-download-icon",onClick:()=>{w()},children:[p(ue,{icon:"download"}),i&&_?_:""]}):p(j,{}))()})})};try{oo.displayName="DirectDownload",oo.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}}}catch{}const UR={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""}};function kp(e){const{downloadType:t}=e,n=Th();if(t){const r=UR[t];return p(ue,{icon:r.icon,label:r.tooltipText,sx:{color:r.color(n),height:"16px",verticalAlign:"text-top"}})}return p(j,{})}function kl(e,t){const[n,r]=V.useState(),{accessToken:a}=ie(),o=parseInt(t??""),{data:i,error:s}=Oh(e,Number.isNaN(o)?void 0:o,{includeEntity:!0,includePermissions:!0}),l=V.useMemo(()=>({restrictableObjectType:Sc.ENTITY,objectId:e}),[e]),{data:u}=Ih(l),c=i==null?void 0:i.entity,d=i==null?void 0:i.permissions;return V.useEffect(()=>{u&&u.hasUnmetAccessRequirement?r("AccessBlockedByRestriction"):c&&(d!=null&&d.canDownload)?tc(c)&&c.dataFileHandleId?r("Accessible"):r("NoFileHandle"):d&&!d.canDownload&&r(a?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[a,c,s,d,u]),n}function Ol(e){const[t,n]=V.useState(!1),[r,a]=V.useState([]),{entityId:o,entityVersionNumber:i}=e,s=kl(o,i),{accessToken:l}=ie(),u=V.useMemo(()=>({restrictableObjectType:Sc.ENTITY,objectId:o}),[o]),{data:c}=Ih(u),d=()=>{th(l,o).then(h=>{Kl(h)?window.open(`${Ny(Iy.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${o}&TYPE=ENTITY`,"_blank"):(a(h),n(!0))})},f=I.useMemo(()=>{if(!c)return p(j,{});const h=c==null?void 0:c.hasUnmetAccessRequirement,g=c==null?void 0:c.restrictionLevel;let v="";if(h)v="Request Access";else{if(vw.OPEN===g)return p(j,{});v="View Terms"}return R(j,{children:[p("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"top"},className:e.className,onClick:d,children:v}),t&&p(Jl,{entityId:o,accessRequirementFromProps:r,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[o,c,r,t]);return s===void 0?p(j,{}):R("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?p("button",{type:"button",className:cc,onClick:h=>{if(h.isTrusted){const g=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(g)}},children:p(kp,{downloadType:s})}):p(kp,{downloadType:s}),f]})}try{kl.displayName="useGetFileHandleDownloadType",kl.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}}}catch{}try{Ol.displayName="HasAccessV2",Ol.__docgenInfo={description:`HasAccess shows if the user has access to the file or not. If the user doesn't have access due to a restriction,
then a link will be shown that opens a modal with steps to request access.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Rl=e=>{const{accessToken:t}=ie(),{entityIdList:n}=e,[r,a]=I.useState([p(j,{})]),{ref:o,inView:i}=Qn();let s=!0;I.useEffect(()=>(i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n.length&&cy(n,t).then(u=>{if(s){const c=u.results.map(d=>p("p",{children:p(hs,{entity:d,displayTextField:"name"})},d.id));a(c)}}).catch(u=>{console.log("EntityIdList: Error getting entity headers",u)})};return p("span",{ref:o,children:r})};try{Rl.displayName="EntityIdList",Rl.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}}}catch{}const Al=e=>{const{accessToken:t}=ie(),{evaluationId:n}=e,[r,a]=I.useState(),{ref:o,inView:i}=Qn();let s=!0;I.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n&&uy(n,t).then(u=>{a(u.name)}).catch(u=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",u)})};return p("span",{ref:o,children:r})};try{Al.displayName="EvaluationIdRenderer",Al.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}const ql=e=>{const{accessToken:t}=ie(),{userIds:n}=e,[r,a]=I.useState(),{ref:o,inView:i}=Qn();let s=!0;I.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n.length&&dy(n,t).then(u=>{const c=u.list.map(d=>p(uc,{userProfile:d,className:"SRC-marginFifteen"},d.ownerId));a(c)}).catch(u=>{console.log("UserIdList: Error getting user profiles",u)})};return p("span",{ref:o,children:r})};try{ql.displayName="UserIdList",ql.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}}}catch{}const Ll=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:r,mapUserIdToHeader:a,columnLinkConfig:o,columnName:i,selectColumns:s,columnModels:l,rowData:u,rowId:c,rowVersionNumber:d})=>{const{entity:f}=Mt();if(!t)return R("p",{className:"SRC-inactive",children:[" ",$b]});if(o)return p(to,{value:t,columnName:i,selectColumns:s,columnModels:l,isHeader:!1,labelLink:o,rowData:u,rowId:c});if(f&&(Nn(f)||Pn(f)||nh(f))&&(i==="id"||i==="name")&&c&&d){const m=`syn${c.toString()}`,h=r[m]??m;return p("p",{children:p(hs,{entity:h,versionNumber:d,className:`${n}`,showIcon:!1,displayTextField:i})})}switch(e){case re.ENTITYID:return p("p",{children:p(hs,{entity:r[t]??t,className:`${n}`,displayTextField:"name"})});case re.DATE_LIST:{const m=JSON.parse(t);return R("p",{children:[m.map((h,g)=>R("span",{className:n,children:[br(Yt(Number(h))),g!==m.length-1?", ":""]},g))," "]})}case re.BOOLEAN_LIST:{const m=JSON.parse(t);return p("p",{children:m.map((h,g)=>R("span",{className:n,children:[h?"true":"false",g!==m.length-1?", ":""]},g))})}case re.FILEHANDLEID:return p(j,{children:f&&p(oo,{associatedObjectId:f.id,associatedObjectType:Ae.TableEntity,fileHandleId:t,displayFileName:!0})});case re.ENTITYID_LIST:{const m=JSON.parse(t);return p("p",{children:p(Rl,{entityIdList:m})})}case re.USERID_LIST:{const m=JSON.parse(t);return p(ql,{userIds:m})}case re.STRING_LIST:case re.INTEGER_LIST:{const m=JSON.parse(t);return p("p",{className:n,children:m.map((h,g)=>R(V.Fragment,{children:[h,g!==m.length-1?", ":""]},h))})}case re.EVALUATIONID:return p(Al,{evaluationId:t});case re.DATE:return p("p",{className:n,children:br(Yt(Number(t)))});case re.USERID:if(Object.prototype.hasOwnProperty.call(a,t)){const{ownerId:m,userName:h}=a[t];if(a[t].isIndividual===!1){const g=h===vu?"public":"people";return h===vu?R("span",{children:[p(ue,{icon:g})," All registered Synapse users"]}):R("a",{target:"_blank",rel:"noopener noreferrer",href:`${Ue.PORTAL}#!Team:${m}`,children:[p(ue,{icon:g})," ",h]})}else return p(Dn,{userProfile:a[t],preSignedURL:a[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case re.LINK:return p("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case re.STRING:case re.DOUBLE:case re.INTEGER:case re.BOOLEAN:case re.MEDIUMTEXT:case re.LARGETEXT:return p("p",{className:n,children:t});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),p("p",{className:n,children:t})}return p("p",{className:n,children:t})};try{Ll.displayName="SynapseTableCell",Ll.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string | null"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}}}catch{}const Op=(e,...t)=>{var r;const n=[];return(r=e==null?void 0:e.selectColumns)==null||r.forEach((a,o)=>{t.includes(a.columnType)&&n.push(o)}),n},Rp=(e,t,n)=>{var a;const r=new Set;return(a=e.queryResult)==null||a.queryResults.rows.forEach(o=>{o.values.forEach((i,s)=>{i!=null&&n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,i)&&i&&r.add(i)})}),r},jR=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:r,currentPage:a}=Hb(),o=e==null?void 0:e.queryCount,i=(l,u)=>{t(u)},s=l=>{const u=l.target.value;r(u)};return a==1&&o&&o<10?p(j,{}):R("div",{children:[p(c0,{page:a,count:Math.ceil(o/n),color:"secondary",onChange:i,style:{display:"inline-block",float:"left"}}),p(Rt,{variant:"body1",style:{display:"inline-block"},children:`${o==null?void 0:o.toLocaleString()} total rows /`}),R("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[p("option",{value:10,children:"10 per page"}),p("option",{value:25,children:"25 per page"}),p("option",{value:100,children:"100 per page"}),p("option",{value:500,children:"500 per page"})]})]})},Pl=e=>{const{onCopy:t}=e;return p(et,{title:"Copy IDs to the clipboard",enterNextDelay:_a,placement:"right",children:p("span",{children:p("button",{"data-testid":"copySynIdsButton",onClick:t,children:p("span",{style:{height:15,marginTop:-1},children:p(ue,{icon:"contentCopy"})})})})})};try{Pl.displayName="InteractiveCopyIdsIcon",Pl.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}}}catch{}const WR=()=>{const e=ie(),t=Mt(),[n,r]=I.useState(!1),[a,o]=I.useState(),[i,s]=I.useState();I.useEffect(()=>(i||s(new AbortController),()=>{i&&i.abort()}),[i]);const l=()=>{r(!0);const{getLastQueryRequest:u}=t,c=u(),{sql:d}=c.query,{entityId:f,versionNumber:m}=Vb(d),h=m?`.${m}`:"";c.partMask=Lr;const g=`${f}${h}`,v=d.indexOf(g);c.query.sql=`select id from ${g}${d.substring(v+g.length)}`,Yp(c,e.accessToken,i==null?void 0:i.signal).then(S=>{o(S)}).catch(S=>{console.error(S),Xt("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{r(!1)})};return I.useEffect(()=>{if(a){const{rows:u}=a.queryResult.queryResults,c=u.map(d=>`${d.values[0]}`).join(`
`);navigator.clipboard.writeText(c).then(()=>{Xt("Successfully copied to clipboard"),o(void 0)})}},[a]),n?p(lo,{size:25}):p(Pl,{onCopy:()=>{l()}})};var ln=[],GR=function(){return ln.some(function(e){return e.activeTargets.length>0})},YR=function(){return ln.some(function(e){return e.skippedTargets.length>0})},Ap="ResizeObserver loop completed with undelivered notifications.",XR=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Ap}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Ap),window.dispatchEvent(e)},Rr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Rr||(Rr={}));var cn=function(e){return Object.freeze(e)},QR=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,cn(this)}return e}(),ov=function(){function e(t,n,r,a){return this.x=t,this.y=n,this.width=r,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,cn(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,a=t.top,o=t.right,i=t.bottom,s=t.left,l=t.width,u=t.height;return{x:n,y:r,top:a,right:o,bottom:i,left:s,width:l,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Kc=function(e){return e instanceof SVGElement&&"getBBox"in e},iv=function(e){if(Kc(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var a=e,o=a.offsetWidth,i=a.offsetHeight;return!(o||i||e.getClientRects().length)},qp=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},ZR=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},vr=typeof window<"u"?window:{},da=new WeakMap,Lp=/auto|scroll/,KR=/^tb|vertical/,JR=/msie|trident/i.test(vr.navigator&&vr.navigator.userAgent),ht=function(e){return parseFloat(e||"0")},Ln=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new QR((n?t:e)||0,(n?e:t)||0)},Pp=cn({devicePixelContentBoxSize:Ln(),borderBoxSize:Ln(),contentBoxSize:Ln(),contentRect:new ov(0,0,0,0)}),sv=function(e,t){if(t===void 0&&(t=!1),da.has(e)&&!t)return da.get(e);if(iv(e))return da.set(e,Pp),Pp;var n=getComputedStyle(e),r=Kc(e)&&e.ownerSVGElement&&e.getBBox(),a=!JR&&n.boxSizing==="border-box",o=KR.test(n.writingMode||""),i=!r&&Lp.test(n.overflowY||""),s=!r&&Lp.test(n.overflowX||""),l=r?0:ht(n.paddingTop),u=r?0:ht(n.paddingRight),c=r?0:ht(n.paddingBottom),d=r?0:ht(n.paddingLeft),f=r?0:ht(n.borderTopWidth),m=r?0:ht(n.borderRightWidth),h=r?0:ht(n.borderBottomWidth),g=r?0:ht(n.borderLeftWidth),v=d+u,S=l+c,_=g+m,b=f+h,C=s?e.offsetHeight-b-e.clientHeight:0,w=i?e.offsetWidth-_-e.clientWidth:0,y=a?v+_:0,E=a?S+b:0,x=r?r.width:ht(n.width)-y-w,N=r?r.height:ht(n.height)-E-C,k=x+v+w+_,A=N+S+C+b,q=cn({devicePixelContentBoxSize:Ln(Math.round(x*devicePixelRatio),Math.round(N*devicePixelRatio),o),borderBoxSize:Ln(k,A,o),contentBoxSize:Ln(x,N,o),contentRect:new ov(d,l,x,N)});return da.set(e,q),q},lv=function(e,t,n){var r=sv(e,n),a=r.borderBoxSize,o=r.contentBoxSize,i=r.devicePixelContentBoxSize;switch(t){case Rr.DEVICE_PIXEL_CONTENT_BOX:return i;case Rr.BORDER_BOX:return a;default:return o}},eA=function(){function e(t){var n=sv(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=cn([n.borderBoxSize]),this.contentBoxSize=cn([n.contentBoxSize]),this.devicePixelContentBoxSize=cn([n.devicePixelContentBoxSize])}return e}(),cv=function(e){if(iv(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},tA=function(){var e=1/0,t=[];ln.forEach(function(i){if(i.activeTargets.length!==0){var s=[];i.activeTargets.forEach(function(u){var c=new eA(u.target),d=cv(u.target);s.push(c),u.lastReportedSize=lv(u.target,u.observedBox),d<e&&(e=d)}),t.push(function(){i.callback.call(i.observer,s,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var a=r[n];a()}return e},Dp=function(e){ln.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(a){a.isActive()&&(cv(a.target)>e?n.activeTargets.push(a):n.skippedTargets.push(a))})})},nA=function(){var e=0;for(Dp(e);GR();)e=tA(),Dp(e);return YR()&&XR(),e>0},ss,uv=[],rA=function(){return uv.splice(0).forEach(function(e){return e()})},aA=function(e){if(!ss){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return rA()}).observe(n,r),ss=function(){n.textContent="".concat(t?t--:t++)}}uv.push(e),ss()},oA=function(e){aA(function(){requestAnimationFrame(e)})},Ca=0,iA=function(){return!!Ca},sA=250,lA={attributes:!0,characterData:!0,childList:!0,subtree:!0},Mp=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Vp=function(e){return e===void 0&&(e=0),Date.now()+e},ls=!1,cA=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=sA),!ls){ls=!0;var r=Vp(t);oA(function(){var a=!1;try{a=nA()}finally{if(ls=!1,t=r-Vp(),!iA())return;a?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,lA)};document.body?n():vr.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Mp.forEach(function(n){return vr.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Mp.forEach(function(n){return vr.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),Dl=new cA,$p=function(e){!Ca&&e>0&&Dl.start(),Ca+=e,!Ca&&Dl.stop()},uA=function(e){return!Kc(e)&&!ZR(e)&&getComputedStyle(e).display==="inline"},dA=function(){function e(t,n){this.target=t,this.observedBox=n||Rr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=lv(this.target,this.observedBox,!0);return uA(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),fA=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),fa=new WeakMap,Fp=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},pa=function(){function e(){}return e.connect=function(t,n){var r=new fA(t,n);fa.set(t,r)},e.observe=function(t,n,r){var a=fa.get(t),o=a.observationTargets.length===0;Fp(a.observationTargets,n)<0&&(o&&ln.push(a),a.observationTargets.push(new dA(n,r&&r.box)),$p(1),Dl.schedule())},e.unobserve=function(t,n){var r=fa.get(t),a=Fp(r.observationTargets,n),o=r.observationTargets.length===1;a>=0&&(o&&ln.splice(ln.indexOf(r),1),r.observationTargets.splice(a,1),$p(-1))},e.disconnect=function(t){var n=this,r=fa.get(t);r.observationTargets.slice().forEach(function(a){return n.unobserve(t,a.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),pA=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");pa.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qp(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");pa.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qp(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");pa.unobserve(this,t)},e.prototype.disconnect=function(){pa.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const hA=V[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],mA=hA,gA=e=>{const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),t},vA=gA,yA=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:pA;function bA(){}function wA(e,t){const n=SA(),r=vA(t);return mA(()=>{let a=!1;const o=e&&"current"in e?e.current:e;if(!o)return bA;function i(s,l){a||r.current(s,l)}return n.subscribe(o,i),()=>{a=!0,n.unsubscribe(o,i)}},[e,n,r]),n.observer}function CA(){let e=!1,t=[];const n=new Map,r=new yA((a,o)=>{t=t.concat(a);function i(){const s=new Set;for(let l=0;l<t.length;l++){if(s.has(t[l].target))continue;s.add(t[l].target);const u=n.get(t[l].target);u==null||u.forEach(c=>c(t[l],o))}t=[],e=!1}e||window.requestAnimationFrame(i),e=!0});return{observer:r,subscribe(a,o){var i;r.observe(a);const s=(i=n.get(a))!==null&&i!==void 0?i:[];s.push(o),n.set(a,s)},unsubscribe(a,o){var i;const s=(i=n.get(a))!==null&&i!==void 0?i:[];if(s.length===1){r.unobserve(a),n.delete(a);return}const l=s.indexOf(o);l!==-1&&s.splice(l,1),n.set(a,s)}}}let cs;const SA=()=>cs||(cs=CA());function Ml(e){const[t,n]=I.useState(!1),[r,a]=I.useState(!1),o=I.useRef(null);return wA(o,({target:i})=>{if(!t&&i){const s=i.getElementsByTagName("p")[0];s&&a(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)}}),R("td",{...e,className:`ExpandableTableData ${e.className?e.className:""}`,"aria-expanded":t,ref:o,children:[r&&p("button",{className:"ExpandableTableData__expandButton",onClick:()=>n(!t),children:p(ue,{icon:t?"minusBoxOutline":"addBoxOutline",sx:{color:"grey.600",height:"16px",verticalAlign:"top"}})}),e.children]})}try{Ml.displayName="ExpandableTableDataCell",Ml.__docgenInfo={description:"",displayName:"ExpandableTableDataCell",props:{}}}catch{}const EA=["","DESC","ASC"],Bp={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class io extends I.Component{constructor(t){super(t),this.tableElement=void 0,this.renderTable=(n,r,a,o)=>{var S,_;const i=(_=(S=this.props.queryContext).getLastQueryRequest)==null?void 0:_.call(S),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:u,isRowSelectionVisible:c}=this.props,d=s&&(Nn(s)&&fy(s)||Pn(s)),f=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),m=!!this.props.synapseContext.accessToken,h=s&&d&&m&&this.allRowsHaveId(),g=!!(h&&!this.props.hideDownload),v=h&&u;return R("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[R("table",{ref:b=>this.tableElement=b,className:"table table-striped table-condensed",children:[p("thead",{className:"SRC_bordered",children:p("tr",{children:this.createTableHeader(n,r,a,f,v,g,c,i)})}),p("tbody",{children:this.createTableRows(o,n,f,v,g,c)})]}),p("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:p(jR,{})})]})},this.handleColumnSortPress=n=>r=>{let a=ir(this.state.columnIconSortState);a.length===0&&(a=Array(this.getLengthOfPropsData()).fill(0));const o=ir(this.state.sortedColumnSelection),i=this.findSelectionIndex(o,n.name);i!==-1&&o.splice(i,1),a[n.index]=(a[n.index]+1)%bu.length,a[n.index]>0&&o.unshift({column:n.name,direction:EA[a[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=o,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:a,sortedColumnSelection:o})},this.applyChangesFromQueryFilter=n=>{const r=this.props.queryContext.getLastQueryRequest();r.query.selectedFacets=n,r.query.offset=0,this.props.queryContext.executeQueryRequest(r)},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(t,n){const{isFetchingEntityHeaders:r,...a}=this.state,{isFetchingEntityHeaders:o,...i}=n,s=!Yr(this.props,t),l=!Yr(a,i),u=s||l;return u&&this.disableResize(),u}componentDidUpdate(t,n){Yr(t.queryContext.data,this.props.queryContext.data)?t.queryContext.entity&&this.props.queryContext.entity&&!Yr(Nn(t.queryContext.entity),Nn(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(Bp)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new zR(this.tableElement,Bp))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(t){var d,f;const{data:n,entity:r}=this.props.queryContext;if(!n||!r)return;if(this.state.isFetchingEntityHeaders&&!t)return;const a=ir(this.state.mapEntityIdToHeader),o=ir(this.state.mapUserIdToHeader),i=Op(n,re.ENTITYID),s=Op(n,re.USERID),l=Rp(n,a,i);(this.isEntityViewOrDataset()||r&&nh(r))&&this.allRowsHaveId()&&(((f=(d=n.queryResult)==null?void 0:d.queryResults)==null?void 0:f.rows)??[]).forEach(h=>{const g=`syn${h.rowId}`;l.add(g)});const u=Rp(n,o,s);if(l.size===0&&u.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),l.size>0){const m=Array.from(l).map(h=>({targetId:h}));try{const h=await ec(m,this.props.synapseContext.accessToken),{results:g}=h;g.forEach(v=>{a[v.id]=v})}catch(h){console.error("Error on retrieving entity header list , ",h)}}const c=[];if(u.size>0){const m=Array.from(u);try{(await py(m,this.props.synapseContext.accessToken)).children.forEach(g=>{g.isIndividual?c.push(g.ownerId):o[g.ownerId]=g})}catch(h){console.error("Error on getGroupHeaders batch: ",h)}}if(c.length>0)try{(await Hy(c)).list.forEach(h=>{o[h.ownerId]=h})}catch(m){console.error("Error on getUserProfile : ",m)}this.setState({mapEntityIdToHeader:a,mapUserIdToHeader:o,isFetchingEntityHeaders:!1})}render(){var g;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return uh;if(!this.props.queryContext.data)return p(j,{});const{queryContext:{data:t},queryVisualizationContext:{NoContentPlaceholder:n}}=this.props,{queryResult:r,columnModels:a=[]}=t,{facets:o=[]}=t,{isExpanded:i,isExportTableDownloadOpen:s}=this.state,l=this.props.queryContext.getLastQueryRequest(),u="";if(!((((g=t.queryResult)==null?void 0:g.queryResults.rows.length)??0)>0)&&l.query.offset===0)return p(n,{});const{rows:d,headers:f}=r.queryResults,m=p("div",{children:this.renderTable(f,a,o,d)}),h=p(j,{children:R("div",{className:u,children:[s&&p(Gn,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:l}),p("div",{children:m})]})});return R(I.Fragment,{children:[i&&R(Ke,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[p(Ke.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),p(Ke.Body,{children:h})]}),!i&&h]})}allRowsHaveId(){var n;const{queryContext:{data:t}}=this.props;return((n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.rows.every(r=>!!r.rowId))??!1}isEntityViewOrDataset(){const{queryContext:{entity:t}}=this.props;return(t&&(Nn(t)||Pn(t)))??!1}createTableRows(t,n,r,a,o,i){const s=[],{queryContext:{data:l},queryVisualizationContext:{columnsToShowInTable:u,selectedRowIndices:c,setSelectedRowIndices:d},columnLinks:f=[]}=this.props,{selectColumns:m=[],columnModels:h=[]}=l,{mapEntityIdToHeader:g,mapUserIdToHeader:v}=this.state;return t.forEach((S,_)=>{var x,N;const b=(x=S.versionNumber)==null?void 0:x.toString(),C=`syn${S.rowId}`,w=S.values.map((k,A)=>{const q=n[A].name,L=u.includes(q),T=f.find(M=>M.matchColumnName===q),O=this.findSelectionIndex(this.state.sortedColumnSelection,q)===-1?"":"SRC-boldText";return L?p(Ml,{className:"SRC_noBorderTop",children:p(Ll,{columnType:n[A].columnType,columnValue:k,isBold:O,mapEntityIdToHeader:g,mapUserIdToHeader:v,columnLinkConfig:T,columnName:q,rowData:S.values,selectColumns:m,columnModels:h,rowId:S.rowId,rowVersionNumber:S.versionNumber})},`(${_}${k}${A})`):p("td",{className:"SRC-hidden"},`(${_},${A})`)});r&&w.unshift(p("td",{className:"SRC_noBorderTop",children:p(Ol,{entityId:C,entityVersionNumber:b},C)},C));const y=((N=g[C])==null?void 0:N.type)=="org.sagebionetworks.repo.model.FileEntity";a&&w.unshift(p("td",{className:"SRC_noBorderTop direct-download",children:y&&p(oo,{associatedObjectId:C,entityVersionNumber:b})},`direct-download-${C}`)),o&&w.unshift(p("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:y&&p(Tl,{entityId:C,entityVersionNumber:parseInt(b)})},`add-to-download-list-v2-${C}`)),i&&c&&w.unshift(p("td",{className:"SRC_noBorderTop",children:p(Cw,{label:"",checked:c.includes(_),onChange:k=>{const A=[...c];if(k)A.push(_);else{const q=A.indexOf(_);q>-1&&A.splice(q,1)}d(A)}})},`(${_},rowSelectColumn)`));const E=p("tr",{children:w},S.rowId??_);s.push(E)}),s}isSortableColumn(t){switch(t){case re.USERID:case re.ENTITYID:case re.FILEHANDLEID:case re.STRING_LIST:case re.INTEGER_LIST:case re.BOOLEAN_LIST:case re.DATE_LIST:case re.USERID_LIST:case re.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(t,n,r,a,o,i,s,l){const{sortedColumnSelection:u,columnIconSortState:c}=this.state,{queryVisualizationContext:{getColumnDisplayName:d,columnsToShowInTable:f},queryContext:{lockedColumn:m}}=this.props,h=t.map((g,v)=>{var _;if(f.includes(g.name)){const b=this.findSelectionIndex(u,g.name)!==-1,C=c[v]===void 0?0:c[v],w=r.findIndex(P=>P.columnName===g.name),y=w!==-1&&r[w].facetType==="enumeration",E=r[w],x=b?"SRC-primary-background-color SRC-anchor-light":"",N=b?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",k=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${x}`,A=d(g.name),q=n.find(P=>P.name===g.name),L=g.name.toLowerCase()===((_=m==null?void 0:m.columnName)==null?void 0:_.toLowerCase()),T=q&&q.name=="id"&&q.columnType==re.ENTITYID;return p("th",{children:R("div",{className:"SRC-split",children:[p("span",{style:{whiteSpace:"nowrap"},children:A}),R("div",{className:"SRC-centerContent",children:[y&&!L&&this.configureFacetDropdown(E,q,l),this.isSortableColumn(g.columnType)&&p("span",{role:"button","aria-label":"sort",tabIndex:0,className:k,onKeyPress:this.handleColumnSortPress({index:v,name:g.name}),onClick:this.handleColumnSortPress({index:v,name:g.name}),children:p(ho,{type:bu[C],cssClass:N})}),T&&p(WR,{})]})]})},g.name)}else return p("th",{className:"SRC-hidden"},g.name)});return a&&h.unshift(p("th",{children:p("div",{className:"SRC-centerContent",children:p("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),o&&h.unshift(p("th",{children:p("div",{className:"SRC-centerContent",children:" "})},"downloadColumn")),i&&h.unshift(p("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:p("div",{className:"SRC-centerContent",children:" "})},"addToV2DownloadListColumn")),s&&h.unshift(p("th",{children:p("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),h}findSelectionIndex(t,n){return t.length!==0?t.findIndex(r=>r.column===n):-1}advancedSearch(t){t&&t.preventDefault();const n=this.props.queryContext.getLastQueryRequest(),{query:r}=n,a=btoa(JSON.stringify(r)),o=n.entityId;window.open(`${Ue.PORTAL}#!Synapse:${o}/tables/query/${a}`,"_blank")}getLengthOfPropsData(){var n;const{data:t}=this.props.queryContext;return((n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.headers.length)??0}configureFacetDropdown(t,n,r){return p(Ub,{containerAs:"Dropdown",facetValues:t.facetValues,columnModel:n,onChange:a=>{jb(r,t,this.applyChangesFromQueryFilter,a)},onClear:()=>{Wb(r,t,this.applyChangesFromQueryFilter)}})}}try{io.displayName="SynapseTable",io.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}}}}}catch{}function dv(){const{data:e}=Mt(),{showLastUpdatedOn:t}=At();return t&&e&&e.lastUpdatedOn?p("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:R(Rt,{variant:"body1Italic",children:["Last updated on ",br(Yt(e.lastUpdatedOn))]})}):p(j,{})}const Vl=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:r}=e,a=ie(),o=Mt(),i=At();return R("div",{className:`FilterAndView ${i.topLevelControlsState.showFacetFilter?Zn:Kn}`,children:[t?p(io,{...t,synapseContext:a,queryContext:o,queryVisualizationContext:i,hideDownload:r}):p(j,{}),n?p(ro,{...n}):p(j,{}),p(dv,{})]})};try{Vl.displayName="FilterAndView",Vl.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}}}catch{}const _A="isShowingFacetFilters",xA="isHidingFacetFilters",$l=e=>{const[t,n]=I.useState(!1),{searchParams:r,sql:a,sqlOperator:o,tableConfiguration:i,name:s,cardConfiguration:l,facetsToPlot:u,availableFacets:c,hideDownload:d,hideQueryCount:f,hideSqlEditorControl:m,searchConfiguration:h,limit:g=ac,initQueryJson:v,showLastUpdatedOn:S,showExportToCavatica:_=!1,customControls:b}=e,C=vc(r,o),w=v?JSON.parse(v):{sql:a,additionalFilters:C,limit:g,offset:0},y=vn(w.sql),{data:E}=po(y),x=E&&rh(E)&&E.isSearchEnabled,N={entityId:y,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Lr|Pr|oc|lh|ic|sc|rc|lc,query:w};return p("div",{className:"QueryWrapperPlotNav",children:p(i?xh:Za,{...e,initQueryRequest:N,children:p(yc,{unitDescription:"results",rgbIndex:e.rgbIndex,columnAliases:e.columnAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||x,showLastUpdatedOn:S,noContentPlaceholderType:xa.INTERACTIVE,children:p(bc,{children:A=>{if(A===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const q=A==null?void 0:A.isFacetsAvailable;return p(_h,{children:L=>{if(L===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const T=(L==null?void 0:L.topLevelControlsState.showFacetFilter)||(L==null?void 0:L.topLevelControlsState.showFacetFilter)===void 0;return R(j,{children:[p("div",{className:`ErrorBannerWrapper ${T?_A:xA}`,children:p(Gb,{})}),x?p(Xa,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):p(Ka,{...h,queryContext:A,queryVisualizationContext:L}),p(Ja,{}),p(il,{getLastQueryRequest:A.getLastQueryRequest,topLevelControlsState:L.topLevelControlsState,setTopLevelControlsState:L.setTopLevelControlsState}),p(eo,{showColumnSelection:i!==void 0,name:s,hideDownload:d,hideQueryCount:f,hideFacetFilterControl:!q,hideVisualizationsControl:!q,hideSqlEditorControl:m,showExportToCavatica:_,customControls:b}),q&&p(j,{children:p(Yb,{availableFacets:c})}),p(Xb,{facetsToPlot:u}),p(Vl,{tableConfiguration:i,hideDownload:d,cardConfiguration:l}),t&&p(Gn,{getLastQueryRequest:A.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})};try{$l.displayName="QueryWrapperPlotNav",$l.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},availableFacets:{defaultValue:null,description:"",name:"availableFacets",required:!1,type:{name:"string[]"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}}}catch{}const NA=e=>({partMask:sc|Pr|oc|ic|Lr|lc,entityId:vn(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:ac,offset:0}}),Fl=e=>{const{title:t,searchParams:n,sqlOperator:r,showAccessColumn:a,sql:o,hideDownload:i,hideQueryCount:s,name:l,showTopLevelControls:u=!1,searchConfiguration:c,unitDescription:d="Results",rgbIndex:f,showLastUpdatedOn:m,noContentPlaceholderType:h=u?xa.INTERACTIVE:xa.STATIC,...g}=e,v=NA(o);n&&(v.query.additionalFilters=vc(n,r));const S=ie(),_=vn(o),{data:b}=po(_);return p(xh,{...g,initQueryRequest:v,children:p(yc,{rgbIndex:f,unitDescription:d,showLastUpdatedOn:m,noContentPlaceholderType:h,...g,children:p(bc,{children:C=>{if(C===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return p(_h,{children:w=>{if(w===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return R(j,{children:[u&&p(eo,{showColumnSelection:!0,name:l,hideDownload:i,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),b&&rh(b)&&b.isSearchEnabled?p(Xa,{helpUrl:c==null?void 0:c.fullTextSearchHelpURL}):p(Ka,{...c,queryContext:C,queryVisualizationContext:w}),p(Ja,{}),u&&p(Eh,{frontText:""}),p(io,{synapseContext:S,queryContext:C,queryVisualizationContext:w,showAccessColumn:a,title:t,"data-testid":"SynapseTable",...g}),p(dv,{})]})}})}})})})};try{Fl.displayName="StandaloneQueryWrapper",Fl.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}}}catch{}function Bl(e){const{query:t,showquery:n,tableonly:r}=e,a=n==="true",o=r==="true",i="Items";return o?p(Fl,{sql:t,name:i}):p($l,{sql:t,hideSqlEditorControl:!a,name:i,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{Bl.displayName="MarkdownSynapseTable",Bl.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}}}catch{}const IA={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function zl(e){const{originalMarkup:t}=e,n=[],r=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let a="";return t.replace(r,(o,i,s,l)=>(a+=l,n.push(p("div",{children:p("a",{role:"link",className:`link ${IA[Number(i)]}`,"data-anchor":s,children:l})},l)),"")),p("div",{children:n},a)}try{zl.displayName="MarkdownTableOfContents",zl.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}function Hl(e){const{alias:t}=e,{data:n}=Ew([t]);return n?p(_w,{principalId:n[0].ownerId}):p(j,{})}try{Hl.displayName="MarkdownUserOrTeamBadge",Hl.__docgenInfo={description:"",displayName:"MarkdownUserOrTeamBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}}}catch{}function Ul(e){return p(xw,{params:e})}try{Ul.displayName="MarkdownVideo",Ul.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}}}catch{}function jl(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:r}=e;switch(t){case"buttonlink":return p(ms,{...n});case"image":return p(nl,{...n});case"plot":return p(rl,{...n});case"toc":return p(zl,{originalMarkup:r});case"badge":return p(Hl,{...n});case"iduReport":return p(Ss,{...n});case"video":case"vimeo":case"youtube":return p(Ul,{...n});case"synapsetable":return p(Bl,{...n});case"provenance":return p(el,{...n});case"preview":return p(bs,{...n});default:return console.warn(`Unsupported widget: ${t}.`),p(j,{})}}function zp(e){return p(Gp,{children:p(jl,{...e})})}try{jl.displayName="MarkdownWidget",jl.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'},{value:'"preview"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}class Wl extends I.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let r;const a=[];for(;r=n.exec(t);)a.push(r[1]);return a.map((o,i)=>{const s=i<a.length-1;return R(I.Fragment,{children:[R("button",{className:"SRC-markdown-bookmark",id:`bookmark${i}`,children:["[",i+1,"]"]}),p("span",{dangerouslySetInnerHTML:{__html:o}}),s&&p("br",{})]},i)})}render(){return R(I.Fragment,{children:[p("hr",{}),this.renderBookmarks()]})}}try{Wl.displayName="Bookmarks",Wl.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}}}catch{}const us=markdownit({html:!0});class Ge extends V.Component{constructor(t){super(t),markdownitSynapse.init_markdown_it(us,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const n="";us.use(markdownitSynapse,n,"https://synapse.org").use(markdownitMath,n);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:us,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=V.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(t){const n=t.target;if(n.tagName==="A"||n.tagName==="BUTTON"){const r=t.target;if(r.id.substring(0,3)==="ref"){t.preventDefault();const a=Number(t.currentTarget.id.substring(3)),o=this.markupRef.current.querySelector(`#bookmark${a}`);try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}else if(t.currentTarget.id!==null&&r.getAttribute("data-anchor")){t.preventDefault();const a=r.getAttribute("data-anchor"),o=this.markupRef.current.querySelector(`#${a}`);try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}}}createHTML(t){if(!t)return{__html:""};const n=this.props.renderInline?this.state.md.renderInline(t):this.state.md.render(t);return{__html:jh(n,Wh)}}processMath(){if(!this.markupRef.current)return;const t=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),n=new RegExp(/\\[()[\]]/,"g");t.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const a=r.textContent.replace(n,"");return katex.render(a,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const t=this.createHTML(markdownitSynapse.footnotes()).__html;if(t.length>0)return p(Wl,{footnotes:t})}async getWikiPageMarkdown(){const{ownerId:t,wikiId:n,objectType:r}=this.props;if(!(!t&&!n))try{const a=await hy(this.context.accessToken,t,n,r);try{const o=await this.getWikiAttachments(n||a.id);this.setState({data:a,fileHandles:o,error:void 0})}catch(o){console.error("fileHandlesErr = ",o)}}catch(a){console.error(`Error on wiki markdown load
`,a),this.setState({error:a})}}async getWikiAttachments(t){const{ownerId:n,objectType:r}=this.props;if(!n){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await my(this.context.accessToken,n,t,r).then(a=>a).catch(a=>{console.error("Error on wiki attachment load ",a)})}addIdsToReferenceWidgets(t){const n=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return t.replace(n,()=>{const a=r;return r+=1,`<a href="" id="ref${a}">[${a}]</a>`})}addIdsToTocWidgets(t){const n="SRC-header-";let r=1;const a=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return t.replace(a,o=>{const i=r;return r+=1,`${o.substring(0,3)} id="${n}${i}"${o.substring(3)}`})}renderMarkdown(){let t=this.createHTML(this.state.data.markdown).__html;if(t=this.addIdsToReferenceWidgets(t),t=this.addIdsToTocWidgets(t),t.length>0){const r=new DOMParser().parseFromString(t,"text/html");return p(j,{children:this.recursiveRender(r.body,t)})}}recursiveRender(t,n){if(t.nodeType===Node.TEXT_NODE)return R(j,{children:[" ",t.textContent," "]});if(t.nodeType===Node.ELEMENT_NODE&&t instanceof HTMLElement){const r=t.tagName.toLowerCase()==="body"?"span":t.tagName.toLowerCase(),a=t.getAttribute("data-widgetparams");if(a)return this.processHTMLWidgetMapping(a,n);const o=t.attributes,i={};for(let l=0;l<o.length;l++){let u="",c="";const d=o.item(l);d&&(u=d.name,c=d.value),u&&c&&(i[u]=c)}if(t.childNodes.length===0)return p(r,{...i});const s=Array.from(t.childNodes).map((l,u)=>p(V.Fragment,{children:this.recursiveRender(l,n)},u));return p(r,{...i,children:s})}}decodeXml(t){const n={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return t.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,a)=>n[a])}processHTMLWidgetMapping(t,n){const r=this.decodeXml(t),a=r.indexOf("?");if(a===-1)return p(zp,{widgetType:r,widgetParamsMapped:{},originalMarkup:n},JSON.stringify(r));const o=r.substring(0,a),i={};return r.substring(a+1).split("&").forEach(s=>{let[l,u]=s.split("=");u=decodeURIComponent(u),i[l]=u}),p(zp,{widgetType:o,widgetParamsMapped:i,originalMarkup:n},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(t){let n=this.props.ownerId!==t.ownerId;n=n||this.props.wikiId!==t.wikiId,n&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:t,loadingSkeletonRowCount:n}=this.props,{isLoading:r,error:a}=this.state,o={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(a)return p(Kp,{error:a});const i=this.addBookmarks(),s=R(tl,{wikiContext:o,children:[r&&p(j,{children:n?p(dc,{numCols:1,numRows:n}):p("span",{className:"spinner"})}),this.renderMarkdown(),i&&p("div",{children:this.addBookmarks()})]});return t?p("span",{className:"markdown markdown-inline",ref:this.markupRef,children:s}):p("div",{className:"markdown",ref:this.markupRef,children:s})}}Ge.contextType=qr;try{Ge.displayName="MarkdownSynapse",Ge.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},loadingSkeletonRowCount:{defaultValue:null,description:"",name:"loadingSkeletonRowCount",required:!1,type:{name:"number"}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}}}catch{}function Ar({user:e,wikiPage:t,accessRequirement:n,accessRequirementStatus:r,showButton:a=!0,entityId:o,onHide:i}){const{accessToken:s}=ie(),[l,u]=I.useState(!0),c=r==null?void 0:r.isApproved,[d,f]=I.useState(c);let m="";n.concreteType===ze.ManagedACTAccessRequirement||n.concreteType===ze.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?m="Request access":m="Request access via Synapse.org":m="I Accept Terms of Use",I.useEffect(()=>{f(c)},[c]);const h=()=>{window.open(`${Ue.PORTAL}#!AccessRequirement:AR_ID=${n.id}&TYPE=ENTITY&ID=${o}`)},g=()=>{if(n.concreteType===ze.ManagedACTAccessRequirement||n.concreteType===ze.ACTAccessRequirement)h(),i==null||i();else if(!d){const x={requirementId:n==null?void 0:n.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:Ec.APPROVED};ah(s,x).then(N=>{f(!0)}).catch(N=>console.error("Error on post access approval: ",N))}},v=n.termsOfUse,S=n.actContactInfo,_=n.concreteType===ze.TermsOfUseAccessRequirement,b=n.concreteType===ze.ACTAccessRequirement,C=_&&v||b&&S;let w=p(j,{});t?w=p("div",{className:"AcceptRequirementsMarkdown",children:p(Ge,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType})}):C&&(w=p(Ge,{markdown:_?v:S}));const y=n.concreteType===ze.ManagedACTAccessRequirement;return p(j,{children:R("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[p(un,{isCompleted:d}),R("div",{className:"terms-of-use-content",children:[d?R("div",{children:[R("p",{children:[y?"Your data access request has been approved.":"You have accepted the terms of use.",y&&p("a",{className:"update-request-button",onClick:()=>{h()},children:"Update Request"}),p("a",{className:"view-terms-button",onClick:()=>{u(!l)},children:"View Terms"})]}),p("div",{className:`view-terms ${l?"hidden":"show"}`,children:w})]}):w,s&&a&&R("div",{className:`button-container ${d?"hide":"default"}`,children:[p("div",{className:"accept-button-container",children:p("button",{className:"accept-button",onClick:g,children:m})}),p("div",{className:"not-accept-button-container",children:p("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})}try{Ar.displayName="AcceptedRequirements",Ar.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}function TA({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState();return I.useEffect(()=>{(async()=>{try{const u=await so(o,e.id);s(u)}catch(u){console.error("Error on get ACTAccessRequirement",u)}})()},[o,e]),p(Ar,{accessRequirement:e,accessRequirementStatus:r,user:t,wikiPage:i,onHide:n,entityId:a})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}const Gl=e=>{const{accessToken:t}=ie(),{formSubmitRequestObject:n,onHide:r}=e,[a,o]=I.useState(),[i,s]=I.useState(!1),l=async()=>{if(n)try{await oh(n,t)?r==null||r():(o({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),s(!0))}catch(u){console.log("CancelRequestDataAccess: Error updating form",u),o({key:"danger",message:`Sorry, there is an error in submitting your request. ${u.reason||""}. Please close this dialog and try again later`}),s(!0)}};return R(j,{children:[p(Mn,{children:R(Mr,{direction:"row",alignItems:"center",gap:"5px",children:["Save Changes",p(Vr,{sx:{flexGrow:1}}),p($r,{onClick:r,children:p(ue,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),R(Vn,{children:[p("p",{children:"Would you like to save your recent changes?"}),a&&p(mn,{variant:a.key,transition:!1,children:a.message})]}),R(mo,{children:[!i&&R(j,{children:[p(He,{variant:"outlined",onClick:r,children:"Cancel"}),p(He,{variant:"contained",onClick:()=>{l()},children:"Save changes"})]}),i&&p(He,{variant:"contained",onClick:r,children:"Close"})]})]})};try{Gl.displayName="CancelRequestDataAccess",Gl.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const Yl=e=>{const{user:t,wikiPage:n,accessRequirementStatus:r,accessRequirement:a,showButton:o=!0,onHide:i,requestDataStepCallback:s}=e,{accessToken:l}=ie(),[u,c]=I.useState(!0),d=r==null?void 0:r.isApproved,[f,m]=I.useState(d),[h,g]=I.useState(),[v,S]=I.useState(),[_,b]=I.useState(!1);I.useEffect(()=>{m(d),r!=null&&r.currentSubmissionStatus&&(g(r.currentSubmissionStatus.state),E(r.currentSubmissionStatus))},[d]);const C=O=>{s==null||s({managedACTAccessRequirement:O,step:1})},w=async()=>{if(a.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement")if(l)if(h===De.SUBMITTED&&!_){const O={key:"danger",message:R(j,{children:[p("strong",{children:"Error canceling your data access request."}),p("br",{}),"Please try again later."]})};try{(await gy(r==null?void 0:r.currentSubmissionStatus.submissionId,l)).state===De.CANCELLED?(S({key:"success",message:p("strong",{children:"Your data access request has been canceled."})}),b(!0)):S(O)}catch(M){console.log("RequestDataAccess: error canceling data access request:",M),S(O)}}else C(a);else s==null||s({managedACTAccessRequirement:a,step:4});else if(!f){const O={requirementId:a==null?void 0:a.id,submitterId:t==null?void 0:t.ownerId,accessorId:t==null?void 0:t.ownerId,state:Ec.APPROVED};ah(l,O).then(M=>{m(!0)}).catch(M=>console.error("Error on post access approval: ",M))}},y=()=>{if(a.concreteType===ze.ManagedACTAccessRequirement||a.concreteType===ze.ACTAccessRequirement)if(h){let O;switch(h){case De.SUBMITTED:O=_?"Update Request":"Cancel Request";break;case De.APPROVED:case De.REJECTED:case De.CANCELLED:O="Update Request"}return O}else return"Request access";else return"I Accept Terms of Use"},E=O=>{switch(O.state){case De.SUBMITTED:S({key:"primary",message:p("strong",{children:"You have submitted a data access request."})});break;case De.APPROVED:S({key:"success",message:p("strong",{children:"Your data access request has been approved."})});break;case De.REJECTED:S({key:"danger",message:R(j,{children:[p("strong",{children:"Your data access request has been rejected."}),p("br",{}),O.rejectedReason||""]})});break}return p(j,{})},x=a.termsOfUse,N=a.actContactInfo,k=a.concreteType===ze.TermsOfUseAccessRequirement,A=a.concreteType===ze.ACTAccessRequirement,q=k&&x||A&&N;let L=p(j,{});n?L=R("div",{className:"AcceptRequirementsMarkdown",children:[n&&p(Ge,{wikiId:n==null?void 0:n.wikiPageId,ownerId:n==null?void 0:n.ownerObjectId,objectType:n==null?void 0:n.ownerObjectType}),v&&p(mn,{className:"access-requirement-list-alert",variant:v.key,transition:!1,children:v.message})]}):q&&(L=p(Ge,{markdown:k?x:N}));const T=a.concreteType===ze.ManagedACTAccessRequirement;return p(j,{children:R("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[p(un,{isCompleted:f}),R("div",{className:"terms-of-use-content",children:[f?R("div",{children:[p("p",{children:T?"Your data access request has been approved.":"You have accepted the terms of use."}),R("p",{style:{marginBottom:"0"},children:[T&&p("button",{className:"update-request-button",onClick:()=>{C(a)},style:{paddingLeft:"0",marginRight:"2rem"},children:y()}),p("a",{onClick:()=>{c(!u)},children:"View Terms"})]}),p("div",{className:`view-terms ${u?"hidden":"show"}`,children:L})]}):L,o&&R("div",{className:`button-container ${f?"hide":"default"}`,children:[p("div",{className:"accept-button-container",children:p("button",{className:"accept-button",onClick:()=>{w()},children:y()})}),p("div",{className:"not-accept-button-container",children:p("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})};try{Yl.displayName="RequestDataAccess",Yl.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((args: RequestDataStepCallbackArgs) => void)"}}}}}catch{}const kA=e=>{const{entityId:t,user:n,accessRequirement:r,accessRequirementStatus:a,onHide:o,requestDataStepCallback:i}=e,{accessToken:s}=ie(),[l,u]=I.useState();return I.useEffect(()=>{(async()=>{try{const d=await so(s,r.id);u(d)}catch(d){console.error("Error on get ManagedACTAccessRequirement",d)}})()},[s,r]),p(Yl,{accessRequirement:r,accessRequirementStatus:a,entityId:t,user:n,wikiPage:l,onHide:o,requestDataStepCallback:i})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: RequestDataStepCallbackArgs) => void)"}}}}}catch{}const Xl=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,onHide:r}=e,{accessToken:a}=ie(),[o,i]=I.useState(""),[s,l]=I.useState(""),[u,c]=I.useState(""),[d,f]=I.useState(),m=I.useRef({});let h=!0;I.useEffect(()=>(h&&(f(void 0),g()),()=>{h=!1}),[a]);const g=async()=>{try{const _=await vy(String(n.id),a);_.id&&(m.current=_,i(_.projectLead),l(_.institution),c(_.intendedDataUseStatement))}catch(_){console.log("RequestDataAccessStep1: Error getting research project data: ",_)}},v=(_="")=>R(j,{children:[p("strong",{children:"Unable to update research project data."}),p("br",{}),_]}),S=_=>{_.preventDefault();const b=Object.assign({},m.current,{accessRequirementId:String(n.id),institution:s,projectLead:o,intendedDataUseStatement:u});try{yy(b,a).then(C=>{t==null||t({managedACTAccessRequirement:n,step:2,researchProjectId:C.id})}).catch(C=>{console.log("RequestDataAccessStep1: Error updating research project data: ",C),f({key:"danger",message:v(C.reason)})})}catch(C){console.log("RequestDataAccessStep1: Error updating research project data: ",C),f({key:"danger",message:v(C.reason)})}};return R(j,{children:[p(Mn,{children:R(Mr,{direction:"row",alignItems:"center",gap:"5px",children:["Request Access",p(Vr,{sx:{flexGrow:1}}),p($r,{onClick:r,children:p(ue,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),p(Vn,{children:R(me,{className:"access-request-form1",onSubmit:S,children:[p("p",{children:"Please tell us about your project."}),R(me.Group,{children:[p(me.Label,{htmlFor:"project-lead",children:"Project Lead"}),p(me.Control,{id:"project-lead",type:"text",value:o,required:!0,onChange:_=>i(_.target.value)})]}),R(me.Group,{children:[p(me.Label,{htmlFor:"institution",children:"Institution"}),p(me.Control,{id:"institution",type:"text",value:s,required:!0,onChange:_=>l(_.target.value)})]}),n.isIDURequired&&R(me.Group,{children:[R(me.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",n.isIDUPublic&&p("i",{id:"idu-visible",children:"this will be visible to the public"})]}),p(me.Control,{id:"data-use",as:"textarea",value:u,rows:10,required:!0,onChange:_=>c(_.target.value)})]}),d&&p(mn,{variant:d.key,transition:!1,children:d.message})]})}),R(mo,{children:[p(He,{variant:"outlined",onClick:r,children:"Cancel"}),p(He,{variant:"contained",type:"submit",onClick:S,children:"Save changes"})]})]})};try{Xl.displayName="RequestDataAccessStep1",Xl.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: RequestDataStepCallbackArgs) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const kn=e=>{const{id:t,fileHandleAssociation:n,className:r,variant:a,fileName:o}=e,{accessToken:i}=ie(),s=async()=>{if(!n.fileHandleId||!i)return;const l={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const c=(await Xn(l,i)).requestedFiles[0].preSignedURL;c?window.open(c):console.log("Fail to get file download link")}catch(u){console.log("Fail to get file download link",u)}};return p(j,{children:p(ut,{id:t,variant:a,className:r,onClick:()=>{s()},children:o})})};try{kn.displayName="DirectDownloadButton",kn.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}}}catch{}const Ql=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,entityId:r,user:a,researchProjectId:o}=e,{accessToken:i}=ie(),[s,l]=I.useState(),[u,c]=I.useState(),[d,f]=I.useState(),[m,h]=I.useState([]),[g,v]=I.useState(),[S,_]=I.useState(),[b,C]=I.useState(!1),[w,y]=I.useState([]),E={},x={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let N=!0;I.useEffect(()=>(N&&(_(void 0),k()),()=>{N=!1}),[i,o]);const k=async()=>{const D=await by(String(n.id),i);if(D.accessorChanges){const $=new Set;D.accessorChanges=D.accessorChanges.filter(U=>$.has(U.userId)?!1:$.add(U.userId))}D.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&C(!0),D.researchProjectId=o,v(D),A(D),q(D)},A=D=>{const $=D.accessorChanges,U=[];!$||!$.length?(U.push(a.ownerId),v(H=>Object.assign({},H,{accessorChanges:[{userId:a.ownerId,type:_t.GAIN_ACCESS}]}))):$.forEach(H=>{U.push(H.userId)});const G=U.map(H=>wy(i,H));Promise.all(G).then(H=>{const X=H.map((K,Y)=>{var ce;const pe=$&&((ce=$[Y])!=null&&ce.type)?$[Y].type:_t.GAIN_ACCESS;return{profile:K,accessType:pe}});y(X)})},q=D=>{if(n.isDUCRequired&&n.ducTemplateFileHandleId){const $={associateObjectId:String(n.id),associateObjectType:Ae.AccessRequirementAttachment,fileHandleId:n.ducTemplateFileHandleId};x.requestedFiles.push($),E[n.ducTemplateFileHandleId]||(E[n.ducTemplateFileHandleId]=[]),E[n.ducTemplateFileHandleId].push("DUCTemplate"),l($)}if(n.isDUCRequired&&D.ducFileHandleId){const $={associateObjectId:D.id,associateObjectType:Ae.DataAccessRequestAttachment,fileHandleId:D.ducFileHandleId};x.requestedFiles.push($),E[D.ducFileHandleId]||(E[D.ducFileHandleId]=[]),E[D.ducFileHandleId].push("DUC"),c($)}if(n.isIRBApprovalRequired&&D.irbFileHandleId){const $={associateObjectId:D.id,associateObjectType:Ae.DataAccessRequestAttachment,fileHandleId:D.irbFileHandleId};x.requestedFiles.push($),E[D.irbFileHandleId]||(E[D.irbFileHandleId]=[]),E[D.irbFileHandleId].push("IRB"),f($)}D.attachments&&D.attachments.length&&D.attachments.forEach($=>{x.requestedFiles.push({associateObjectId:D.id,associateObjectType:Ae.DataAccessRequestAttachment,fileHandleId:$}),E[$]||(E[$]=[]),E[$].push("attachments")}),x.requestedFiles.length&&Xn(x,i).then($=>{$.requestedFiles.forEach(U=>{const G=U.fileHandle.fileName,H=E[U.fileHandleId];H.forEach(X=>{switch(X){case"DUCTemplate":l(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("DUCTemplate"),1);break;case"DUC":c(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("DUC"),1);break;case"IRB":f(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("IRB"),1);break;case"attachments":h(K=>[...K,{fileName:G,associateObjectId:D.id,associateObjectType:Ae.DataAccessRequestAttachment,fileHandleId:U.fileHandleId}]),E[U.fileHandleId].splice(H.indexOf("attachments"),1);break}})})})},L=async()=>{if(g)try{const D=await oh(g,i);if(D&&D.etag){const $={requestId:D.id,requestEtag:D.etag,subjectId:r,subjectType:Sc.ENTITY};v(H=>Object.assign({},H,{etag:D.etag}));const U=await Sy($,i),G=P(U);U.state===De.REJECTED?_({key:"danger",message:G}):t==null||t({step:5})}else _({key:"danger",message:T()})}catch(D){console.log("RequestDataAccessStep2: Error updating form",D),_({key:"danger",message:T(D.reason)})}},T=(D="")=>R(j,{children:[p("strong",{children:"Sorry, there is an error in submitting your request."}),p("br",{}),D]}),P=D=>{const $="The information has been ";switch(D.state){case De.SUBMITTED:return R("strong",{children:[$," submitted."]});case De.APPROVED:return R("strong",{children:[$," approved."]});case De.CANCELLED:return R("strong",{children:[$," canceled."]});case De.REJECTED:return R(j,{children:[R("strong",{children:[$," rejected."]})," ",D.rejectedReason,". Please close this dialog and try again later."]});default:return p(j,{})}},O=D=>{const $=w.filter(G=>G.profile.ownerId!==D);y($);const U=$.map(G=>({userId:G.profile.ownerId,type:G.accessType}));v(G=>Object.assign({},G,{accessorChanges:U}))},M=D=>{const $=m.filter(G=>G.fileHandleId!==D);h($);const U=$.map(G=>G.fileHandleId);v(G=>Object.assign({},G,{attachments:U}))},z=D=>{if(D.resp&&D.success){const $=D.resp;if(D.context==="attachments"){const U=g!=null&&g.attachments?g==null?void 0:g.attachments:[];U==null||U.push($.fileHandleId),v(G=>Object.assign({},G,{attachments:U})),h(G=>[...G,{fileName:$.fileName,fileHandleId:$.fileHandleId}])}else v(U=>Object.assign({},U,{[D.context]:$.fileHandleId})),D.context==="ducFileHandleId"&&c(U=>Object.assign({},U,{fileName:$.fileName,fileHandleId:$.fileHandleId})),D.context==="irbFileHandleId"&&f(U=>Object.assign({},U,{fileName:$.fileName,fileHandleId:$.fileHandleId}))}else!D.success&&D.error&&(console.log("RequestDataAccessStep2: Error uploading the file",D.error),_({key:"danger",message:T(D.error.reason)}))},B=D=>{if(!w.map(U=>U.profile.ownerId).includes(D.ownerId)){y(H=>[...H,{profile:{ownerId:D.ownerId,firstName:D.firstName??"",lastName:D.lastName??"",userName:D.userName},accessType:_t.GAIN_ACCESS}]);const U={userId:D.ownerId,type:_t.GAIN_ACCESS},G=(g==null?void 0:g.accessorChanges)||[];G.push(U),v(H=>Object.assign({},H,{accessorChanges:G}))}},F=(D,$)=>{const U=D.target.value;switch($){case"publications":v(G=>Object.assign({},G,{publication:U}));break;case"summaryOfUse":v(G=>Object.assign({},G,{summaryOfUse:U}));break}},W=(D,$)=>{const U=[...w],G=U.findIndex(K=>K.profile.ownerId===$);U[G].accessType=D,y(U);const H=(g==null?void 0:g.accessorChanges)||[],X=H.findIndex(K=>K.userId===$);H[X].type=D,v(K=>Object.assign({},K,{accessorChanges:H}))},Q=()=>{let D="",$="";return n.isCertifiedUserRequired&&(D="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",$="All data requesters must be a certified user."),n.isValidatedProfileRequired&&(D="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",$="All data requesters must have a validated user profile."),D&&$?R(j,{children:[$,p("a",{href:D,target:"_blank",rel:"noreferrer",children:p(ue,{icon:"info"})})]}):p(j,{})};return R(j,{children:[p(Mn,{children:R(Mr,{direction:"row",alignItems:"center",gap:"5px",children:["Request Access",p(Vr,{sx:{flexGrow:1}}),p($r,{onClick:e.onHide,children:p(ue,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),p(Vn,{children:R(me,{className:"access-request-form2",onSubmit:D=>D.preventDefault(),children:[p("p",{children:"Please provide the information below to submit the request for access."}),R(me.Group,{children:[p(me.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),p("br",{}),R("span",{className:"requester-label",children:[n.isDUCRequired&&R(j,{children:["This list should match those listed on your DUC.",p("br",{})]}),Q()]}),p(bw,{id:"requesters",typeFilter:Cy.USERS_ONLY,onSelectCallback:B,filterUserIds:w.map(D=>D.profile.ownerId)})]}),p(me.Group,{style:{marginBottom:"4rem"},children:w.map((D,$)=>R("div",{className:"list-items",children:[p(uc,{userProfile:D.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),a.ownerId!==D.profile.ownerId&&D.accessType===_t.GAIN_ACCESS&&p(He,{className:"clear-x",variant:"text",onClick:()=>O(D.profile.ownerId),children:p(ue,{icon:"clear"})}),b&&D.accessType!==_t.GAIN_ACCESS&&p(j,{children:p(ww,{id:`accessor-renewal-${D.profile.ownerId}`,value:D.accessType,options:[{label:"Renew",value:_t.RENEW_ACCESS},{label:"Revoke",value:_t.REVOKE_ACCESS}],onChange:U=>W(U,D.profile.ownerId)})})]},`accessor-${$}`))}),(n==null?void 0:n.isDUCRequired)&&R(j,{children:[R(me.Group,{children:[p(me.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),p("br",{}),s&&p("div",{children:p(kn,{fileHandleAssociation:{associateObjectId:s==null?void 0:s.associateObjectId,associateObjectType:s.associateObjectType,fileHandleId:s.fileHandleId},fileName:s.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),R(me.Group,{children:[p(me.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),p("br",{}),u&&p("div",{children:p(kn,{fileHandleAssociation:{associateObjectId:u.associateObjectId,associateObjectType:u.associateObjectType,fileHandleId:u.fileHandleId},fileName:u==null?void 0:u.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),p(Oo,{id:"duc-browse",uploadCallback:z,context:"ducFileHandleId"})]})]}),(n==null?void 0:n.isIRBApprovalRequired)&&R(me.Group,{children:[p(me.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),p("br",{}),d&&p("div",{children:p(kn,{fileHandleAssociation:{associateObjectId:d.associateObjectId,associateObjectType:d.associateObjectType,fileHandleId:d.fileHandleId},fileName:d==null?void 0:d.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),p(Oo,{id:"irb-browse",uploadCallback:z,context:"irbFileHandleId"})]}),(n==null?void 0:n.areOtherAttachmentsRequired)&&R(me.Group,{children:[p(me.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),p("br",{}),m.map((D,$)=>R("div",{className:"list-items",children:[p(kn,{fileHandleAssociation:{associateObjectId:D.associateObjectId,associateObjectType:D.associateObjectType,fileHandleId:D.fileHandleId},fileName:D==null?void 0:D.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),p(He,{className:"clear-x",variant:"text",onClick:()=>M(D.fileHandleId),children:p(ue,{icon:"clear"})})]},`file-attachment-${$}`)),p(Oo,{id:"attachment-browse",uploadCallback:z,context:"attachments"})]}),b&&R(j,{children:[R(me.Group,{children:[p(me.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),p(me.Control,{id:"publications",as:"textarea",rows:3,onChange:D=>F(D,"publications")})]}),R(me.Group,{children:[p(me.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),p(me.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:D=>F(D,"summaryOfUse")})]})]}),S&&p(mn,{variant:S.key,transition:!1,children:S.message})]})}),p(mo,{children:R(j,{children:[p(He,{variant:"outlined",onClick:()=>t==null?void 0:t({step:3,formSubmitRequestObject:g}),children:"Cancel"}),p(He,{variant:"contained",onClick:()=>{L()},children:"Submit"})]})})]})};try{Ql.displayName="RequestDataAccessStep2",Ql.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: RequestDataStepCallbackArgs) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const Zl=e=>{const{onHide:t}=e;return R(j,{children:[p(Mn,{children:R(Mr,{direction:"row",alignItems:"center",gap:"5px",children:["Your Data Access Request Has Been Submitted",p(Vr,{sx:{flexGrow:1}}),p($r,{onClick:t,children:p(ue,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),p(Vn,{children:p("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),p(mo,{children:p(He,{variant:"contained",onClick:t,children:"Finish"})})]})};try{Zl.displayName="RequestDataAccessSuccess",Zl.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function OA({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(void 0),[c,d]=I.useState(!1);return I.useEffect(()=>{(async()=>{try{d(!0);const m=await so(o,e.id);s(m);const h=Fy|By;if(t!=null&&t.ownerId){const g=await Ey(t.ownerId,h,o);u(g)}}catch(m){console.error("Error on get Self Sign Access Requirement: ",m)}finally{d(!1)}})()},[e,o,t]),R(j,{children:[e.isCertifiedUserRequired&&R("div",{className:"requirement-container",children:[p(un,{isCompleted:l==null?void 0:l.isCertified}),R("div",{children:[R("p",{className:"self-sign-access-title bold-text",children:["You must first become a",p("a",{className:"self-sign-access-certified bold-text",href:`${Ue.PORTAL}#!Quiz:`,children:" certified user"})]}),c&&p("span",{className:"spinner"}),p("p",{className:`self-sign-access-certified-success-text ${l!=null&&l.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),e.isValidatedProfileRequired&&R("div",{className:"requirement-container",children:[p(un,{isCompleted:l==null?void 0:l.isVerified}),R("div",{children:[R("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",p("a",{className:"self-sign-access-validated bold-text",href:`${Ue.PORTAL}#!Profile:v/settings`,children:" user profile validated"})]}),c&&p("span",{className:"spinner"}),p("p",{className:`self-sign-access-verified-success-text ${l!=null&&l.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),p(Ar,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:a})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}function RA({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(!1);return I.useEffect(()=>{(async()=>{u(!0);try{const d=await so(o,e.id);s(d)}catch(d){console.error("Error on prepare terms of use ",d)}finally{u(!1)}})()},[o,e]),R(j,{children:[l&&p("span",{className:"spinner"}),p(Ar,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:a})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}var ze=(e=>(e.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",e.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",e.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",e.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",e))(ze||{});const Kl=e=>e.filter(AA).length>0,AA=e=>{switch(e.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},Hp=async(e,t)=>{const n=t.map(i=>xy(e,i.id)),r=await Promise.all(n),a=t.map(i=>({accessRequirement:i,accessRequirementStatus:r.find(s=>Number(s.accessRequirementId)===i.id)}));return Lb(a,i=>-1*Number(i.accessRequirementStatus.isApproved))};function Jl({entityId:e,onHide:t,accessRequirementFromProps:n,renderAsModal:r,numberOfFilesAffected:a}){var k;const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(),[c,d]=I.useState(),[f,m]=I.useState(""),[h,g]=I.useState(),v={ids:[e],type:"ENTITY_HEADER"},_=Lw(o)||!i,b=ih(v),{data:C}=_y();I.useEffect(()=>{let A=!1;return(async()=>{try{if(!_)return;if(n){const L=await Hp(o,n);A||s(L)}else{const L=await th(o,e),T=await Hp(o,L);A||s(T)}}catch(L){console.error("Error on get access requirements: ",L)}})(),()=>{A=!0}},[o,e,n,_]);const w=Boolean(o),y=(A,q)=>{switch(A.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return p(OA,{accessRequirement:A,accessRequirementStatus:q,user:C,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return p(RA,{accessRequirement:A,accessRequirementStatus:q,user:C,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return p(kA,{accessRequirement:A,accessRequirementStatus:q,user:C,onHide:t,entityId:e,requestDataStepCallback:E});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return p(TA,{accessRequirement:A,accessRequirementStatus:q,user:C,onHide:t,entityId:e});default:return}},E=A=>{const{managedACTAccessRequirement:q,step:L,researchProjectId:T,formSubmitRequestObject:P}=A;q&&d(q),T&&m(T),P&&g(P),u(L)},x=R(j,{children:[p(Mn,{children:R(Mr,{direction:"row",alignItems:"center",gap:"5px",children:["Data Access Request",p(Vr,{sx:{flexGrow:1}}),p($r,{onClick:t,children:p(ue,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),p(Vn,{children:R("div",{children:[p("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),p("span",{className:"AccessRequirementList__file-icon-container",children:p(ue,{icon:"file",sx:{width:"30px"}})})," ",a&&R("span",{children:[a," File(s)"]}),!a&&p("a",{className:"AccessRequirementList__register-text-link",href:`${Ue.PORTAL}#!Synapse:${e}`,children:(k=b[0])==null?void 0:k.name}),p("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),R("div",{className:"requirement-container",children:[p(un,{isCompleted:w}),R("div",{children:[!w&&R(j,{children:[R("p",{className:"AccessRequirementList__signin",children:[p("a",{className:`${cc} SRC-boldText `,children:"Sign in "}),"with a Sage Platform (Synapse) user account."]}),R("p",{children:["If you do not have a Sage Account, you can",p("a",{className:"register-text-link bold-text",href:`${Ue.PORTAL}#!RegisterAccount:0`,children:" Register for free."})]})]}),w&&R("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",R("b",{children:[C==null?void 0:C.userName,"@synapse.org"]})]})]})]}),i==null?void 0:i.map(({accessRequirement:A,accessRequirementStatus:q})=>p(V.Fragment,{children:y(A,q)},A.id))]})})]});let N=x;if(r){switch(l){case 1:N=p(Xl,{managedACTAccessRequirement:c,requestDataStepCallback:E,onHide:()=>t==null?void 0:t()});break;case 2:N=p(Ql,{user:C,researchProjectId:f,managedACTAccessRequirement:c,entityId:e,requestDataStepCallback:E,onHide:()=>t==null?void 0:t()});break;case 3:N=p(Gl,{formSubmitRequestObject:h,onHide:()=>t==null?void 0:t()});break;case 4:N=R(j,{children:[p(Mn,{children:"Please Log In"}),p(Vn,{className:"AccessRequirementList login-modal ",children:p(Ry,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:N=p(Zl,{onHide:()=>t==null?void 0:t()});break;default:N=x}return p(yw,{className:l?"AccessRequirementList modal-auto-height":"AccessRequirementList",onClose:()=>t==null?void 0:t(),open:!0,fullWidth:!0,maxWidth:"md",children:N})}return p("div",{className:"AccessRequirementList",children:N})}try{Jl.displayName="AccessRequirementList",Jl.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}}}catch{}try{Kl.displayName="checkHasUnsportedRequirement",Kl.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}}}catch{}export{Jl as A,Ip as C,oo as D,kw as E,yl as F,Iw as G,pn as H,Pl as I,d0 as L,Zs as M,Rw as P,$l as Q,Tw as S,Ec as a,u0 as b,lq as c,cq as d,Ow as e,Ge as f,ul as g,ze as h,m0 as i,h0 as j,Ol as k,bl as l,Tp as m,MR as n,Js as o,eN as p,Nw as q,yR as r,Fl as s,_t as t,Oh as u};
//# sourceMappingURL=AccessRequirementList-52bb58ef.js.map
