{"version":3,"file":"handlers-e9131a9b.js","sources":["../../src/mocks/faker/generateDiscussion.ts","../../src/mocks/discussion/mock_discussion.ts","../../src/mocks/msw/handlers/discussionHandlers.ts","../../src/mocks/faker/generateSubscription.ts","../../src/mocks/mockSubscription.ts","../../src/mocks/msw/handlers/subscriptionHandlers.ts","../../src/mocks/entity/mockEvaluationQueue.ts","../../src/mocks/msw/handlers/evaluationHandlers.ts","../../src/mocks/msw/handlers.ts"],"sourcesContent":["import { DiscussionThreadBundle, Forum } from '@sage-bionetworks/synapse-types'\nimport { faker } from '@faker-js/faker'\nimport { mockUserData } from '../user/mock_user_profile'\nimport { pickRandomMockUser } from './fakerUtils'\nimport { SetRequired } from 'type-fest'\n\nexport function generateForum(\n  overrides: SetRequired<Partial<Forum>, 'projectId'>,\n): Forum {\n  return {\n    id: String(faker.number.int()),\n    etag: faker.string.uuid(),\n    ...overrides,\n  }\n}\n\nexport function generateDiscussionThreadBundle(\n  overrides: SetRequired<\n    Partial<DiscussionThreadBundle>,\n    'forumId' | 'projectId'\n  >,\n): DiscussionThreadBundle {\n  return {\n    id: String(faker.number.int()),\n    activeAuthors: mockUserData.map(u => String(u.id)),\n    createdBy: String(pickRandomMockUser().id),\n    createdOn: faker.date.anytime().toISOString(),\n    etag: faker.string.uuid(),\n    isDeleted: false,\n    isEdited: false,\n    isPinned: false,\n    lastActivity: faker.date.anytime().toISOString(),\n    messageKey: `${faker.number.int()}/${faker.number.int()}/${faker.string.uuid()}`,\n    modifiedOn: faker.date.anytime().toISOString(),\n    numberOfReplies: faker.number.int({ max: 500 }),\n    numberOfViews: faker.number.int({ max: 5000 }),\n    title: faker.lorem.words({ min: 2, max: 8 }),\n    ...overrides,\n  }\n}\n","import {\n  DiscussionReplyBundle,\n  DiscussionThreadBundle,\n} from '@sage-bionetworks/synapse-types'\nimport {\n  mockUserProfileData,\n  mockUserProfileData2,\n} from '../user/mock_user_profile'\nimport { times } from 'lodash-es'\nimport {\n  generateDiscussionThreadBundle,\n  generateForum,\n} from '../faker/generateDiscussion'\nimport { mockProjects } from '../entity/mockProject'\n\nexport const MOCK_FORUM_ID = '984321189'\n\nexport const mockForums = mockProjects.map(project =>\n  generateForum({\n    projectId: project.id!,\n  }),\n)\nconst generatedDiscussionThreadBundles = mockForums.flatMap(forum => {\n  return times(10).map(i =>\n    generateDiscussionThreadBundle({\n      forumId: forum.id,\n      projectId: forum.projectId,\n    }),\n  )\n})\n\nexport const MOCK_SUBSCRIPTION_ID = '123'\n\nexport const mockDiscussionThreadBundle: DiscussionThreadBundle = {\n  id: '999',\n  forumId: MOCK_FORUM_ID,\n  projectId: '123',\n  title: 'mockTitle1',\n  createdOn: '2022-09-28',\n  createdBy: mockUserProfileData.ownerId,\n  modifiedOn: '2022-09-28',\n  etag: 'xxx',\n  messageKey: 'xxx',\n  numberOfViews: 2,\n  numberOfReplies: 3,\n  lastActivity: '2022-09-28',\n  activeAuthors: [mockUserProfileData.ownerId, mockUserProfileData2.ownerId],\n  isEdited: false,\n  isDeleted: false,\n  isPinned: false,\n}\n\nexport const mockDiscussionThreadBundle2: DiscussionThreadBundle = {\n  ...mockDiscussionThreadBundle,\n  id: '888',\n  projectId: '12',\n  title: 'mockTitle2',\n  createdBy: mockUserProfileData2.ownerId,\n  numberOfViews: 14,\n  numberOfReplies: 3,\n}\n\nexport const mockDiscussionReplyBundle: DiscussionReplyBundle = {\n  ...mockDiscussionThreadBundle,\n  id: '123',\n  createdBy: mockUserProfileData2.ownerId,\n  threadId: mockDiscussionThreadBundle.id,\n}\n\nexport const mockDiscussionThreadBundles = [\n  ...generatedDiscussionThreadBundles,\n  mockDiscussionThreadBundle,\n  mockDiscussionThreadBundle2,\n]\n","import { rest } from 'msw'\nimport { FORUM, THREAD } from '../../../utils/APIConstants'\nimport { Forum } from '@sage-bionetworks/synapse-types'\nimport { SynapseApiResponse } from '../handlers'\nimport {\n  mockDiscussionThreadBundles,\n  mockForums,\n} from '../../discussion/mock_discussion'\n\nexport function getDiscussionHandlers(backendOrigin: string) {\n  return [\n    rest.get(`${backendOrigin}${FORUM}/:id`, async (req, res, ctx) => {\n      let status = 404\n      let resp: SynapseApiResponse<Forum> = {\n        reason: `MSW could not find a mock forum object with ID ${req.params.id}`,\n      }\n\n      const match = mockForums.find(f => f.id === req.params.id)\n      if (match) {\n        status = 200\n        resp = match\n      }\n\n      return res(ctx.status(status), ctx.json(resp))\n    }),\n\n    rest.get(`${backendOrigin}${THREAD}/:id`, async (req, res, ctx) => {\n      let status = 404\n      let resp: SynapseApiResponse<Forum> = {\n        reason: `MSW could not find a mock discussion thread bundle object with ID ${req.params.id}`,\n      }\n      if (req.params.id === 'messageUrl') {\n        // This is a different endpoint\n        resp = {\n          reason: 'GET /thread/messageUrl is not yet implemented',\n        }\n      }\n\n      const match = mockDiscussionThreadBundles.find(\n        dtb => dtb.id === req.params.id,\n      )\n      if (match) {\n        status = 200\n        resp = match\n      }\n\n      return res(ctx.status(status), ctx.json(resp))\n    }),\n  ]\n}\n","import { SetRequired } from 'type-fest'\nimport { Subscription } from '@sage-bionetworks/synapse-types'\nimport { faker } from '@faker-js/faker'\nimport { MOCK_USER_ID } from '../user/mock_user_profile'\n\nexport function generateSubscription(\n  overrides: SetRequired<Partial<Subscription>, 'objectId' | 'objectType'>,\n): Subscription {\n  return {\n    subscriptionId: String(faker.number.int({ min: 1000, max: 9999 })),\n    subscriberId: String(MOCK_USER_ID),\n    createdOn: faker.date.anytime().toISOString(),\n    ...overrides,\n  }\n}\n","import {\n  Subscription,\n  SubscriptionObjectType,\n} from '@sage-bionetworks/synapse-types'\nimport {\n  mockDiscussionThreadBundles,\n  mockForums,\n} from './discussion/mock_discussion'\nimport { generateSubscription } from './faker/generateSubscription'\n\nconst forumSubscriptions: Subscription[] = mockForums.map(\n  (forum): Subscription =>\n    generateSubscription({\n      objectId: forum.id,\n      objectType: SubscriptionObjectType.FORUM,\n    }),\n)\n\nconst threadSubscriptions: Subscription[] = mockDiscussionThreadBundles.map(\n  (dtb): Subscription =>\n    generateSubscription({\n      objectType: SubscriptionObjectType.THREAD,\n      objectId: dtb.id,\n    }),\n)\n\nexport { forumSubscriptions, threadSubscriptions }\n","import { rest } from 'msw'\nimport {\n  Subscription,\n  SubscriptionObjectType,\n  SubscriptionPagedResults,\n  SubscriptionRequest,\n} from '@sage-bionetworks/synapse-types'\nimport { SynapseApiResponse } from '../handlers'\nimport { forumSubscriptions, threadSubscriptions } from '../../mockSubscription'\n\nexport function getSubscriptionHandlers(backendOrigin: string) {\n  return [\n    rest.get(\n      `${backendOrigin}/repo/v1/subscription/all`,\n      async (req, res, ctx) => {\n        const objectType = req.url.searchParams.get('objectType')\n        const sortDirection = req.url.searchParams.get('sortDirection')\n        const offset = req.url.searchParams.get('offset')\n        const limit = req.url.searchParams.get('limit')\n        let allResults: Subscription[] = []\n        if (objectType === SubscriptionObjectType.FORUM) {\n          allResults = forumSubscriptions\n        } else if (objectType === SubscriptionObjectType.THREAD) {\n          allResults = threadSubscriptions\n        }\n\n        const totalResults = allResults.length\n\n        if (sortDirection) {\n          allResults = allResults.sort((a, b) => {\n            const val =\n              new Date(b.createdOn).getTime() - new Date(a.createdOn).getTime()\n            return sortDirection === 'ASC' ? val : -1 * val\n          })\n        }\n\n        let offsetValue = 0\n        let limitValue = undefined\n        if (offset) {\n          offsetValue = parseInt(offset)\n        }\n        if (limit) {\n          limitValue = parseInt(limit)\n        }\n\n        allResults = allResults.slice(\n          offsetValue,\n          offsetValue + (limitValue ?? 0),\n        )\n\n        const resp: SynapseApiResponse<SubscriptionPagedResults> = {\n          results: allResults,\n          totalNumberOfResults: totalResults,\n        }\n\n        return res(ctx.status(200), ctx.json(resp))\n      },\n    ),\n    rest.post(\n      `${backendOrigin}/repo/v1/subscription/list`,\n      async (req, res, ctx) => {\n        const request: SubscriptionRequest = await req.json()\n        const objectType = request.objectType\n        let allResults: Subscription[] = []\n        if (objectType === SubscriptionObjectType.FORUM) {\n          allResults = forumSubscriptions\n        } else if (objectType === SubscriptionObjectType.THREAD) {\n          allResults = threadSubscriptions\n        }\n\n        allResults.filter(sub => request.idList.includes(sub.subscriptionId))\n\n        const totalResults = allResults.length\n\n        const resp: SynapseApiResponse<SubscriptionPagedResults> = {\n          results: allResults,\n          totalNumberOfResults: totalResults,\n        }\n\n        return res(ctx.status(200), ctx.json(resp))\n      },\n    ),\n  ]\n}\n","import { Evaluation } from '@sage-bionetworks/synapse-types'\n\nexport const MOCK_EVALUATION_ID = '9614712'\nexport const MOCK_EVALUATION_ETAG = 'a2b871cb-faa4-471a-8c23-b917c77fecb2'\nexport const MOCK_EVALUATION_NAME = 'My mock evaluation queue name'\nexport const MOCK_EVALUATION_DESCRIPTION = 'Description for mock eval queue'\nexport const MOCK_EVALUATION_OWNER_ID = '1131050'\nexport const MOCK_EVALUATION_CREATED_ON = '2021-03-02T22:16:14.552Z'\nexport const MOCK_EVALUATION_CONTENT_SOURCE = 'syn5585645'\nexport const MOCK_EVALUATION_SUBMISSION_INSTRUCTIONS =\n  'Mock submission instructions'\nexport const MOCK_EVALUATION_RECEIPT_MESSAGE = 'Mock thanks for submitting'\n\nexport const mockEvaluationQueue: Evaluation = {\n  id: MOCK_EVALUATION_ID,\n  etag: MOCK_EVALUATION_ETAG,\n  name: MOCK_EVALUATION_NAME,\n  description: MOCK_EVALUATION_DESCRIPTION,\n  ownerId: MOCK_EVALUATION_OWNER_ID,\n  createdOn: MOCK_EVALUATION_CREATED_ON,\n  contentSource: MOCK_EVALUATION_CONTENT_SOURCE,\n  submissionInstructionsMessage: MOCK_EVALUATION_SUBMISSION_INSTRUCTIONS,\n  submissionReceiptMessage: MOCK_EVALUATION_RECEIPT_MESSAGE,\n}\n\nexport const mockEvaluations: Evaluation[] = [mockEvaluationQueue]\n","import { rest } from 'msw'\nimport { EVALUATION, EVALUATION_BY_ID } from '../../../utils/APIConstants'\nimport { Evaluation, PaginatedResults } from '@sage-bionetworks/synapse-types'\nimport { SynapseApiResponse } from '../handlers'\nimport { mockEvaluations } from '../../entity/mockEvaluationQueue'\n\nexport function getEvaluationHandlers(backendOrigin: string) {\n  return [\n    /**\n     * Get by ID\n     */\n    rest.get(\n      `${backendOrigin}${EVALUATION_BY_ID(':evaluationId')}`,\n      async (req, res, ctx) => {\n        let status = 404\n        let response: SynapseApiResponse<Evaluation> = {\n          reason: `Mock Service worker could not find a mock evaluation queue with ID ${req.params.evaluationId}`,\n        }\n\n        const match = mockEvaluations.find(\n          evaluation => evaluation.id === req.params.entityId,\n        )\n        if (match) {\n          response = match\n          status = 200\n        }\n        return res(ctx.status(status), ctx.json(response))\n      },\n    ),\n\n    /**\n     * Get paginated list\n     */\n    rest.get(`${backendOrigin}${EVALUATION}`, async (req, res, ctx) => {\n      let status = 200\n      let response: SynapseApiResponse<PaginatedResults<Evaluation>> = {\n        results: mockEvaluations,\n        totalNumberOfResults: mockEvaluations.length,\n      }\n\n      // TODO: Filtering\n\n      return res(ctx.status(status), ctx.json(response))\n    }),\n  ]\n}\n","import { rest } from 'msw'\nimport { getEntityHandlers } from './handlers/entityHandlers'\nimport {\n  getCurrentUserCertifiedValidatedHandler,\n  getUserProfileHandlers,\n} from './handlers/userProfileHandlers'\nimport {\n  BackendDestinationEnum,\n  getEndpoint,\n} from '../../utils/functions/getEndpoint'\nimport {\n  getAccessRequirementEntityBindingHandlers,\n  getAccessRequirementHandlers,\n  getAccessRequirementStatusHandlers,\n} from './handlers/accessRequirementHandlers'\nimport { getWikiHandlers } from './handlers/wikiHandlers'\nimport { getDataAccessRequestHandlers } from './handlers/dataAccessRequestHandlers'\nimport { getResearchProjectHandlers } from './handlers/researchProjectHandlers'\nimport { getFileHandlers } from './handlers/fileHandlers'\nimport { SynapseError } from '../../utils/SynapseError'\nimport { getDiscussionHandlers } from './handlers/discussionHandlers'\nimport { getSubscriptionHandlers } from './handlers/subscriptionHandlers'\nimport {\n  getAnnotationColumnHandlers,\n  getCreateColumnModelBatchHandler,\n  getDefaultColumnHandlers,\n} from './handlers/tableQueryHandlers'\nimport { getEvaluationHandlers } from './handlers/evaluationHandlers'\nimport { MOCK_ANNOTATION_COLUMNS } from '../mockAnnotationColumns'\n\n// Simple utility type that just indicates that the response body could be an error like the Synapse backend may send.\nexport type SynapseApiResponse<T> = T | SynapseError\n\nconst getHandlers = (backendOrigin: string) => [\n  rest.options('*', async (req, res, ctx) => {\n    return res(ctx.status(200))\n  }),\n  rest.get(\n    `${backendOrigin}/auth/v1/authenticatedOn`,\n    async (req, res, ctx) => {\n      return res(\n        ctx.status(200),\n        ctx.json({ authenticatedOn: new Date().toISOString() }),\n      )\n    },\n  ),\n  ...getEntityHandlers(backendOrigin),\n  ...getUserProfileHandlers(backendOrigin),\n  getCurrentUserCertifiedValidatedHandler(backendOrigin, true, true),\n  ...getWikiHandlers(backendOrigin),\n  ...getAccessRequirementHandlers(backendOrigin),\n  ...getAccessRequirementEntityBindingHandlers(backendOrigin),\n  ...getAccessRequirementStatusHandlers(backendOrigin),\n  ...getDataAccessRequestHandlers(backendOrigin),\n  ...getResearchProjectHandlers(backendOrigin),\n  ...getFileHandlers(backendOrigin),\n  ...getDiscussionHandlers(backendOrigin),\n  ...getSubscriptionHandlers(backendOrigin),\n  ...getEvaluationHandlers(backendOrigin),\n  getCreateColumnModelBatchHandler(backendOrigin),\n  ...getAnnotationColumnHandlers(MOCK_ANNOTATION_COLUMNS, backendOrigin),\n  ...getDefaultColumnHandlers(backendOrigin),\n]\n\nconst handlers = getHandlers(getEndpoint(BackendDestinationEnum.REPO_ENDPOINT))\n\nexport { handlers, getHandlers }\n"],"names":["generateForum","overrides","faker","generateDiscussionThreadBundle","mockUserData","u","pickRandomMockUser","MOCK_FORUM_ID","mockForums","mockProjects","project","generatedDiscussionThreadBundles","forum","times","mockDiscussionThreadBundle","mockUserProfileData","mockUserProfileData2","mockDiscussionThreadBundle2","mockDiscussionThreadBundles","getDiscussionHandlers","backendOrigin","rest","FORUM","req","res","ctx","status","resp","match","f","THREAD","dtb","generateSubscription","MOCK_USER_ID","forumSubscriptions","SubscriptionObjectType","threadSubscriptions","getSubscriptionHandlers","objectType","sortDirection","offset","limit","allResults","totalResults","a","b","val","offsetValue","limitValue","request","sub","MOCK_EVALUATION_ID","MOCK_EVALUATION_ETAG","MOCK_EVALUATION_NAME","MOCK_EVALUATION_DESCRIPTION","MOCK_EVALUATION_OWNER_ID","MOCK_EVALUATION_CREATED_ON","MOCK_EVALUATION_CONTENT_SOURCE","MOCK_EVALUATION_SUBMISSION_INSTRUCTIONS","MOCK_EVALUATION_RECEIPT_MESSAGE","mockEvaluationQueue","mockEvaluations","getEvaluationHandlers","EVALUATION_BY_ID","response","evaluation","EVALUATION","getHandlers","getEntityHandlers","getUserProfileHandlers","getCurrentUserCertifiedValidatedHandler","getWikiHandlers","getAccessRequirementHandlers","getAccessRequirementEntityBindingHandlers","getAccessRequirementStatusHandlers","getDataAccessRequestHandlers","getResearchProjectHandlers","getFileHandlers","getCreateColumnModelBatchHandler","getAnnotationColumnHandlers","MOCK_ANNOTATION_COLUMNS","getDefaultColumnHandlers","getEndpoint","BackendDestinationEnum"],"mappings":"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"}